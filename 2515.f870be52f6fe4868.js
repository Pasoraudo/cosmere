(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2515],{2515:(pt,tt,N)=>{"use strict";N.r(tt),N.d(tt,{WikiModule:()=>Ul});var B=N(4521),$=N(5861),I=N(9268),o=N(5e3);let k=(()=>{class t{constructor(){this.subscriptionsData=[]}ngOnDestroy(){this.allSubscriptions().forEach(e=>{e.unsubscribe()})}subscribe(e,r,i,u){const c=(0,I.V)();return this.subscriptionsData.push({id:c,subscription:e.subscribe(r,i,u)}),c}unsubscribe(e){const r=this.subscriptionById(e);!r||r.closed||r.unsubscribe()}unsubscribeAll(){this.subscriptionsData.forEach(e=>e.subscription.unsubscribe())}allSubscriptions(){return this.subscriptionsData.map(e=>e.subscription)}subscriptionById(e){const r=this.subscriptionsData.find(i=>i.id===e);return null==r?void 0:r.subscription}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,r){},encapsulation:2}),t})();const g=(t,n)=>{if(0===t.length)return[];if(0===n.length)return[];const e=x(t,n);return t.map(r=>({id:r.id,label:r.name,group:r.planet,score:e[r.id]}))},d=t=>{const n={};for(const r of t){const i=`${r.characterId1}-${r.characterId2}`;n[i]?n[i]+=1:n[i]=1}let e=[];for(const r in n){const[i,u]=r.split("-");e.push({source:i,target:u,weight:n[r],group:"undefined"})}return e},v=t=>{const n=new Set;return t.forEach(e=>{n.add(e.characterId1),n.add(e.characterId2)}),Array.from(n)},x=(t,n)=>{const i={};n.forEach(M=>{var P,O,R,rt;null!==(P=i[R=M.characterId1])&&void 0!==P||(i[R]=0),null!==(O=i[rt=M.characterId2])&&void 0!==O||(i[rt]=0),i[M.characterId1]+=1,i[M.characterId2]+=1});const u=Object.values(i);let c=Math.min(...u);const w=Math.max(...u)-c,m={};for(const[M,P]of Object.entries(i))m[M]=(P-c)/w*55+5;return m};var _=N(7489),F=N.n(_),T=N(5595),U=N(7749),W=N.n(U),D=N(4004),L=N(520),G=N(3905),C=N(2843),V=N(262),q=N(2340);let et=(()=>{class t{generate(e){let r=e;return r.startsWith("/")||(r="/"+r),"assets/db"+r+".json"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),J=(()=>{class t{constructor(e,r){this.http=e,this.router=r,this.requestCache={},setInterval(()=>{this.clearCache()},300)}get(e){var r=this;const i=this.router.generate(e);return new Promise(function(){var u=(0,$.Z)(function*(c,p){try{c(yield(0,G.z)(r.http.get(i).pipe((0,V.K)(m=>(0,C._)(m)))))}catch(w){p(w)}});return function(c,p){return u.apply(this,arguments)}}())}headers(){return{headers:(new L.WM).set("app-version",q.N.appVersion).set("Access-Control-Allow-Origin","*")}}clearCache(){const e=(0,_.keys)(this.requestCache),r=(new Date).getTime();for(const i of e){const u=this.requestCache[i];if(!u)continue;const c=r-u.timestamp;!u.response&&c<2e4||u.response&&c<200||(this.requestCache[i]=null,delete this.requestCache[i])}}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(L.eN),o.LFG(et))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var K=N(9175);const it=(t,n)=>n.find(e=>e.id===t),ft=(t,n)=>{t||(t=[]);let e=[...t];return n.forEach(r=>{e=gt(e,r)}),e},gt=(t,n)=>{const e=n;let r=[...t];return(0,_.some)(r,i=>i.id===e.id)?r=r.map(i=>i.id===e.id?n:i):r.push(n),r};let Dt=(()=>{class t extends K.m1{constructor(){super({characters:[]}),this.characters$=this.select(e=>e.characters)}saveAllCharacters(e){(0,_.isEqual)(this.get().characters,e)||this.patchState(r=>({characters:ft(r.characters,e)}))}syncState(){return this.get()}syncCharacter(e){return it(e,this.get().characters)}reset(){this.patchState({characters:[]})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Lt=(()=>{class t{constructor(e,r){this.api=e,this.store=r}fetchAllCharacter(){var e=this;return(0,$.Z)(function*(){const r=yield e.api.get("characters");e.store.saveAllCharacters(r)})()}fetchAllCosmereCharacter(){var e=this;return(0,$.Z)(function*(){const i=(yield e.api.get("characters")).filter(u=>"Cosmere"===u.universe);e.store.saveAllCharacters(i)})()}syncAllCharacters(){return this.store.syncState().characters}allCharacters(){return this.store.characters$}cosmereCharacters(){return this.store.characters$.pipe((0,D.U)(e=>e.filter(r=>"Cosmere"===r.universe)))}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(J),o.LFG(Dt))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Jt=(()=>{class t extends K.m1{constructor(){super({relationships:[]}),this.relationships$=this.select(e=>e.relationships)}saveAllRelationship(e){(0,_.isEqual)(this.get().relationships,e)||this.patchState(r=>({relationships:ft(r.relationships,e)}))}syncState(){return this.get()}reset(){this.patchState({relationships:[]})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Rt=(()=>{class t{constructor(e,r){this.api=e,this.store=r}fetchAllRelationship(){var e=this;return(0,$.Z)(function*(){const r=yield e.api.get("relationships");e.store.saveAllRelationship(r)})()}fetchAllRelationshipByBookId(e){var r=this;return(0,$.Z)(function*(){const i=yield r.api.get("relationships-"+e);r.store.saveAllRelationship(i)})()}fetchAllCosmereRelationship(){var e=this;return(0,$.Z)(function*(){const r=[];for(const c of["warbreaker","mistborn1","mistborn2","mistborn3","mistborn4","mistborn5","mistborn6","stormlight1","stormlight2","stormlight3","stormlight4"])r.push(e.api.get("relationships-"+c).then(p=>p).catch(p=>{}));const i=yield Promise.all(r);let u=[];i.forEach(c=>u=ft(u,c)),e.store.saveAllRelationship(u)})()}syncAllRelationship(){return this.store.syncState().relationships}allRelationship(){return this.store.relationships$}cosmereRelationships(){return this.store.relationships$.pipe((0,D.U)(e=>e.filter(r=>["warbreaker","mistborn1","mistborn2","mistborn3","mistborn4","mistborn5","mistborn6","stormlight1","stormlight2","stormlight3","stormlight4"].includes(r.bookId))))}relationshipsByBook(e){return this.store.relationships$.pipe((0,D.U)(r=>r.filter(i=>(null==i?void 0:i.bookId)===e)))}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(J),o.LFG(Jt))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Xt=N(5598),Ht=N(9976);function jt(t,n){let e;if(void 0===n)for(const r of t)null!=r&&(e<r||void 0===e&&r>=r)&&(e=r);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(e<i||void 0===e&&i>=i)&&(e=i)}return e}function dt(t,n){let e;if(void 0===n)for(const r of t)null!=r&&(e>r||void 0===e&&r>=r)&&(e=r);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(e>i||void 0===e&&i>=i)&&(e=i)}return e}function lt(t,n){return null==t||null==n?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function oe(t,n){return(null==t||!(t>=t))-(null==n||!(n>=n))||(t<n?-1:t>n?1:0)}function se(t,n,e=0,r=1/0,i){if(n=Math.floor(n),e=Math.floor(Math.max(0,e)),r=Math.floor(Math.min(t.length-1,r)),!(e<=n&&n<=r))return t;for(i=void 0===i?oe:function re(t=lt){if(t===lt)return oe;if("function"!=typeof t)throw new TypeError("compare is not a function");return(n,e)=>{const r=t(n,e);return r||0===r?r:(0===t(e,e))-(0===t(n,n))}}(i);r>e;){if(r-e>600){const w=r-e+1,m=n-e+1,M=Math.log(w),P=.5*Math.exp(2*M/3),O=.5*Math.sqrt(M*P*(w-P)/w)*(m-w/2<0?-1:1);se(t,n,Math.max(e,Math.floor(n-m*P/w+O)),Math.min(r,Math.floor(n+(w-m)*P/w+O)),i)}const u=t[n];let c=e,p=r;for(Qt(t,e,n),i(t[r],u)>0&&Qt(t,e,r);c<p;){for(Qt(t,c,p),++c,--p;i(t[c],u)<0;)++c;for(;i(t[p],u)>0;)--p}0===i(t[e],u)?Qt(t,e,p):(++p,Qt(t,p,r)),p<=n&&(e=p+1),n<=p&&(r=p-1)}return t}function Qt(t,n,e){const r=t[n];t[n]=t[e],t[e]=r}function ae(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),u=new Array(i);++r<i;)u[r]=t+r*e;return u}class $n extends Map{constructor(n,e=Xn){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=n)for(const[r,i]of n)this.set(r,i)}get(n){return super.get(An(this,n))}has(n){return super.has(An(this,n))}set(n,e){return super.set(rn(this,n),e)}delete(n){return super.delete(Yn(this,n))}}class Br extends Set{constructor(n,e=Xn){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=n)for(const r of n)this.add(r)}has(n){return super.has(An(this,n))}add(n){return super.add(rn(this,n))}delete(n){return super.delete(Yn(this,n))}}function An({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):e}function rn({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):(t.set(r,e),e)}function Yn({_intern:t,_key:n},e){const r=n(e);return t.has(r)&&(e=t.get(r),t.delete(r)),e}function Xn(t){return null!==t&&"object"==typeof t?t.valueOf():t}function En(t){return t}function $r(t){return"translate("+t+",0)"}function kn(t){return"translate(0,"+t+")"}function Yr(t){return n=>+t(n)}function Xr(t,n){return n=Math.max(0,t.bandwidth()-2*n)/2,t.round()&&(n=Math.round(n)),e=>+t(e)+n}function Vr(){return!this.__axis}function ze(t,n){var e=[],r=null,i=null,u=6,c=6,p=3,w="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,m=1===t||4===t?-1:1,M=4===t||2===t?"x":"y",P=1===t||3===t?$r:kn;function O(R){var rt=null==r?n.ticks?n.ticks.apply(n,e):n.domain():r,Q=null==i?n.tickFormat?n.tickFormat.apply(n,e):En:i,Z=Math.max(u,0)+p,j=n.range(),nt=+j[0]+w,at=+j[j.length-1]+w,X=(n.bandwidth?Xr:Yr)(n.copy(),w),ht=R.selection?R.selection():R,xt=ht.selectAll(".domain").data([null]),kt=ht.selectAll(".tick").data(rt,n).order(),_t=kt.exit(),Ot=kt.enter().append("g").attr("class","tick"),Ct=kt.select("line"),wt=kt.select("text");xt=xt.merge(xt.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),kt=kt.merge(Ot),Ct=Ct.merge(Ot.append("line").attr("stroke","currentColor").attr(M+"2",m*u)),wt=wt.merge(Ot.append("text").attr("fill","currentColor").attr(M,m*Z).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),R!==ht&&(xt=xt.transition(R),kt=kt.transition(R),Ct=Ct.transition(R),wt=wt.transition(R),_t=_t.transition(R).attr("opacity",1e-6).attr("transform",function(Zt){return isFinite(Zt=X(Zt))?P(Zt+w):this.getAttribute("transform")}),Ot.attr("opacity",1e-6).attr("transform",function(Zt){var It=this.parentNode.__axis;return P((It&&isFinite(It=It(Zt))?It:X(Zt))+w)})),_t.remove(),xt.attr("d",4===t||2===t?c?"M"+m*c+","+nt+"H"+w+"V"+at+"H"+m*c:"M"+w+","+nt+"V"+at:c?"M"+nt+","+m*c+"V"+w+"H"+at+"V"+m*c:"M"+nt+","+w+"H"+at),kt.attr("opacity",1).attr("transform",function(Zt){return P(X(Zt)+w)}),Ct.attr(M+"2",m*u),wt.attr(M,m*Z).text(Q),ht.filter(Vr).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),ht.each(function(){this.__axis=X})}return O.scale=function(R){return arguments.length?(n=R,O):n},O.ticks=function(){return e=Array.from(arguments),O},O.tickArguments=function(R){return arguments.length?(e=null==R?[]:Array.from(R),O):e.slice()},O.tickValues=function(R){return arguments.length?(r=null==R?null:Array.from(R),O):r&&r.slice()},O.tickFormat=function(R){return arguments.length?(i=R,O):i},O.tickSize=function(R){return arguments.length?(u=c=+R,O):u},O.tickSizeInner=function(R){return arguments.length?(u=+R,O):u},O.tickSizeOuter=function(R){return arguments.length?(c=+R,O):c},O.tickPadding=function(R){return arguments.length?(p=+R,O):p},O.offset=function(R){return arguments.length?(w=+R,O):w},O}function Re(t){return ze(3,t)}function Sn(t){return ze(4,t)}function Hr(){}function Ze(t){return null==t?Hr:function(){return this.querySelector(t)}}function Kr(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function Hn(){return[]}function qn(t){return null==t?Hn:function(){return this.querySelectorAll(t)}}function Jn(t){return function(){return this.matches(t)}}function Nn(t){return function(n){return n.matches(t)}}var Qn=Array.prototype.find;function je(){return this.firstElementChild}var tr=Array.prototype.filter;function er(){return Array.from(this.children)}function Ge(t){return new Array(t.length)}function y(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function l(t){return function(){return t}}function s(t,n,e,r,i,u){for(var p,c=0,w=n.length,m=u.length;c<m;++c)(p=n[c])?(p.__data__=u[c],r[c]=p):e[c]=new y(t,u[c]);for(;c<w;++c)(p=n[c])&&(i[c]=p)}function a(t,n,e,r,i,u,c){var p,w,R,m=new Map,M=n.length,P=u.length,O=new Array(M);for(p=0;p<M;++p)(w=n[p])&&(O[p]=R=c.call(w,w.__data__,p,n)+"",m.has(R)?i[p]=w:m.set(R,w));for(p=0;p<P;++p)R=c.call(t,u[p],p,u)+"",(w=m.get(R))?(r[p]=w,w.__data__=u[p],m.delete(R)):e[p]=new y(t,u[p]);for(p=0;p<M;++p)(w=n[p])&&m.get(O[p])===w&&(i[p]=w)}function f(t){return t.__data__}function z(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function mt(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}y.prototype={constructor:y,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var ue="http://www.w3.org/1999/xhtml";const ce={svg:"http://www.w3.org/2000/svg",xhtml:ue,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function he(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),ce.hasOwnProperty(n)?{space:ce[n],local:t}:t}function sn(t){return function(){this.removeAttribute(t)}}function an(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Pi(t,n){return function(){this.setAttribute(t,n)}}function Ui(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function or(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function bs(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function Ri(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function As(t){return function(){this.style.removeProperty(t)}}function Es(t,n,e){return function(){this.style.setProperty(t,n,e)}}function _s(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function un(t,n){return t.style.getPropertyValue(n)||Ri(t).getComputedStyle(t,null).getPropertyValue(n)}function Cs(t){return function(){delete this[t]}}function Ss(t,n){return function(){this[t]=n}}function Ns(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function Zi(t){return t.trim().split(/^|\s+/)}function ti(t){return t.classList||new ji(t)}function ji(t){this._node=t,this._names=Zi(t.getAttribute("class")||"")}function Wi(t,n){for(var e=ti(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function Fi(t,n){for(var e=ti(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function Ds(t){return function(){Wi(this,t)}}function zs(t){return function(){Fi(this,t)}}function Gs(t,n){return function(){(n.apply(this,arguments)?Wi:Fi)(this,t)}}function Ls(){this.textContent=""}function Ts(t){return function(){this.textContent=t}}function Os(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}function Us(){this.innerHTML=""}function Rs(t){return function(){this.innerHTML=t}}function Zs(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}function Ws(){this.nextSibling&&this.parentNode.appendChild(this)}function Bs(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ys(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===ue&&n.documentElement.namespaceURI===ue?n.createElement(t):n.createElementNS(e,t)}}function Xs(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ei(t){var n=he(t);return(n.local?Xs:Ys)(n)}function Hs(){return null}function Ks(){var t=this.parentNode;t&&t.removeChild(this)}function Qs(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function ta(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function ia(t){return t.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");return r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),{type:n,name:e}})}function oa(t){return function(){var n=this.__on;if(n){for(var u,e=0,r=-1,i=n.length;e<i;++e)u=n[e],t.type&&u.type!==t.type||u.name!==t.name?n[++r]=u:this.removeEventListener(u.type,u.listener,u.options);++r?n.length=r:delete this.__on}}}function sa(t,n,e){return function(){var i,r=this.__on,u=function ra(t){return function(n){t.call(this,n,this.__data__)}}(n);if(r)for(var c=0,p=r.length;c<p;++c)if((i=r[c]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=u,i.options=e),void(i.value=n);this.addEventListener(t.type,u,e),i={type:t.type,name:t.name,value:n,listener:u,options:e},r?r.push(i):this.__on=[i]}}function Bi(t,n,e){var r=Ri(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function ua(t,n){return function(){return Bi(this,t,n)}}function ca(t,n){return function(){return Bi(this,t,n.apply(this,arguments))}}ji.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var $i=[null];function xe(t,n){this._groups=t,this._parents=n}function Yi(){return new xe([[document.documentElement]],$i)}xe.prototype=Yi.prototype={constructor:xe,select:function qr(t){"function"!=typeof t&&(t=Ze(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var w,m,u=n[i],c=u.length,p=r[i]=new Array(c),M=0;M<c;++M)(w=u[M])&&(m=t.call(w,w.__data__,M,u))&&("__data__"in w&&(m.__data__=w.__data__),p[M]=m);return new xe(r,this._parents)},selectAll:function Kn(t){t="function"==typeof t?function Jr(t){return function(){return Kr(t.apply(this,arguments))}}(t):qn(t);for(var n=this._groups,e=n.length,r=[],i=[],u=0;u<e;++u)for(var w,c=n[u],p=c.length,m=0;m<p;++m)(w=c[m])&&(r.push(t.call(w,w.__data__,m,c)),i.push(w));return new xe(r,i)},selectChild:function $t(t){return this.select(null==t?je:function Qr(t){return function(){return Qn.call(this.children,t)}}("function"==typeof t?t:Nn(t)))},selectChildren:function rr(t){return this.selectAll(null==t?er:function nr(t){return function(){return tr.call(this.children,t)}}("function"==typeof t?t:Nn(t)))},filter:function ir(t){"function"!=typeof t&&(t=Jn(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var w,u=n[i],c=u.length,p=r[i]=[],m=0;m<c;++m)(w=u[m])&&t.call(w,w.__data__,m,u)&&p.push(w);return new xe(r,this._parents)},data:function b(t,n){if(!arguments.length)return Array.from(this,f);var e=n?a:s,r=this._parents,i=this._groups;"function"!=typeof t&&(t=l(t));for(var u=i.length,c=new Array(u),p=new Array(u),w=new Array(u),m=0;m<u;++m){var M=r[m],P=i[m],O=P.length,R=z(t.call(M,M&&M.__data__,m,r)),rt=R.length,Q=p[m]=new Array(rt),Z=c[m]=new Array(rt),j=w[m]=new Array(O);e(M,P,Q,Z,j,R,n);for(var X,ht,nt=0,at=0;nt<rt;++nt)if(X=Q[nt]){for(nt>=at&&(at=nt+1);!(ht=Z[at])&&++at<rt;);X._next=ht||null}}return(c=new xe(c,r))._enter=p,c._exit=w,c},enter:function h(){return new xe(this._enter||this._groups.map(Ge),this._parents)},exit:function Y(){return new xe(this._exit||this._groups.map(Ge),this._parents)},join:function ct(t,n,e){var r=this.enter(),i=this,u=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=n&&(i=n(i))&&(i=i.selection()),null==e?u.remove():e(u),r&&i?r.merge(i).order():i},merge:function ut(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,c=Math.min(i,r.length),p=new Array(i),w=0;w<c;++w)for(var R,m=e[w],M=r[w],P=m.length,O=p[w]=new Array(P),rt=0;rt<P;++rt)(R=m[rt]||M[rt])&&(O[rt]=R);for(;w<i;++w)p[w]=e[w];return new xe(p,this._parents)},selection:function fa(){return this},order:function ot(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var c,r=t[n],i=r.length-1,u=r[i];--i>=0;)(c=r[i])&&(u&&4^c.compareDocumentPosition(u)&&u.parentNode.insertBefore(c,u),u=c);return this},sort:function yt(t){function n(P,O){return P&&O?t(P.__data__,O.__data__):!P-!O}t||(t=mt);for(var e=this._groups,r=e.length,i=new Array(r),u=0;u<r;++u){for(var m,c=e[u],p=c.length,w=i[u]=new Array(p),M=0;M<p;++M)(m=c[M])&&(w[M]=m);w.sort(n)}return new xe(i,this._parents).order()},call:function Gt(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function Ft(){return Array.from(this)},node:function Yt(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,u=r.length;i<u;++i){var c=r[i];if(c)return c}return null},size:function ee(){let t=0;for(const n of this)++t;return t},empty:function te(){return!this.node()},each:function ge(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var p,i=n[e],u=0,c=i.length;u<c;++u)(p=i[u])&&t.call(p,p.__data__,u,i);return this},attr:function xs(t,n){var e=he(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?an:sn:"function"==typeof n?e.local?bs:or:e.local?Ui:Pi)(e,n))},style:function ks(t,n,e){return arguments.length>1?this.each((null==n?As:"function"==typeof n?_s:Es)(t,n,null==e?"":e)):un(this.node(),t)},property:function Ms(t,n){return arguments.length>1?this.each((null==n?Cs:"function"==typeof n?Ns:Ss)(t,n)):this.node()[t]},classed:function Is(t,n){var e=Zi(t+"");if(arguments.length<2){for(var r=ti(this.node()),i=-1,u=e.length;++i<u;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?Gs:n?Ds:zs)(e,n))},text:function Ps(t){return arguments.length?this.each(null==t?Ls:("function"==typeof t?Os:Ts)(t)):this.node().textContent},html:function js(t){return arguments.length?this.each(null==t?Us:("function"==typeof t?Zs:Rs)(t)):this.node().innerHTML},raise:function Fs(){return this.each(Ws)},lower:function $s(){return this.each(Bs)},append:function Vs(t){var n="function"==typeof t?t:ei(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function qs(t,n){var e="function"==typeof t?t:ei(t),r=null==n?Hs:"function"==typeof n?n:Ze(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function Js(){return this.each(Ks)},clone:function ea(t){return this.select(t?ta:Qs)},datum:function na(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function aa(t,n,e){var i,c,r=ia(t+""),u=r.length;if(!(arguments.length<2)){for(p=n?sa:oa,i=0;i<u;++i)this.each(p(r[i],n,e));return this}var p=this.node().__on;if(p)for(var M,w=0,m=p.length;w<m;++w)for(i=0,M=p[w];i<u;++i)if((c=r[i]).type===M.type&&c.name===M.name)return M.value},dispatch:function ha(t,n){return this.each(("function"==typeof n?ca:ua)(t,n))},[Symbol.iterator]:function*la(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var c,r=t[n],i=0,u=r.length;i<u;++i)(c=r[i])&&(yield c)}};const Mn=Yi;var da={value:()=>{}};function Xi(){for(var r,t=0,n=arguments.length,e={};t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new sr(e)}function sr(t){this._=t}function pa(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}function ga(t,n){for(var i,e=0,r=t.length;e<r;++e)if((i=t[e]).name===n)return i.value}function Vi(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=da,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}sr.prototype=Xi.prototype={constructor:sr,on:function(t,n){var i,e=this._,r=pa(t+"",e),u=-1,c=r.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++u<c;)if(i=(t=r[u]).type)e[i]=Vi(e[i],t.name,n);else if(null==n)for(i in e)e[i]=Vi(e[i],t.name,null);return this}for(;++u<c;)if((i=(t=r[u]).type)&&(i=ga(e[i],t.name)))return i},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new sr(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var i,u,e=new Array(i),r=0;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=0,i=(u=this._[t]).length;r<i;++r)u[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,u=r.length;i<u;++i)r[i].value.apply(n,e)}};const ar=Xi;var ur,Gn,cn=0,Dn=0,zn=0,cr=0,He=0,hr=0,In="object"==typeof performance&&performance.now?performance:Date,qi="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ni(){return He||(qi(ya),He=In.now()+hr)}function ya(){He=0}function lr(){this._call=this._time=this._next=null}function ri(t,n,e){var r=new lr;return r.restart(t,n,e),r}function Ki(){He=(cr=In.now())+hr,cn=Dn=0;try{!function ma(){ni(),++cn;for(var n,t=ur;t;)(n=He-t._time)>=0&&t._call.call(void 0,n),t=t._next;--cn}()}finally{cn=0,function wa(){for(var t,e,n=ur,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:ur=e);Gn=t,ii(r)}(),He=0}}function va(){var t=In.now(),n=t-cr;n>1e3&&(hr-=n,cr=t)}function ii(t){cn||(Dn&&(Dn=clearTimeout(Dn)),t-He>24?(t<1/0&&(Dn=setTimeout(Ki,t-In.now()-hr)),zn&&(zn=clearInterval(zn))):(zn||(cr=In.now(),zn=setInterval(va,1e3)),cn=1,qi(Ki)))}function Ji(t,n,e){var r=new lr;return r.restart(i=>{r.stop(),t(i+n)},n=null==n?0:+n,e),r}lr.prototype=ri.prototype={constructor:lr,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?ni():+e)+(null==n?0:+n),!this._next&&Gn!==this&&(Gn?Gn._next=this:ur=this,Gn=this),this._call=t,this._time=e,ii()},stop:function(){this._call&&(this._call=null,this._time=1/0,ii())}};var ba=ar("start","end","cancel","interrupt"),xa=[];function pr(t,n,e,r,i,u){var c=t.__transition;if(c){if(e in c)return}else t.__transition={};!function Aa(t,n,e){var i,r=t.__transition;function c(m){var M,P,O,R;if(1!==e.state)return w();for(M in r)if((R=r[M]).name===e.name){if(3===R.state)return Ji(c);4===R.state?(R.state=6,R.timer.stop(),R.on.call("interrupt",t,t.__data__,R.index,R.group),delete r[M]):+M<n&&(R.state=6,R.timer.stop(),R.on.call("cancel",t,t.__data__,R.index,R.group),delete r[M])}if(Ji(function(){3===e.state&&(e.state=4,e.timer.restart(p,e.delay,e.time),p(m))}),e.state=2,e.on.call("start",t,t.__data__,e.index,e.group),2===e.state){for(e.state=3,i=new Array(O=e.tween.length),M=0,P=-1;M<O;++M)(R=e.tween[M].value.call(t,t.__data__,e.index,e.group))&&(i[++P]=R);i.length=P+1}}function p(m){for(var M=m<e.duration?e.ease.call(null,m/e.duration):(e.timer.restart(w),e.state=5,1),P=-1,O=i.length;++P<O;)i[P].call(t,M);5===e.state&&(e.on.call("end",t,t.__data__,e.index,e.group),w())}function w(){for(var m in e.state=6,e.timer.stop(),delete r[n],r)return;delete t.__transition}r[n]=e,e.timer=ri(function u(m){e.state=1,e.timer.restart(c,e.delay,e.time),e.delay<=m&&c(m-e.delay)},0,e.time)}(t,e,{name:n,index:r,group:i,on:ba,tween:xa,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:0})}function ai(t,n){var e=Ae(t,n);if(e.state>0)throw new Error("too late; already scheduled");return e}function Ce(t,n){var e=Ae(t,n);if(e.state>3)throw new Error("too late; already running");return e}function Ae(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function gr(t,n){var r,i,c,e=t.__transition,u=!0;if(e){for(c in n=null==n?null:n+"",e)(r=e[c]).name===n?(i=r.state>2&&r.state<5,r.state=6,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete e[c]):u=!1;u&&delete t.__transition}}function Ee(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}var yr,no=180/Math.PI,ui={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ro(t,n,e,r,i,u){var c,p,w;return(c=Math.sqrt(t*t+n*n))&&(t/=c,n/=c),(w=t*e+n*r)&&(e-=t*w,r-=n*w),(p=Math.sqrt(e*e+r*r))&&(e/=p,r/=p,w/=p),t*r<n*e&&(t=-t,n=-n,w=-w,c=-c),{translateX:i,translateY:u,rotate:Math.atan2(n,t)*no,skewX:Math.atan(w)*no,scaleX:c,scaleY:p}}function io(t,n,e,r){function i(m){return m.length?m.pop()+" ":""}return function(m,M){var P=[],O=[];return m=t(m),M=t(M),function u(m,M,P,O,R,rt){if(m!==P||M!==O){var Q=R.push("translate(",null,n,null,e);rt.push({i:Q-4,x:Ee(m,P)},{i:Q-2,x:Ee(M,O)})}else(P||O)&&R.push("translate("+P+n+O+e)}(m.translateX,m.translateY,M.translateX,M.translateY,P,O),function c(m,M,P,O){m!==M?(m-M>180?M+=360:M-m>180&&(m+=360),O.push({i:P.push(i(P)+"rotate(",null,r)-2,x:Ee(m,M)})):M&&P.push(i(P)+"rotate("+M+r)}(m.rotate,M.rotate,P,O),function p(m,M,P,O){m!==M?O.push({i:P.push(i(P)+"skewX(",null,r)-2,x:Ee(m,M)}):M&&P.push(i(P)+"skewX("+M+r)}(m.skewX,M.skewX,P,O),function w(m,M,P,O,R,rt){if(m!==P||M!==O){var Q=R.push(i(R)+"scale(",null,",",null,")");rt.push({i:Q-4,x:Ee(m,P)},{i:Q-2,x:Ee(M,O)})}else(1!==P||1!==O)&&R.push(i(R)+"scale("+P+","+O+")")}(m.scaleX,m.scaleY,M.scaleX,M.scaleY,P,O),m=M=null,function(R){for(var Z,rt=-1,Q=O.length;++rt<Q;)P[(Z=O[rt]).i]=Z.x(R);return P.join("")}}}var Ca=io(function _a(t){const n=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?ui:ro(n.a,n.b,n.c,n.d,n.e,n.f)},"px, ","px)","deg)"),Sa=io(function ka(t){return null!=t&&(yr||(yr=document.createElementNS("http://www.w3.org/2000/svg","g")),yr.setAttribute("transform",t),t=yr.transform.baseVal.consolidate())?ro((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):ui},", ",")",")");function Na(t,n){var e,r;return function(){var i=Ce(this,t),u=i.tween;if(u!==e)for(var c=0,p=(r=e=u).length;c<p;++c)if(r[c].name===n){(r=r.slice()).splice(c,1);break}i.tween=r}}function Ma(t,n,e){var r,i;if("function"!=typeof e)throw new Error;return function(){var u=Ce(this,t),c=u.tween;if(c!==r){i=(r=c).slice();for(var p={name:n,value:e},w=0,m=i.length;w<m;++w)if(i[w].name===n){i[w]=p;break}w===m&&i.push(p)}u.tween=i}}function ci(t,n,e){var r=t._id;return t.each(function(){var i=Ce(this,r);(i.value||(i.value={}))[n]=e.apply(this,arguments)}),function(i){return Ae(i,r).value[n]}}function mr(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function hi(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function hn(){}var ln=1/.7,fn="\\s*([+-]?\\d+)\\s*",Ln="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Se="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",za=/^#([0-9a-f]{3,8})$/,Ga=new RegExp(`^rgb\\(${fn},${fn},${fn}\\)$`),Ia=new RegExp(`^rgb\\(${Se},${Se},${Se}\\)$`),La=new RegExp(`^rgba\\(${fn},${fn},${fn},${Ln}\\)$`),Ta=new RegExp(`^rgba\\(${Se},${Se},${Se},${Ln}\\)$`),Oa=new RegExp(`^hsl\\(${Ln},${Se},${Se}\\)$`),Pa=new RegExp(`^hsla\\(${Ln},${Se},${Se},${Ln}\\)$`),oo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function so(){return this.rgb().formatHex()}function ao(){return this.rgb().formatRgb()}function Ke(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=za.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?uo(n):3===e?new le(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?vr(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?vr(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=Ga.exec(t))?new le(n[1],n[2],n[3],1):(n=Ia.exec(t))?new le(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=La.exec(t))?vr(n[1],n[2],n[3],n[4]):(n=Ta.exec(t))?vr(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=Oa.exec(t))?fo(n[1],n[2]/100,n[3]/100,1):(n=Pa.exec(t))?fo(n[1],n[2]/100,n[3]/100,n[4]):oo.hasOwnProperty(t)?uo(oo[t]):"transparent"===t?new le(NaN,NaN,NaN,0):null}function uo(t){return new le(t>>16&255,t>>8&255,255&t,1)}function vr(t,n,e,r){return r<=0&&(t=n=e=NaN),new le(t,n,e,r)}function co(t){return t instanceof hn||(t=Ke(t)),t?new le((t=t.rgb()).r,t.g,t.b,t.opacity):new le}function wr(t,n,e,r){return 1===arguments.length?co(t):new le(t,n,e,null==r?1:r)}function le(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function ho(){return`#${Qe(this.r)}${Qe(this.g)}${Qe(this.b)}`}function lo(){const t=br(this.opacity);return`${1===t?"rgb(":"rgba("}${Je(this.r)}, ${Je(this.g)}, ${Je(this.b)}${1===t?")":`, ${t})`}`}function br(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Je(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Qe(t){return((t=Je(t))<16?"0":"")+t.toString(16)}function fo(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new _e(t,n,e,r)}function po(t){if(t instanceof _e)return new _e(t.h,t.s,t.l,t.opacity);if(t instanceof hn||(t=Ke(t)),!t)return new _e;if(t instanceof _e)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),u=Math.max(n,e,r),c=NaN,p=u-i,w=(u+i)/2;return p?(c=n===u?(e-r)/p+6*(e<r):e===u?(r-n)/p+2:(n-e)/p+4,p/=w<.5?u+i:2-u-i,c*=60):p=w>0&&w<1?0:c,new _e(c,p,w,t.opacity)}function _e(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function go(t){return(t=(t||0)%360)<0?t+360:t}function xr(t){return Math.max(0,Math.min(1,t||0))}function li(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}function yo(t,n,e,r,i){var u=t*t,c=u*t;return((1-3*t+3*u-c)*n+(4-6*u+3*c)*e+(1+3*t+3*u-3*c)*r+c*i)/6}mr(hn,Ke,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:so,formatHex:so,formatHex8:function Ua(){return this.rgb().formatHex8()},formatHsl:function Ra(){return po(this).formatHsl()},formatRgb:ao,toString:ao}),mr(le,wr,hi(hn,{brighter(t){return t=null==t?ln:Math.pow(ln,t),new le(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new le(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new le(Je(this.r),Je(this.g),Je(this.b),br(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ho,formatHex:ho,formatHex8:function Za(){return`#${Qe(this.r)}${Qe(this.g)}${Qe(this.b)}${Qe(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:lo,toString:lo})),mr(_e,function ja(t,n,e,r){return 1===arguments.length?po(t):new _e(t,n,e,null==r?1:r)},hi(hn,{brighter(t){return t=null==t?ln:Math.pow(ln,t),new _e(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new _e(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new le(li(t>=240?t-240:t+120,i,r),li(t,i,r),li(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new _e(go(this.h),xr(this.s),xr(this.l),br(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=br(this.opacity);return`${1===t?"hsl(":"hsla("}${go(this.h)}, ${100*xr(this.s)}%, ${100*xr(this.l)}%${1===t?")":`, ${t})`}`}}));const Ar=t=>()=>t;function mo(t,n){return function(e){return t+e*n}}function dn(t,n){var e=n-t;return e?mo(t,e):Ar(isNaN(t)?n:t)}const Er=function t(n){var e=function Ya(t){return 1==(t=+t)?dn:function(n,e){return e-n?function Ba(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):Ar(isNaN(n)?e:n)}}(n);function r(i,u){var c=e((i=wr(i)).r,(u=wr(u)).r),p=e(i.g,u.g),w=e(i.b,u.b),m=dn(i.opacity,u.opacity);return function(M){return i.r=c(M),i.g=p(M),i.b=w(M),i.opacity=m(M),i+""}}return r.gamma=t,r}(1);function vo(t){return function(n){var c,p,e=n.length,r=new Array(e),i=new Array(e),u=new Array(e);for(c=0;c<e;++c)p=wr(n[c]),r[c]=p.r||0,i[c]=p.g||0,u[c]=p.b||0;return r=t(r),i=t(i),u=t(u),p.opacity=1,function(w){return p.r=r(w),p.g=i(w),p.b=u(w),p+""}}}vo(function Wa(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],u=t[r+1];return yo((e-r/n)*n,r>0?t[r-1]:2*i-u,i,u,r<n-1?t[r+2]:2*u-i)}}),vo(function Fa(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n);return yo((e-r/n)*n,t[(r+n-1)%n],t[r%n],t[(r+1)%n],t[(r+2)%n])}});var fi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,di=new RegExp(fi.source,"g");function wo(t,n){var r,i,u,e=fi.lastIndex=di.lastIndex=0,c=-1,p=[],w=[];for(t+="",n+="";(r=fi.exec(t))&&(i=di.exec(n));)(u=i.index)>e&&(u=n.slice(e,u),p[c]?p[c]+=u:p[++c]=u),(r=r[0])===(i=i[0])?p[c]?p[c]+=i:p[++c]=i:(p[++c]=null,w.push({i:c,x:Ee(r,i)})),e=di.lastIndex;return e<n.length&&(u=n.slice(e),p[c]?p[c]+=u:p[++c]=u),p.length<2?w[0]?function Va(t){return function(n){return t(n)+""}}(w[0].x):function Xa(t){return function(){return t}}(n):(n=w.length,function(m){for(var P,M=0;M<n;++M)p[(P=w[M]).i]=P.x(m);return p.join("")})}function bo(t,n){var e;return("number"==typeof n?Ee:n instanceof Ke?Er:(e=Ke(n))?(n=e,Er):wo)(t,n)}function Ha(t){return function(){this.removeAttribute(t)}}function qa(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ka(t,n,e){var r,u,i=e+"";return function(){var c=this.getAttribute(t);return c===i?null:c===r?u:u=n(r=c,e)}}function Ja(t,n,e){var r,u,i=e+"";return function(){var c=this.getAttributeNS(t.space,t.local);return c===i?null:c===r?u:u=n(r=c,e)}}function Qa(t,n,e){var r,i,u;return function(){var c,w,p=e(this);return null==p?void this.removeAttribute(t):(c=this.getAttribute(t))===(w=p+"")?null:c===r&&w===i?u:(i=w,u=n(r=c,p))}}function tu(t,n,e){var r,i,u;return function(){var c,w,p=e(this);return null==p?void this.removeAttributeNS(t.space,t.local):(c=this.getAttributeNS(t.space,t.local))===(w=p+"")?null:c===r&&w===i?u:(i=w,u=n(r=c,p))}}function nu(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function ru(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function iu(t,n){var e,r;function i(){var u=n.apply(this,arguments);return u!==r&&(e=(r=u)&&ru(t,u)),e}return i._value=n,i}function ou(t,n){var e,r;function i(){var u=n.apply(this,arguments);return u!==r&&(e=(r=u)&&nu(t,u)),e}return i._value=n,i}function au(t,n){return function(){ai(this,t).delay=+n.apply(this,arguments)}}function uu(t,n){return n=+n,function(){ai(this,t).delay=n}}function hu(t,n){return function(){Ce(this,t).duration=+n.apply(this,arguments)}}function lu(t,n){return n=+n,function(){Ce(this,t).duration=n}}function du(t,n){if("function"!=typeof n)throw new Error;return function(){Ce(this,t).ease=n}}function bu(t,n,e){var r,i,u=function wu(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||"start"===n})}(n)?ai:Ce;return function(){var c=u(this,t),p=c.on;p!==r&&(i=(r=p).copy()).on(n,e),c.on=i}}var Cu=Mn.prototype.constructor;function xo(t){return function(){this.style.removeProperty(t)}}function Iu(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function Lu(t,n,e){var r,i;function u(){var c=n.apply(this,arguments);return c!==i&&(r=(i=c)&&Iu(t,c,e)),r}return u._value=n,u}function Ru(t){return function(n){this.textContent=t.call(this,n)}}function Zu(t){var n,e;function r(){var i=t.apply(this,arguments);return i!==e&&(n=(e=i)&&Ru(i)),n}return r._value=t,r}var Bu=0;function Ie(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function Ao(){return++Bu}var Le=Mn.prototype;Ie.prototype=function $u(t){return Mn().transition(t)}.prototype={constructor:Ie,select:function _u(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=Ze(t));for(var r=this._groups,i=r.length,u=new Array(i),c=0;c<i;++c)for(var M,P,p=r[c],w=p.length,m=u[c]=new Array(w),O=0;O<w;++O)(M=p[O])&&(P=t.call(M,M.__data__,O,p))&&("__data__"in M&&(P.__data__=M.__data__),m[O]=P,pr(m[O],n,e,O,m,Ae(M,e)));return new Ie(u,this._parents,n,e)},selectAll:function ku(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=qn(t));for(var r=this._groups,i=r.length,u=[],c=[],p=0;p<i;++p)for(var M,w=r[p],m=w.length,P=0;P<m;++P)if(M=w[P]){for(var R,O=t.call(M,M.__data__,P,w),rt=Ae(M,e),Q=0,Z=O.length;Q<Z;++Q)(R=O[Q])&&pr(R,n,e,Q,O,rt);u.push(O),c.push(M)}return new Ie(u,c,n,e)},selectChild:Le.selectChild,selectChildren:Le.selectChildren,filter:function mu(t){"function"!=typeof t&&(t=Jn(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var w,u=n[i],c=u.length,p=r[i]=[],m=0;m<c;++m)(w=u[m])&&t.call(w,w.__data__,m,u)&&p.push(w);return new Ie(r,this._parents,this._name,this._id)},merge:function vu(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,u=Math.min(r,e.length),c=new Array(r),p=0;p<u;++p)for(var O,w=n[p],m=e[p],M=w.length,P=c[p]=new Array(M),R=0;R<M;++R)(O=w[R]||m[R])&&(P[R]=O);for(;p<r;++p)c[p]=n[p];return new Ie(c,this._parents,this._name,this._id)},selection:function Su(){return new Cu(this._groups,this._parents)},transition:function Wu(){for(var t=this._name,n=this._id,e=Ao(),r=this._groups,i=r.length,u=0;u<i;++u)for(var w,c=r[u],p=c.length,m=0;m<p;++m)if(w=c[m]){var M=Ae(w,n);pr(w,t,e,m,c,{time:M.time+M.delay+M.duration,delay:0,duration:M.duration,ease:M.ease})}return new Ie(r,this._parents,t,e)},call:Le.call,nodes:Le.nodes,node:Le.node,size:Le.size,empty:Le.empty,each:Le.each,on:function xu(t,n){var e=this._id;return arguments.length<2?Ae(this.node(),e).on.on(t):this.each(bu(e,t,n))},attr:function eu(t,n){var e=he(t),r="transform"===e?Sa:bo;return this.attrTween(t,"function"==typeof n?(e.local?tu:Qa)(e,r,ci(this,"attr."+t,n)):null==n?(e.local?qa:Ha)(e):(e.local?Ja:Ka)(e,r,n))},attrTween:function su(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=he(t);return this.tween(e,(r.local?iu:ou)(r,n))},style:function Gu(t,n,e){var r="transform"==(t+="")?Ca:bo;return null==n?this.styleTween(t,function Nu(t,n){var e,r,i;return function(){var u=un(this,t),c=(this.style.removeProperty(t),un(this,t));return u===c?null:u===e&&c===r?i:i=n(e=u,r=c)}}(t,r)).on("end.style."+t,xo(t)):"function"==typeof n?this.styleTween(t,function Du(t,n,e){var r,i,u;return function(){var c=un(this,t),p=e(this),w=p+"";return null==p&&(this.style.removeProperty(t),w=p=un(this,t)),c===w?null:c===r&&w===i?u:(i=w,u=n(r=c,p))}}(t,r,ci(this,"style."+t,n))).each(function zu(t,n){var e,r,i,p,u="style."+n,c="end."+u;return function(){var w=Ce(this,t),m=w.on,M=null==w.value[u]?p||(p=xo(n)):void 0;(m!==e||i!==M)&&(r=(e=m).copy()).on(c,i=M),w.on=r}}(this._id,t)):this.styleTween(t,function Mu(t,n,e){var r,u,i=e+"";return function(){var c=un(this,t);return c===i?null:c===r?u:u=n(r=c,e)}}(t,r,n),e).on("end.style."+t,null)},styleTween:function Tu(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,Lu(t,n,null==e?"":e))},text:function Uu(t){return this.tween("text","function"==typeof t?function Pu(t){return function(){var n=t(this);this.textContent=null==n?"":n}}(ci(this,"text",t)):function Ou(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function ju(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;return this.tween(n,Zu(t))},remove:function Eu(){return this.on("end.remove",function Au(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}(this._id))},tween:function Da(t,n){var e=this._id;if(t+="",arguments.length<2){for(var c,r=Ae(this.node(),e).tween,i=0,u=r.length;i<u;++i)if((c=r[i]).name===t)return c.value;return null}return this.each((null==n?Na:Ma)(e,t,n))},delay:function cu(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?au:uu)(n,t)):Ae(this.node(),n).delay},duration:function fu(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?hu:lu)(n,t)):Ae(this.node(),n).duration},ease:function pu(t){var n=this._id;return arguments.length?this.each(du(n,t)):Ae(this.node(),n).ease},easeVarying:function yu(t){if("function"!=typeof t)throw new Error;return this.each(function gu(t,n){return function(){var e=n.apply(this,arguments);if("function"!=typeof e)throw new Error;Ce(this,t).ease=e}}(this._id,t))},end:function Fu(){var t,n,e=this,r=e._id,i=e.size();return new Promise(function(u,c){var p={value:c},w={value:function(){0==--i&&u()}};e.each(function(){var m=Ce(this,r),M=m.on;M!==t&&((n=(t=M).copy())._.cancel.push(p),n._.interrupt.push(p),n._.end.push(w)),m.on=n}),0===i&&u()})},[Symbol.iterator]:Le[Symbol.iterator]};var Xu={time:null,delay:0,duration:250,ease:function Yu(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Vu(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}Mn.prototype.interrupt=function Ea(t){return this.each(function(){gr(this,t)})},Mn.prototype.transition=function Hu(t){var n,e;t instanceof Ie?(n=t._id,t=t._name):(n=Ao(),(e=Xu).time=ni(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,u=0;u<i;++u)for(var w,c=r[u],p=c.length,m=0;m<p;++m)(w=c[m])&&pr(w,t,n,m,c,e||Vu(w,n));return new Ie(r,this._parents,t,n)};Math;function Tn(t){return{type:t}}function ie(t){return"string"==typeof t?new xe([[document.querySelector(t)]],[document.documentElement]):new xe([[t]],$i)}function Oe(t,n){if(t=function rc(t){let n;for(;n=t.sourceEvent;)t=n;return t}(t),void 0===n&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(n.getScreenCTM().inverse())).x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}}return[t.pageX,t.pageY]}["w","e"].map(Tn),["n","s"].map(Tn),["n","w","e","s","nw","ne","sw","se"].map(Tn);const ic={passive:!1},On={capture:!0,passive:!1};function vi(t){t.stopImmediatePropagation()}function yn(t){t.preventDefault(),t.stopImmediatePropagation()}function No(t){var n=t.document.documentElement,e=ie(t).on("dragstart.drag",yn,On);"onselectstart"in n?e.on("selectstart.drag",yn,On):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Mo(t,n){var e=t.document.documentElement,r=ie(t).on("dragstart.drag",null);n&&(r.on("click.drag",yn,On),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const Cr=t=>()=>t;function wi(t,{sourceEvent:n,subject:e,target:r,identifier:i,active:u,x:c,y:p,dx:w,dy:m,dispatch:M}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:p,enumerable:!0,configurable:!0},dx:{value:w,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:M}})}function oc(t){return!t.ctrlKey&&!t.button}function sc(){return this.parentNode}function ac(t,n){return null==n?{x:t.x,y:t.y}:n}function uc(){return navigator.maxTouchPoints||"ontouchstart"in this}function Do(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,P,O,R,rt,Q,Z,j,nt,u=t._root,c={data:r},p=t._x0,w=t._y0,m=t._x1,M=t._y1;if(!u)return t._root=c,t;for(;u.length;)if((Q=n>=(P=(p+m)/2))?p=P:m=P,(Z=e>=(O=(w+M)/2))?w=O:M=O,i=u,!(u=u[j=Z<<1|Q]))return i[j]=c,t;if(R=+t._x.call(null,u.data),rt=+t._y.call(null,u.data),n===R&&e===rt)return c.next=u,i?i[j]=c:t._root=c,t;do{i=i?i[j]=new Array(4):t._root=new Array(4),(Q=n>=(P=(p+m)/2))?p=P:m=P,(Z=e>=(O=(w+M)/2))?w=O:M=O}while((j=Z<<1|Q)==(nt=(rt>=O)<<1|R>=P));return i[nt]=u,i[j]=c,t}function ye(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i}function Ec(t){return t[0]}function kc(t){return t[1]}function bi(t,n,e){var r=new xi(null==n?Ec:n,null==e?kc:e,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function xi(t,n,e,r,i,u){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=u,this._root=void 0}function zo(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}wi.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var me=bi.prototype=xi.prototype;function tn(t){return function(){return t}}function We(t){return 1e-6*(t()-.5)}function Sc(t){return t.x+t.vx}function Nc(t){return t.y+t.vy}function Dc(t){return t.index}function Go(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}me.copy=function(){var e,r,t=new xi(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return t;if(!n.length)return t._root=zo(n),t;for(e=[{source:n,target:t._root=new Array(4)}];n=e.pop();)for(var i=0;i<4;++i)(r=n.source[i])&&(r.length?e.push({source:r,target:n.target[i]=new Array(4)}):n.target[i]=zo(r));return t},me.add=function lc(t){const n=+this._x.call(null,t),e=+this._y.call(null,t);return Do(this.cover(n,e),n,e,t)},me.addAll=function fc(t){var n,e,i,u,r=t.length,c=new Array(r),p=new Array(r),w=1/0,m=1/0,M=-1/0,P=-1/0;for(e=0;e<r;++e)isNaN(i=+this._x.call(null,n=t[e]))||isNaN(u=+this._y.call(null,n))||(c[e]=i,p[e]=u,i<w&&(w=i),i>M&&(M=i),u<m&&(m=u),u>P&&(P=u));if(w>M||m>P)return this;for(this.cover(w,m).cover(M,P),e=0;e<r;++e)Do(this,c[e],p[e],t[e]);return this},me.cover=function dc(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,u=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,u=(r=Math.floor(n))+1;else{for(var w,m,c=i-e||1,p=this._root;e>t||t>=i||r>n||n>=u;)switch(m=(n<r)<<1|t<e,w=new Array(4),w[m]=p,p=w,c*=2,m){case 0:i=e+c,u=r+c;break;case 1:e=i-c,u=r+c;break;case 2:i=e+c,r=u-c;break;case 3:e=i-c,r=u-c}this._root&&this._root.length&&(this._root=p)}return this._x0=e,this._y0=r,this._x1=i,this._y1=u,this},me.data=function pc(){var t=[];return this.visit(function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)}),t},me.extent=function gc(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},me.find=function yc(t,n,e){var r,c,p,w,m,rt,Q,i=this._x0,u=this._y0,M=this._x1,P=this._y1,O=[],R=this._root;for(R&&O.push(new ye(R,i,u,M,P)),null==e?e=1/0:(i=t-e,u=n-e,M=t+e,P=n+e,e*=e);rt=O.pop();)if(!(!(R=rt.node)||(c=rt.x0)>M||(p=rt.y0)>P||(w=rt.x1)<i||(m=rt.y1)<u))if(R.length){var Z=(c+w)/2,j=(p+m)/2;O.push(new ye(R[3],Z,j,w,m),new ye(R[2],c,j,Z,m),new ye(R[1],Z,p,w,j),new ye(R[0],c,p,Z,j)),(Q=(n>=j)<<1|t>=Z)&&(rt=O[O.length-1],O[O.length-1]=O[O.length-1-Q],O[O.length-1-Q]=rt)}else{var nt=t-+this._x.call(null,R.data),at=n-+this._y.call(null,R.data),X=nt*nt+at*at;if(X<e){var ht=Math.sqrt(e=X);i=t-ht,u=n-ht,M=t+ht,P=n+ht,r=R.data}}return r},me.remove=function mc(t){if(isNaN(M=+this._x.call(null,t))||isNaN(P=+this._y.call(null,t)))return this;var n,r,i,u,M,P,O,R,rt,Q,Z,j,e=this._root,c=this._x0,p=this._y0,w=this._x1,m=this._y1;if(!e)return this;if(e.length)for(;;){if((rt=M>=(O=(c+w)/2))?c=O:w=O,(Q=P>=(R=(p+m)/2))?p=R:m=R,n=e,!(e=e[Z=Q<<1|rt]))return this;if(!e.length)break;(n[Z+1&3]||n[Z+2&3]||n[Z+3&3])&&(r=n,j=Z)}for(;e.data!==t;)if(i=e,!(e=e.next))return this;return(u=e.next)&&delete e.next,i?(u?i.next=u:delete i.next,this):n?(u?n[Z]=u:delete n[Z],(e=n[0]||n[1]||n[2]||n[3])&&e===(n[3]||n[2]||n[1]||n[0])&&!e.length&&(r?r[j]=e:this._root=e),this):(this._root=u,this)},me.removeAll=function vc(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this},me.root=function wc(){return this._root},me.size=function bc(){var t=0;return this.visit(function(n){if(!n.length)do{++t}while(n=n.next)}),t},me.visit=function xc(t){var e,i,u,c,p,w,n=[],r=this._root;for(r&&n.push(new ye(r,this._x0,this._y0,this._x1,this._y1));e=n.pop();)if(!t(r=e.node,u=e.x0,c=e.y0,p=e.x1,w=e.y1)&&r.length){var m=(u+p)/2,M=(c+w)/2;(i=r[3])&&n.push(new ye(i,m,M,p,w)),(i=r[2])&&n.push(new ye(i,u,M,m,w)),(i=r[1])&&n.push(new ye(i,m,c,p,M)),(i=r[0])&&n.push(new ye(i,u,c,m,M))}return this},me.visitAfter=function Ac(t){var r,n=[],e=[];for(this._root&&n.push(new ye(this._root,this._x0,this._y0,this._x1,this._y1));r=n.pop();){var i=r.node;if(i.length){var u,c=r.x0,p=r.y0,w=r.x1,m=r.y1,M=(c+w)/2,P=(p+m)/2;(u=i[0])&&n.push(new ye(u,c,p,M,P)),(u=i[1])&&n.push(new ye(u,M,p,w,P)),(u=i[2])&&n.push(new ye(u,c,P,M,m)),(u=i[3])&&n.push(new ye(u,M,P,w,m))}e.push(r)}for(;r=e.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this},me.x=function _c(t){return arguments.length?(this._x=t,this):this._x},me.y=function Cc(t){return arguments.length?(this._y=t,this):this._y};const Io=4294967296;function Tc(t){return t.x}function Oc(t){return t.y}var Uc=Math.PI*(3-Math.sqrt(5));function Sr(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function mn(t){return(t=Sr(Math.abs(t)))?t[1]:NaN}var Lo,Bc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Nr(t){if(!(n=Bc.exec(t)))throw new Error("invalid format: "+t);var n;return new Ai({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function Ai(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function To(t,n){var e=Sr(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Nr.prototype=Ai.prototype,Ai.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Oo={"%":(t,n)=>(100*t).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function jc(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>To(100*t,n),r:To,s:function Yc(t,n){var e=Sr(t,n);if(!e)return t+"";var r=e[0],i=e[1],u=i-(Lo=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,c=r.length;return u===c?r:u>c?r+new Array(u-c+1).join("0"):u>0?r.slice(0,u)+"."+r.slice(u):"0."+new Array(1-u).join("0")+Sr(t,Math.max(0,n+u-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Po(t){return t}var Mr,Dr,Zo,Uo=Array.prototype.map,Ro=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function jo(t,n){var c,e=n?n.length:0,r=t?Math.min(e,t.length):0,i=new Array(r),u=new Array(e);for(c=0;c<r;++c)i[c]=vn(t[c],n[c]);for(;c<e;++c)u[c]=n[c];return function(p){for(c=0;c<r;++c)u[c]=i[c](p);return u}}function Hc(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function qc(t,n){var i,e={},r={};for(i in(null===t||"object"!=typeof t)&&(t={}),(null===n||"object"!=typeof n)&&(n={}),n)i in t?e[i]=vn(t[i],n[i]):r[i]=n[i];return function(u){for(i in e)r[i]=e[i](u);return r}}function Kc(t,n){n||(n=[]);var i,e=t?Math.min(n.length,t.length):0,r=n.slice();return function(u){for(i=0;i<e;++i)r[i]=t[i]*(1-u)+n[i]*u;return r}}function vn(t,n){var r,e=typeof n;return null==n||"boolean"===e?Ar(n):("number"===e?Ee:"string"===e?(r=Ke(n))?(n=r,Er):wo:n instanceof Ke?Er:n instanceof Date?Hc:function Jc(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(n)?Kc:Array.isArray(n)?jo:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?qc:Ee)(t,n)}function Ei(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}function Wo(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t(r/(n-1));return e}function _i(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}function Qc(t,n){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof n?this.interpolator(n):this.range(n)}return this}!function Vc(t){Mr=function Xc(t){var n=void 0===t.grouping||void 0===t.thousands?Po:function Wc(t,n){return function(e,r){for(var i=e.length,u=[],c=0,p=t[0],w=0;i>0&&p>0&&(w+p+1>r&&(p=Math.max(1,r-w)),u.push(e.substring(i-=p,i+p)),!((w+=p+1)>r));)p=t[c=(c+1)%t.length];return u.reverse().join(n)}}(Uo.call(t.grouping,Number),t.thousands+""),e=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",i=void 0===t.decimal?".":t.decimal+"",u=void 0===t.numerals?Po:function Fc(t){return function(n){return n.replace(/[0-9]/g,function(e){return t[+e]})}}(Uo.call(t.numerals,String)),c=void 0===t.percent?"%":t.percent+"",p=void 0===t.minus?"\u2212":t.minus+"",w=void 0===t.nan?"NaN":t.nan+"";function m(P){var O=(P=Nr(P)).fill,R=P.align,rt=P.sign,Q=P.symbol,Z=P.zero,j=P.width,nt=P.comma,at=P.precision,X=P.trim,ht=P.type;"n"===ht?(nt=!0,ht="g"):Oo[ht]||(void 0===at&&(at=12),X=!0,ht="g"),(Z||"0"===O&&"="===R)&&(Z=!0,O="0",R="=");var xt="$"===Q?e:"#"===Q&&/[boxX]/.test(ht)?"0"+ht.toLowerCase():"",kt="$"===Q?r:/[%p]/.test(ht)?c:"",_t=Oo[ht],Ot=/[defgprs%]/.test(ht);function Ct(wt){var H,At,st,Zt=xt,It=kt;if("c"===ht)It=_t(wt)+It,wt="";else{var vt=(wt=+wt)<0||1/wt<0;if(wt=isNaN(wt)?w:_t(Math.abs(wt),at),X&&(wt=function $c(t){t:for(var i,n=t.length,e=1,r=-1;e<n;++e)switch(t[e]){case".":r=i=e;break;case"0":0===r&&(r=e),i=e;break;default:if(!+t[e])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(wt)),vt&&0==+wt&&"+"!==rt&&(vt=!1),Zt=(vt?"("===rt?rt:p:"-"===rt||"("===rt?"":rt)+Zt,It=("s"===ht?Ro[8+Lo/3]:"")+It+(vt&&"("===rt?")":""),Ot)for(H=-1,At=wt.length;++H<At;)if(48>(st=wt.charCodeAt(H))||st>57){It=(46===st?i+wt.slice(H+1):wt.slice(H))+It,wt=wt.slice(0,H);break}}nt&&!Z&&(wt=n(wt,1/0));var Mt=Zt.length+wt.length+It.length,Et=Mt<j?new Array(j-Mt+1).join(O):"";switch(nt&&Z&&(wt=n(Et+wt,Et.length?j-It.length:1/0),Et=""),R){case"<":wt=Zt+wt+It+Et;break;case"=":wt=Zt+Et+wt+It;break;case"^":wt=Et.slice(0,Mt=Et.length>>1)+Zt+wt+It+Et.slice(Mt);break;default:wt=Et+Zt+wt+It}return u(wt)}return at=void 0===at?6:/[gprs]/.test(ht)?Math.max(1,Math.min(21,at)):Math.max(0,Math.min(20,at)),Ct.toString=function(){return P+""},Ct}return{format:m,formatPrefix:function M(P,O){var R=m(((P=Nr(P)).type="f",P)),rt=3*Math.max(-8,Math.min(8,Math.floor(mn(O)/3))),Q=Math.pow(10,-rt),Z=Ro[8+rt/3];return function(j){return R(Q*j)+Z}}}}(t),Dr=Mr.format,Zo=Mr.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});const Fo=Symbol("implicit");function zr(){var t=new $n,n=[],e=[],r=Fo;function i(u){let c=t.get(u);if(void 0===c){if(r!==Fo)return r;t.set(u,c=n.push(u)-1)}return e[c%e.length]}return i.domain=function(u){if(!arguments.length)return n.slice();n=[],t=new $n;for(const c of u)t.has(c)||t.set(c,n.push(c)-1);return i},i.range=function(u){return arguments.length?(e=Array.from(u),i):e.slice()},i.unknown=function(u){return arguments.length?(r=u,i):r},i.copy=function(){return zr(n,e).unknown(r)},_i.apply(i,arguments),i}function Pn(){var u,c,t=zr().unknown(void 0),n=t.domain,e=t.range,r=0,i=1,p=!1,w=0,m=0,M=.5;function P(){var O=n().length,R=i<r,rt=R?i:r,Q=R?r:i;u=(Q-rt)/Math.max(1,O-w+2*m),p&&(u=Math.floor(u)),rt+=(Q-rt-u*(O-w))*M,c=u*(1-w),p&&(rt=Math.round(rt),c=Math.round(c));var Z=ae(O).map(function(j){return rt+u*j});return e(R?Z.reverse():Z)}return delete t.unknown,t.domain=function(O){return arguments.length?(n(O),P()):n()},t.range=function(O){return arguments.length?([r,i]=O,r=+r,i=+i,P()):[r,i]},t.rangeRound=function(O){return[r,i]=O,r=+r,i=+i,p=!0,P()},t.bandwidth=function(){return c},t.step=function(){return u},t.round=function(O){return arguments.length?(p=!!O,P()):p},t.padding=function(O){return arguments.length?(w=Math.min(1,m=+O),P()):w},t.paddingInner=function(O){return arguments.length?(w=Math.min(1,O),P()):w},t.paddingOuter=function(O){return arguments.length?(m=+O,P()):m},t.align=function(O){return arguments.length?(M=Math.max(0,Math.min(1,O)),P()):M},t.copy=function(){return Pn(n(),[r,i]).round(p).paddingInner(w).paddingOuter(m).align(M)},_i.apply(P(),arguments)}const th=Math.sqrt(50),eh=Math.sqrt(10),nh=Math.sqrt(2);function Gr(t,n,e){const r=(n-t)/Math.max(0,e),i=Math.floor(Math.log10(r)),u=r/Math.pow(10,i),c=u>=th?10:u>=eh?5:u>=nh?2:1;let p,w,m;return i<0?(m=Math.pow(10,-i)/c,p=Math.round(t*m),w=Math.round(n*m),p/m<t&&++p,w/m>n&&--w,m=-m):(m=Math.pow(10,i)*c,p=Math.round(t/m),w=Math.round(n/m),p*m<t&&++p,w*m>n&&--w),w<p&&.5<=e&&e<2?Gr(t,n,2*e):[p,w,m]}function ki(t,n,e){return Gr(t=+t,n=+n,e=+e)[2]}function oh(t,n){return null==t||null==n?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function $o(t){let n,e,r;function i(p,w,m=0,M=p.length){if(m<M){if(0!==n(w,w))return M;do{const P=m+M>>>1;e(p[P],w)<0?m=P+1:M=P}while(m<M)}return m}return 2!==t.length?(n=lt,e=(p,w)=>lt(t(p),w),r=(p,w)=>t(p)-w):(n=t===lt||t===oh?t:sh,e=t,r=t),{left:i,center:function c(p,w,m=0,M=p.length){const P=i(p,w,m,M-1);return P>m&&r(p[P-1],w)>-r(p[P],w)?P-1:P},right:function u(p,w,m=0,M=p.length){if(m<M){if(0!==n(w,w))return M;do{const P=m+M>>>1;e(p[P],w)<=0?m=P+1:M=P}while(m<M)}return m}}}function sh(){return 0}const ah=$o(lt).right,uh=($o(function qt(t){return null===t?NaN:+t}),ah);function hh(t){return+t}var Xo=[0,1];function Fe(t){return t}function Ci(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:function ch(t){return function(){return t}}(isNaN(n)?NaN:.5)}function fh(t,n,e){var r=t[0],i=t[1],u=n[0],c=n[1];return i<r?(r=Ci(i,r),u=e(c,u)):(r=Ci(r,i),u=e(u,c)),function(p){return u(r(p))}}function dh(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),u=new Array(r),c=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++c<r;)i[c]=Ci(t[c],t[c+1]),u[c]=e(n[c],n[c+1]);return function(p){var w=uh(t,p,1,r)-1;return u[w](i[w](p))}}function ph(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function yh(){return function gh(){var r,i,u,p,w,m,t=Xo,n=Xo,e=vn,c=Fe;function M(){var O=Math.min(t.length,n.length);return c!==Fe&&(c=function lh(t,n){var e;return t>n&&(e=t,t=n,n=e),function(r){return Math.max(t,Math.min(n,r))}}(t[0],t[O-1])),p=O>2?dh:fh,w=m=null,P}function P(O){return null==O||isNaN(O=+O)?u:(w||(w=p(t.map(r),n,e)))(r(c(O)))}return P.invert=function(O){return c(i((m||(m=p(n,t.map(r),Ee)))(O)))},P.domain=function(O){return arguments.length?(t=Array.from(O,hh),M()):t.slice()},P.range=function(O){return arguments.length?(n=Array.from(O),M()):n.slice()},P.rangeRound=function(O){return n=Array.from(O),e=Ei,M()},P.clamp=function(O){return arguments.length?(c=!!O||Fe,M()):c!==Fe},P.interpolate=function(O){return arguments.length?(e=O,M()):e},P.unknown=function(O){return arguments.length?(u=O,P):u},function(O,R){return r=O,i=R,M()}}()(Fe,Fe)}function Vo(t){var n=t.domain;return t.ticks=function(e){var r=n();return function rh(t,n,e){if(!((e=+e)>0))return[];if((t=+t)==(n=+n))return[t];const r=n<t,[i,u,c]=r?Gr(n,t,e):Gr(t,n,e);if(!(u>=i))return[];const p=u-i+1,w=new Array(p);if(r)if(c<0)for(let m=0;m<p;++m)w[m]=(u-m)/-c;else for(let m=0;m<p;++m)w[m]=(u-m)*c;else if(c<0)for(let m=0;m<p;++m)w[m]=(i+m)/-c;else for(let m=0;m<p;++m)w[m]=(i+m)*c;return w}(r[0],r[r.length-1],null==e?10:e)},t.tickFormat=function(e,r){var i=n();return function bh(t,n,e,r){var u,i=function ih(t,n,e){e=+e;const r=(n=+n)<(t=+t),i=r?ki(n,t,e):ki(t,n,e);return(r?-1:1)*(i<0?1/-i:i)}(t,n,e);switch((r=Nr(null==r?",f":r)).type){case"s":var c=Math.max(Math.abs(t),Math.abs(n));return null==r.precision&&!isNaN(u=function mh(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(mn(n)/3)))-mn(Math.abs(t)))}(i,c))&&(r.precision=u),Zo(r,c);case"":case"e":case"g":case"p":case"r":null==r.precision&&!isNaN(u=function vh(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,mn(n)-mn(t))+1}(i,Math.max(Math.abs(t),Math.abs(n))))&&(r.precision=u-("e"===r.type));break;case"f":case"%":null==r.precision&&!isNaN(u=function wh(t){return Math.max(0,-mn(Math.abs(t)))}(i))&&(r.precision=u-2*("%"===r.type))}return Dr(r)}(i[0],i[i.length-1],null==e?10:e,r)},t.nice=function(e){null==e&&(e=10);var w,m,r=n(),i=0,u=r.length-1,c=r[i],p=r[u],M=10;for(p<c&&(m=c,c=p,p=m,m=i,i=u,u=m);M-- >0;){if((m=ki(c,p,e))===w)return r[i]=c,r[u]=p,n(r);if(m>0)c=Math.floor(c/m)*m,p=Math.ceil(p/m)*m;else{if(!(m<0))break;c=Math.ceil(c*m)/m,p=Math.floor(p*m)/m}w=m}return t},t}function wn(){var t=yh();return t.copy=function(){return ph(t,wn())},_i.apply(t,arguments),Vo(t)}function Ir(){var e,r,i,u,w,t=0,n=1,c=Fe,p=!1;function m(P){return null==P||isNaN(P=+P)?w:c(0===i?.5:(P=(u(P)-e)*i,p?Math.max(0,Math.min(1,P)):P))}function M(P){return function(O){var R,rt;return arguments.length?([R,rt]=O,c=P(R,rt),m):[c(0),c(1)]}}return m.domain=function(P){return arguments.length?([t,n]=P,e=u(t=+t),r=u(n=+n),i=e===r?0:1/(r-e),m):[t,n]},m.clamp=function(P){return arguments.length?(p=!!P,m):p},m.interpolator=function(P){return arguments.length?(c=P,m):c},m.range=M(vn),m.rangeRound=M(Ei),m.unknown=function(P){return arguments.length?(w=P,m):w},function(P){return u=P,e=P(t),r=P(n),i=e===r?0:1/(r-e),m}}function Lr(t,n){return n.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Ho(){var t=Vo(Ir()(Fe));return t.copy=function(){return Lr(t,Ho())},Qc.apply(t,arguments)}const _h=function Eh(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(6*r,6*++r);return e}("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),kh=Math.PI/180,Ch=180/Math.PI;var Si=1.78277,Ni=-.29227,Tr=-.90649,Un=1.97294,Jo=Un*Tr,Qo=Un*Si,ts=Si*Ni- -.14861*Tr;function Sh(t){if(t instanceof en)return new en(t.h,t.s,t.l,t.opacity);t instanceof le||(t=co(t));var e=t.g/255,r=t.b/255,i=(ts*r+Jo*(t.r/255)-Qo*e)/(ts+Jo-Qo),u=r-i,c=(Un*(e-i)-Ni*u)/Tr,p=Math.sqrt(c*c+u*u)/(Un*i*(1-i)),w=p?Math.atan2(c,u)*Ch-120:NaN;return new en(w<0?w+360:w,p,i,t.opacity)}function Be(t,n,e,r){return 1===arguments.length?Sh(t):new en(t,n,e,null==r?1:r)}function en(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function es(t){return function n(e){function r(i,u){var c=t((i=Be(i)).h,(u=Be(u)).h),p=dn(i.s,u.s),w=dn(i.l,u.l),m=dn(i.opacity,u.opacity);return function(M){return i.h=c(M),i.s=p(M),i.l=w(Math.pow(M,e)),i.opacity=m(M),i+""}}return e=+e,r.gamma=n,r}(1)}mr(en,Be,hi(hn,{brighter(t){return t=null==t?ln:Math.pow(ln,t),new en(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new en(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*kh,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new le(255*(n+e*(-.14861*r+Si*i)),255*(n+e*(Ni*r+Tr*i)),255*(n+e*(Un*r)),this.opacity)}})),es(function $a(t,n){var e=n-t;return e?mo(t,e>180||e<-180?e-360*Math.round(e/360):e):Ar(isNaN(t)?n:t)});var ns=es(dn),Nh=(ns(Be(-100,.75,.35),Be(80,1.5,.8)),ns(Be(260,.75,.35),Be(80,1.5,.8)));function rs(t){return ie(ei(t).call(document.documentElement))}function is(t){return((t=Math.exp(t))+1/t)/2}Be();const Gh=function t(n,e,r){function i(u,c){var Z,j,p=u[0],w=u[1],m=u[2],O=c[2],R=c[0]-p,rt=c[1]-w,Q=R*R+rt*rt;if(Q<1e-12)j=Math.log(O/m)/n,Z=function(kt){return[p+kt*R,w+kt*rt,m*Math.exp(n*kt*j)]};else{var nt=Math.sqrt(Q),at=(O*O-m*m+r*Q)/(2*m*e*nt),X=(O*O-m*m-r*Q)/(2*O*e*nt),ht=Math.log(Math.sqrt(at*at+1)-at),xt=Math.log(Math.sqrt(X*X+1)-X);j=(xt-ht)/n,Z=function(kt){var _t=kt*j,Ot=is(ht),Ct=m/(e*nt)*(Ot*function zh(t){return((t=Math.exp(2*t))-1)/(t+1)}(n*_t+ht)-function Dh(t){return((t=Math.exp(t))-1/t)/2}(ht));return[p+Ct*R,w+Ct*rt,m*Ot/is(n*_t+ht)]}}return Z.duration=1e3*j*n/Math.SQRT2,Z}return i.rho=function(u){var c=Math.max(.001,+u),p=c*c;return t(c,p,p*p)},i}(Math.SQRT2,2,4),Pr=t=>()=>t;function Ih(t,{sourceEvent:n,target:e,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Pe(t,n,e){this.k=t,this.x=n,this.y=e}Pe.prototype={constructor:Pe,scale:function(t){return 1===t?this:new Pe(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new Pe(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Mi=new Pe(1,0,0);function Di(t){t.stopImmediatePropagation()}function Rn(t){t.preventDefault(),t.stopImmediatePropagation()}function Th(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function Oh(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function os(){return this.__zoom||Mi}function Ph(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Uh(){return navigator.maxTouchPoints||"ontouchstart"in this}function Rh(t,n,e){var r=t.invertX(n[0][0])-e[0][0],i=t.invertX(n[1][0])-e[1][0],u=t.invertY(n[0][1])-e[0][1],c=t.invertY(n[1][1])-e[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),c>u?(u+c)/2:Math.min(0,u)||Math.max(0,c))}var jh=N(4825);let zi=(()=>{class t extends Ht.H{constructor(){super(),this.nodes=[],this.links=[],this.width=window.screen.availWidth,this.height=window.screen.availHeight,this.characterLinks=[],this.defaultOptions={zoom:!0,edgeRadius:0,directed:!1,drag:!1,curveEdges:!1},this.id=(0,I.V)(),this.groups=[]}ngOnChanges(){this.nodes.length>0&&this.links.length>0&&this.create()}ngAfterViewInit(){this.nodes.length>0&&this.links.length>0&&this.create()}create(){this.options=Object.assign(Object.assign({},this.defaultOptions),this.options),this.element=document.getElementById(this.id+"-network");const e=this.element.getBoundingClientRect();this.width=e.width,this.height=e.height,ie(this.element).selectChildren().remove(),this.createCharacterLinks(),this.initializeColor(),this.createSvg(),this.createLink(),this.createSimulation(),this.createNode()}initializeColor(){this.groups=Array.from(new Set(this.characterLinks.map(e=>e.group))),this.color=this.options.colors?zr(Object.keys(this.options.colors),Object.values(this.options.colors)):zr(this.groups,_h)}createCharacterLinks(){const e=this.nodes.map(r=>r.id);this.characterLinks=this.links.filter(r=>e.includes(r.source)&&e.includes(r.target))}createSimulation(){this.simulation=function Rc(t){var n,e=1,r=.001,i=1-Math.pow(r,1/300),u=0,c=.6,p=new Map,w=ri(P),m=ar("tick","end"),M=function Lc(){let t=1;return()=>(t=(1664525*t+1013904223)%Io)/Io}();function P(){O(),m.call("tick",n),e<r&&(w.stop(),m.call("end",n))}function O(Q){var Z,nt,j=t.length;void 0===Q&&(Q=1);for(var at=0;at<Q;++at)for(e+=(u-e)*i,p.forEach(function(X){X(e)}),Z=0;Z<j;++Z)null==(nt=t[Z]).fx?nt.x+=nt.vx*=c:(nt.x=nt.fx,nt.vx=0),null==nt.fy?nt.y+=nt.vy*=c:(nt.y=nt.fy,nt.vy=0);return n}function R(){for(var j,Q=0,Z=t.length;Q<Z;++Q){if((j=t[Q]).index=Q,null!=j.fx&&(j.x=j.fx),null!=j.fy&&(j.y=j.fy),isNaN(j.x)||isNaN(j.y)){var nt=10*Math.sqrt(.5+Q),at=Q*Uc;j.x=nt*Math.cos(at),j.y=nt*Math.sin(at)}(isNaN(j.vx)||isNaN(j.vy))&&(j.vx=j.vy=0)}}function rt(Q){return Q.initialize&&Q.initialize(t,M),Q}return null==t&&(t=[]),R(),n={tick:O,restart:function(){return w.restart(P),n},stop:function(){return w.stop(),n},nodes:function(Q){return arguments.length?(t=Q,R(),p.forEach(rt),n):t},alpha:function(Q){return arguments.length?(e=+Q,n):e},alphaMin:function(Q){return arguments.length?(r=+Q,n):r},alphaDecay:function(Q){return arguments.length?(i=+Q,n):+i},alphaTarget:function(Q){return arguments.length?(u=+Q,n):u},velocityDecay:function(Q){return arguments.length?(c=1-Q,n):1-c},randomSource:function(Q){return arguments.length?(M=Q,p.forEach(rt),n):M},force:function(Q,Z){return arguments.length>1?(null==Z?p.delete(Q):p.set(Q,rt(Z)),n):p.get(Q)},find:function(Q,Z,j){var X,ht,xt,kt,_t,nt=0,at=t.length;for(null==j?j=1/0:j*=j,nt=0;nt<at;++nt)(xt=(X=Q-(kt=t[nt]).x)*X+(ht=Z-kt.y)*ht)<j&&(_t=kt,j=xt);return _t},on:function(Q,Z){return arguments.length>1?(m.on(Q,Z),n):m.on(Q)}}}(this.nodes).force("link",function zc(t){var r,u,c,p,w,m,n=Dc,e=function P(Z){return 1/Math.min(p[Z.source.index],p[Z.target.index])},i=tn(30),M=1;function O(Z){for(var j=0,nt=t.length;j<M;++j)for(var X,ht,xt,kt,_t,Ot,Ct,at=0;at<nt;++at)kt=(xt=(X=t[at]).target).x+xt.vx-(ht=X.source).x-ht.vx||We(m),_t=xt.y+xt.vy-ht.y-ht.vy||We(m),_t*=Ot=((Ot=Math.sqrt(kt*kt+_t*_t))-u[at])/Ot*Z*r[at],xt.vx-=(kt*=Ot)*(Ct=w[at]),xt.vy-=_t*Ct,ht.vx+=kt*(Ct=1-Ct),ht.vy+=_t*Ct}function R(){if(c){var Z,X,j=c.length,nt=t.length,at=new Map(c.map((ht,xt)=>[n(ht,xt,c),ht]));for(Z=0,p=new Array(j);Z<nt;++Z)(X=t[Z]).index=Z,"object"!=typeof X.source&&(X.source=Go(at,X.source)),"object"!=typeof X.target&&(X.target=Go(at,X.target)),p[X.source.index]=(p[X.source.index]||0)+1,p[X.target.index]=(p[X.target.index]||0)+1;for(Z=0,w=new Array(nt);Z<nt;++Z)w[Z]=p[(X=t[Z]).source.index]/(p[X.source.index]+p[X.target.index]);r=new Array(nt),rt(),u=new Array(nt),Q()}}function rt(){if(c)for(var Z=0,j=t.length;Z<j;++Z)r[Z]=+e(t[Z],Z,t)}function Q(){if(c)for(var Z=0,j=t.length;Z<j;++Z)u[Z]=+i(t[Z],Z,t)}return null==t&&(t=[]),O.initialize=function(Z,j){c=Z,m=j,R()},O.links=function(Z){return arguments.length?(t=Z,R(),O):t},O.id=function(Z){return arguments.length?(n=Z,O):n},O.iterations=function(Z){return arguments.length?(M=+Z,O):M},O.strength=function(Z){return arguments.length?(e="function"==typeof Z?Z:tn(+Z),rt(),O):e},O.distance=function(Z){return arguments.length?(i="function"==typeof Z?Z:tn(+Z),Q(),O):i},O}(this.characterLinks).distance(20).id(this.getId)).force("charge",function Zc(){var t,n,e,r,u,i=tn(-30),c=1,p=1/0,w=.81;function m(R){var rt,Q=t.length,Z=bi(t,Tc,Oc).visitAfter(P);for(r=R,rt=0;rt<Q;++rt)n=t[rt],Z.visit(O)}function M(){if(t){var R,Q,rt=t.length;for(u=new Array(rt),R=0;R<rt;++R)u[(Q=t[R]).index]=+i(Q,R,t)}}function P(R){var Q,Z,nt,at,X,rt=0,j=0;if(R.length){for(nt=at=X=0;X<4;++X)(Q=R[X])&&(Z=Math.abs(Q.value))&&(rt+=Q.value,j+=Z,nt+=Z*Q.x,at+=Z*Q.y);R.x=nt/j,R.y=at/j}else{(Q=R).x=Q.data.x,Q.y=Q.data.y;do{rt+=u[Q.data.index]}while(Q=Q.next)}R.value=rt}function O(R,rt,Q,Z){if(!R.value)return!0;var j=R.x-n.x,nt=R.y-n.y,at=Z-rt,X=j*j+nt*nt;if(at*at/w<X)return X<p&&(0===j&&(X+=(j=We(e))*j),0===nt&&(X+=(nt=We(e))*nt),X<c&&(X=Math.sqrt(c*X)),n.vx+=j*R.value*r/X,n.vy+=nt*R.value*r/X),!0;if(!(R.length||X>=p)){(R.data!==n||R.next)&&(0===j&&(X+=(j=We(e))*j),0===nt&&(X+=(nt=We(e))*nt),X<c&&(X=Math.sqrt(c*X)));do{R.data!==n&&(n.vx+=j*(at=u[R.data.index]*r/X),n.vy+=nt*at)}while(R=R.next)}}return m.initialize=function(R,rt){t=R,e=rt,M()},m.strength=function(R){return arguments.length?(i="function"==typeof R?R:tn(+R),M(),m):i},m.distanceMin=function(R){return arguments.length?(c=R*R,m):Math.sqrt(c)},m.distanceMax=function(R){return arguments.length?(p=R*R,m):Math.sqrt(p)},m.theta=function(R){return arguments.length?(w=R*R,m):Math.sqrt(w)},m}().strength(e=>-100*e.score)).force("center",function hc(t,n){var e,r=1;function i(){var u,p,c=e.length,w=0,m=0;for(u=0;u<c;++u)w+=(p=e[u]).x,m+=p.y;for(w=(w/c-t)*r,m=(m/c-n)*r,u=0;u<c;++u)(p=e[u]).x-=w,p.y-=m}return null==t&&(t=0),null==n&&(n=0),i.initialize=function(u){e=u},i.x=function(u){return arguments.length?(t=+u,i):t},i.y=function(u){return arguments.length?(n=+u,i):n},i.strength=function(u){return arguments.length?(r=+u,i):r},i}(this.width/2,this.height/2)).force("radius",function Mc(t){var n,e,r,i=1,u=1;function c(){for(var m,P,O,R,rt,Q,Z,M=n.length,j=0;j<u;++j)for(P=bi(n,Sc,Nc).visitAfter(p),m=0;m<M;++m)Z=(Q=e[(O=n[m]).index])*Q,R=O.x+O.vx,rt=O.y+O.vy,P.visit(nt);function nt(at,X,ht,xt,kt){var _t=at.data,Ot=at.r,Ct=Q+Ot;if(!_t)return X>R+Ct||xt<R-Ct||ht>rt+Ct||kt<rt-Ct;if(_t.index>O.index){var wt=R-_t.x-_t.vx,Zt=rt-_t.y-_t.vy,It=wt*wt+Zt*Zt;It<Ct*Ct&&(0===wt&&(It+=(wt=We(r))*wt),0===Zt&&(It+=(Zt=We(r))*Zt),It=(Ct-(It=Math.sqrt(It)))/It*i,O.vx+=(wt*=It)*(Ct=(Ot*=Ot)/(Z+Ot)),O.vy+=(Zt*=It)*Ct,_t.vx-=wt*(Ct=1-Ct),_t.vy-=Zt*Ct)}}}function p(m){if(m.data)return m.r=e[m.data.index];for(var M=m.r=0;M<4;++M)m[M]&&m[M].r>m.r&&(m.r=m[M].r)}function w(){if(n){var m,P,M=n.length;for(e=new Array(M),m=0;m<M;++m)e[(P=n[m]).index]=+t(P,m,n)}}return"function"!=typeof t&&(t=tn(null==t?1:+t)),c.initialize=function(m,M){n=m,r=M,w()},c.iterations=function(m){return arguments.length?(u=+m,c):u},c.strength=function(m){return arguments.length?(i=+m,c):i},c.radius=function(m){return arguments.length?(t="function"==typeof m?m:tn(+m),w(),c):t},c}(e=>e.score+20)).force("cluster",this.cluster(this.nodes)).on("tick",()=>{this.link.attr("d",this.options.curveEdges?this.linkArc:e=>`\n            M${e.source.x},${e.source.y}\n            A${this.options.edgeRadius},${this.options.edgeRadius} 0 0, 1 ${e.target.x},${e.target.y}\n            `),this.node.attr("transform",e=>`translate(${e.x}, ${e.y})`),(0,jh.g)(1e4)}),setTimeout(()=>{this.simulation.stop()},1e4)}createSvg(){const e=this;this.svg=rs("svg").attr("viewBox",[0,0,this.width,this.height]).style("font","12px sans-serif"),this.g=this.svg.append("g"),this.options.zoom&&this.svg.call(function Zh(){var M,P,O,t=Th,n=Oh,e=Rh,r=Ph,i=Uh,u=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],p=250,w=Gh,m=ar("start","zoom","end"),R=500,Q=0,Z=10;function j(H){H.property("__zoom",os).on("wheel.zoom",_t,{passive:!1}).on("mousedown.zoom",Ot).on("dblclick.zoom",Ct).filter(i).on("touchstart.zoom",wt).on("touchmove.zoom",Zt).on("touchend.zoom touchcancel.zoom",It).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function nt(H,At){return(At=Math.max(u[0],Math.min(u[1],At)))===H.k?H:new Pe(At,H.x,H.y)}function at(H,At,st){var vt=At[0]-st[0]*H.k,Mt=At[1]-st[1]*H.k;return vt===H.x&&Mt===H.y?H:new Pe(H.k,vt,Mt)}function X(H){return[(+H[0][0]+ +H[1][0])/2,(+H[0][1]+ +H[1][1])/2]}function ht(H,At,st,vt){H.on("start.zoom",function(){xt(this,arguments).event(vt).start()}).on("interrupt.zoom end.zoom",function(){xt(this,arguments).event(vt).end()}).tween("zoom",function(){var Mt=this,Et=arguments,Nt=xt(Mt,Et).event(vt),Tt=n.apply(Mt,Et),Pt=null==st?X(Tt):"function"==typeof st?st.apply(Mt,Et):st,we=Math.max(Tt[1][0]-Tt[0][0],Tt[1][1]-Tt[0][1]),Kt=Mt.__zoom,pe="function"==typeof At?At.apply(Mt,Et):At,be=w(Kt.invert(Pt).concat(we/Kt.k),pe.invert(Pt).concat(we/pe.k));return function(Vt){if(1===Vt)Vt=pe;else{var ve=be(Vt),xn=we/ve[2];Vt=new Pe(xn,Pt[0]-ve[0]*xn,Pt[1]-ve[1]*xn)}Nt.zoom(null,Vt)}})}function xt(H,At,st){return!st&&H.__zooming||new kt(H,At)}function kt(H,At){this.that=H,this.args=At,this.active=0,this.sourceEvent=null,this.extent=n.apply(H,At),this.taps=0}function _t(H,...At){if(t.apply(this,arguments)){var st=xt(this,At).event(H),vt=this.__zoom,Mt=Math.max(u[0],Math.min(u[1],vt.k*Math.pow(2,r.apply(this,arguments)))),Et=Oe(H);if(st.wheel)(st.mouse[0][0]!==Et[0]||st.mouse[0][1]!==Et[1])&&(st.mouse[1]=vt.invert(st.mouse[0]=Et)),clearTimeout(st.wheel);else{if(vt.k===Mt)return;st.mouse=[Et,vt.invert(Et)],gr(this),st.start()}Rn(H),st.wheel=setTimeout(Nt,150),st.zoom("mouse",e(at(nt(vt,Mt),st.mouse[0],st.mouse[1]),st.extent,c))}function Nt(){st.wheel=null,st.end()}}function Ot(H,...At){if(!O&&t.apply(this,arguments)){var st=H.currentTarget,vt=xt(this,At,!0).event(H),Mt=ie(H.view).on("mousemove.zoom",Pt,!0).on("mouseup.zoom",we,!0),Et=Oe(H,st),Nt=H.clientX,Tt=H.clientY;No(H.view),Di(H),vt.mouse=[Et,this.__zoom.invert(Et)],gr(this),vt.start()}function Pt(Kt){if(Rn(Kt),!vt.moved){var pe=Kt.clientX-Nt,be=Kt.clientY-Tt;vt.moved=pe*pe+be*be>Q}vt.event(Kt).zoom("mouse",e(at(vt.that.__zoom,vt.mouse[0]=Oe(Kt,st),vt.mouse[1]),vt.extent,c))}function we(Kt){Mt.on("mousemove.zoom mouseup.zoom",null),Mo(Kt.view,vt.moved),Rn(Kt),vt.event(Kt).end()}}function Ct(H,...At){if(t.apply(this,arguments)){var st=this.__zoom,vt=Oe(H.changedTouches?H.changedTouches[0]:H,this),Mt=st.invert(vt),Nt=e(at(nt(st,st.k*(H.shiftKey?.5:2)),vt,Mt),n.apply(this,At),c);Rn(H),p>0?ie(this).transition().duration(p).call(ht,Nt,vt,H):ie(this).call(j.transform,Nt,vt,H)}}function wt(H,...At){if(t.apply(this,arguments)){var Et,Nt,Tt,Pt,st=H.touches,vt=st.length,Mt=xt(this,At,H.changedTouches.length===vt).event(H);for(Di(H),Nt=0;Nt<vt;++Nt)Pt=[Pt=Oe(Tt=st[Nt],this),this.__zoom.invert(Pt),Tt.identifier],Mt.touch0?!Mt.touch1&&Mt.touch0[2]!==Pt[2]&&(Mt.touch1=Pt,Mt.taps=0):(Mt.touch0=Pt,Et=!0,Mt.taps=1+!!M);M&&(M=clearTimeout(M)),Et&&(Mt.taps<2&&(P=Pt[0],M=setTimeout(function(){M=null},R)),gr(this),Mt.start())}}function Zt(H,...At){if(this.__zooming){var Et,Nt,Tt,Pt,st=xt(this,At).event(H),vt=H.changedTouches,Mt=vt.length;for(Rn(H),Et=0;Et<Mt;++Et)Tt=Oe(Nt=vt[Et],this),st.touch0&&st.touch0[2]===Nt.identifier?st.touch0[0]=Tt:st.touch1&&st.touch1[2]===Nt.identifier&&(st.touch1[0]=Tt);if(Nt=st.that.__zoom,st.touch1){var we=st.touch0[0],Kt=st.touch0[1],pe=st.touch1[0],be=st.touch1[1],Vt=(Vt=pe[0]-we[0])*Vt+(Vt=pe[1]-we[1])*Vt,ve=(ve=be[0]-Kt[0])*ve+(ve=be[1]-Kt[1])*ve;Nt=nt(Nt,Math.sqrt(Vt/ve)),Tt=[(we[0]+pe[0])/2,(we[1]+pe[1])/2],Pt=[(Kt[0]+be[0])/2,(Kt[1]+be[1])/2]}else{if(!st.touch0)return;Tt=st.touch0[0],Pt=st.touch0[1]}st.zoom("touch",e(at(Nt,Tt,Pt),st.extent,c))}}function It(H,...At){if(this.__zooming){var Et,Nt,st=xt(this,At).event(H),vt=H.changedTouches,Mt=vt.length;for(Di(H),O&&clearTimeout(O),O=setTimeout(function(){O=null},R),Et=0;Et<Mt;++Et)Nt=vt[Et],st.touch0&&st.touch0[2]===Nt.identifier?delete st.touch0:st.touch1&&st.touch1[2]===Nt.identifier&&delete st.touch1;if(st.touch1&&!st.touch0&&(st.touch0=st.touch1,delete st.touch1),st.touch0)st.touch0[1]=this.__zoom.invert(st.touch0[0]);else if(st.end(),2===st.taps&&(Nt=Oe(Nt,this),Math.hypot(P[0]-Nt[0],P[1]-Nt[1])<Z)){var Tt=ie(this).on("dblclick.zoom");Tt&&Tt.apply(this,arguments)}}}return j.transform=function(H,At,st,vt){var Mt=H.selection?H.selection():H;Mt.property("__zoom",os),H!==Mt?ht(H,At,st,vt):Mt.interrupt().each(function(){xt(this,arguments).event(vt).start().zoom(null,"function"==typeof At?At.apply(this,arguments):At).end()})},j.scaleBy=function(H,At,st,vt){j.scaleTo(H,function(){return this.__zoom.k*("function"==typeof At?At.apply(this,arguments):At)},st,vt)},j.scaleTo=function(H,At,st,vt){j.transform(H,function(){var Mt=n.apply(this,arguments),Et=this.__zoom,Nt=null==st?X(Mt):"function"==typeof st?st.apply(this,arguments):st,Tt=Et.invert(Nt),Pt="function"==typeof At?At.apply(this,arguments):At;return e(at(nt(Et,Pt),Nt,Tt),Mt,c)},st,vt)},j.translateBy=function(H,At,st,vt){j.transform(H,function(){return e(this.__zoom.translate("function"==typeof At?At.apply(this,arguments):At,"function"==typeof st?st.apply(this,arguments):st),n.apply(this,arguments),c)},null,vt)},j.translateTo=function(H,At,st,vt,Mt){j.transform(H,function(){var Et=n.apply(this,arguments),Nt=this.__zoom,Tt=null==vt?X(Et):"function"==typeof vt?vt.apply(this,arguments):vt;return e(Mi.translate(Tt[0],Tt[1]).scale(Nt.k).translate("function"==typeof At?-At.apply(this,arguments):-At,"function"==typeof st?-st.apply(this,arguments):-st),Et,c)},vt,Mt)},kt.prototype={event:function(H){return H&&(this.sourceEvent=H),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(H,At){return this.mouse&&"mouse"!==H&&(this.mouse[1]=At.invert(this.mouse[0])),this.touch0&&"touch"!==H&&(this.touch0[1]=At.invert(this.touch0[0])),this.touch1&&"touch"!==H&&(this.touch1[1]=At.invert(this.touch1[0])),this.that.__zoom=At,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(H){var At=ie(this.that).datum();m.call(H,this.that,new Ih(H,{sourceEvent:this.sourceEvent,target:j,type:H,transform:this.that.__zoom,dispatch:m}),At)}},j.wheelDelta=function(H){return arguments.length?(r="function"==typeof H?H:Pr(+H),j):r},j.filter=function(H){return arguments.length?(t="function"==typeof H?H:Pr(!!H),j):t},j.touchable=function(H){return arguments.length?(i="function"==typeof H?H:Pr(!!H),j):i},j.extent=function(H){return arguments.length?(n="function"==typeof H?H:Pr([[+H[0][0],+H[0][1]],[+H[1][0],+H[1][1]]]),j):n},j.scaleExtent=function(H){return arguments.length?(u[0]=+H[0],u[1]=+H[1],j):[u[0],u[1]]},j.translateExtent=function(H){return arguments.length?(c[0][0]=+H[0][0],c[1][0]=+H[1][0],c[0][1]=+H[0][1],c[1][1]=+H[1][1],j):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},j.constrain=function(H){return arguments.length?(e=H,j):e},j.duration=function(H){return arguments.length?(p=+H,j):p},j.interpolate=function(H){return arguments.length?(w=H,j):w},j.on=function(){var H=m.on.apply(m,arguments);return H===m?j:H},j.clickDistance=function(H){return arguments.length?(Q=(H=+H)*H,j):Math.sqrt(Q)},j.tapDistance=function(H){return arguments.length?(Z=+H,j):Z},j}().extent([[0,0],[this.width,this.height]]).on("zoom",function r({transform:i}){e.g.attr("transform",i)})),this.element.append(this.svg.node()),this.svg.attr("width",this.width).attr("height",this.height),this.options.directed&&this.svg.append("defs").selectAll("marker").data(this.groups).join("marker").attr("id",i=>`arrow-${i}`).attr("viewBox","0 -5 10 10").attr("refX",30).attr("refY",0).attr("markerWidth",10).attr("markerHeight",10).attr("orient","auto").append("path").attr("fill",this.color).attr("d","M0,-5L10,0L0,5")}createLink(){this.link=this.g.append("g").attr("fill","none").attr("stroke-width",1.5).selectAll("path").data(this.characterLinks).join("path").attr("stroke",e=>this.color(e.group)).attr("marker-end",e=>`url(${new URL(`#arrow-${e.group}`,location.toString())})`)}createNode(){this.node=this.g.append("g").attr("fill","currentColor").attr("stroke-linecap","round").attr("stroke-linejoin","round").selectAll("g").data(this.nodes).join("g"),this.options.drag&&this.node.call(this.drag(this.simulation)),this.node.append("circle").attr("stroke","black").attr("stroke-width",1).attr("r",e=>e.score).style("fill",e=>this.color(e.group)),this.node.append("text").text(e=>""!==e.label?e.label:e.id).style("font-size","1rem").style("color","white").style("text-anchor","middle").style("dominant-baseline","central")}getId(e){return e.id}drag(e){return function cc(){var p,w,m,M,t=oc,n=sc,e=ac,r=uc,i={},u=ar("start","drag","end"),c=0,P=0;function O(X){X.on("mousedown.drag",R).filter(r).on("touchstart.drag",Z).on("touchmove.drag",j,ic).on("touchend.drag touchcancel.drag",nt).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function R(X,ht){if(!M&&t.call(this,X,ht)){var xt=at(this,n.call(this,X,ht),X,ht,"mouse");!xt||(ie(X.view).on("mousemove.drag",rt,On).on("mouseup.drag",Q,On),No(X.view),vi(X),m=!1,p=X.clientX,w=X.clientY,xt("start",X))}}function rt(X){if(yn(X),!m){var ht=X.clientX-p,xt=X.clientY-w;m=ht*ht+xt*xt>P}i.mouse("drag",X)}function Q(X){ie(X.view).on("mousemove.drag mouseup.drag",null),Mo(X.view,m),yn(X),i.mouse("end",X)}function Z(X,ht){if(t.call(this,X,ht)){var Ot,Ct,xt=X.changedTouches,kt=n.call(this,X,ht),_t=xt.length;for(Ot=0;Ot<_t;++Ot)(Ct=at(this,kt,X,ht,xt[Ot].identifier,xt[Ot]))&&(vi(X),Ct("start",X,xt[Ot]))}}function j(X){var kt,_t,ht=X.changedTouches,xt=ht.length;for(kt=0;kt<xt;++kt)(_t=i[ht[kt].identifier])&&(yn(X),_t("drag",X,ht[kt]))}function nt(X){var kt,_t,ht=X.changedTouches,xt=ht.length;for(M&&clearTimeout(M),M=setTimeout(function(){M=null},500),kt=0;kt<xt;++kt)(_t=i[ht[kt].identifier])&&(vi(X),_t("end",X,ht[kt]))}function at(X,ht,xt,kt,_t,Ot){var Zt,It,H,Ct=u.copy(),wt=Oe(Ot||xt,ht);if(null!=(H=e.call(X,new wi("beforestart",{sourceEvent:xt,target:O,identifier:_t,active:c,x:wt[0],y:wt[1],dx:0,dy:0,dispatch:Ct}),kt)))return Zt=H.x-wt[0]||0,It=H.y-wt[1]||0,function At(st,vt,Mt){var Nt,Et=wt;switch(st){case"start":i[_t]=At,Nt=c++;break;case"end":delete i[_t],--c;case"drag":wt=Oe(Mt||vt,ht),Nt=c}Ct.call(st,X,new wi(st,{sourceEvent:vt,subject:H,target:O,identifier:_t,active:Nt,x:wt[0]+Zt,y:wt[1]+It,dx:wt[0]-Et[0],dy:wt[1]-Et[1],dispatch:Ct}),kt)}}return O.filter=function(X){return arguments.length?(t="function"==typeof X?X:Cr(!!X),O):t},O.container=function(X){return arguments.length?(n="function"==typeof X?X:Cr(X),O):n},O.subject=function(X){return arguments.length?(e="function"==typeof X?X:Cr(X),O):e},O.touchable=function(X){return arguments.length?(r="function"==typeof X?X:Cr(!!X),O):r},O.on=function(){var X=u.on.apply(u,arguments);return X===u?O:X},O.clickDistance=function(X){return arguments.length?(P=(X=+X)*X,O):Math.sqrt(P)},O}().on("start",function r(c,p){c.active||e.alphaTarget(.3).restart(),p.fx=p.x,p.fy=p.y}).on("drag",function i(c,p){p.fx=c.x,p.fy=c.y}).on("end",function u(c,p){c.active||e.alphaTarget(0),p.fx=null,p.fy=null})}cluster(e){return function i(u){for(const c of e){const p=e.filter(M=>M.group===c.group),w=p.reduce((M,P)=>M+P.x,0)/p.length,m=p.reduce((M,P)=>M+P.y,0)/p.length;c.vx+=(w-c.x)*u*.7,c.vy+=(m-c.y)*u*.7}}}linkArc(e){const r=Math.hypot(e.target.x-e.source.x,e.target.y-e.source.y);return`\n    M${e.source.x},${e.source.y}\n    A${r},${r} 0 0,1 ${e.target.x},${e.target.y}\n  `}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["d3-network"]],inputs:{nodes:"nodes",links:"links",options:"options",width:"width",height:"height"},features:[o.qOj,o.TTD],decls:2,vars:1,consts:[[1,"svg-container","w-full"],[1,"h-full","w-full",3,"id"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0),o._UZ(1,"div",1),o.qZA()),2&e&&(o.xp6(1),o.MGl("id","",r.id,"-network"))},styles:[".svg-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100%;overflow:hidden}.svg-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{max-width:100%;max-height:100%}"]}),t})();var Ur=N(7423),Rr=N(9118);const Wh=function(){return["/wiki/network"]},Fh=function(){return["/wiki/analysis"]},Bh=[{path:"",component:(()=>{class t extends k{constructor(e,r,i){super(),this.characterApi=e,this.relationshipApi=r,this.authApi=i,this.nodes=[],this.edges=[],this.characters=[],this.relationships=[],this.networkOptions={zoom:!1}}ngOnInit(){var e=this;this.subscribe(this.characterApi.cosmereCharacters(),r=>this.onCharactersChanges(r)),this.subscribe(this.relationshipApi.relationshipsByBook("mistborn1"),r=>this.onRelationshipsChanges(r)),(0,_.defer)((0,$.Z)(function*(){yield e.characterApi.fetchAllCosmereCharacter(),yield e.relationshipApi.fetchAllCosmereRelationship()}))}generateNetworkParameters(){this.edges=d(this.relationships);const e=new T.UndirectedGraph;v(this.relationships).forEach(u=>e.addNode(u)),this.relationships.forEach(u=>e.addEdge(u.characterId1,u.characterId2));const i=W()(e);this.nodes=g(this.characters,this.relationships).filter(u=>this.edges.map(c=>c.source).includes(u.id)||this.edges.map(c=>c.target).includes(u.id)),this.nodes=this.nodes.map(u=>Object.assign(Object.assign({},u),{group:i[u.id]}))}onCharactersChanges(e){this.characters=e,this.generateNetworkParameters()}onRelationshipsChanges(e){this.relationships=e,this.generateNetworkParameters()}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(Lt),o.Y36(Rt),o.Y36(Xt.z))},t.\u0275cmp=o.Xpm({type:t,selectors:[["home"]],features:[o.qOj],decls:26,vars:25,consts:[[1,"inset-0","flex","flex-col","min-w-0","w-full","overflow-x-hidden"],[1,"flex","flex-col","mx-100","text-center","p-6","gap-5"],[1,"font-black","mt-3","text-7xl","text-center","mb-7"],[2,"height","600px",3,"nodes","links","options"],[1,"flex","flex-col"],[1,"font-bold","mt-3","text-2xl","text-center","mb-3"],["mat-button","",1,"bg-primary","text-lg",3,"routerLink"],[1,"font-bold","mt-3","text-2xl","text-center","mb-7"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o._uU(3),o.ALo(4,"trans"),o.qZA(),o._UZ(5,"d3-network",3),o.TgZ(6,"div",4),o.TgZ(7,"div",5),o._uU(8),o.ALo(9,"trans"),o.qZA(),o.TgZ(10,"div"),o.TgZ(11,"button",6),o._uU(12),o.ALo(13,"trans"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(14,"div",4),o.TgZ(15,"div",5),o._uU(16),o.ALo(17,"trans"),o.qZA(),o.TgZ(18,"div"),o.TgZ(19,"button",6),o._uU(20),o.ALo(21,"trans"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(22,"div",4),o.TgZ(23,"div",7),o._uU(24),o.ALo(25,"trans"),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(3),o.hij(" ",o.lcZ(4,11,"home.title")," "),o.xp6(2),o.Q6J("nodes",r.nodes)("links",r.edges)("options",r.networkOptions),o.xp6(3),o.hij(" ",o.lcZ(9,13,"home.network.1")," "),o.xp6(3),o.Q6J("routerLink",o.DdM(23,Wh)),o.xp6(1),o.hij(" ",o.lcZ(13,15,"home.connections")," "),o.xp6(4),o.hij(" ",o.lcZ(17,17,"home.analysis.1")," "),o.xp6(3),o.Q6J("routerLink",o.DdM(24,Fh)),o.xp6(1),o.hij(" ",o.lcZ(21,19,"home.analysis")," "),o.xp6(4),o.hij(" ",o.lcZ(25,21,"home.me.1")," "))},directives:[zi,Ur.lW,B.rH],pipes:[Rr.u],encapsulation:2}),t})()}];var $h=N(5245),Zn=N(7791),Zr=N(6767),jr=N(393);let Wr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[]]}),t})(),Yh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[B.Bz.forChild(Bh),Ur.ot,$h.Ps,Zn.m,Zr.d,jr.ZD,jr.Cl,Wr]]}),t})();const ss=()=>({id:(0,I.V)(),books:[]}),as=()=>({configuration:ss()});let Xh=(()=>{class t extends K.m1{constructor(){super(as()),this.configuration$=this.select(e=>e.configuration)}saveConfiguration(e){(0,_.isEqual)(this.get().configuration,e)||this.patchState(r=>({configuration:e}))}syncState(){return this.get()}syncConfiguration(){return this.get().configuration}reset(){this.patchState(as())}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Gi=(()=>{class t{constructor(e){this.store=e}syncConfiguration(){return this.store.syncState().configuration}configuration(){return this.store.configuration$}saveConfiguration(e){this.store.saveConfiguration(e)}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(Xh))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const us=function Vh(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)};var ke=N(3075);let cs=(()=>{class t{constructor(e){this.formBuilder=e}build(e,r=[],i=[]){const u={};return Object.keys(e).forEach(c=>{const p=e[c],w=this.getValidator(c,r);if(u[c]=[p,w],i.includes(c)&&(0,_.isArray)(p)){const m=[];p.forEach(M=>{m.push(us(M)?this.build(M,r):M)}),u[c]=this.formBuilder.array(m)}if(!i.includes(c)&&!(0,_.isArray)(p)&&us(p)){const m=this.extractSubValidator(c,r);u[c]=this.build(p,m)}}),this.formBuilder.group(u)}extractSubValidator(e,r){return r.filter(i=>i.key.startsWith(e)).map(i=>({key:i.key.replace(e+".",""),validators:i.validators}))}getValidator(e,r){const i=r.find(u=>u.key===e);return i?i.validators:[]}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(ke.qu))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Hh=(()=>{class t extends K.m1{constructor(){super({books:[]}),this.books$=this.select(e=>e.books)}saveAllBooks(e){(0,_.isEqual)(this.get().books,e)||this.patchState(r=>({books:ft(r.books,e)}))}syncState(){return this.get()}syncBook(e){return it(e,this.get().books)}reset(){this.patchState({books:[]})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ii=(()=>{class t{constructor(e,r){this.api=e,this.store=r}fetchAllBooks(){var e=this;return(0,$.Z)(function*(){const r=yield e.api.get("books");e.store.saveAllBooks(r)})()}syncAllBooks(){return this.store.syncState().books}allBooks(){return this.store.books$}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(J),o.LFG(Hh))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ls=N(678),Ue=N(9808),Li=N(9895),bn=N(7322),Fr=N(4107),Ti=N(508);function qh(t,n){if(1&t&&(o.TgZ(0,"mat-option",12),o._uU(1),o.ALo(2,"uppercase"),o.ALo(3,"trans"),o.qZA()),2&t){const e=n.$implicit;o.Q6J("value",e.id),o.xp6(1),o.hij(" ",o.lcZ(2,2,o.lcZ(3,4,e.title))," ")}}function Kh(t,n){if(1&t&&(o.TgZ(0,"div",5),o.TgZ(1,"app-card",6),o.TgZ(2,"form",7),o.TgZ(3,"mat-form-field",8),o.TgZ(4,"mat-label",9),o._uU(5),o.ALo(6,"titlecase"),o.ALo(7,"trans"),o.qZA(),o.TgZ(8,"mat-select",10),o.ALo(9,"trans"),o.YNc(10,qh,4,6,"mat-option",11),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t){const e=o.oxw();o.xp6(2),o.Q6J("formGroup",e.configurationForm),o.xp6(3),o.Oqu(o.lcZ(6,4,o.lcZ(7,6,"books"))),o.xp6(3),o.s9C("placeholder",o.lcZ(9,8,"all.books")),o.xp6(2),o.Q6J("ngForOf",e.data.books)}}let fs=(()=>{class t extends Ht.H{constructor(e,r,i){super(),this.configurationApi=e,this.formBuilder=r,this.bookApi=i,this.configurationChanges=new o.vpe,this.showCard=!1,this.data={books:[]}}ngOnInit(){var e=this;this.subscribe(this.bookApi.allBooks(),r=>this.data.books=r),this.subscribe(this.configurationApi.configuration(),r=>this.setConfiguration(r)),(0,_.defer)((0,$.Z)(function*(){yield e.bookApi.fetchAllBooks()})),this.buildForm()}buildForm(){this.configurationForm=this.formBuilder.build(this.configuration),this.configurationForm.get("books").valueChanges.subscribe(e=>{this.configuration.books=e,this.saveConfiguration()})}toggle(){this.showCard=!this.showCard}setConfiguration(e){this.configuration=Object.assign({},e),this.configurationForm&&this.configurationForm.patchValue(e)}saveConfiguration(){this.configurationApi.saveConfiguration(this.configuration)}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(Gi),o.Y36(cs),o.Y36(Ii))},t.\u0275cmp=o.Xpm({type:t,selectors:[["configuration"]],outputs:{configurationChanges:"configurationChanges"},features:[o.qOj],decls:5,vars:1,consts:[[1,"absolute","top-0","right-0","z-50"],[1,"flex","flex-col","items-end","pr-6"],["mat-icon-button","",3,"click"],["icon","settings"],["class","z-50",4,"ngIf"],[1,"z-50"],[1,"flex","flex-col","h-full","p-6","gap-5","w-100"],[1,"w-full",3,"formGroup"],["floatLabel","always",1,"w-full"],[1,"text-white"],["multiple","","formControlName","books",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"button",2),o.NdJ("click",function(){return r.toggle()}),o._UZ(3,"app-icon",3),o.qZA(),o.YNc(4,Kh,11,10,"div",4),o.qZA(),o.qZA()),2&e&&(o.xp6(4),o.Q6J("ngIf",r.showCard))},directives:[Ur.lW,ls.o,Ue.O5,Li.A,ke._Y,ke.JL,ke.sg,bn.KE,bn.hX,Fr.gD,ke.JJ,ke.u,Ue.sg,Ti.ey],pipes:[Ue.rS,Rr.u,Ue.gd],encapsulation:2,changeDetection:0}),t})();var Jh=N(340);let Qh=(()=>{class t extends K.m1{constructor(){super({planets:[]}),this.planets$=this.select(e=>e.planets)}saveAllPlanets(e){(0,_.isEqual)(this.get().planets,e)||this.patchState(r=>({planets:ft(r.planets,e)}))}syncState(){return this.get()}syncPlanet(e){return it(e,this.get().planets)}reset(){this.patchState({planets:[]})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),tl=(()=>{class t{constructor(e,r){this.api=e,this.store=r}fetchAllPlanets(){var e=this;return(0,$.Z)(function*(){const r=yield e.api.get("planets");e.store.saveAllPlanets(r)})()}syncAllPlanets(){return this.store.syncState().planets}allPlanets(){return this.store.planets$}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(J),o.LFG(Qh))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var el=N(335);let nl=(()=>{class t extends Ht.H{constructor(e,r,i,u,c,p,w){super(),this.characterApi=e,this.relationshipApi=r,this.formBuilder=i,this.bookApi=u,this.planetApi=c,this.modal=p,this.configurationApi=w,this.nodes=[],this.edges=[],this.characters=[],this.relationships=[]}ngOnInit(){var e=this;return(0,$.Z)(function*(){e.subscribe(e.characterApi.cosmereCharacters(),r=>{e.onCharactersChanges(r)}),e.subscribe(e.relationshipApi.cosmereRelationships(),r=>{e.onRelationshipsChanges(r)}),e.subscribe(e.configurationApi.configuration(),r=>e.onConfigurationChanges(r)),(0,_.defer)((0,$.Z)(function*(){yield e.characterApi.fetchAllCosmereCharacter(),yield e.relationshipApi.fetchAllCosmereRelationship()}))})()}regenerateNetworkParameters(){this.edges=d(this.filterRelationships(this.relationships));const e=new T.UndirectedGraph;v(this.relationships).forEach(u=>e.addNode(u)),this.filterRelationships(this.relationships).forEach(u=>{e.hasEdge(u.characterId1,u.characterId2)||e.addEdge(u.characterId1,u.characterId2)});const i=W()(e,{rng:Jh("1231312"),resolution:2});this.nodes=g(this.filterCharacters(this.characters),this.filterRelationships(this.relationships)).filter(u=>this.edges.map(c=>c.source).includes(u.id)||this.edges.map(c=>c.target).includes(u.id)),this.nodes=this.nodes.map(u=>Object.assign(Object.assign({},u),{group:i[u.id]})),this.edges=this.edges.map(u=>{const c=this.nodes.find(m=>m.id===u.target),p=this.nodes.find(m=>m.id===u.source);if(void 0===c||void 0===p)return u;const w=c.score>p.score?i[c.id]:i[p.id];return Object.assign(Object.assign({},u),{group:w})})}filterCharacters(e){return e}filterRelationships(e){if(!this.configuration)return e;let r=e;return this.configuration.books.length>0&&(r=r.filter(i=>this.configuration.books.includes(i.bookId))),r}onCharactersChanges(e){this.characters=e,this.regenerateNetworkParameters()}onRelationshipsChanges(e){this.relationships=e,this.regenerateNetworkParameters()}onConfigurationChanges(e){this.configuration=e,this.regenerateNetworkParameters()}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(Lt),o.Y36(Rt),o.Y36(cs),o.Y36(Ii),o.Y36(tl),o.Y36(el.u),o.Y36(Gi))},t.\u0275cmp=o.Xpm({type:t,selectors:[["characters-relationships-graph"]],features:[o.qOj],decls:2,vars:2,consts:[[1,"relative","w-full","h-full","justify-center"],[3,"nodes","links"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0),o._UZ(1,"d3-network",1),o.qZA()),2&e&&(o.xp6(1),o.Q6J("nodes",r.nodes)("links",r.edges))},directives:[zi],encapsulation:2}),t})();const rl=[{path:"",component:(()=>{class t extends k{constructor(){super()}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["network"]],features:[o.qOj],decls:4,vars:0,consts:[[1,"inset-0","flex","flex-col","min-w-0","w-full","overflow-hidden"],[1,"flex","flex-row","h-full","grow","justify-center"],[1,"w-full"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0),o._UZ(1,"configuration"),o.TgZ(2,"div",1),o._UZ(3,"characters-relationships-graph",2),o.qZA(),o.qZA())},directives:[fs,nl],encapsulation:2}),t})()}];let il=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[]]}),t})(),ol=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[bn.lN,Fr.LD,Ue.ez,Zr.d,ke.UX,Zn.m,il,Wr]]}),t})(),sl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[B.Bz.forChild(rl),ol,jr.ZD,Zn.m]]}),t})();var al=N(5547),ul=N(3378),cl=N.n(ul),hl=N(5894),ll=N.n(hl),fl=N(1063),dl=N.n(fl);const jn=t=>(t=>t.map(([n,e])=>({label:n,value:e})))(F().map((t=>(0,_.fromPairs)((0,_.sortBy)((0,_.toPairs)(t),1).reverse()))(t),(n,e)=>[e,n])),Oi=t=>{const n=Math.min(...t.map(r=>r.value)),e=Math.max(...t.map(r=>r.value));return t.map(r=>Object.assign(Object.assign({},r),{value:(r.value-n)/(e-n)}))};var gl=N(5408),yl=N(5149),ml=N(9637);let xl=(()=>{class t extends Ht.H{constructor(){super(),this.config={colors:{highlight:"#b11adc",highlightLight:"#d975f6",text:"#777",xAxis:"#eee",yAxis:"#999"},height:500,width:640,margin:{top:30,left:150,right:5,bottom:0},gap:.4,xFormat:"",animationDuration:300,ticksInterval:10,type:wn,titleColor:"white",title:""},this.id=(0,I.V)()}ngOnChanges(e){this.create()}ngAfterViewInit(){this.create()}create(){!this.data||0===this.data.length||(this.data=this.data.splice(0,10),this.element=document.getElementById(this.id+"-vertical-bar-chart"),this.initValues(),this.initScales(),this.createSvg())}initValues(){this.X=this.data.map(e=>e.value),this.Y=this.data.map(e=>e.label)}initScales(){const e=[this.config.margin.left,this.config.width-this.config.margin.right],r=[this.config.margin.top,this.config.height-this.config.margin.bottom];this.xDomain=[0,jt(this.X)],this.yDomain=new Br(this.Y),this.xScale=this.config.type(this.xDomain,e),this.yScale=Pn(this.yDomain,r).padding(this.config.gap),this.xAxis=function Ve(t){return ze(1,t)}(this.xScale).ticks(this.config.width/80,this.config.xFormat),this.yAxis=Sn(this.yScale).tickSizeOuter(0)}createSvg(){const e=ae(this.X.length).filter(i=>this.yDomain.has(this.Y[i]));ie(this.element).select("svg").remove(),this.svg=this.svg=ie(this.element).append("svg").attr("width",this.config.width).attr("height",this.config.height).attr("viewBox",[0,0,this.config.width,this.config.height]).attr("style","max-width: 100%; height: auto; height: intrinsic;"),this.svg.append("g").attr("transform",`translate(0,${this.config.margin.top})`).call(this.xAxis).call(i=>i.select(".domain").remove()).call(i=>i.selectAll(".tick line").clone().attr("y2",this.config.height-this.config.margin.top-this.config.margin.bottom).attr("stroke-opacity",.1)).call(i=>i.append("text").attr("x",this.config.width-this.config.margin.right).attr("y",-22).attr("fill","none").attr("text-anchor","end"));const r=this.svg.append("g").selectAll("rect").data(e).join("rect").attr("x",this.xScale(0)).attr("y",i=>this.yScale(this.Y[i])).attr("width",0).attr("height",this.yScale.bandwidth());this.svg.append("g").attr("fill",this.config.titleColor).attr("text-anchor","end").attr("font-family","sans-serif").attr("font-size",10).selectAll("text").data(e).join("text").attr("x",i=>this.xScale(this.X[i])).attr("y",i=>this.yScale(this.Y[i])+this.yScale.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(this.config.title).call(i=>i.filter(u=>this.xScale(this.X[u])-this.xScale(0)<20).attr("dx",4).attr("fill",this.config.titleAltColor).attr("text-anchor","start")),this.svg.append("g").attr("transform",`translate(${this.config.margin.left},0)`).call(this.yAxis),r.transition().style("fill",(i,u)=>this.getBarColor(u)).duration(this.config.animationDuration).delay((i,u)=>u*this.config.animationDuration/3).attr("height",this.yScale.bandwidth()).attr("width",(i,u)=>this.xScale(this.X[u])-this.config.margin.left)}getBarColor(e,r=0){return`rgb(${(210+r).toString()}, ${(10+20*e+r).toString()}, ${(220-20*e+r).toString()})`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["vertical-bar-chart"]],inputs:{data:"data",config:"config"},features:[o.qOj,o.TTD],decls:1,vars:1,consts:[[1,"flex","flex-1",3,"id"]],template:function(e,r){1&e&&o._UZ(0,"div",0),2&e&&o.MGl("id","",r.id,"-vertical-bar-chart")},encapsulation:2}),t})();const Al=({color:t,title:n,tickSize:e=6,width:r=36+e,height:i=320,marginTop:u=20,marginRight:c=10+e,marginBottom:p=20,marginLeft:w=5,ticks:m=i/64,tickFormat:M,tickValues:P}={})=>{const O=rs("svg").attr("width",r).attr("height",i).attr("viewBox",[0,0,r,i]).style("overflow","visible").style("display","block");let rt,R=Q=>Q.selectAll(".tick line").attr("x1",w-r+c);if(t.interpolate){const Q=Math.min(t.domain().length,t.range().length);rt=t.copy().rangeRound(Wo(vn(i-p,u),Q)),O.append("image").attr("x",w).attr("y",u).attr("width",r-w-c).attr("height",i-u-p).attr("preserveAspectRatio","none").attr("xlink:href",ps(t.copy().domain(Wo(vn(0,1),Q))).toDataURL())}else if(t.interpolator){if(rt=Object.assign(t.copy().interpolator(Ei(i-p,u)),{range:()=>[i-p,u]}),O.append("image").attr("x",w).attr("y",u).attr("width",r-w-c).attr("height",i-u-p).attr("preserveAspectRatio","none").attr("xlink:href",ps(t.interpolator()).toDataURL()),!rt.ticks){if(void 0===P){const Q=Math.round(m+1);P=ae(Q).map(Z=>function Ye(t,n,e){if(t=Float64Array.from(function*Ne(t,n){if(void 0===n)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let e=-1;for(let r of t)null!=(r=n(r,++e,t))&&(r=+r)>=r&&(yield r)}}(t,e)),(r=t.length)&&!isNaN(n=+n)){if(n<=0||r<2)return dt(t);if(n>=1)return jt(t);var r,i=(r-1)*n,u=Math.floor(i),c=jt(se(t,u).subarray(0,u+1));return c+(dt(t.subarray(u+1))-c)*(i-u)}}(t.domain(),Z/(Q-1)))}"function"!=typeof M&&(M=Dr(void 0===M?",f":M))}}else if(t.invertExtent){const Q=t.thresholds?t.thresholds():t.quantiles?t.quantiles():t.domain(),Z=void 0===M?j=>j:"string"==typeof M?Dr(M):M;rt=wn().domain([-1,t.range().length-1]).rangeRound([i-p,u]),O.append("g").selectAll("rect").data(t.range()).join("rect").attr("y",(j,nt)=>rt(nt)).attr("x",w).attr("height",(j,nt)=>rt(nt-1)-rt(nt)).attr("width",r-c-w).attr("fill",j=>j),P=ae(Q.length),M=j=>Z(Q[j],j)}else rt=Pn().domain(t.domain()).rangeRound([i-p,u]),O.append("g").selectAll("rect").data(t.domain()).join("rect").attr("y",rt).attr("x",w).attr("height",Math.max(0,rt.bandwidth()-1)).attr("width",r-w-c).attr("fill",t),R=()=>{};return O.append("g").attr("transform",`translate(${r-c},0)`).call(function Cn(t){return ze(2,t)}(rt).ticks(m,"string"==typeof M?M:void 0).tickFormat("function"==typeof M?M:void 0).tickSize(e).tickValues(P)).call(R).call(Q=>Q.select(".domain").remove()).call(Q=>Q.append("text").attr("x",w-r+c).attr("y",0).attr("fill","currentColor").attr("text-anchor","start").attr("font-weight","bold").attr("class","title").text(n)),O.node()};function ps(t,n=256){const e=document.createElement("canvas");e.width=1,e.height=n;const r=e.getContext("2d");for(let i=0;i<n;++i)r.fillStyle=t(i/(n-1)),r.fillRect(0,n-i,1,1);return e}let El=(()=>{class t extends Ht.H{constructor(){super(),this.xLabel="",this.yLabel="",this.config={height:500,width:500,margin:{top:20,left:40,right:50,bottom:30},inset:{top:6,right:6,bottom:6,left:6},dot:{radius:20,strokeWidth:0,strokeColor:"white"},domain:{x:[.3,1],y:[.3,1]},padding:10,animationDuration:300,ticksInterval:10,color:Nh},this.id=(0,I.V)()}ngOnChanges(e){this.create()}ngAfterViewInit(){this.create()}create(){!this.data||0===this.data.length||(this.element=document.getElementById(this.id+"-chart-3d"),this.initValues(),this.createColorBar(),this.initScales(),this.createAxis(),this.createSvg())}createColorBar(){const e=Al({color:Ho([0,1],this.color),title:"Degree"});this.legendElement=document.getElementById(this.id+"-legend-bar"),this.legendElement&&(ie(this.legendElement).select("svg").remove(),this.legendElement.append(e))}initValues(){this.color=this.config.color,this.X=this.data.map(e=>e.x),this.Y=this.data.map(e=>e.y),this.Z=this.data.map(e=>e.z),this.labels=this.data.map(e=>e.label)}initScales(){const r=[this.config.height-this.config.margin.bottom-this.config.inset.bottom,this.config.margin.top+this.config.inset.top];this.xScale=wn(this.config.domain.x,[this.config.margin.left+this.config.inset.left,this.config.width-this.config.margin.right-this.config.inset.right]),this.yScale=wn(this.config.domain.y,r)}createAxis(){this.xAxis=Re(this.xScale).ticks(this.config.width/80),this.yAxis=Sn(this.yScale).ticks(this.config.height/50)}createSvg(){ie(this.element).select("svg").remove(),this.svg=ie(this.element).append("svg").attr("width",this.config.width).attr("height",this.config.height).attr("viewBox",[0,0,this.config.width,this.config.height]).attr("style","max-width: 100%; this.options.height: auto; height: intrinsic;"),this.svg.append("g").attr("transform",`translate(0,${this.config.height-this.config.margin.bottom})`).call(this.xAxis).call(i=>i.select(".domain").remove()).call(i=>i.selectAll(".tick line").clone().attr("y2",this.config.margin.top+this.config.margin.bottom-this.config.height).attr("stroke-opacity",.1)).call(i=>i.append("text").attr("x",this.config.width).attr("y",this.config.margin.bottom-4).attr("fill","currentColor").attr("text-anchor","end").text(this.xLabel)),this.svg.append("g").attr("transform",`translate(${this.config.margin.left},0)`).call(this.yAxis).call(i=>i.select(".domain").remove()).call(i=>i.selectAll(".tick line").clone().attr("x2",this.config.width-this.config.margin.left-this.config.margin.right).attr("stroke-opacity",.1)).call(i=>i.append("text").attr("x",-this.config.margin.left).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text(this.yLabel));const r=ae(this.X.length).filter(i=>!isNaN(this.X[i])&&!isNaN(this.Y[i]));this.svg.append("g").attr("stroke",this.config.dot.strokeColor).attr("stroke-width",this.config.dot.strokeWidth).selectAll("circle").data(r).join("circle").attr("cx",i=>this.xScale(this.X[i])).attr("cy",i=>this.yScale(this.Y[i])).attr("fill",i=>this.color(this.Z[i])).attr("r",this.config.dot.radius).attr("opacity",.5),this.svg.append("g").attr("font-family","sans-serif").attr("font-size",15).attr("stroke-linejoin","round").attr("stroke-linecap","round").selectAll("text").data(r).join("text").attr("x",i=>this.xScale(this.X[i])).attr("y",i=>this.yScale(this.Y[i])).text(i=>this.labels[i]).style("fill","white").style("text-anchor","middle").style("dominant-baseline","central")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["chart-3d"]],inputs:{data:"data",xLabel:"xLabel",yLabel:"yLabel",config:"config"},features:[o.qOj,o.TTD],decls:3,vars:2,consts:[[1,"flex","flex-row"],[3,"id"],[1,"flex","flex-1","items-end","pb-10",3,"id"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0),o._UZ(1,"div",1),o._UZ(2,"div",2),o.qZA()),2&e&&(o.xp6(1),o.MGl("id","",r.id,"-chart-3d"),o.xp6(1),o.MGl("id","",r.id,"-legend-bar"))},encapsulation:2}),t})(),_l=(()=>{class t extends Ht.H{constructor(){super(),this.options={colors:{highlight:"#b11adc",highlightLight:"#d975f6",text:"#777",xAxis:"#eee",yAxis:"#999"},height:200,width:600,margin:{top:10,left:70,right:10,bottom:20},animationDuration:300,ticksInterval:10},this.id=(0,I.V)()}ngOnChanges(e){this.create()}ngAfterViewInit(){this.create()}create(){!this.data||0===this.data.length||(this.data=this.data.splice(0,10),this.element=document.getElementById(this.id+"-barchart"),this.initValues(),this.initScales(),this.initChart(),this.createAxis(),this.createBars())}initChart(){ie(this.element).select("svg").remove(),this.svg=ie(this.element).append("svg").attr("viewBox",`0 0 ${this.options.width} ${this.options.height+100}`)}initValues(){const e=Number(dt(this.data.map(i=>i.value))),r=Number(jt(this.data.map(i=>i.value)));this.minValue=e<0?e-this.options.ticksInterval:0,this.maxValue=r}initScales(){this.yScale=wn().domain([this.minValue,this.maxValue]).range([this.options.height-this.options.margin.bottom,this.options.margin.top]),this.xScale=Pn().domain(ae(this.data.length)).range([this.options.margin.left+this.options.margin.right,this.options.width-this.options.margin.right]).paddingInner(this.calculatePadding(this.data.length))}getBarMaxWidth(){const e=window.innerWidth;return e<=768?e<=480?10:15:20}getBarColor(e,r=0){return`rgb(${(210+r).toString()}, ${(10+20*e+r).toString()}, ${(220-20*e+r).toString()})`}createBars(){this.svg.selectAll(".bar").data(this.data).enter().append("rect").classed("bar",!0).style("fill","transparent").style("display",r=>"number"==typeof r.value?"initial":"none").attr("x",(r,i)=>this.xScale(i)).attr("y",this.yScale(0)).attr("width",this.xScale.bandwidth()).attr("height",0).transition().style("fill",(r,i)=>this.getBarColor(i)).duration(this.options.animationDuration).delay((r,i)=>i*this.options.animationDuration/3).attr("x",(r,i)=>this.xScale(i)).attr("y",(r,i)=>this.yScale(r.value<0?0:r.value)).attr("width",this.xScale.bandwidth()).attr("height",(r,i)=>r.value<0?this.yScale(r.value)-this.yScale(0):this.yScale(0)-this.yScale(r.value))}createAxis(){const e=Re(this.xScale).tickSize(-this.options.width).tickFormat((i,u)=>this.data[u].label.toUpperCase()),r=Sn(this.yScale).tickSize(-this.options.width).tickFormat(i=>`${i}`).ticks(this.options.ticksInterval);this.svg.append("g").attr("class","axis x-axis").attr("transform",`translate(0, ${this.options.height-15})`).call(e).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end"),this.svg.append("g").attr("class","axis y-axis").attr("transform",`translate(${+this.options.margin.left}, 0)`).call(r),this.svg.selectAll(".axis .domain").remove(),this.svg.selectAll(".axis .tick text").style("fill",this.options.colors.text),this.svg.selectAll(".y-axis .tick line").style("stroke",this.options.colors.yAxis),this.svg.selectAll(".x-axis .tick line").style("stroke",this.options.colors.xAxis)}calculatePadding(e){return 1-e*this.getBarMaxWidth()/this.options.width}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["bar-chart"]],inputs:{data:"data",options:"options"},features:[o.qOj,o.TTD],decls:1,vars:1,consts:[[1,"flex","flex-1",3,"id"]],template:function(e,r){1&e&&o._UZ(0,"div",0),2&e&&o.MGl("id","",r.id,"-barchart")},encapsulation:2}),t})();const kl=[{path:"",component:(()=>{class t extends k{constructor(e,r,i){super(),this.relationshipApi=e,this.characterApi=r,this.configurationApi=i,this.pagerankEigenvectorAndDegreeCentrality=[],this.configuration=ss()}ngOnInit(){var e=this;return(0,$.Z)(function*(){e.subscribe(e.relationshipApi.cosmereRelationships(),r=>e.onRelationshipsChanges(r)),e.subscribe(e.characterApi.cosmereCharacters(),r=>e.onCharactersChanges(r)),e.subscribe(e.configurationApi.configuration(),r=>e.onConfigurationChanges(r)),yield e.relationshipApi.fetchAllCosmereRelationship(),yield e.characterApi.fetchAllCosmereCharacter()})()}analyseNetwork(e){var r=this;return(0,$.Z)(function*(){const i=(0,yl.dQ)(e),u=i.nodes(),c=(0,al.pagerank)(i,{getEdgeWeight:void 0,maxIterations:300});r.pagerankCosmere=jn(c);const p=dl()(i);r.betweennessCosmere=jn(p);const w=cl()(i);r.closenessCosmere=jn(w),r.closenessCosmere=(0,_.reject)(r.closenessCosmere,R=>1===R.value);const m=ll()(i,{maxIterations:200});r.eigenvectorCosmere=jn(m);const M=(0,gl.degreeCentrality)(i);r.degreeCentralityCosmere=jn(M),r.pageRankNormalized=Oi(r.pagerankCosmere);const P=Oi(r.eigenvectorCosmere),O=Oi(r.degreeCentralityCosmere);r.pagerankEigenvectorAndDegreeCentrality=u.map(R=>({label:R,x:r.pageRankNormalized.find(rt=>rt.label===R).value,y:P.find(rt=>rt.label===R).value,z:O.find(rt=>rt.label===R).value})).filter(R=>R.x>.3&&R.y>.3),console.log("calculateClusteringCoefficient",(t=>{let n=0;return t.forEachNode(e=>{n+=((t,n)=>{const e=t.neighbors(n),r=e.length;if(r<2)return 0;let i=0;for(let u=0;u<r;u++){const c=e[u];for(let p=u+1;p<r;p++)t.hasEdge(c,e[p])&&i++}return 2*i/(r*(r-1))})(t,e)}),n/t.order})(i)),console.log("calculateEccentricityCoefficient",(t=>{let n=0;return t.forEachNode(e=>{n+=(0,ml.eccentricity)(t,e)}),n/t.order})(i))})()}onRelationshipsChanges(e){var r=this;return(0,$.Z)(function*(){r.relationships=e,yield r.analyseNetwork(r.graph())})()}onCharactersChanges(e){var r=this;return(0,$.Z)(function*(){r.characters=e,yield r.analyseNetwork(r.graph())})()}onConfigurationChanges(e){var r=this;return(0,$.Z)(function*(){r.configuration=e,yield r.analyseNetwork(r.graph())})()}filterRelationships(e){if(!this.configuration)return e;let r=e;return this.configuration.books.length>0&&(r=r.filter(i=>this.configuration.books.includes(i.bookId))),r}graph(){const e=this.filterRelationships(this.relationships),r=new T.UndirectedGraph;return v(e).forEach(u=>r.addNode(this.getCharacterName(u))),e.forEach(u=>{r.hasEdge(this.getCharacterName(u.characterId1),this.getCharacterName(u.characterId2))||r.addEdge(this.getCharacterName(u.characterId1),this.getCharacterName(u.characterId2))}),r}getCharacterName(e){if(0===this.characters.length)return e;const r=it(e,this.characters);return r&&r.name&&""!==r.name?r.name:e}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(Rt),o.Y36(Lt),o.Y36(Gi))},t.\u0275cmp=o.Xpm({type:t,selectors:[["network"]],features:[o.qOj],decls:49,vars:22,consts:[[1,"inset-0","flex","flex-col","min-w-0","w-full","h-screen"],[1,"mr-6"],[1,"flex","flex-col","p-10"],[1,"flex","flex-row","mt-5","gap-5"],[1,"flex","flex-col","p-10","basis-1/2"],[1,"flex","flex-row","text-xl","mb-5","justify-between"],["href","https://en.wikipedia.org/wiki/PageRank","target","_blank"],["icon","info",3,"tooltip"],[1,"w-full",3,"data"],[1,"flex","flex-col","p-6","basis-1/2"],[1,"text-xl","mb-5"],["href","https://networkofthrones.wordpress.com/fractal-protagonists/#:~:text=Recently%2C%20writer%20Mike%20Carey%20used,scale%20you%20consider%20the%20storyline.","target","_blank"],[1,"flex","flex-auto","w-full",3,"data","xLabel","yLabel"],[1,"flex","flex-auto","grow","p-6"],[1,"flex","flex-col","grow"],["href","https://en.wikipedia.org/wiki/Eigenvalues_and_eigenvectors","target","_blank"],["href","https://en.wikipedia.org/wiki/Betweenness_centrality","target","_blank"],["href","https://en.wikipedia.org/wiki/Closeness","target","_blank"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0),o._UZ(1,"configuration",1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"app-card",4),o.TgZ(5,"div",5),o.TgZ(6,"a",6),o.TgZ(7,"span"),o._uU(8,"PageRank"),o.qZA(),o.qZA(),o._UZ(9,"app-icon",7),o.ALo(10,"trans"),o.qZA(),o._UZ(11,"vertical-bar-chart",8),o.qZA(),o.TgZ(12,"app-card",9),o._UZ(13,"div",10),o.TgZ(14,"div",5),o.TgZ(15,"a",11),o.TgZ(16,"span"),o._uU(17,"Fractal protagonism"),o.qZA(),o.qZA(),o._UZ(18,"app-icon",7),o.ALo(19,"trans"),o.qZA(),o._UZ(20,"chart-3d",12),o.qZA(),o.qZA(),o.TgZ(21,"div",3),o.TgZ(22,"app-card",13),o.TgZ(23,"div",14),o.TgZ(24,"div",5),o.TgZ(25,"a",15),o.TgZ(26,"span"),o._uU(27,"Eigenvector"),o.qZA(),o.qZA(),o._UZ(28,"app-icon",7),o.ALo(29,"trans"),o.qZA(),o._UZ(30,"bar-chart",8),o.qZA(),o.qZA(),o.TgZ(31,"app-card",13),o.TgZ(32,"div",14),o.TgZ(33,"div",5),o.TgZ(34,"a",16),o.TgZ(35,"span"),o._uU(36,"Betweenness"),o.qZA(),o.qZA(),o._UZ(37,"app-icon",7),o.ALo(38,"trans"),o.qZA(),o._UZ(39,"bar-chart",8),o.qZA(),o.qZA(),o.TgZ(40,"app-card",13),o.TgZ(41,"div",14),o.TgZ(42,"div",5),o.TgZ(43,"a",17),o.TgZ(44,"span"),o._uU(45,"Closeness"),o.qZA(),o.qZA(),o._UZ(46,"app-icon",7),o.ALo(47,"trans"),o.qZA(),o._UZ(48,"bar-chart",8),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(9),o.Q6J("tooltip",o.lcZ(10,12,"info.pagerank")),o.xp6(2),o.Q6J("data",r.pageRankNormalized),o.xp6(7),o.Q6J("tooltip",o.lcZ(19,14,"info.fractal_protagonism")),o.xp6(2),o.Q6J("data",r.pagerankEigenvectorAndDegreeCentrality)("xLabel","pagerank")("yLabel","eigenvector"),o.xp6(8),o.Q6J("tooltip",o.lcZ(29,16,"info.eigenvector")),o.xp6(2),o.Q6J("data",r.eigenvectorCosmere),o.xp6(7),o.Q6J("tooltip",o.lcZ(38,18,"info.betweenness")),o.xp6(2),o.Q6J("data",r.betweennessCosmere),o.xp6(7),o.Q6J("tooltip",o.lcZ(47,20,"info.closeness")),o.xp6(2),o.Q6J("data",r.closenessCosmere))},directives:[fs,Li.A,ls.o,xl,El,_l],pipes:[Rr.u],encapsulation:2}),t})()}];let Cl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[B.Bz.forChild(kl),jr.ZD,Wr,Ue.ez,Zn.m,Zr.d]]}),t})();var Nl=N(4524);let Ml=(()=>{class t extends K.m1{constructor(){super({guides:[]}),this.guides$=this.select(e=>e.guides)}saveAllGuides(e){(0,_.isEqual)(this.get().guides,e)||this.patchState(r=>({guides:ft(r.guides,e)}))}syncState(){return this.get()}syncGuide(e){return it(e,this.get().guides)}reset(){this.patchState({guides:[]})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Dl=(()=>{class t{constructor(e,r){this.api=e,this.store=r}fetchAllGuides(){var e=this;return(0,$.Z)(function*(){const r=yield e.api.get("guides");e.store.saveAllGuides(r)})()}syncAllGuides(){return this.store.syncState().guides}allGuides(){return this.store.guides$}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(J),o.LFG(Ml))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),zl=(()=>{class t extends K.m1{constructor(){super({sagas:[]}),this.sagas$=this.select(e=>e.sagas)}saveAllSagas(e){(0,_.isEqual)(this.get().sagas,e)||this.patchState(r=>({sagas:ft(r.sagas,e)}))}syncState(){return this.get()}syncSaga(e){return it(e,this.get().sagas)}reset(){this.patchState({sagas:[]})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Gl=(()=>{class t{constructor(e,r){this.api=e,this.store=r}fetchAllSagas(){var e=this;return(0,$.Z)(function*(){const r=yield e.api.get("sagas");e.store.saveAllSagas(r)})()}syncAllSagas(){return this.store.syncState().sagas}allSagas(){return this.store.sagas$}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(J),o.LFG(zl))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Il(t,n){if(1&t&&(o.TgZ(0,"mat-option",12),o._uU(1),o.qZA()),2&t){const e=n.$implicit;o.Q6J("value",e.id),o.xp6(1),o.hij(" ",e.name," ")}}function Ll(t,n){if(1&t&&(o.TgZ(0,"div",13),o._UZ(1,"div",14),o.TgZ(2,"div"),o._uU(3),o.ALo(4,"trans"),o.qZA(),o.qZA()),2&t){const e=n.$implicit,r=o.oxw();o.xp6(1),o.Udp("background-color",r.colors()[e]),o.xp6(2),o.Oqu(o.lcZ(4,3,"guide."+e))}}const Tl=[{path:"",component:(()=>{class t extends k{constructor(e,r,i){super(),this.bookApi=e,this.guideApi=r,this.sagaApi=i,this.nodes=[],this.edges=[],this.books=[],this.guides=[],this.sagas=[],this.guideRelationshipTypes=["highly_recommended","recommended","not_recommended","optional"],this.options={directed:!0,drag:!0,colors:this.colors(),curveEdges:!0},this.guideControl=new ke.NI}ngOnInit(){var e=this;return(0,$.Z)(function*(){e.subscribe(e.bookApi.allBooks(),r=>{e.onBooksChanged(r)}),e.subscribe(e.guideApi.allGuides(),r=>{e.onGuidesChanged(r)}),e.subscribe(e.sagaApi.allSagas(),r=>{e.onSagasChanged(r)}),e.subscribe(e.guideControl.valueChanges,r=>e.regenerateNetworkParameters()),(0,_.defer)((0,$.Z)(function*(){yield e.bookApi.fetchAllBooks(),yield e.guideApi.fetchAllGuides(),yield e.sagaApi.fetchAllSagas()}))})()}regenerateNetworkParameters(){if(0===this.guides.length||0===this.books.length)return;console.log(this.guideControl.value);const e=this.guides.find(r=>r.id===this.guideControl.value);this.nodes=this.books.map(r=>({id:r.id,label:(0,Nl.d)(r.title),group:this.getSagaFromBook(r),score:30})),this.edges=e.order.map(r=>({source:r.sourceId,target:r.targetId,weight:1,group:r.type}))}onBooksChanged(e){this.books=e,this.regenerateNetworkParameters()}onGuidesChanged(e){this.guides=e,this.guideControl.setValue(e[1].id),this.regenerateNetworkParameters()}onSagasChanged(e){this.sagas=e,this.regenerateNetworkParameters()}getSagaFromBook(e){var r,i,u;return null!==(u=null===(i=null===(r=this.sagas)||void 0===r?void 0:r.find(c=>c.bookIds.includes(e.id)))||void 0===i?void 0:i.title)&&void 0!==u?u:e.title}colors(){return{highly_recommended:"#00A78E",recommended:"#FFC107",not_recommended:"#E53935",optional:"#9E9E9E"}}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(Ii),o.Y36(Dl),o.Y36(Gl))},t.\u0275cmp=o.Xpm({type:t,selectors:[["network"]],features:[o.qOj],decls:17,vars:14,consts:[[1,"inset-0","flex","flex-col","min-w-0","w-full","overflow-hidden"],[1,"flex","flex-row","h-full","grow","justify-center"],[1,"h-full","w-full",3,"nodes","links","options"],[1,"absolute","bottom-0","right-0","z-50"],[1,"z-50"],[1,"flex","flex-col","p-6","gap-5","rounded-none"],["floatLabel","always",1,"w-full"],[1,"text-white"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[1,"text-xl"],["class","flex flex-row",4,"ngFor","ngForOf"],[3,"value"],[1,"flex","flex-row"],[1,"square","mr-3"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o._UZ(2,"d3-network",2),o.qZA(),o.TgZ(3,"div",3),o.TgZ(4,"div",4),o.TgZ(5,"app-card",5),o.TgZ(6,"mat-form-field",6),o.TgZ(7,"mat-label",7),o._uU(8),o.ALo(9,"titlecase"),o.ALo(10,"trans"),o.qZA(),o.TgZ(11,"mat-select",8),o.YNc(12,Il,2,2,"mat-option",9),o.qZA(),o.qZA(),o.TgZ(13,"div",10),o._uU(14),o.ALo(15,"trans"),o.qZA(),o.YNc(16,Ll,5,5,"div",11),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(2),o.Q6J("nodes",r.nodes)("links",r.edges)("options",r.options),o.xp6(6),o.Oqu(o.lcZ(9,8,o.lcZ(10,10,"guide"))),o.xp6(3),o.Q6J("formControl",r.guideControl),o.xp6(1),o.Q6J("ngForOf",r.guides),o.xp6(2),o.Oqu(o.lcZ(15,12,"guide.legend.title")),o.xp6(2),o.Q6J("ngForOf",r.guideRelationshipTypes))},directives:[zi,Li.A,bn.KE,bn.hX,Fr.gD,ke.JJ,ke.oH,Ue.sg,Ti.ey],pipes:[Ue.rS,Rr.u],styles:[".square{width:20px;height:20px;border:black;border-radius:6px}\n"],encapsulation:2}),t})()}];let Ol=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[B.Bz.forChild(Tl),Zn.m,Wr,Ue.ez,Ur.ot,bn.lN,Ti.Ng,Fr.LD,Zr.d,ke.UX]]}),t})();const Pl=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",loadChildren:()=>Yh},{path:"network",loadChildren:()=>sl},{path:"analysis",loadChildren:()=>Cl},{path:"guide",loadChildren:()=>Ol}];let Ul=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[B.Bz.forChild(Pl)]]}),t})()},3333:pt=>{pt.exports=function(N,B){var $=B.length;if(0!==$){var I=N.length;N.length+=$;for(var o=0;o<$;o++)N[I+o]=B[o]}}},7749:(pt,tt,N)=>{var B=N(8487),$=N(6714),I=N(5568),o=N(8090),k=N(5766),A=N(8859).createRandomIndex,S=N(6956),g=S.UndirectedLouvainIndex,d=S.DirectedLouvainIndex,v={nodeCommunityAttribute:"community",getEdgeWeight:"weight",fastLocalMoves:!0,randomWalk:!0,resolution:1,rng:Math.random};function x(D,L,G){var C=D.get(L);void 0===C&&(C=0),D.set(L,C+=G)}function _(D,L,G,C,V){return Math.abs(C-V)<1e-10?D!==L&&G>D:C>V}function F(D,L,G){var J,K,ft,gt,St,zt,Dt,Lt,Bt,Wt,Jt,Rt,Xt,jt,dt,bt,Qt,qt,C=new g(L,{getEdgeWeight:G.getEdgeWeight,keepDendrogram:D,resolution:G.resolution}),V=A(G.rng),q=!0,et=!0,it=new o(Float64Array,C.C),re=0,oe=0,se=[];for(G.fastLocalMoves&&(ft=new k(C.C));q;){if(Rt=C.C,q=!1,et=!0,G.fastLocalMoves){for(qt=0,Lt=G.randomWalk?V(Rt):0,Bt=0;Bt<Rt;Bt++,Lt++)ft.enqueue(Wt=Lt%Rt);for(;0!==ft.size;){for(Wt=ft.dequeue(),oe++,Xt=0,it.clear(),J=C.belongings[Wt],gt=C.starts[Wt],St=C.starts[Wt+1];gt<St;gt++)Xt+=zt=C.weights[gt],x(it,K=C.belongings[Jt=C.neighborhood[gt]],zt);for(dt=C.fastDeltaWithOwnCommunity(Wt,Xt,it.get(J)||0,J),jt=J,Dt=0;Dt<it.size;Dt++)(K=it.dense[Dt])!==J&&(re++,_(jt,J,K,bt=C.fastDelta(Wt,Xt,it.vals[Dt],K),dt)&&(dt=bt,jt=K));if(dt<0){if((jt=C.isolate(Wt,Xt))===J)continue}else{if(jt===J)continue;C.move(Wt,Xt,jt)}for(q=!0,qt++,gt=C.starts[Wt],St=C.starts[Wt+1];gt<St;gt++)(K=C.belongings[Jt=C.neighborhood[gt]])!==jt&&ft.enqueue(Jt)}se.push(qt)}else for(se.push(Qt=[]);et;){for(et=!1,qt=0,Lt=G.randomWalk?V(Rt):0,Bt=0;Bt<Rt;Bt++,Lt++){for(Wt=Lt%Rt,oe++,Xt=0,it.clear(),J=C.belongings[Wt],gt=C.starts[Wt],St=C.starts[Wt+1];gt<St;gt++)Xt+=zt=C.weights[gt],x(it,K=C.belongings[Jt=C.neighborhood[gt]],zt);for(dt=C.fastDeltaWithOwnCommunity(Wt,Xt,it.get(J)||0,J),jt=J,Dt=0;Dt<it.size;Dt++)(K=it.dense[Dt])!==J&&(re++,_(jt,J,K,bt=C.fastDelta(Wt,Xt,it.vals[Dt],K),dt)&&(dt=bt,jt=K));if(dt<0){if((jt=C.isolate(Wt,Xt))===J)continue}else{if(jt===J)continue;C.move(Wt,Xt,jt)}et=!0,qt++}Qt.push(qt),q=et||q}q&&C.zoomOut()}return{index:C,deltaComputations:re,nodesVisited:oe,moves:se}}function T(D,L,G){var J,K,ft,gt,St,zt,Lt,Bt,Wt,Jt,Rt,Xt,Ht,jt,dt,bt,re,se,Ye,Me,C=new d(L,{getEdgeWeight:G.getEdgeWeight,keepDendrogram:D,resolution:G.resolution}),V=A(G.rng),q=!0,et=!0,it=new o(Float64Array,C.C),Qt=0,qt=0,Ne=[];for(G.fastLocalMoves&&(ft=new k(C.C));q;){if(Ht=C.C,q=!1,et=!0,G.fastLocalMoves){for(Me=0,Wt=G.randomWalk?V(Ht):0,Jt=0;Jt<Ht;Jt++,Wt++)ft.enqueue(Rt=Wt%Ht);for(;0!==ft.size;){for(Rt=ft.dequeue(),qt++,jt=0,dt=0,it.clear(),J=C.belongings[Rt],gt=C.starts[Rt],St=C.starts[Rt+1],zt=C.offsets[Rt];gt<St;gt++)Lt=C.weights[gt],gt<zt?dt+=Lt:jt+=Lt,x(it,K=C.belongings[Xt=C.neighborhood[gt]],Lt);for(re=C.deltaWithOwnCommunity(Rt,jt,dt,it.get(J)||0,J),bt=J,Bt=0;Bt<it.size;Bt++)(K=it.dense[Bt])!==J&&(Qt++,_(bt,J,K,se=C.delta(Rt,jt,dt,it.vals[Bt],K),re)&&(re=se,bt=K));if(re<0){if((bt=C.isolate(Rt,jt,dt))===J)continue}else{if(bt===J)continue;C.move(Rt,jt,dt,bt)}for(q=!0,Me++,gt=C.starts[Rt],St=C.starts[Rt+1];gt<St;gt++)(K=C.belongings[Xt=C.neighborhood[gt]])!==bt&&ft.enqueue(Xt)}Ne.push(Me)}else for(Ne.push(Ye=[]);et;){for(et=!1,Me=0,Wt=G.randomWalk?V(Ht):0,Jt=0;Jt<Ht;Jt++,Wt++){for(Rt=Wt%Ht,qt++,jt=0,dt=0,it.clear(),J=C.belongings[Rt],gt=C.starts[Rt],St=C.starts[Rt+1],zt=C.offsets[Rt];gt<St;gt++)Lt=C.weights[gt],gt<zt?dt+=Lt:jt+=Lt,x(it,K=C.belongings[Xt=C.neighborhood[gt]],Lt);for(re=C.deltaWithOwnCommunity(Rt,jt,dt,it.get(J)||0,J),bt=J,Bt=0;Bt<it.size;Bt++)(K=it.dense[Bt])!==J&&(Qt++,_(bt,J,K,se=C.delta(Rt,jt,dt,it.vals[Bt],K),re)&&(re=se,bt=K));if(re<0){if((bt=C.isolate(Rt,jt,dt))===J)continue}else{if(bt===J)continue;C.move(Rt,jt,dt,bt)}et=!0,Me++}Ye.push(Me),q=et||q}q&&C.zoomOut()}return{index:C,deltaComputations:Qt,nodesVisited:qt,moves:Ne}}function U(D,L,G,C){if(!$(G))throw new Error("graphology-communities-louvain: the given graph is not a valid graphology instance.");var V=I(G);if("mixed"===V)throw new Error("graphology-communities-louvain: cannot run the algorithm on a true mixed graph.");C=B(C,v);var q=0;if(0===G.size){if(D)return void G.forEachNode(function(gt){G.setNodeAttribute(gt,C.nodeCommunityAttribute,q++)});var et={};return G.forEachNode(function(gt){et[gt]=q++}),L?{communities:et,count:G.order,deltaComputations:0,dendrogram:null,level:0,modularity:NaN,moves:null,nodesVisited:0,resolution:C.resolution}:et}var K=("undirected"===V?F:T)(L,G,C),it=K.index;if(!L)return D?void it.assign(C.nodeCommunityAttribute):it.collect();var ft={count:it.C,deltaComputations:K.deltaComputations,dendrogram:it.dendrogram,level:it.level,modularity:it.modularity(),moves:K.moves,nodesVisited:K.nodesVisited,resolution:C.resolution};return D?(it.assign(C.nodeCommunityAttribute),ft):(ft.communities=it.collect(),ft)}var W=U.bind(null,!1,!1);W.assign=U.bind(null,!0,!1),W.detailed=U.bind(null,!1,!0),W.defaults=v,pt.exports=W},5149:(pt,tt,N)=>{var $=N(6714),I=N(6262).B,o=N(778).De,k=N(3882);tt.dQ=function E(T){var U=function x(T){if(!$(T))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(!T.order)return[];var L,U=new k(T),W=U.push.bind(U),D=[];return U.forEachNodeYetUnseen(function(G){L=[],U.push(G);for(var C;0!==U.size;)C=U.pop(),L.push(C),T.forEachNeighbor(C,W);return L.length>D.length&&(D=L),D.length>U.countUnseenNodes()}),D}(T),W=T.nullCopy();return U.forEach(function(D){I(W,D,T.getNodeAttributes(D))}),T.forEachEdge(function(D,L,G,C,V,q,et){W.hasNode(G)&&o(W,et,D,G,C,L)}),W}},3882:pt=>{function tt(N){this.graph=N,this.stack=new Array(N.order),this.seen=new Set,this.size=0}tt.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order},tt.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size},tt.prototype.forEachNodeYetUnseen=function(N){var B=this.seen,$=this.graph;$.someNode(function(I,o){return B.size===$.order||!B.has(I)&&!!N(I,o)})},tt.prototype.has=function(N){return this.seen.has(N)},tt.prototype.push=function(N){var B=this.seen.size;return this.seen.add(N),B!==this.seen.size&&(this.stack[this.size++]=N,!0)},tt.prototype.pushWith=function(N,B){var $=this.seen.size;return this.seen.add(N),$!==this.seen.size&&(this.stack[this.size++]=B,!0)},tt.prototype.pop=function(){if(0!==this.size)return this.stack[--this.size]},pt.exports=tt},6956:(pt,tt,N)=>{var B=N(6116),$=N(8487),I=N(2954).Q6,o=Symbol.for("nodejs.util.inspect.custom"),k={getEdgeWeight:"weight",keepDendrogram:!1,resolution:1};function A(g,d){var v=(d=$(d,k)).resolution,x=I(d.getEdgeWeight).fromEntry,E=2*(g.size-g.selfLoopCount),_=B.getPointerArray(E),F=B.getPointerArray(g.order+1),T=d.getEdgeWeight?Float64Array:B.getPointerArray(2*g.size);this.C=g.order,this.M=0,this.E=E,this.U=0,this.resolution=v,this.level=0,this.graph=g,this.nodes=new Array(g.order),this.keepDendrogram=d.keepDendrogram,this.neighborhood=new F(E),this.weights=new T(E),this.loops=new T(g.order),this.starts=new _(g.order+1),this.belongings=new F(g.order),this.dendrogram=[],this.mapping=null,this.counts=new F(g.order),this.unused=new F(g.order),this.totalWeights=new T(g.order);var W,U={},D=0,L=0,G=this;g.forEachNode(function(C){G.nodes[D]=C,U[C]=D,L+=g.undirectedDegreeWithoutSelfLoops(C),G.starts[D]=L,G.belongings[D]=D,G.counts[D]=1,D++}),g.forEachEdge(function(C,V,q,et,J,K,it){if(W=x(C,V,q,et,J,K,it),q=U[q],et=U[et],G.M+=W,q===et)G.totalWeights[q]+=2*W,G.loops[q]=2*W;else{G.totalWeights[q]+=W,G.totalWeights[et]+=W;var ft=--G.starts[q],gt=--G.starts[et];G.neighborhood[ft]=et,G.neighborhood[gt]=q,G.weights[ft]=W,G.weights[gt]=W}}),this.starts[D]=this.E,this.keepDendrogram?this.dendrogram.push(this.belongings.slice()):this.mapping=this.belongings.slice()}function S(g,d){var v=(d=$(d,k)).resolution,x=I(d.getEdgeWeight).fromEntry,E=2*(g.size-g.selfLoopCount),_=B.getPointerArray(E),F=B.getPointerArray(g.order+1),T=d.getEdgeWeight?Float64Array:B.getPointerArray(2*g.size);this.C=g.order,this.M=0,this.E=E,this.U=0,this.resolution=v,this.level=0,this.graph=g,this.nodes=new Array(g.order),this.keepDendrogram=d.keepDendrogram,this.neighborhood=new F(E),this.weights=new T(E),this.loops=new T(g.order),this.starts=new _(g.order+1),this.offsets=new _(g.order),this.belongings=new F(g.order),this.dendrogram=[],this.counts=new F(g.order),this.unused=new F(g.order),this.totalInWeights=new T(g.order),this.totalOutWeights=new T(g.order);var W,U={},D=0,L=0,G=this;g.forEachNode(function(C){G.nodes[D]=C,U[C]=D,L+=g.outDegreeWithoutSelfLoops(C),G.starts[D]=L,L+=g.inDegreeWithoutSelfLoops(C),G.offsets[D]=L,G.belongings[D]=D,G.counts[D]=1,D++}),g.forEachEdge(function(C,V,q,et,J,K,it){if(W=x(C,V,q,et,J,K,it),q=U[q],et=U[et],G.M+=W,q===et)G.loops[q]+=W,G.totalInWeights[q]+=W,G.totalOutWeights[q]+=W;else{G.totalOutWeights[q]+=W,G.totalInWeights[et]+=W;var ft=--G.starts[q],gt=--G.offsets[et];G.neighborhood[ft]=et,G.neighborhood[gt]=q,G.weights[ft]=W,G.weights[gt]=W}}),this.starts[D]=this.E,this.keepDendrogram?this.dendrogram.push(this.belongings.slice()):this.mapping=this.belongings.slice()}A.prototype.isolate=function(g,d){var v=this.belongings[g];if(1===this.counts[v])return v;var x=this.unused[--this.U],E=this.loops[g];return this.totalWeights[v]-=d+E,this.totalWeights[x]+=d+E,this.belongings[g]=x,this.counts[v]--,this.counts[x]++,x},A.prototype.move=function(g,d,v){var x=this.belongings[g],E=this.loops[g];this.totalWeights[x]-=d+E,this.totalWeights[v]+=d+E,this.belongings[g]=v;var _=1==this.counts[x]--;this.counts[v]++,_&&(this.unused[this.U++]=x)},A.prototype.computeNodeDegree=function(g){var d,v,E=0;for(d=this.starts[g],v=this.starts[g+1];d<v;d++)E+=this.weights[d];return E},A.prototype.expensiveIsolate=function(g){var d=this.computeNodeDegree(g);return this.isolate(g,d)},A.prototype.expensiveMove=function(g,d){var v=this.computeNodeDegree(g);this.move(g,v,d)},A.prototype.zoomOut=function(){var _,F,T,U,W,D,L,G,C,V,q,g=new Array(this.C-this.U),d={},v=this.nodes.length,x=0,E=0;for(_=0,T=this.C;_<T;_++)(D=this.belongings[_])in d||(d[D]=x,g[x]={adj:{},totalWeights:this.totalWeights[D],internalWeights:0},x++),this.belongings[_]=d[D];if(this.keepDendrogram){for(V=this.dendrogram[this.level],q=new(B.getPointerArray(x))(v),_=0;_<v;_++)q[_]=this.belongings[V[_]];this.dendrogram.push(q)}else for(_=0;_<v;_++)this.mapping[_]=this.belongings[this.mapping[_]];for(_=0,T=this.C;_<T;_++)for(C=(G=g[D=this.belongings[_]]).adj,G.internalWeights+=this.loops[_],F=this.starts[_],U=this.starts[_+1];F<U;F++)D!==(L=this.belongings[W=this.neighborhood[F]])?(L in C||(C[L]=0),C[L]+=this.weights[F]):G.internalWeights+=this.weights[F];for(this.C=x,W=0,D=0;D<x;D++)for(L in C=(G=g[D]).adj,this.totalWeights[D=+D]=G.totalWeights,this.loops[D]=G.internalWeights,this.counts[D]=1,this.starts[D]=W,this.belongings[D]=D,C)this.neighborhood[W]=+L,this.weights[W]=C[L],E++,W++;return this.starts[x]=E,this.E=E,this.U=0,this.level++,d},A.prototype.modularity=function(){var g,v,x,E,_=0,F=2*this.M,T=new Float64Array(this.C);for(v=0;v<this.C;v++)for(T[g=this.belongings[v]]+=this.loops[v],x=this.starts[v],E=this.starts[v+1];x<E;x++)g===this.belongings[this.neighborhood[x]]&&(T[g]+=this.weights[x]);for(v=0;v<this.C;v++)_+=T[v]/F-Math.pow(this.totalWeights[v]/F,2)*this.resolution;return _},A.prototype.delta=function(g,d,v,x){var E=this.M;return v/E-this.totalWeights[x]*(d+=this.loops[g])*this.resolution/(2*E*E)},A.prototype.deltaWithOwnCommunity=function(g,d,v,x){var E=this.M;return v/E-(this.totalWeights[x]-(d+=this.loops[g]))*d*this.resolution/(2*E*E)},A.prototype.fastDelta=function(g,d,v,x){return v-(d+=this.loops[g])*this.totalWeights[x]*this.resolution/(2*this.M)},A.prototype.fastDeltaWithOwnCommunity=function(g,d,v,x){return v-(d+=this.loops[g])*(this.totalWeights[x]-d)*this.resolution/(2*this.M)},A.prototype.bounds=function(g){return[this.starts[g],this.starts[g+1]]},A.prototype.project=function(){var g=this,d={};return g.nodes.slice(0,this.C).forEach(function(v,x){d[v]=Array.from(g.neighborhood.slice(g.starts[x],g.starts[x+1])).map(function(E){return g.nodes[E]})}),d},A.prototype.collect=function(g){arguments.length<1&&(g=this.level);var x,E,d={},v=this.keepDendrogram?this.dendrogram[g]:this.mapping;for(x=0,E=v.length;x<E;x++)d[this.nodes[x]]=v[x];return d},A.prototype.assign=function(g,d){arguments.length<2&&(d=this.level);var x,E,v=this.keepDendrogram?this.dendrogram[d]:this.mapping;for(x=0,E=v.length;x<E;x++)this.graph.setNodeAttribute(this.nodes[x],g,v[x])},A.prototype[o]=function(){var g={};Object.defineProperty(g,"constructor",{value:A,enumerable:!1}),g.C=this.C,g.M=this.M,g.E=this.E,g.U=this.U,g.resolution=this.resolution,g.level=this.level,g.nodes=this.nodes,g.starts=this.starts.slice(0,g.C+1);var x=this;return["neighborhood","weights"].forEach(function(E){g[E]=x[E].slice(0,g.E)}),["counts","loops","belongings","totalWeights"].forEach(function(E){g[E]=x[E].slice(0,g.C)}),g.unused=this.unused.slice(0,this.U),this.keepDendrogram?g.dendrogram=this.dendrogram:g.mapping=this.mapping,g},S.prototype.bounds=A.prototype.bounds,S.prototype.inBounds=function(g){return[this.offsets[g],this.starts[g+1]]},S.prototype.outBounds=function(g){return[this.starts[g],this.offsets[g]]},S.prototype.project=A.prototype.project,S.prototype.projectIn=function(){var g=this,d={};return g.nodes.slice(0,this.C).forEach(function(v,x){d[v]=Array.from(g.neighborhood.slice(g.offsets[x],g.starts[x+1])).map(function(E){return g.nodes[E]})}),d},S.prototype.projectOut=function(){var g=this,d={};return g.nodes.slice(0,this.C).forEach(function(v,x){d[v]=Array.from(g.neighborhood.slice(g.starts[x],g.offsets[x])).map(function(E){return g.nodes[E]})}),d},S.prototype.isolate=function(g,d,v){var x=this.belongings[g];if(1===this.counts[x])return x;var E=this.unused[--this.U],_=this.loops[g];return this.totalInWeights[x]-=d+_,this.totalInWeights[E]+=d+_,this.totalOutWeights[x]-=v+_,this.totalOutWeights[E]+=v+_,this.belongings[g]=E,this.counts[x]--,this.counts[E]++,E},S.prototype.move=function(g,d,v,x){var E=this.belongings[g],_=this.loops[g];this.totalInWeights[E]-=d+_,this.totalInWeights[x]+=d+_,this.totalOutWeights[E]-=v+_,this.totalOutWeights[x]+=v+_,this.belongings[g]=x;var F=1==this.counts[E]--;this.counts[x]++,F&&(this.unused[this.U++]=E)},S.prototype.computeNodeInDegree=function(g){var d,v,E=0;for(d=this.offsets[g],v=this.starts[g+1];d<v;d++)E+=this.weights[d];return E},S.prototype.computeNodeOutDegree=function(g){var d,v,E=0;for(d=this.starts[g],v=this.offsets[g];d<v;d++)E+=this.weights[d];return E},S.prototype.expensiveMove=function(g,d){var v=this.computeNodeInDegree(g),x=this.computeNodeOutDegree(g);this.move(g,v,x,d)},S.prototype.zoomOut=function(){var _,F,T,U,W,D,L,G,C,V,q,et,J,K,it,g=new Array(this.C-this.U),d={},v=this.nodes.length,x=0,E=0;for(_=0,T=this.C;_<T;_++)(D=this.belongings[_])in d||(d[D]=x,g[x]={inAdj:{},outAdj:{},totalInWeights:this.totalInWeights[D],totalOutWeights:this.totalOutWeights[D],internalWeights:0},x++),this.belongings[_]=d[D];if(this.keepDendrogram){for(K=this.dendrogram[this.level],it=new(B.getPointerArray(x))(v),_=0;_<v;_++)it[_]=this.belongings[K[_]];this.dendrogram.push(it)}else for(_=0;_<v;_++)this.mapping[_]=this.belongings[this.mapping[_]];for(_=0,T=this.C;_<T;_++)for(C=this.offsets[_],et=(G=g[D=this.belongings[_]]).inAdj,J=G.outAdj,G.internalWeights+=this.loops[_],F=this.starts[_],U=this.starts[_+1];F<U;F++)q=(V=F<C)?J:et,D!==(L=this.belongings[W=this.neighborhood[F]])?(L in q||(q[L]=0),q[L]+=this.weights[F]):V&&(G.internalWeights+=this.weights[F]);for(this.C=x,W=0,D=0;D<x;D++){for(L in et=(G=g[D]).inAdj,J=G.outAdj,this.totalInWeights[D=+D]=G.totalInWeights,this.totalOutWeights[D]=G.totalOutWeights,this.loops[D]=G.internalWeights,this.counts[D]=1,this.starts[D]=W,this.belongings[D]=D,J)this.neighborhood[W]=+L,this.weights[W]=J[L],E++,W++;for(L in this.offsets[D]=W,et)this.neighborhood[W]=+L,this.weights[W]=et[L],E++,W++}return this.starts[x]=E,this.E=E,this.U=0,this.level++,d},S.prototype.modularity=function(){var g,v,x,E,_=0,F=this.M,T=new Float64Array(this.C);for(v=0;v<this.C;v++)for(T[g=this.belongings[v]]+=this.loops[v],x=this.starts[v],E=this.offsets[v];x<E;x++)g===this.belongings[this.neighborhood[x]]&&(T[g]+=this.weights[x]);for(v=0;v<this.C;v++)_+=T[v]/F-this.totalInWeights[v]*this.totalOutWeights[v]/Math.pow(F,2)*this.resolution;return _},S.prototype.delta=function(g,d,v,x,E){var _=this.M,U=this.loops[g];return x/_-((v+=U)*this.totalInWeights[E]+(d+=U)*this.totalOutWeights[E])*this.resolution/(_*_)},S.prototype.deltaWithOwnCommunity=function(g,d,v,x,E){var _=this.M,U=this.loops[g];return x/_-((v+=U)*(this.totalInWeights[E]-(d+=U))+d*(this.totalOutWeights[E]-v))*this.resolution/(_*_)},S.prototype.collect=A.prototype.collect,S.prototype.assign=A.prototype.assign,S.prototype[o]=function(){var g={};Object.defineProperty(g,"constructor",{value:S,enumerable:!1}),g.C=this.C,g.M=this.M,g.E=this.E,g.U=this.U,g.resolution=this.resolution,g.level=this.level,g.nodes=this.nodes,g.starts=this.starts.slice(0,g.C+1);var x=this;return["neighborhood","weights"].forEach(function(E){g[E]=x[E].slice(0,g.E)}),["counts","offsets","loops","belongings","totalInWeights","totalOutWeights"].forEach(function(E){g[E]=x[E].slice(0,g.C)}),g.unused=this.unused.slice(0,this.U),this.keepDendrogram?g.dendrogram=this.dendrogram:g.mapping=this.mapping,g},tt.UndirectedLouvainIndex=A,tt.DirectedLouvainIndex=S},6078:(pt,tt,N)=>{var B=N(6116),$=N(2954).Q6;function I(A,S){return"outbound"===A||"inbound"===A?S.directedSize+2*S.undirectedSize:"in"===A||"out"===A||"directed"===A?S.directedSize:2*S.undirectedSize}function o(A,S){var g=A[(S=S||"outbound")+"Neighbors"].bind(A),d=I(S,A),v=B.getPointerArray(d),x=B.getPointerArray(A.order);this.graph=A,this.neighborhood=new x(d),this.starts=new v(A.order+1),this.nodes=A.nodes();var _,F,T,U,D,E={},L=0;for(_=0,F=A.order;_<F;_++)E[this.nodes[_]]=_;for(_=0,F=A.order;_<F;_++)for(D=g(this.nodes[_]),this.starts[_]=L,T=0,U=D.length;T<U;T++)this.neighborhood[L++]=E[D[T]];this.starts[_]=d}function k(A,S,g){var d=A[(g=g||"outbound")+"Edges"].bind(A),v=I(g,A),x=B.getPointerArray(v),E=B.getPointerArray(A.order),_=$(S).fromMinimalEntry;this.graph=A,this.neighborhood=new E(v),this.weights=new Float64Array(v),this.outDegrees=new Float64Array(A.order),this.starts=new x(A.order+1),this.nodes=A.nodes();var T,U,W,D,L,G,C,V,q,F={},et=0;for(T=0,U=A.order;T<U;T++)F[this.nodes[T]]=T;for(T=0,U=A.order;T<U;T++)for(C=d(L=this.nodes[T]),this.starts[T]=et,W=0,D=C.length;W<D;W++)G=A.opposite(L,V=C[W]),q=_(V,A.getEdgeAttributes(V)),this.neighborhood[et]=F[G],this.weights[et++]=q,this.outDegrees[T]+=q;this.starts[T]=v}o.prototype.bounds=function(A){return[this.starts[A],this.starts[A+1]]},o.prototype.project=function(){var A=this,S={};return A.nodes.forEach(function(g,d){S[g]=Array.from(A.neighborhood.slice(A.starts[d],A.starts[d+1])).map(function(v){return A.nodes[v]})}),S},o.prototype.collect=function(A){var S,g,d={};for(S=0,g=A.length;S<g;S++)d[this.nodes[S]]=A[S];return d},o.prototype.assign=function(A,S){var g=0;this.graph.updateEachNodeAttributes(function(d,v){return v[A]=S[g++],v},{attributes:[A]})},tt.NeighborhoodIndex=o,k.prototype.bounds=o.prototype.bounds,k.prototype.project=o.prototype.project,k.prototype.collect=o.prototype.collect,k.prototype.assign=o.prototype.assign,tt.WeightedNeighborhoodIndex=k},1063:(pt,tt,N)=>{var B=N(6714),$=N(3933),I=N(8487),o=$.createUnweightedIndexedBrandes,k=$.createDijkstraIndexedBrandes,A={nodeCentralityAttribute:"betweennessCentrality",getEdgeWeight:"weight",normalized:!0};function S(d,v,x){if(!B(v))throw new Error("graphology-centrality/beetweenness-centrality: the given graph is not a valid graphology instance.");var U,W,D,L,G,C,V,q,et,J,E=(x=I(x,A)).nodeCentralityAttribute,_=x.normalized,F=x.getEdgeWeight?k(v,x.getEdgeWeight):o(v),T=v.order,K=new Float64Array(T),it=new Float64Array(T);for(C=0;C<T;C++){for(D=(U=F(C))[1],L=U[2],V=(W=U[0]).size;V--;)K[W.items[W.size-V]]=0;for(;0!==W.size;){for(G=(1+K[J=W.pop()])/L[J],V=0,q=D[J].length;V<q;V++)K[et=D[J][V]]+=L[et]*G;J!==C&&(it[J]+=K[J])}}var ft;if(null!==(ft=_?T<=2?null:1/((T-1)*(T-2)):"undirected"===v.type?.5:null))for(C=0;C<T;C++)it[C]*=ft;return d?F.index.assign(E,it):F.index.collect(it)}var g=S.bind(null,!1);g.assign=S.bind(null,!0),pt.exports=g},3378:(pt,tt,N)=>{var B=N(6714),$=N(8487),I=N(8740),o=N(4268),k=N(6078).NeighborhoodIndex,A={nodeCentralityAttribute:"closenessCentrality",wassermanFaust:!1};function S(v){this.index=new k(v,"inbound"),this.queue=new I(Array,v.order),this.seen=new o(v.order)}function g(v,x,E){if(!B(x))throw new Error("graphology-metrics/centrality/closeness: the given graph is not a valid graphology instance.");var U,W,D,L,G,_=(E=$(E,A)).wassermanFaust,F=new S(x),T=x.order,C=new Float64Array(T);for(U=0;U<T;U++)D=(W=F.fromNode(U))[0],G=0,(L=W[1])>0&&T>1&&(G=D/L,_&&(G*=D/(T-1))),C[U]=G;return v?F.index.assign(E.nodeCentralityAttribute,C):F.index.collect(C)}S.prototype.fromNode=function(v){var x=this.index,E=this.queue,_=this.seen;_.clear(),E.clear(),_.add(v),E.push([v,0]);for(var F,T,U,W,D,L,G=0,C=0;0!==E.size;)for(0!==(U=(F=E.shift())[1])&&(G+=U,C+=1),D=x.starts[(T=F[0])+1],W=x.starts[T];W<D;W++)!_.has(L=x.neighborhood[W])&&(_.add(L),E.push([L,U+1]));return[C,G]};var d=g.bind(null,!1);d.assign=g.bind(null,!0),pt.exports=d},5408:(pt,tt,N)=>{var B=N(6714);function $(A,S,g,d){var v=S+"Centrality";if(!B(g))throw new Error("graphology-centrality/"+v+": the given graph is not a valid graphology instance.");if("degree"!==S&&"undirected"===g.type)throw new Error("graphology-centrality/"+v+": cannot compute "+S+" centrality on an undirected graph.");var x=(d=d||{}).nodeCentralityAttribute||v,E=g.order-1,_=g[S].bind(g);if(!A){var F={};return g.forEachNode(function(T){F[T]=_(T)/E}),F}g.updateEachNodeAttributes(function(T,U){return U[x]=_(T)/E,U},{attributes:[x]})}var I=$.bind(null,!1,"degree"),o=$.bind(null,!1,"inDegree"),k=$.bind(null,!1,"outDegree");I.assign=$.bind(null,!0,"degree"),o.assign=$.bind(null,!0,"inDegree"),k.assign=$.bind(null,!0,"outDegree"),tt.degreeCentrality=I,tt.inDegreeCentrality=o,tt.outDegreeCentrality=k},5894:(pt,tt,N)=>{var B=N(6714),$=N(8487),I=N(6078).WeightedNeighborhoodIndex,o={nodeCentralityAttribute:"eigenvectorCentrality",getEdgeWeight:"weight",maxIterations:100,tolerance:1e-6};function k(g){for(var d=0,v=0,x=0,E=g.length;x<E;x++){var _=Math.abs(g[x]);_>d&&(v*=d/_*(d/_),d=_),v+=0===_&&0===d?0:_/d*(_/d)}return d===1/0?1:d*Math.sqrt(v)}function A(g,d,v){if(!B(d))throw new Error("graphology-metrics/centrality/eigenvector: the given graph is not a valid graphology instance.");var T,U,W,x=(v=$(v,o)).maxIterations,E=v.tolerance,_=d.order,F=new I(d,v.getEdgeWeight),L=new Float64Array(d.order);for(T=0;T<_;T++)L[T]=1/_;for(var q,et,G=0,C=0,J=!1;G<x;){for(q=L,L=new Float64Array(q),T=0;T<_;T++)for(W=F.starts[T+1],U=F.starts[T];U<W;U++)L[F.neighborhood[U]]+=q[T]*F.weights[U];for(et=k(L),T=0;T<_;T++)L[T]/=et;for(C=0,T=0;T<_;T++)C+=Math.abs(L[T]-q[T]);if(C<_*E){J=!0;break}G++}if(!J)throw Error("graphology-metrics/centrality/eigenvector: failed to converge.");if(!g)return F.collect(L);F.assign(v.nodeCentralityAttribute,L)}var S=A.bind(null,!1);S.assign=A.bind(null,!0),pt.exports=S},9850:(pt,tt,N)=>{var B=N(8487),$=N(6714),I=N(2954).Q6,o={nodeAuthorityAttribute:"authority",nodeHubAttribute:"hub",getEdgeWeight:"weight",maxIterations:100,normalize:!0,tolerance:1e-8};function k(d,v){var E,_,x=Object.create(null);for(E=0,_=d.length;E<_;E++)x[d[E]]=v;return x}function A(d){var v=0;for(var x in d)v+=d[x];return v}function S(d,v,x){if(!$(v))throw new Error("graphology-hits: the given graph is not a valid graphology instance.");if(v.multi)throw new Error("graphology-hits: the HITS algorithm does not work with MultiGraphs.");x=B(x,o);var T,L,G,C,V,q,et,J,K,it,ft,gt,St,zt,E=I(x.getEdgeWeight).fromEntry,_=v.order,F=v.nodes(),U=k(F,1/_),W={},D=!1;for(v.forEachEdge(function(Dt,Lt,Bt,Wt,Jt,Rt,Xt){W[Dt]=E(Dt,Lt,Bt,Wt,Jt,Rt,Xt)}),et=0;et<x.maxIterations;et++){for(L=U,U=k(F,0),G=k(F,0),K=0,J=0,gt=0;gt<_;gt++)for(St=0,zt=(T=v.outboundEdges(C=F[gt])).length;St<zt;St++)V=v.opposite(C,q=T[St]),G[V]+=L[C]*W[q],G[V]>J&&(J=G[V]);for(gt=0;gt<_;gt++)for(St=0,zt=(T=v.outboundEdges(C=F[gt])).length;St<zt;St++)V=v.opposite(C,q=T[St]),U[C]+=G[V]*W[q],U[V]>K&&(K=U[V]);for(C in ft=1/K,U)U[C]*=ft;for(C in ft=1/J,G)G[C]*=ft;for(C in it=0,U)it+=Math.abs(U[C]-L[C]);if(it<x.tolerance){D=!0;break}}if(!D)throw Error("graphology-metrics/centrality/hits: failed to converge.");if(x.normalize){for(C in ft=1/A(G),G)G[C]*=ft;for(C in ft=1/A(U),U)U[C]*=ft}if(!d)return{hubs:U,authorities:G};v.updateEachNodeAttributes(function(Dt,Lt){return Lt[x.nodeAuthorityAttribute]=G[Dt],Lt[x.nodeHubAttribute]=U[Dt],Lt},{attributes:[x.nodeAuthorityAttribute,x.nodeHubAttribute]})}var g=S.bind(null,!1);g.assign=S.bind(null,!0),pt.exports=g},5547:(pt,tt,N)=>{N(5408);N(1063),N(3378),N(5894),N(9850),tt.pagerank=N(593)},593:(pt,tt,N)=>{var B=N(6714),$=N(8487),I=N(6078).WeightedNeighborhoodIndex,o={nodePagerankAttribute:"pagerank",getEdgeWeight:"weight",alpha:.85,maxIterations:100,tolerance:1e-6};function k(S,g,d){if(!B(g))throw new Error("graphology-metrics/centrality/pagerank: the given graph is not a valid graphology instance.");var W,D,L,G,v=(d=$(d,o)).alpha,x=d.maxIterations,E=d.tolerance,_=d.nodePagerankAttribute,F=g.order,T=1/F,U=new I(g,d.getEdgeWeight),C=new Float64Array(g.order),V=new Float64Array(U.weights.length),q=[];for(W=0;W<F;W++)for(C[W]=T,L=U.starts[W+1],0===(G=U.outDegrees[W])&&q.push(W),D=U.starts[W];D<L;D++)V[D]=U.weights[D]/G;for(var K,ft,et=0,J=0,gt=!1;et<x;){for(ft=C,C=new Float64Array(g.order),K=0,W=0,L=q.length;W<L;W++)K+=ft[q[W]];for(K*=v,W=0;W<F;W++){for(L=U.starts[W+1],D=U.starts[W];D<L;D++)C[U.neighborhood[D]]+=v*ft[W]*V[D];C[W]+=K*T+(1-v)*T}for(J=0,W=0;W<F;W++)J+=Math.abs(C[W]-ft[W]);if(J<F*E){gt=!0;break}et++}if(!gt)throw Error("graphology-metrics/centrality/pagerank: failed to converge.");if(!S)return U.collect(C);U.assign(_,C)}var A=k.bind(null,!1);A.assign=k.bind(null,!0),pt.exports=A},3956:(pt,tt,N)=>{var B=N(6714),$=N(4651).jZ;pt.exports=function(o,k){if(!B(o))throw new Error("graphology-metrics/eccentricity: given graph is not a valid graphology instance.");if(0===o.size)return 1/0;var g,d,A=-1/0,S=$(o,k),v=0;for(g in S)(d=S[g])>A&&(A=d),v++;return v<o.order?1/0:A}},9637:(pt,tt,N)=>{N(677);tt.eccentricity=N(3956)},677:(pt,tt,N)=>{var B=N(6714);function I(o,k,A,S,g){if(!B(A))throw new Error("graphology-metrics/"+o+": the given graph is not a valid graphology instance.");g=g||"weight";var d=0;return A[k](S,function(v,x,E,_,F,T,U){var W="function"==typeof g?g(v,x,E,_,F,T,U):x[g];("number"!=typeof W||isNaN(W))&&(W=1),d+=W}),d}tt.weightedDegree=I.bind(null,"weightedDegree","forEachEdge"),tt.weightedInDegree=I.bind(null,"weightedInDegree","forEachInEdge"),tt.weightedOutDegree=I.bind(null,"weightedOutDegree","forEachOutEdge"),tt.weightedInboundDegree=I.bind(null,"weightedInboundDegree","forEachInboundEdge"),tt.weightedOutboundDegree=I.bind(null,"weightedOutboundDegree","forEachOutboundEdge"),tt.weightedUndirectedDegree=I.bind(null,"weightedUndirectedDegree","forEachUndirectedEdge"),tt.weightedDirectedDegree=I.bind(null,"weightedDirectedDegree","forEachDirectedEdge")},3933:(pt,tt,N)=>{var B=N(8740),$=N(7451),I=N(4547),o=N(6116),k=N(6078),A=k.NeighborhoodIndex,S=k.WeightedNeighborhoodIndex;function g(d,v){return d[0]>v[0]?1:d[0]<v[0]?-1:d[1]>v[1]?1:d[1]<v[1]?-1:d[2]>v[2]?1:d[2]<v[2]?-1:d[3]>v[3]?1:d[3]<v[3]?-1:0}tt.createUnweightedIndexedBrandes=function(v){var x=new A(v),E=x.neighborhood,_=x.starts,F=v.order,T=new $(o.getPointerArray(F),F),U=new Uint32Array(F),W=new Array(F),D=new Int32Array(F),L=new B(Uint32Array,F),G=function(C){var V,q,J,K,it,ft;for(it=0;it<F;it++)W[it]=[],U[it]=0,D[it]=-1;for(U[C]=1,D[C]=0,L.push(C);0!==L.size;)for(it=L.shift(),T.push(it),V=D[it],q=U[it],J=_[it+1],K=_[it];K<J;K++)-1===D[ft=E[K]]&&(L.push(ft),D[ft]=V+1),D[ft]===V+1&&(U[ft]+=q,W[ft].push(it));return[T,W,U]};return G.index=x,G},tt.createDijkstraIndexedBrandes=function(v,x){var E=new S(v,x||"weight"),_=E.neighborhood,F=E.weights,T=E.starts,U=v.order,W=new $(o.getPointerArray(U),U),D=new Uint32Array(U),L=new Array(U),G=new Float64Array(U),C=new Float64Array(U),V=new I(g),q=function(et){var K,it,ft,gt,St,zt,Dt,Lt,Bt=0;for(Dt=0;Dt<U;Dt++)L[Dt]=[],D[Dt]=0,G[Dt]=-1,C[Dt]=-1;for(D[et]=1,C[et]=0,V.push([0,Bt++,et,et]);0!==V.size;)if(ft=(it=V.pop())[0],gt=it[2],-1===G[Dt=it[3]])for(W.push(Dt),G[Dt]=ft,D[Dt]+=D[gt],K=T[Dt+1],zt=T[Dt];zt<K;zt++)St=ft+F[zt],-1===G[Lt=_[zt]]&&(-1===C[Lt]||St<C[Lt])?(C[Lt]=St,V.push([St,Bt++,Dt,Lt]),D[Lt]=0,L[Lt]=[Dt]):St===C[Lt]&&(D[Lt]+=D[Dt],L[Lt].push(Dt));return[W,L,D]};return q.index=E,q}},4651:(pt,tt,N)=>{var $=N(6714),o=(N(7621),N(3333));function S(x,E,_){if(!$(E))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!E.hasNode(_))throw new Error('graphology-shortest-path: the "'+_+'" source node does not exist in the given graph.');_=""+_;var F=new Set,T={},U=0;T[_]=0;for(var D,L,G,W=[_];0!==W.length;){var C=[];for(D=0,L=W.length;D<L;D++)!F.has(G=W[D])&&(F.add(G),o(C,E[x](G)),T[G]=U);U++,W=C}return T}var g=S.bind(null,"outboundNeighbors");S.bind(null,"neighbors");tt.jZ=g},778:(pt,tt)=>{tt.De=function($,I,o,k,A,S){return S=Object.assign({},S),I?null==o?$.addUndirectedEdge(k,A,S):$.addUndirectedEdgeWithKey(o,k,A,S):null==o?$.addDirectedEdge(k,A,S):$.addDirectedEdgeWithKey(o,k,A,S)}},6262:(pt,tt)=>{tt.B=function(N,B,$){return $=Object.assign({},$),N.addNode(B,$)}},8487:pt=>{function tt(B){return!B||"object"!=typeof B||"function"==typeof B||Array.isArray(B)||B instanceof Set||B instanceof Map||B instanceof RegExp||B instanceof Date}pt.exports=function N(B,$){B=B||{};var I={};for(var o in $){var k=B[o],A=$[o];I[o]=tt(A)?void 0===k?A:k:N(k,A)}return I}},2954:(pt,tt)=>{function B(o){return"number"!=typeof o||isNaN(o)?1:o}tt.Q6=function(o){return function I(o,k){var A={},S=function(v){return void 0===v?k:v};"function"==typeof k&&(S=k);var g=function(v){return S(v[o])},d=function(){return S(void 0)};return"string"==typeof o?(A.fromAttributes=g,A.fromGraph=function(v,x){return g(v.getEdgeAttributes(x))},A.fromEntry=function(v,x){return g(x)},A.fromPartialEntry=A.fromEntry,A.fromMinimalEntry=A.fromEntry):"function"==typeof o?(A.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},A.fromGraph=function(v,x){var E=v.extremities(x);return S(o(x,v.getEdgeAttributes(x),E[0],E[1],v.getNodeAttributes(E[0]),v.getNodeAttributes(E[1]),v.isUndirected(x)))},A.fromEntry=function(v,x,E,_,F,T,U){return S(o(v,x,E,_,F,T,U))},A.fromPartialEntry=function(v,x,E,_){return S(o(v,x,E,_))},A.fromMinimalEntry=function(v,x){return S(o(v,x))}):(A.fromAttributes=d,A.fromGraph=d,A.fromEntry=d,A.fromMinimalEntry=d),A}(o,B)}},5568:(pt,tt,N)=>{var B=N(6714);pt.exports=function(I){if(!B(I))throw new Error("graphology-utils/infer-type: expecting a valid graphology instance.");var o=I.type;return"mixed"!==o?o:0===I.directedSize&&0===I.undirectedSize||I.directedSize>0&&I.undirectedSize>0?"mixed":I.directedSize>0?"directed":"undirected"}},6714:pt=>{pt.exports=function(N){return null!==N&&"object"==typeof N&&"function"==typeof N.addUndirectedEdgeWithKey&&"function"==typeof N.dropNode&&"boolean"==typeof N.multi}},5595:function(pt){pt.exports=function(){"use strict";function tt(h){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(h)}function N(h,y){h.prototype=Object.create(y.prototype),h.prototype.constructor=h,$(h,y)}function B(h){return(B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(y){return y.__proto__||Object.getPrototypeOf(y)})(h)}function $(h,y){return($=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,s){return l.__proto__=s,l})(h,y)}function I(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(h){return!1}}function o(h,y,l){return(o=I()?Reflect.construct.bind():function(s,a,f){var b=[null];b.push.apply(b,a);var z=new(Function.bind.apply(s,b));return f&&$(z,f.prototype),z}).apply(null,arguments)}function k(h){var y="function"==typeof Map?new Map:void 0;return k=function(l){if(null===l||-1===Function.toString.call(l).indexOf("[native code]"))return l;if("function"!=typeof l)throw new TypeError("Super expression must either be null or a function");if(void 0!==y){if(y.has(l))return y.get(l);y.set(l,a)}function a(){return o(l,arguments,B(this).constructor)}return a.prototype=Object.create(l.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),$(a,l)},k(h)}function A(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}var S=function(){for(var h=arguments[0],y=1,l=arguments.length;y<l;y++)if(arguments[y])for(var s in arguments[y])h[s]=arguments[y][s];return h};function g(h,y,l,s){var a=h._nodes.get(y),f=null;return a?f="mixed"===s?a.out&&a.out[l]||a.undirected&&a.undirected[l]:"directed"===s?a.out&&a.out[l]:a.undirected&&a.undirected[l]:f}function d(h){return"object"===tt(h)&&null!==h&&h.constructor===Object}function v(h){var y;for(y in h)return!1;return!0}function x(h,y,l){Object.defineProperty(h,y,{enumerable:!1,configurable:!1,writable:!0,value:l})}function E(h,y,l){var s={enumerable:!0,configurable:!0};"function"==typeof l?s.get=l:(s.value=l,s.writable=!1),Object.defineProperty(h,y,s)}function _(h){return!(!d(h)||h.attributes&&!Array.isArray(h.attributes))}"function"==typeof Object.assign&&(S=Object.assign);var F,T={exports:{}},U="object"==typeof Reflect?Reflect:null,W=U&&"function"==typeof U.apply?U.apply:function(h,y,l){return Function.prototype.apply.call(h,y,l)};F=U&&"function"==typeof U.ownKeys?U.ownKeys:Object.getOwnPropertySymbols?function(h){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h))}:function(h){return Object.getOwnPropertyNames(h)};var D=Number.isNaN||function(h){return h!=h};function L(){L.init.call(this)}T.exports=L,T.exports.once=function(h,y){return new Promise(function(l,s){function a(b){h.removeListener(y,f),s(b)}function f(){"function"==typeof h.removeListener&&h.removeListener("error",a),l([].slice.call(arguments))}var b;gt(h,y,f,{once:!0}),"error"!==y&&("function"==typeof(b=h).on&&gt(b,"error",a,{once:!0}))})},L.EventEmitter=L,L.prototype._events=void 0,L.prototype._eventsCount=0,L.prototype._maxListeners=void 0;var G=10;function C(h){if("function"!=typeof h)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof h)}function V(h){return void 0===h._maxListeners?L.defaultMaxListeners:h._maxListeners}function q(h,y,l,s){var a,f,b;if(C(l),void 0===(f=h._events)?(f=h._events=Object.create(null),h._eventsCount=0):(void 0!==f.newListener&&(h.emit("newListener",y,l.listener?l.listener:l),f=h._events),b=f[y]),void 0===b)b=f[y]=l,++h._eventsCount;else if("function"==typeof b?b=f[y]=s?[l,b]:[b,l]:s?b.unshift(l):b.push(l),(a=V(h))>0&&b.length>a&&!b.warned){b.warned=!0;var Y=new Error("Possible EventEmitter memory leak detected. "+b.length+" "+String(y)+" listeners added. Use emitter.setMaxListeners() to increase limit");Y.name="MaxListenersExceededWarning",Y.emitter=h,Y.type=y,Y.count=b.length,console&&console.warn&&console.warn(Y)}return h}function et(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function J(h,y,l){var s={fired:!1,wrapFn:void 0,target:h,type:y,listener:l},a=et.bind(s);return a.listener=l,s.wrapFn=a,a}function K(h,y,l){var s=h._events;if(void 0===s)return[];var a=s[y];return void 0===a?[]:"function"==typeof a?l?[a.listener||a]:[a]:l?function(f){for(var b=new Array(f.length),z=0;z<b.length;++z)b[z]=f[z].listener||f[z];return b}(a):ft(a,a.length)}function it(h){var y=this._events;if(void 0!==y){var l=y[h];if("function"==typeof l)return 1;if(void 0!==l)return l.length}return 0}function ft(h,y){for(var l=new Array(y),s=0;s<y;++s)l[s]=h[s];return l}function gt(h,y,l,s){if("function"==typeof h.on)s.once?h.once(y,l):h.on(y,l);else{if("function"!=typeof h.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof h);h.addEventListener(y,function a(f){s.once&&h.removeEventListener(y,a),l(f)})}}function St(h){if("function"!=typeof h)throw new Error("obliterator/iterator: expecting a function!");this.next=h}Object.defineProperty(L,"defaultMaxListeners",{enumerable:!0,get:function(){return G},set:function(h){if("number"!=typeof h||h<0||D(h))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+h+".");G=h}}),L.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},L.prototype.setMaxListeners=function(h){if("number"!=typeof h||h<0||D(h))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+h+".");return this._maxListeners=h,this},L.prototype.getMaxListeners=function(){return V(this)},L.prototype.emit=function(h){for(var y=[],l=1;l<arguments.length;l++)y.push(arguments[l]);var s="error"===h,a=this._events;if(void 0!==a)s=s&&void 0===a.error;else if(!s)return!1;if(s){var f;if(y.length>0&&(f=y[0]),f instanceof Error)throw f;var b=new Error("Unhandled error."+(f?" ("+f.message+")":""));throw b.context=f,b}var z=a[h];if(void 0===z)return!1;if("function"==typeof z)W(z,this,y);else{var Y=z.length,ct=ft(z,Y);for(l=0;l<Y;++l)W(ct[l],this,y)}return!0},L.prototype.on=L.prototype.addListener=function(h,y){return q(this,h,y,!1)},L.prototype.prependListener=function(h,y){return q(this,h,y,!0)},L.prototype.once=function(h,y){return C(y),this.on(h,J(this,h,y)),this},L.prototype.prependOnceListener=function(h,y){return C(y),this.prependListener(h,J(this,h,y)),this},L.prototype.off=L.prototype.removeListener=function(h,y){var l,s,a,f,b;if(C(y),void 0===(s=this._events))return this;if(void 0===(l=s[h]))return this;if(l===y||l.listener===y)0==--this._eventsCount?this._events=Object.create(null):(delete s[h],s.removeListener&&this.emit("removeListener",h,l.listener||y));else if("function"!=typeof l){for(a=-1,f=l.length-1;f>=0;f--)if(l[f]===y||l[f].listener===y){b=l[f].listener,a=f;break}if(a<0)return this;0===a?l.shift():function(z,Y){for(;Y+1<z.length;Y++)z[Y]=z[Y+1];z.pop()}(l,a),1===l.length&&(s[h]=l[0]),void 0!==s.removeListener&&this.emit("removeListener",h,b||y)}return this},L.prototype.removeAllListeners=function(h){var y,l,s;if(void 0===(l=this._events))return this;if(void 0===l.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==l[h]&&(0==--this._eventsCount?this._events=Object.create(null):delete l[h]),this;if(0===arguments.length){var a,f=Object.keys(l);for(s=0;s<f.length;++s)"removeListener"!==(a=f[s])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(y=l[h]))this.removeListener(h,y);else if(void 0!==y)for(s=y.length-1;s>=0;s--)this.removeListener(h,y[s]);return this},L.prototype.listeners=function(h){return K(this,h,!0)},L.prototype.rawListeners=function(h){return K(this,h,!1)},L.listenerCount=function(h,y){return"function"==typeof h.listenerCount?h.listenerCount(y):it.call(h,y)},L.prototype.listenerCount=it,L.prototype.eventNames=function(){return this._eventsCount>0?F(this._events):[]},"undefined"!=typeof Symbol&&(St.prototype[Symbol.iterator]=function(){return this}),St.of=function(){var h=arguments,y=h.length,l=0;return new St(function(){return l>=y?{done:!0}:{done:!1,value:h[l++]}})},St.empty=function(){return new St(function(){return{done:!0}})},St.fromSequence=function(h){var y=0,l=h.length;return new St(function(){return y>=l?{done:!0}:{done:!1,value:h[y++]}})},St.is=function(h){return h instanceof St||"object"==typeof h&&null!==h&&"function"==typeof h.next};var zt=St,Dt={};Dt.ARRAY_BUFFER_SUPPORT="undefined"!=typeof ArrayBuffer,Dt.SYMBOL_SUPPORT="undefined"!=typeof Symbol;var Lt=zt,Wt=Dt.ARRAY_BUFFER_SUPPORT,Jt=Dt.SYMBOL_SUPPORT,Rt=function(h){var l,y="string"==typeof(l=h)||Array.isArray(l)||Wt&&ArrayBuffer.isView(l)?Lt.fromSequence(l):"object"!=typeof l||null===l?null:Jt&&"function"==typeof l[Symbol.iterator]?l[Symbol.iterator]():"function"==typeof l.next?l:null;if(!y)throw new Error("obliterator: target is not iterable nor a valid iterator.");return y},Xt=Rt,Ht=function(h,y){for(var l,s=arguments.length>1?y:1/0,a=s!==1/0?new Array(s):[],f=0,b=Xt(h);;){if(f===s)return a;if((l=b.next()).done)return f!==y&&(a.length=f),a;a[f++]=l.value}},jt=function(h){function y(l){var s;return(s=h.call(this)||this).name="GraphError",s.message=l,s}return N(y,h),y}(k(Error)),dt=function(h){function y(l){var s;return(s=h.call(this,l)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(A(s),y.prototype.constructor),s}return N(y,h),y}(jt),lt=function(h){function y(l){var s;return(s=h.call(this,l)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(A(s),y.prototype.constructor),s}return N(y,h),y}(jt),bt=function(h){function y(l){var s;return(s=h.call(this,l)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(A(s),y.prototype.constructor),s}return N(y,h),y}(jt);function re(h,y){this.key=h,this.attributes=y,this.clear()}function oe(h,y){this.key=h,this.attributes=y,this.clear()}function se(h,y){this.key=h,this.attributes=y,this.clear()}function Qt(h,y,l,s,a){this.key=y,this.attributes=a,this.undirected=h,this.source=l,this.target=s}function qt(h,y,l,s,a,f,b){var z,Y,ct,ut;if(s=""+s,0===l){if(!(z=h._nodes.get(s)))throw new lt("Graph.".concat(y,': could not find the "').concat(s,'" node in the graph.'));ct=a,ut=f}else if(3===l){if(!(Y=h._edges.get(a=""+a)))throw new lt("Graph.".concat(y,': could not find the "').concat(a,'" edge in the graph.'));var ot=Y.source.key,yt=Y.target.key;if(s===ot)z=Y.target;else{if(s!==yt)throw new lt("Graph.".concat(y,': the "').concat(s,'" node is not attached to the "').concat(a,'" edge (').concat(ot,", ").concat(yt,")."));z=Y.source}ct=f,ut=b}else{if(!(Y=h._edges.get(s)))throw new lt("Graph.".concat(y,': could not find the "').concat(s,'" edge in the graph.'));z=1===l?Y.source:Y.target,ct=a,ut=f}return[z,ct,ut]}re.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}},oe.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}},se.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}},Qt.prototype.attach=function(){var h="out",y="in";this.undirected&&(h=y="undirected");var l=this.source.key,s=this.target.key;this.source[h][s]=this,this.undirected&&l===s||(this.target[y][l]=this)},Qt.prototype.attachMulti=function(){var h="out",y="in",l=this.source.key,s=this.target.key;this.undirected&&(h=y="undirected");var a=this.source[h],f=a[s];if(void 0===f)return a[s]=this,void(this.undirected&&l===s||(this.target[y][l]=this));f.previous=this,this.next=f,a[s]=this,this.target[y][l]=this},Qt.prototype.detach=function(){var h=this.source.key,l="out",s="in";this.undirected&&(l=s="undirected"),delete this.source[l][this.target.key],delete this.target[s][h]},Qt.prototype.detachMulti=function(){var h=this.source.key,y=this.target.key,l="out",s="in";this.undirected&&(l=s="undirected"),void 0===this.previous?void 0===this.next?(delete this.source[l][y],delete this.target[s][h]):(this.next.previous=void 0,this.source[l][y]=this.next,this.target[s][h]=this.next):(this.previous.next=this.next,void 0!==this.next&&(this.next.previous=this.previous))};var Ne=[{name:function(h){return"get".concat(h,"Attribute")},attacher:function(h,y,l){h.prototype[y]=function(s,a,f){var b=qt(this,y,l,s,a,f);return b[0].attributes[b[1]]}}},{name:function(h){return"get".concat(h,"Attributes")},attacher:function(h,y,l){h.prototype[y]=function(s,a){return qt(this,y,l,s,a)[0].attributes}}},{name:function(h){return"has".concat(h,"Attribute")},attacher:function(h,y,l){h.prototype[y]=function(s,a,f){var b=qt(this,y,l,s,a,f);return b[0].attributes.hasOwnProperty(b[1])}}},{name:function(h){return"set".concat(h,"Attribute")},attacher:function(h,y,l){h.prototype[y]=function(s,a,f,b){var z=qt(this,y,l,s,a,f,b),Y=z[0],ct=z[1];return Y.attributes[ct]=z[2],this.emit("nodeAttributesUpdated",{key:Y.key,type:"set",attributes:Y.attributes,name:ct}),this}}},{name:function(h){return"update".concat(h,"Attribute")},attacher:function(h,y,l){h.prototype[y]=function(s,a,f,b){var z=qt(this,y,l,s,a,f,b),Y=z[0],ct=z[1],ut=z[2];if("function"!=typeof ut)throw new dt("Graph.".concat(y,": updater should be a function."));var ot=Y.attributes,yt=ut(ot[ct]);return ot[ct]=yt,this.emit("nodeAttributesUpdated",{key:Y.key,type:"set",attributes:Y.attributes,name:ct}),this}}},{name:function(h){return"remove".concat(h,"Attribute")},attacher:function(h,y,l){h.prototype[y]=function(s,a,f){var b=qt(this,y,l,s,a,f),z=b[0],Y=b[1];return delete z.attributes[Y],this.emit("nodeAttributesUpdated",{key:z.key,type:"remove",attributes:z.attributes,name:Y}),this}}},{name:function(h){return"replace".concat(h,"Attributes")},attacher:function(h,y,l){h.prototype[y]=function(s,a,f){var b=qt(this,y,l,s,a,f),z=b[0],Y=b[1];if(!d(Y))throw new dt("Graph.".concat(y,": provided attributes are not a plain object."));return z.attributes=Y,this.emit("nodeAttributesUpdated",{key:z.key,type:"replace",attributes:z.attributes}),this}}},{name:function(h){return"merge".concat(h,"Attributes")},attacher:function(h,y,l){h.prototype[y]=function(s,a,f){var b=qt(this,y,l,s,a,f),z=b[0],Y=b[1];if(!d(Y))throw new dt("Graph.".concat(y,": provided attributes are not a plain object."));return S(z.attributes,Y),this.emit("nodeAttributesUpdated",{key:z.key,type:"merge",attributes:z.attributes,data:Y}),this}}},{name:function(h){return"update".concat(h,"Attributes")},attacher:function(h,y,l){h.prototype[y]=function(s,a,f){var b=qt(this,y,l,s,a,f),z=b[0],Y=b[1];if("function"!=typeof Y)throw new dt("Graph.".concat(y,": provided updater is not a function."));return z.attributes=Y(z.attributes),this.emit("nodeAttributesUpdated",{key:z.key,type:"update",attributes:z.attributes}),this}}}],Ye=[{name:function(h){return"get".concat(h,"Attribute")},attacher:function(h,y,l){h.prototype[y]=function(s,a){var f;if("mixed"!==this.type&&"mixed"!==l&&l!==this.type)throw new bt("Graph.".concat(y,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new bt("Graph.".concat(y,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var b=""+s,z=""+a;if(a=arguments[2],!(f=g(this,b,z,l)))throw new lt("Graph.".concat(y,': could not find an edge for the given path ("').concat(b,'" - "').concat(z,'").'))}else{if("mixed"!==l)throw new bt("Graph.".concat(y,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(f=this._edges.get(s=""+s)))throw new lt("Graph.".concat(y,': could not find the "').concat(s,'" edge in the graph.'))}return f.attributes[a]}}},{name:function(h){return"get".concat(h,"Attributes")},attacher:function(h,y,l){h.prototype[y]=function(s){var a;if("mixed"!==this.type&&"mixed"!==l&&l!==this.type)throw new bt("Graph.".concat(y,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new bt("Graph.".concat(y,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var f=""+s,b=""+arguments[1];if(!(a=g(this,f,b,l)))throw new lt("Graph.".concat(y,': could not find an edge for the given path ("').concat(f,'" - "').concat(b,'").'))}else{if("mixed"!==l)throw new bt("Graph.".concat(y,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(a=this._edges.get(s=""+s)))throw new lt("Graph.".concat(y,': could not find the "').concat(s,'" edge in the graph.'))}return a.attributes}}},{name:function(h){return"has".concat(h,"Attribute")},attacher:function(h,y,l){h.prototype[y]=function(s,a){var f;if("mixed"!==this.type&&"mixed"!==l&&l!==this.type)throw new bt("Graph.".concat(y,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new bt("Graph.".concat(y,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var b=""+s,z=""+a;if(a=arguments[2],!(f=g(this,b,z,l)))throw new lt("Graph.".concat(y,': could not find an edge for the given path ("').concat(b,'" - "').concat(z,'").'))}else{if("mixed"!==l)throw new bt("Graph.".concat(y,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(f=this._edges.get(s=""+s)))throw new lt("Graph.".concat(y,': could not find the "').concat(s,'" edge in the graph.'))}return f.attributes.hasOwnProperty(a)}}},{name:function(h){return"set".concat(h,"Attribute")},attacher:function(h,y,l){h.prototype[y]=function(s,a,f){var b;if("mixed"!==this.type&&"mixed"!==l&&l!==this.type)throw new bt("Graph.".concat(y,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new bt("Graph.".concat(y,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var z=""+s,Y=""+a;if(a=arguments[2],f=arguments[3],!(b=g(this,z,Y,l)))throw new lt("Graph.".concat(y,': could not find an edge for the given path ("').concat(z,'" - "').concat(Y,'").'))}else{if("mixed"!==l)throw new bt("Graph.".concat(y,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(b=this._edges.get(s=""+s)))throw new lt("Graph.".concat(y,': could not find the "').concat(s,'" edge in the graph.'))}return b.attributes[a]=f,this.emit("edgeAttributesUpdated",{key:b.key,type:"set",attributes:b.attributes,name:a}),this}}},{name:function(h){return"update".concat(h,"Attribute")},attacher:function(h,y,l){h.prototype[y]=function(s,a,f){var b;if("mixed"!==this.type&&"mixed"!==l&&l!==this.type)throw new bt("Graph.".concat(y,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new bt("Graph.".concat(y,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var z=""+s,Y=""+a;if(a=arguments[2],f=arguments[3],!(b=g(this,z,Y,l)))throw new lt("Graph.".concat(y,': could not find an edge for the given path ("').concat(z,'" - "').concat(Y,'").'))}else{if("mixed"!==l)throw new bt("Graph.".concat(y,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(b=this._edges.get(s=""+s)))throw new lt("Graph.".concat(y,': could not find the "').concat(s,'" edge in the graph.'))}if("function"!=typeof f)throw new dt("Graph.".concat(y,": updater should be a function."));return b.attributes[a]=f(b.attributes[a]),this.emit("edgeAttributesUpdated",{key:b.key,type:"set",attributes:b.attributes,name:a}),this}}},{name:function(h){return"remove".concat(h,"Attribute")},attacher:function(h,y,l){h.prototype[y]=function(s,a){var f;if("mixed"!==this.type&&"mixed"!==l&&l!==this.type)throw new bt("Graph.".concat(y,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new bt("Graph.".concat(y,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var b=""+s,z=""+a;if(a=arguments[2],!(f=g(this,b,z,l)))throw new lt("Graph.".concat(y,': could not find an edge for the given path ("').concat(b,'" - "').concat(z,'").'))}else{if("mixed"!==l)throw new bt("Graph.".concat(y,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(f=this._edges.get(s=""+s)))throw new lt("Graph.".concat(y,': could not find the "').concat(s,'" edge in the graph.'))}return delete f.attributes[a],this.emit("edgeAttributesUpdated",{key:f.key,type:"remove",attributes:f.attributes,name:a}),this}}},{name:function(h){return"replace".concat(h,"Attributes")},attacher:function(h,y,l){h.prototype[y]=function(s,a){var f;if("mixed"!==this.type&&"mixed"!==l&&l!==this.type)throw new bt("Graph.".concat(y,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new bt("Graph.".concat(y,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var b=""+s,z=""+a;if(a=arguments[2],!(f=g(this,b,z,l)))throw new lt("Graph.".concat(y,': could not find an edge for the given path ("').concat(b,'" - "').concat(z,'").'))}else{if("mixed"!==l)throw new bt("Graph.".concat(y,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(f=this._edges.get(s=""+s)))throw new lt("Graph.".concat(y,': could not find the "').concat(s,'" edge in the graph.'))}if(!d(a))throw new dt("Graph.".concat(y,": provided attributes are not a plain object."));return f.attributes=a,this.emit("edgeAttributesUpdated",{key:f.key,type:"replace",attributes:f.attributes}),this}}},{name:function(h){return"merge".concat(h,"Attributes")},attacher:function(h,y,l){h.prototype[y]=function(s,a){var f;if("mixed"!==this.type&&"mixed"!==l&&l!==this.type)throw new bt("Graph.".concat(y,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new bt("Graph.".concat(y,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var b=""+s,z=""+a;if(a=arguments[2],!(f=g(this,b,z,l)))throw new lt("Graph.".concat(y,': could not find an edge for the given path ("').concat(b,'" - "').concat(z,'").'))}else{if("mixed"!==l)throw new bt("Graph.".concat(y,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(f=this._edges.get(s=""+s)))throw new lt("Graph.".concat(y,': could not find the "').concat(s,'" edge in the graph.'))}if(!d(a))throw new dt("Graph.".concat(y,": provided attributes are not a plain object."));return S(f.attributes,a),this.emit("edgeAttributesUpdated",{key:f.key,type:"merge",attributes:f.attributes,data:a}),this}}},{name:function(h){return"update".concat(h,"Attributes")},attacher:function(h,y,l){h.prototype[y]=function(s,a){var f;if("mixed"!==this.type&&"mixed"!==l&&l!==this.type)throw new bt("Graph.".concat(y,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new bt("Graph.".concat(y,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var b=""+s,z=""+a;if(a=arguments[2],!(f=g(this,b,z,l)))throw new lt("Graph.".concat(y,': could not find an edge for the given path ("').concat(b,'" - "').concat(z,'").'))}else{if("mixed"!==l)throw new bt("Graph.".concat(y,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(f=this._edges.get(s=""+s)))throw new lt("Graph.".concat(y,': could not find the "').concat(s,'" edge in the graph.'))}if("function"!=typeof a)throw new dt("Graph.".concat(y,": provided updater is not a function."));return f.attributes=a(f.attributes),this.emit("edgeAttributesUpdated",{key:f.key,type:"update",attributes:f.attributes}),this}}}],Me=zt,Bn=Rt,ae=function(){var h=arguments,y=null,l=-1;return new Me(function(){for(var s=null;;){if(null===y){if(++l>=h.length)return{done:!0};y=Bn(h[l])}if(!0!==(s=y.next()).done)break;y=null}return s})},$n=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Br(h,y,l,s){var a=!1;for(var f in y)if(f!==s){var b=y[f];if(a=l(b.key,b.attributes,b.source.key,b.target.key,b.source.attributes,b.target.attributes,b.undirected),h&&a)return b.key}}function An(h,y,l,s){var a,f,b,z=!1;for(var Y in y)if(Y!==s){a=y[Y];do{if(z=l(a.key,a.attributes,(f=a.source).key,(b=a.target).key,f.attributes,b.attributes,a.undirected),h&&z)return a.key;a=a.next}while(void 0!==a)}}function rn(h,y){var l,s=Object.keys(h),a=s.length,f=0;return new zt(function(){do{if(l)l=l.next;else{if(f>=a)return{done:!0};var b=s[f++];if(b===y){l=void 0;continue}l=h[b]}}while(!l);return{done:!1,value:{edge:l.key,attributes:l.attributes,source:l.source.key,target:l.target.key,sourceAttributes:l.source.attributes,targetAttributes:l.target.attributes,undirected:l.undirected}}})}function Yn(h,y,l,s){var a=y[l];if(a){var f=a.source,b=a.target;return s(a.key,a.attributes,f.key,b.key,f.attributes,b.attributes,a.undirected)&&h?a.key:void 0}}function Xn(h,y,l,s){var a=y[l];if(a){var f=!1;do{if(f=s(a.key,a.attributes,a.source.key,a.target.key,a.source.attributes,a.target.attributes,a.undirected),h&&f)return a.key;a=a.next}while(void 0!==a)}}function En(h,y){var l=h[y];return void 0!==l.next?new zt(function(){if(!l)return{done:!0};var s={edge:l.key,attributes:l.attributes,source:l.source.key,target:l.target.key,sourceAttributes:l.source.attributes,targetAttributes:l.target.attributes,undirected:l.undirected};return l=l.next,{done:!1,value:s}}):zt.of({edge:l.key,attributes:l.attributes,source:l.source.key,target:l.target.key,sourceAttributes:l.source.attributes,targetAttributes:l.target.attributes,undirected:l.undirected})}function on(h,y){if(0===h.size)return[];if("mixed"===y||y===h.type)return"function"==typeof Array.from?Array.from(h._edges.keys()):Ht(h._edges.keys(),h._edges.size);for(var l,s,f=new Array("undirected"===y?h.undirectedSize:h.directedSize),b="undirected"===y,z=h._edges.values(),Y=0;!0!==(l=z.next()).done;)(s=l.value).undirected===b&&(f[Y++]=s.key);return f}function Xe(h,y,l,s){if(0!==y.size)for(var a,f,b="mixed"!==l&&l!==y.type,z="undirected"===l,Y=!1,ct=y._edges.values();!0!==(a=ct.next()).done;)if(f=a.value,!b||f.undirected===z){var ot=f.key,mt=f.source,Gt=f.target;if(Y=s(ot,f.attributes,mt.key,Gt.key,mt.attributes,Gt.attributes,f.undirected),h&&Y)return ot}}function _n(h,y){if(0===h.size)return zt.empty();var l="mixed"!==y&&y!==h.type,s="undirected"===y,a=h._edges.values();return new zt(function(){for(var f,b;;){if((f=a.next()).done)return f;if(b=f.value,!l||b.undirected===s)break}return{value:{edge:b.key,attributes:b.attributes,source:b.source.key,target:b.target.key,sourceAttributes:b.source.attributes,targetAttributes:b.target.attributes,undirected:b.undirected},done:!1}})}function De(h,y,l,s,a,f){var b,z=y?An:Br;if("undirected"!==l&&("out"!==s&&(b=z(h,a.in,f),h&&b)||"in"!==s&&(b=z(h,a.out,f,s?void 0:a.key),h&&b))||"directed"!==l&&(b=z(h,a.undirected,f),h&&b))return b}function Vn(h,y,l,s){var a=[];return De(!1,h,y,l,s,function(f){a.push(f)}),a}function $r(h,y,l){var s=zt.empty();return"undirected"!==h&&("out"!==y&&void 0!==l.in&&(s=ae(s,rn(l.in))),"in"!==y&&void 0!==l.out&&(s=ae(s,rn(l.out,y?void 0:l.key)))),"directed"!==h&&void 0!==l.undirected&&(s=ae(s,rn(l.undirected))),s}function kn(h,y,l,s,a,f,b){var z,Y=l?Xn:Yn;if("undirected"!==y&&(void 0!==a.in&&"out"!==s&&(z=Y(h,a.in,f,b),h&&z)||void 0!==a.out&&"in"!==s&&(s||a.key!==f)&&(z=Y(h,a.out,f,b),h&&z))||"directed"!==y&&void 0!==a.undirected&&(z=Y(h,a.undirected,f,b),h&&z))return z}function Yr(h,y,l,s,a){var f=[];return kn(!1,h,y,l,s,a,function(b){f.push(b)}),f}function Xr(h,y,l,s){var a=zt.empty();return"undirected"!==h&&(void 0!==l.in&&"out"!==y&&s in l.in&&(a=ae(a,En(l.in,s))),void 0!==l.out&&"in"!==y&&s in l.out&&(y||l.key!==s)&&(a=ae(a,En(l.out,s)))),"directed"!==h&&void 0!==l.undirected&&s in l.undirected&&(a=ae(a,En(l.undirected,s))),a}var Vr=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function ze(){this.A=null,this.B=null}function Ve(h,y,l,s,a){for(var f in s){var b=s[f],z=b.source,ct=z===l?b.target:z;if(!y||!y.has(ct.key)){var ut=a(ct.key,ct.attributes);if(h&&ut)return ct.key}}}function Cn(h,y,l,s,a){if("mixed"!==y){if("undirected"===y)return Ve(h,null,s,s.undirected,a);if("string"==typeof l)return Ve(h,null,s,s[l],a)}var f,b=new ze;if("undirected"!==y){if("out"!==l){if(f=Ve(h,null,s,s.in,a),h&&f)return f;b.wrap(s.in)}if("in"!==l){if(f=Ve(h,b,s,s.out,a),h&&f)return f;b.wrap(s.out)}}if("directed"!==y&&(f=Ve(h,b,s,s.undirected,a),h&&f))return f}function Re(h,y,l){var s=Object.keys(l),a=s.length,f=0;return new zt(function(){var b=null;do{if(f>=a)return h&&h.wrap(l),{done:!0};var z=l[s[f++]],Y=z.source;b=Y===y?z.target:Y,h&&h.has(b.key)&&(b=null)}while(null===b);return{done:!1,value:{neighbor:b.key,attributes:b.attributes}}})}function Ze(h,y,l,s,a){for(var f,b,z,Y,ct,ut,ot,yt=s._nodes.values(),mt=s.type;!0!==(f=yt.next()).done;){var Gt=!1;if(b=f.value,"undirected"!==mt)for(z in Y=b.out){ct=Y[z];do{if(Gt=!0,ot=a(b.key,(ut=ct.target).key,b.attributes,ut.attributes,ct.key,ct.attributes,ct.undirected),h&&ot)return ct;ct=ct.next}while(ct)}if("directed"!==mt)for(z in Y=b.undirected)if(!(y&&b.key>z)){ct=Y[z];do{if((ut=ct.target).key!==z&&(ut=ct.source),Gt=!0,ot=a(b.key,ut.key,b.attributes,ut.attributes,ct.key,ct.attributes,ct.undirected),h&&ot)return ct;ct=ct.next}while(ct)}if(l&&!Gt&&(ot=a(b.key,null,b.attributes,null,null,null,null),h&&ot))return null}}function qr(h){if(!d(h))throw new dt('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in h))throw new dt("Graph.import: serialized node is missing its key.");if("attributes"in h&&(!d(h.attributes)||null===h.attributes))throw new dt("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Kr(h){if(!d(h))throw new dt('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in h))throw new dt("Graph.import: serialized edge is missing its source.");if(!("target"in h))throw new dt("Graph.import: serialized edge is missing its target.");if("attributes"in h&&(!d(h.attributes)||null===h.attributes))throw new dt("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in h&&"boolean"!=typeof h.undirected)throw new dt("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}ze.prototype.wrap=function(h){null===this.A?this.A=h:null===this.B&&(this.B=h)},ze.prototype.has=function(h){return null!==this.A&&h in this.A||null!==this.B&&h in this.B};var Hn,qn=(Hn=255&Math.floor(256*Math.random()),function(){return Hn++}),Jr=new Set(["directed","undirected","mixed"]),Kn=new Set(["domain","_events","_eventsCount","_maxListeners"]),Jn={allowSelfLoops:!0,multi:!1,type:"mixed"};function Nn(h,y,l){var s=new h.NodeDataClass(y,l);return h._nodes.set(y,s),h.emit("nodeAdded",{key:y,attributes:l}),s}function Qn(h,y,l,s,a,f,b,z){if(!s&&"undirected"===h.type)throw new bt("Graph.".concat(y,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(s&&"directed"===h.type)throw new bt("Graph.".concat(y,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(z&&!d(z))throw new dt("Graph.".concat(y,': invalid attributes. Expecting an object but got "').concat(z,'"'));if(f=""+f,b=""+b,z=z||{},!h.allowSelfLoops&&f===b)throw new bt("Graph.".concat(y,': source & target are the same ("').concat(f,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var Y=h._nodes.get(f),ct=h._nodes.get(b);if(!Y)throw new lt("Graph.".concat(y,': source node "').concat(f,'" not found.'));if(!ct)throw new lt("Graph.".concat(y,': target node "').concat(b,'" not found.'));var ut={key:null,undirected:s,source:f,target:b,attributes:z};if(l)a=h._edgeKeyGenerator();else if(h._edges.has(a=""+a))throw new bt("Graph.".concat(y,': the "').concat(a,'" edge already exists in the graph.'));if(!h.multi&&(s?void 0!==Y.undirected[b]:void 0!==Y.out[b]))throw new bt("Graph.".concat(y,': an edge linking "').concat(f,'" to "').concat(b,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var ot=new Qt(s,a,Y,ct,z);h._edges.set(a,ot);var yt=f===b;return s?(Y.undirectedDegree++,ct.undirectedDegree++,yt&&(Y.undirectedLoops++,h._undirectedSelfLoopCount++)):(Y.outDegree++,ct.inDegree++,yt&&(Y.directedLoops++,h._directedSelfLoopCount++)),h.multi?ot.attachMulti():ot.attach(),s?h._undirectedSize++:h._directedSize++,ut.key=a,h.emit("edgeAdded",ut),a}function Qr(h,y,l,s,a,f,b,z,Y){if(!s&&"undirected"===h.type)throw new bt("Graph.".concat(y,": you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead."));if(s&&"directed"===h.type)throw new bt("Graph.".concat(y,": you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead."));if(z)if(Y){if("function"!=typeof z)throw new dt("Graph.".concat(y,': invalid updater function. Expecting a function but got "').concat(z,'"'))}else if(!d(z))throw new dt("Graph.".concat(y,': invalid attributes. Expecting an object but got "').concat(z,'"'));var ct;if(f=""+f,b=""+b,Y&&(ct=z,z=void 0),!h.allowSelfLoops&&f===b)throw new bt("Graph.".concat(y,': source & target are the same ("').concat(f,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var ut,ot,yt=h._nodes.get(f),mt=h._nodes.get(b);if(!l&&(ut=h._edges.get(a))){if(!(ut.source.key===f&&ut.target.key===b||s&&ut.source.key===b&&ut.target.key===f))throw new bt("Graph.".concat(y,': inconsistency detected when attempting to merge the "').concat(a,'" edge with "').concat(f,'" source & "').concat(b,'" target vs. ("').concat(ut.source.key,'", "').concat(ut.target.key,'").'));ot=ut}if(ot||h.multi||!yt||(ot=s?yt.undirected[b]:yt.out[b]),ot){var Gt=[ot.key,!1,!1,!1];return(Y?ct:z)?(Y?(ot.attributes=ct(ot.attributes),h.emit("edgeAttributesUpdated",{type:"replace",key:ot.key,attributes:ot.attributes})):(S(ot.attributes,z),h.emit("edgeAttributesUpdated",{type:"merge",key:ot.key,attributes:ot.attributes,data:z})),Gt):Gt}z=z||{},Y&&ct&&(z=ct(z));var Yt={key:null,undirected:s,source:f,target:b,attributes:z};if(l)a=h._edgeKeyGenerator();else if(h._edges.has(a=""+a))throw new bt("Graph.".concat(y,': the "').concat(a,'" edge already exists in the graph.'));var ee=!1,te=!1;yt||(yt=Nn(h,f,{}),ee=!0,f===b&&(mt=yt,te=!0)),mt||(mt=Nn(h,b,{}),te=!0),ut=new Qt(s,a,yt,mt,z),h._edges.set(a,ut);var ge=f===b;return s?(yt.undirectedDegree++,mt.undirectedDegree++,ge&&(yt.undirectedLoops++,h._undirectedSelfLoopCount++)):(yt.outDegree++,mt.inDegree++,ge&&(yt.directedLoops++,h._directedSelfLoopCount++)),h.multi?ut.attachMulti():ut.attach(),s?h._undirectedSize++:h._directedSize++,Yt.key=a,h.emit("edgeAdded",Yt),[a,!0,ee,te]}function je(h,y){h._edges.delete(y.key);var l=y.source,s=y.target,a=y.attributes,f=y.undirected,b=l===s;f?(l.undirectedDegree--,s.undirectedDegree--,b&&(l.undirectedLoops--,h._undirectedSelfLoopCount--)):(l.outDegree--,s.inDegree--,b&&(l.directedLoops--,h._directedSelfLoopCount--)),h.multi?y.detachMulti():y.detach(),f?h._undirectedSize--:h._directedSize--,h.emit("edgeDropped",{key:y.key,attributes:a,source:l.key,target:s.key,undirected:f})}var h,$t=function(h){function y(s){var a;if(a=h.call(this)||this,"boolean"!=typeof(s=S({},Jn,s)).multi)throw new dt("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(s.multi,'".'));if(!Jr.has(s.type))throw new dt('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(s.type,'".'));if("boolean"!=typeof s.allowSelfLoops)throw new dt("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(s.allowSelfLoops,'".'));var f="mixed"===s.type?re:"directed"===s.type?oe:se;x(A(a),"NodeDataClass",f);var b="geid_"+qn()+"_",z=0;return x(A(a),"_attributes",{}),x(A(a),"_nodes",new Map),x(A(a),"_edges",new Map),x(A(a),"_directedSize",0),x(A(a),"_undirectedSize",0),x(A(a),"_directedSelfLoopCount",0),x(A(a),"_undirectedSelfLoopCount",0),x(A(a),"_edgeKeyGenerator",function(){var Y;do{Y=b+z++}while(a._edges.has(Y));return Y}),x(A(a),"_options",s),Kn.forEach(function(Y){return x(A(a),Y,a[Y])}),E(A(a),"order",function(){return a._nodes.size}),E(A(a),"size",function(){return a._edges.size}),E(A(a),"directedSize",function(){return a._directedSize}),E(A(a),"undirectedSize",function(){return a._undirectedSize}),E(A(a),"selfLoopCount",function(){return a._directedSelfLoopCount+a._undirectedSelfLoopCount}),E(A(a),"directedSelfLoopCount",function(){return a._directedSelfLoopCount}),E(A(a),"undirectedSelfLoopCount",function(){return a._undirectedSelfLoopCount}),E(A(a),"multi",a._options.multi),E(A(a),"type",a._options.type),E(A(a),"allowSelfLoops",a._options.allowSelfLoops),E(A(a),"implementation",function(){return"graphology"}),a}N(y,h);var l=y.prototype;return l._resetInstanceCounters=function(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0},l.hasNode=function(s){return this._nodes.has(""+s)},l.hasDirectedEdge=function(s,a){if("undirected"===this.type)return!1;if(1===arguments.length){var b=this._edges.get(""+s);return!!b&&!b.undirected}if(2===arguments.length){a=""+a;var z=this._nodes.get(s=""+s);return!!z&&z.out.hasOwnProperty(a)}throw new dt("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},l.hasUndirectedEdge=function(s,a){if("directed"===this.type)return!1;if(1===arguments.length){var b=this._edges.get(""+s);return!!b&&b.undirected}if(2===arguments.length){a=""+a;var z=this._nodes.get(s=""+s);return!!z&&z.undirected.hasOwnProperty(a)}throw new dt("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},l.hasEdge=function(s,a){if(1===arguments.length)return this._edges.has(""+s);if(2===arguments.length){a=""+a;var b=this._nodes.get(s=""+s);return!!b&&(void 0!==b.out&&b.out.hasOwnProperty(a)||void 0!==b.undirected&&b.undirected.hasOwnProperty(a))}throw new dt("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},l.directedEdge=function(s,a){if("undirected"!==this.type){if(s=""+s,a=""+a,this.multi)throw new bt("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var f=this._nodes.get(s);if(!f)throw new lt('Graph.directedEdge: could not find the "'.concat(s,'" source node in the graph.'));if(!this._nodes.has(a))throw new lt('Graph.directedEdge: could not find the "'.concat(a,'" target node in the graph.'));var b=f.out&&f.out[a]||void 0;return b?b.key:void 0}},l.undirectedEdge=function(s,a){if("directed"!==this.type){if(s=""+s,a=""+a,this.multi)throw new bt("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var f=this._nodes.get(s);if(!f)throw new lt('Graph.undirectedEdge: could not find the "'.concat(s,'" source node in the graph.'));if(!this._nodes.has(a))throw new lt('Graph.undirectedEdge: could not find the "'.concat(a,'" target node in the graph.'));var b=f.undirected&&f.undirected[a]||void 0;return b?b.key:void 0}},l.edge=function(s,a){if(this.multi)throw new bt("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");a=""+a;var f=this._nodes.get(s=""+s);if(!f)throw new lt('Graph.edge: could not find the "'.concat(s,'" source node in the graph.'));if(!this._nodes.has(a))throw new lt('Graph.edge: could not find the "'.concat(a,'" target node in the graph.'));var b=f.out&&f.out[a]||f.undirected&&f.undirected[a]||void 0;if(b)return b.key},l.areDirectedNeighbors=function(s,a){a=""+a;var f=this._nodes.get(s=""+s);if(!f)throw new lt('Graph.areDirectedNeighbors: could not find the "'.concat(s,'" node in the graph.'));return"undirected"!==this.type&&(a in f.in||a in f.out)},l.areOutNeighbors=function(s,a){a=""+a;var f=this._nodes.get(s=""+s);if(!f)throw new lt('Graph.areOutNeighbors: could not find the "'.concat(s,'" node in the graph.'));return"undirected"!==this.type&&a in f.out},l.areInNeighbors=function(s,a){a=""+a;var f=this._nodes.get(s=""+s);if(!f)throw new lt('Graph.areInNeighbors: could not find the "'.concat(s,'" node in the graph.'));return"undirected"!==this.type&&a in f.in},l.areUndirectedNeighbors=function(s,a){a=""+a;var f=this._nodes.get(s=""+s);if(!f)throw new lt('Graph.areUndirectedNeighbors: could not find the "'.concat(s,'" node in the graph.'));return"directed"!==this.type&&a in f.undirected},l.areNeighbors=function(s,a){a=""+a;var f=this._nodes.get(s=""+s);if(!f)throw new lt('Graph.areNeighbors: could not find the "'.concat(s,'" node in the graph.'));return"undirected"!==this.type&&(a in f.in||a in f.out)||"directed"!==this.type&&a in f.undirected},l.areInboundNeighbors=function(s,a){a=""+a;var f=this._nodes.get(s=""+s);if(!f)throw new lt('Graph.areInboundNeighbors: could not find the "'.concat(s,'" node in the graph.'));return"undirected"!==this.type&&a in f.in||"directed"!==this.type&&a in f.undirected},l.areOutboundNeighbors=function(s,a){a=""+a;var f=this._nodes.get(s=""+s);if(!f)throw new lt('Graph.areOutboundNeighbors: could not find the "'.concat(s,'" node in the graph.'));return"undirected"!==this.type&&a in f.out||"directed"!==this.type&&a in f.undirected},l.inDegree=function(s){var a=this._nodes.get(s=""+s);if(!a)throw new lt('Graph.inDegree: could not find the "'.concat(s,'" node in the graph.'));return"undirected"===this.type?0:a.inDegree},l.outDegree=function(s){var a=this._nodes.get(s=""+s);if(!a)throw new lt('Graph.outDegree: could not find the "'.concat(s,'" node in the graph.'));return"undirected"===this.type?0:a.outDegree},l.directedDegree=function(s){var a=this._nodes.get(s=""+s);if(!a)throw new lt('Graph.directedDegree: could not find the "'.concat(s,'" node in the graph.'));return"undirected"===this.type?0:a.inDegree+a.outDegree},l.undirectedDegree=function(s){var a=this._nodes.get(s=""+s);if(!a)throw new lt('Graph.undirectedDegree: could not find the "'.concat(s,'" node in the graph.'));return"directed"===this.type?0:a.undirectedDegree},l.inboundDegree=function(s){var a=this._nodes.get(s=""+s);if(!a)throw new lt('Graph.inboundDegree: could not find the "'.concat(s,'" node in the graph.'));var f=0;return"directed"!==this.type&&(f+=a.undirectedDegree),"undirected"!==this.type&&(f+=a.inDegree),f},l.outboundDegree=function(s){var a=this._nodes.get(s=""+s);if(!a)throw new lt('Graph.outboundDegree: could not find the "'.concat(s,'" node in the graph.'));var f=0;return"directed"!==this.type&&(f+=a.undirectedDegree),"undirected"!==this.type&&(f+=a.outDegree),f},l.degree=function(s){var a=this._nodes.get(s=""+s);if(!a)throw new lt('Graph.degree: could not find the "'.concat(s,'" node in the graph.'));var f=0;return"directed"!==this.type&&(f+=a.undirectedDegree),"undirected"!==this.type&&(f+=a.inDegree+a.outDegree),f},l.inDegreeWithoutSelfLoops=function(s){var a=this._nodes.get(s=""+s);if(!a)throw new lt('Graph.inDegreeWithoutSelfLoops: could not find the "'.concat(s,'" node in the graph.'));return"undirected"===this.type?0:a.inDegree-a.directedLoops},l.outDegreeWithoutSelfLoops=function(s){var a=this._nodes.get(s=""+s);if(!a)throw new lt('Graph.outDegreeWithoutSelfLoops: could not find the "'.concat(s,'" node in the graph.'));return"undirected"===this.type?0:a.outDegree-a.directedLoops},l.directedDegreeWithoutSelfLoops=function(s){var a=this._nodes.get(s=""+s);if(!a)throw new lt('Graph.directedDegreeWithoutSelfLoops: could not find the "'.concat(s,'" node in the graph.'));return"undirected"===this.type?0:a.inDegree+a.outDegree-2*a.directedLoops},l.undirectedDegreeWithoutSelfLoops=function(s){var a=this._nodes.get(s=""+s);if(!a)throw new lt('Graph.undirectedDegreeWithoutSelfLoops: could not find the "'.concat(s,'" node in the graph.'));return"directed"===this.type?0:a.undirectedDegree-2*a.undirectedLoops},l.inboundDegreeWithoutSelfLoops=function(s){var a=this._nodes.get(s=""+s);if(!a)throw new lt('Graph.inboundDegreeWithoutSelfLoops: could not find the "'.concat(s,'" node in the graph.'));var f=0,b=0;return"directed"!==this.type&&(f+=a.undirectedDegree,b+=2*a.undirectedLoops),"undirected"!==this.type&&(f+=a.inDegree,b+=a.directedLoops),f-b},l.outboundDegreeWithoutSelfLoops=function(s){var a=this._nodes.get(s=""+s);if(!a)throw new lt('Graph.outboundDegreeWithoutSelfLoops: could not find the "'.concat(s,'" node in the graph.'));var f=0,b=0;return"directed"!==this.type&&(f+=a.undirectedDegree,b+=2*a.undirectedLoops),"undirected"!==this.type&&(f+=a.outDegree,b+=a.directedLoops),f-b},l.degreeWithoutSelfLoops=function(s){var a=this._nodes.get(s=""+s);if(!a)throw new lt('Graph.degreeWithoutSelfLoops: could not find the "'.concat(s,'" node in the graph.'));var f=0,b=0;return"directed"!==this.type&&(f+=a.undirectedDegree,b+=2*a.undirectedLoops),"undirected"!==this.type&&(f+=a.inDegree+a.outDegree,b+=2*a.directedLoops),f-b},l.source=function(s){var a=this._edges.get(s=""+s);if(!a)throw new lt('Graph.source: could not find the "'.concat(s,'" edge in the graph.'));return a.source.key},l.target=function(s){var a=this._edges.get(s=""+s);if(!a)throw new lt('Graph.target: could not find the "'.concat(s,'" edge in the graph.'));return a.target.key},l.extremities=function(s){var a=this._edges.get(s=""+s);if(!a)throw new lt('Graph.extremities: could not find the "'.concat(s,'" edge in the graph.'));return[a.source.key,a.target.key]},l.opposite=function(s,a){s=""+s;var f=this._edges.get(a=""+a);if(!f)throw new lt('Graph.opposite: could not find the "'.concat(a,'" edge in the graph.'));var b=f.source.key,z=f.target.key;if(s===b)return z;if(s===z)return b;throw new lt('Graph.opposite: the "'.concat(s,'" node is not attached to the "').concat(a,'" edge (').concat(b,", ").concat(z,")."))},l.hasExtremity=function(s,a){a=""+a;var f=this._edges.get(s=""+s);if(!f)throw new lt('Graph.hasExtremity: could not find the "'.concat(s,'" edge in the graph.'));return f.source.key===a||f.target.key===a},l.isUndirected=function(s){var a=this._edges.get(s=""+s);if(!a)throw new lt('Graph.isUndirected: could not find the "'.concat(s,'" edge in the graph.'));return a.undirected},l.isDirected=function(s){var a=this._edges.get(s=""+s);if(!a)throw new lt('Graph.isDirected: could not find the "'.concat(s,'" edge in the graph.'));return!a.undirected},l.isSelfLoop=function(s){var a=this._edges.get(s=""+s);if(!a)throw new lt('Graph.isSelfLoop: could not find the "'.concat(s,'" edge in the graph.'));return a.source===a.target},l.addNode=function(s,a){return function(b,z,Y){if(Y&&!d(Y))throw new dt('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(Y,'"'));if(Y=Y||{},b._nodes.has(z=""+z))throw new bt('Graph.addNode: the "'.concat(z,'" node already exist in the graph.'));var ct=new b.NodeDataClass(z,Y);return b._nodes.set(z,ct),b.emit("nodeAdded",{key:z,attributes:Y}),ct}(this,s,a).key},l.mergeNode=function(s,a){if(a&&!d(a))throw new dt('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(a,'"'));a=a||{};var f=this._nodes.get(s=""+s);return f?(a&&(S(f.attributes,a),this.emit("nodeAttributesUpdated",{type:"merge",key:s,attributes:f.attributes,data:a})),[s,!1]):(f=new this.NodeDataClass(s,a),this._nodes.set(s,f),this.emit("nodeAdded",{key:s,attributes:a}),[s,!0])},l.updateNode=function(s,a){if(a&&"function"!=typeof a)throw new dt('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(a,'"'));var f=this._nodes.get(s=""+s);if(f)return a&&(f.attributes=a(f.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:s,attributes:f.attributes})),[s,!1];var z=a?a({}):{};return f=new this.NodeDataClass(s,z),this._nodes.set(s,f),this.emit("nodeAdded",{key:s,attributes:z}),[s,!0]},l.dropNode=function(s){var a,f=this._nodes.get(s=""+s);if(!f)throw new lt('Graph.dropNode: could not find the "'.concat(s,'" node in the graph.'));if("undirected"!==this.type){for(var b in f.out){a=f.out[b];do{je(this,a),a=a.next}while(a)}for(var z in f.in){a=f.in[z];do{je(this,a),a=a.next}while(a)}}if("directed"!==this.type)for(var Y in f.undirected){a=f.undirected[Y];do{je(this,a),a=a.next}while(a)}this._nodes.delete(s),this.emit("nodeDropped",{key:s,attributes:f.attributes})},l.dropEdge=function(s){var a;if(arguments.length>1){var f=""+arguments[0],b=""+arguments[1];if(!(a=g(this,f,b,this.type)))throw new lt('Graph.dropEdge: could not find the "'.concat(f,'" -> "').concat(b,'" edge in the graph.'))}else if(!(a=this._edges.get(s=""+s)))throw new lt('Graph.dropEdge: could not find the "'.concat(s,'" edge in the graph.'));return je(this,a),this},l.dropDirectedEdge=function(s,a){if(arguments.length<2)throw new bt("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new bt("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var f=g(this,s=""+s,a=""+a,"directed");if(!f)throw new lt('Graph.dropDirectedEdge: could not find a "'.concat(s,'" -> "').concat(a,'" edge in the graph.'));return je(this,f),this},l.dropUndirectedEdge=function(s,a){if(arguments.length<2)throw new bt("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new bt("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var f=g(this,s,a,"undirected");if(!f)throw new lt('Graph.dropUndirectedEdge: could not find a "'.concat(s,'" -> "').concat(a,'" edge in the graph.'));return je(this,f),this},l.clear=function(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")},l.clearEdges=function(){for(var s,a=this._nodes.values();!0!==(s=a.next()).done;)s.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")},l.getAttribute=function(s){return this._attributes[s]},l.getAttributes=function(){return this._attributes},l.hasAttribute=function(s){return this._attributes.hasOwnProperty(s)},l.setAttribute=function(s,a){return this._attributes[s]=a,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:s}),this},l.updateAttribute=function(s,a){if("function"!=typeof a)throw new dt("Graph.updateAttribute: updater should be a function.");return this._attributes[s]=a(this._attributes[s]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:s}),this},l.removeAttribute=function(s){return delete this._attributes[s],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:s}),this},l.replaceAttributes=function(s){if(!d(s))throw new dt("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=s,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},l.mergeAttributes=function(s){if(!d(s))throw new dt("Graph.mergeAttributes: provided attributes are not a plain object.");return S(this._attributes,s),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:s}),this},l.updateAttributes=function(s){if("function"!=typeof s)throw new dt("Graph.updateAttributes: provided updater is not a function.");return this._attributes=s(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this},l.updateEachNodeAttributes=function(s,a){if("function"!=typeof s)throw new dt("Graph.updateEachNodeAttributes: expecting an updater function.");if(a&&!_(a))throw new dt("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var f,b,z=this._nodes.values();!0!==(f=z.next()).done;)(b=f.value).attributes=s(b.key,b.attributes);this.emit("eachNodeAttributesUpdated",{hints:a||null})},l.updateEachEdgeAttributes=function(s,a){if("function"!=typeof s)throw new dt("Graph.updateEachEdgeAttributes: expecting an updater function.");if(a&&!_(a))throw new dt("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var f,b,z,Y,ct=this._edges.values();!0!==(f=ct.next()).done;)z=(b=f.value).source,b.attributes=s(b.key,b.attributes,z.key,(Y=b.target).key,z.attributes,Y.attributes,b.undirected);this.emit("eachEdgeAttributesUpdated",{hints:a||null})},l.forEachAdjacencyEntry=function(s){if("function"!=typeof s)throw new dt("Graph.forEachAdjacencyEntry: expecting a callback.");Ze(!1,!1,!1,this,s)},l.forEachAdjacencyEntryWithOrphans=function(s){if("function"!=typeof s)throw new dt("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Ze(!1,!1,!0,this,s)},l.forEachAssymetricAdjacencyEntry=function(s){if("function"!=typeof s)throw new dt("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Ze(!1,!0,!1,this,s)},l.forEachAssymetricAdjacencyEntryWithOrphans=function(s){if("function"!=typeof s)throw new dt("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Ze(!1,!0,!0,this,s)},l.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):Ht(this._nodes.keys(),this._nodes.size)},l.forEachNode=function(s){if("function"!=typeof s)throw new dt("Graph.forEachNode: expecting a callback.");for(var a,f,b=this._nodes.values();!0!==(a=b.next()).done;)s((f=a.value).key,f.attributes)},l.findNode=function(s){if("function"!=typeof s)throw new dt("Graph.findNode: expecting a callback.");for(var a,f,b=this._nodes.values();!0!==(a=b.next()).done;)if(s((f=a.value).key,f.attributes))return f.key},l.mapNodes=function(s){if("function"!=typeof s)throw new dt("Graph.mapNode: expecting a callback.");for(var a,f,b=this._nodes.values(),z=new Array(this.order),Y=0;!0!==(a=b.next()).done;)z[Y++]=s((f=a.value).key,f.attributes);return z},l.someNode=function(s){if("function"!=typeof s)throw new dt("Graph.someNode: expecting a callback.");for(var a,f,b=this._nodes.values();!0!==(a=b.next()).done;)if(s((f=a.value).key,f.attributes))return!0;return!1},l.everyNode=function(s){if("function"!=typeof s)throw new dt("Graph.everyNode: expecting a callback.");for(var a,f,b=this._nodes.values();!0!==(a=b.next()).done;)if(!s((f=a.value).key,f.attributes))return!1;return!0},l.filterNodes=function(s){if("function"!=typeof s)throw new dt("Graph.filterNodes: expecting a callback.");for(var a,f,b=this._nodes.values(),z=[];!0!==(a=b.next()).done;)s((f=a.value).key,f.attributes)&&z.push(f.key);return z},l.reduceNodes=function(s,a){if("function"!=typeof s)throw new dt("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new dt("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");for(var f,b,z=a,Y=this._nodes.values();!0!==(f=Y.next()).done;)z=s(z,(b=f.value).key,b.attributes);return z},l.nodeEntries=function(){var s=this._nodes.values();return new zt(function(){var a=s.next();if(a.done)return a;var f=a.value;return{value:{node:f.key,attributes:f.attributes},done:!1}})},l.export=function(){var s=this,a=new Array(this._nodes.size),f=0;this._nodes.forEach(function(z,Y){var ut,ot;a[f++]=(ot={key:Y},v((ut=z).attributes)||(ot.attributes=S({},ut.attributes)),ot)});var b=new Array(this._edges.size);return f=0,this._edges.forEach(function(z,Y){var ct,ot,yt;b[f++]=(ct=s.type,yt={key:Y,source:(ot=z).source.key,target:ot.target.key},v(ot.attributes)||(yt.attributes=S({},ot.attributes)),"mixed"===ct&&ot.undirected&&(yt.undirected=!0),yt)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:a,edges:b}},l.import=function(s){var a,f,b,z,Y,ct=this,ut=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(s instanceof y)return s.forEachNode(function(ce,he){ut?ct.mergeNode(ce,he):ct.addNode(ce,he)}),s.forEachEdge(function(ce,he,sn,an,Pi,Ui,or){ut?or?ct.mergeUndirectedEdgeWithKey(ce,sn,an,he):ct.mergeDirectedEdgeWithKey(ce,sn,an,he):or?ct.addUndirectedEdgeWithKey(ce,sn,an,he):ct.addDirectedEdgeWithKey(ce,sn,an,he)}),this;if(!d(s))throw new dt("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(s.attributes){if(!d(s.attributes))throw new dt("Graph.import: invalid attributes. Expecting a plain object.");ut?this.mergeAttributes(s.attributes):this.replaceAttributes(s.attributes)}if(s.nodes){if(b=s.nodes,!Array.isArray(b))throw new dt("Graph.import: invalid nodes. Expecting an array.");for(a=0,f=b.length;a<f;a++){qr(z=b[a]);var yt=z.key,mt=z.attributes;ut?this.mergeNode(yt,mt):this.addNode(yt,mt)}}if(s.edges){var Gt=!1;if("undirected"===this.type&&(Gt=!0),b=s.edges,!Array.isArray(b))throw new dt("Graph.import: invalid edges. Expecting an array.");for(a=0,f=b.length;a<f;a++){Kr(Y=b[a]);var Yt=Y.source,ee=Y.target,te=Y.attributes,ge=Y.undirected,ue=void 0===ge?Gt:ge;"key"in Y?(ut?ue?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:ue?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,Y.key,Yt,ee,te):(ut?ue?this.mergeUndirectedEdge:this.mergeDirectedEdge:ue?this.addUndirectedEdge:this.addDirectedEdge).call(this,Yt,ee,te)}}return this},l.nullCopy=function(s){var a=new y(S({},this._options,s));return a.replaceAttributes(S({},this.getAttributes())),a},l.emptyCopy=function(s){var a=this.nullCopy(s);return this._nodes.forEach(function(f,b){var z=S({},f.attributes);f=new a.NodeDataClass(b,z),a._nodes.set(b,f)}),a},l.copy=function(s){if("string"==typeof(s=s||{}).type&&s.type!==this.type&&"mixed"!==s.type)throw new bt('Graph.copy: cannot create an incompatible copy from "'.concat(this.type,'" type to "').concat(s.type,'" because this would mean losing information about the current graph.'));if("boolean"==typeof s.multi&&s.multi!==this.multi&&!0!==s.multi)throw new bt("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if("boolean"==typeof s.allowSelfLoops&&s.allowSelfLoops!==this.allowSelfLoops&&!0!==s.allowSelfLoops)throw new bt("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");for(var a,f,b=this.emptyCopy(s),z=this._edges.values();!0!==(a=z.next()).done;)Qn(b,"copy",!1,(f=a.value).undirected,f.key,f.source.key,f.target.key,S({},f.attributes));return b},l.toJSON=function(){return this.export()},l.toString=function(){return"[object Graph]"},l.inspect=function(){var s=this,a={};this._nodes.forEach(function(ct,ut){a[ut]=ct.attributes});var f={},b={};this._edges.forEach(function(ct,ut){var ot,yt=ct.undirected?"--":"->",mt="",Gt=ct.source.key,Ft=ct.target.key;ct.undirected&&Gt>Ft&&(ot=Gt,Gt=Ft,Ft=ot);var Yt="(".concat(Gt,")").concat(yt,"(").concat(Ft,")");ut.startsWith("geid_")?s.multi&&(void 0===b[Yt]?b[Yt]=0:b[Yt]++,mt+="".concat(b[Yt],". ")):mt+="[".concat(ut,"]: "),f[mt+=Yt]=ct.attributes});var z={};for(var Y in this)this.hasOwnProperty(Y)&&!Kn.has(Y)&&"function"!=typeof this[Y]&&"symbol"!==tt(Y)&&(z[Y]=this[Y]);return z.attributes=this._attributes,z.nodes=a,z.edges=f,x(z,"constructor",this.constructor),z},y}(T.exports.EventEmitter);"undefined"!=typeof Symbol&&($t.prototype[Symbol.for("nodejs.util.inspect.custom")]=$t.prototype.inspect),[{name:function(h){return"".concat(h,"Edge")},generateKey:!0},{name:function(h){return"".concat(h,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(h){return"".concat(h,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(h){return"".concat(h,"EdgeWithKey")}},{name:function(h){return"".concat(h,"DirectedEdgeWithKey")},type:"directed"},{name:function(h){return"".concat(h,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(h){["add","merge","update"].forEach(function(y){var l=h.name(y),s="add"===y?Qn:Qr;$t.prototype[l]=h.generateKey?function(a,f,b){return s(this,l,!0,"undirected"===(h.type||this.type),null,a,f,b,"update"===y)}:function(a,f,b,z){return s(this,l,!1,"undirected"===(h.type||this.type),a,f,b,z,"update"===y)}})}),h=$t,Ne.forEach(function(y){var l=y.name,s=y.attacher;s(h,l("Node"),0),s(h,l("Source"),1),s(h,l("Target"),2),s(h,l("Opposite"),3)}),function(h){Ye.forEach(function(y){var l=y.name,s=y.attacher;s(h,l("Edge"),"mixed"),s(h,l("DirectedEdge"),"directed"),s(h,l("UndirectedEdge"),"undirected")})}($t),function(h){$n.forEach(function(y){var s,a,f,b;f=(s=y).type,b=s.direction,h.prototype[a=s.name]=function(z,Y){if("mixed"!==f&&"mixed"!==this.type&&f!==this.type)return[];if(!arguments.length)return on(this,f);if(1===arguments.length){var ct=this._nodes.get(z=""+z);if(void 0===ct)throw new lt("Graph.".concat(a,': could not find the "').concat(z,'" node in the graph.'));return Vn(this.multi,"mixed"===f?this.type:f,b,ct)}if(2===arguments.length){Y=""+Y;var ut=this._nodes.get(z=""+z);if(!ut)throw new lt("Graph.".concat(a,':  could not find the "').concat(z,'" source node in the graph.'));if(!this._nodes.has(Y))throw new lt("Graph.".concat(a,':  could not find the "').concat(Y,'" target node in the graph.'));return Yr(f,this.multi,b,ut,Y)}throw new dt("Graph.".concat(a,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(l,s){var a=s.name,f=s.type,b=s.direction,z="forEach"+a[0].toUpperCase()+a.slice(1,-1);l.prototype[z]=function(ot,yt,mt){if("mixed"===f||"mixed"===this.type||f===this.type){if(1===arguments.length)return Xe(!1,this,f,mt=ot);if(2===arguments.length){mt=yt;var Gt=this._nodes.get(ot=""+ot);if(void 0===Gt)throw new lt("Graph.".concat(z,': could not find the "').concat(ot,'" node in the graph.'));return De(!1,this.multi,"mixed"===f?this.type:f,b,Gt,mt)}if(3===arguments.length){yt=""+yt;var Ft=this._nodes.get(ot=""+ot);if(!Ft)throw new lt("Graph.".concat(z,':  could not find the "').concat(ot,'" source node in the graph.'));if(!this._nodes.has(yt))throw new lt("Graph.".concat(z,':  could not find the "').concat(yt,'" target node in the graph.'));return kn(!1,f,this.multi,b,Ft,yt,mt)}throw new dt("Graph.".concat(z,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}};var Y="map"+a[0].toUpperCase()+a.slice(1);l.prototype[Y]=function(){var ot,yt=Array.prototype.slice.call(arguments),mt=yt.pop();if(0===yt.length){var Gt=0;"directed"!==f&&(Gt+=this.undirectedSize),"undirected"!==f&&(Gt+=this.directedSize),ot=new Array(Gt);var Ft=0;yt.push(function(Yt,ee,te,ge,ue,ce,he){ot[Ft++]=mt(Yt,ee,te,ge,ue,ce,he)})}else ot=[],yt.push(function(Yt,ee,te,ge,ue,ce,he){ot.push(mt(Yt,ee,te,ge,ue,ce,he))});return this[z].apply(this,yt),ot};var ct="filter"+a[0].toUpperCase()+a.slice(1);l.prototype[ct]=function(){var ot=Array.prototype.slice.call(arguments),yt=ot.pop(),mt=[];return ot.push(function(Gt,Ft,Yt,ee,te,ge,ue){yt(Gt,Ft,Yt,ee,te,ge,ue)&&mt.push(Gt)}),this[z].apply(this,ot),mt};var ut="reduce"+a[0].toUpperCase()+a.slice(1);l.prototype[ut]=function(){var ot,yt,mt=Array.prototype.slice.call(arguments);if(mt.length<2||mt.length>4)throw new dt("Graph.".concat(ut,": invalid number of arguments (expecting 2, 3 or 4 and got ").concat(mt.length,")."));if("function"==typeof mt[mt.length-1]&&"function"!=typeof mt[mt.length-2])throw new dt("Graph.".concat(ut,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));2===mt.length?(ot=mt[0],yt=mt[1],mt=[]):3===mt.length?(ot=mt[1],yt=mt[2],mt=[mt[0]]):4===mt.length&&(ot=mt[2],yt=mt[3],mt=[mt[0],mt[1]]);var Gt=yt;return mt.push(function(Ft,Yt,ee,te,ge,ue,ce){Gt=ot(Gt,Ft,Yt,ee,te,ge,ue,ce)}),this[z].apply(this,mt),Gt}}(h,y),function(l,s){var a=s.name,f=s.type,b=s.direction,z="find"+a[0].toUpperCase()+a.slice(1,-1);l.prototype[z]=function(ut,ot,yt){if("mixed"!==f&&"mixed"!==this.type&&f!==this.type)return!1;if(1===arguments.length)return Xe(!0,this,f,yt=ut);if(2===arguments.length){yt=ot;var mt=this._nodes.get(ut=""+ut);if(void 0===mt)throw new lt("Graph.".concat(z,': could not find the "').concat(ut,'" node in the graph.'));return De(!0,this.multi,"mixed"===f?this.type:f,b,mt,yt)}if(3===arguments.length){ot=""+ot;var Gt=this._nodes.get(ut=""+ut);if(!Gt)throw new lt("Graph.".concat(z,':  could not find the "').concat(ut,'" source node in the graph.'));if(!this._nodes.has(ot))throw new lt("Graph.".concat(z,':  could not find the "').concat(ot,'" target node in the graph.'));return kn(!0,f,this.multi,b,Gt,ot,yt)}throw new dt("Graph.".concat(z,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))};var Y="some"+a[0].toUpperCase()+a.slice(1,-1);l.prototype[Y]=function(){var ut=Array.prototype.slice.call(arguments),ot=ut.pop();return ut.push(function(yt,mt,Gt,Ft,Yt,ee,te){return ot(yt,mt,Gt,Ft,Yt,ee,te)}),!!this[z].apply(this,ut)};var ct="every"+a[0].toUpperCase()+a.slice(1,-1);l.prototype[ct]=function(){var ut=Array.prototype.slice.call(arguments),ot=ut.pop();return ut.push(function(yt,mt,Gt,Ft,Yt,ee,te){return!ot(yt,mt,Gt,Ft,Yt,ee,te)}),!this[z].apply(this,ut)}}(h,y),function(l,s){var f=s.type,b=s.direction,z=s.name.slice(0,-1)+"Entries";l.prototype[z]=function(Y,ct){if("mixed"!==f&&"mixed"!==this.type&&f!==this.type)return zt.empty();if(!arguments.length)return _n(this,f);if(1===arguments.length){var ut=this._nodes.get(Y=""+Y);if(!ut)throw new lt("Graph.".concat(z,': could not find the "').concat(Y,'" node in the graph.'));return $r(f,b,ut)}if(2===arguments.length){ct=""+ct;var ot=this._nodes.get(Y=""+Y);if(!ot)throw new lt("Graph.".concat(z,':  could not find the "').concat(Y,'" source node in the graph.'));if(!this._nodes.has(ct))throw new lt("Graph.".concat(z,':  could not find the "').concat(ct,'" target node in the graph.'));return Xr(f,b,ot,ct)}throw new dt("Graph.".concat(z,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(h,y)})}($t),function(h){Vr.forEach(function(y){var l,s,a,f,b,z,Y;(function Sn(h,y){var l=y.name,s=y.type,a=y.direction;h.prototype[l]=function(f){if("mixed"!==s&&"mixed"!==this.type&&s!==this.type)return[];var b=this._nodes.get(f=""+f);if(void 0===b)throw new lt("Graph.".concat(l,': could not find the "').concat(f,'" node in the graph.'));return function(z,Y,ct){if("mixed"!==z){if("undirected"===z)return Object.keys(ct.undirected);if("string"==typeof Y)return Object.keys(ct[Y])}var ut=[];return Cn(!1,z,Y,ct,function(ot){ut.push(ot)}),ut}("mixed"===s?this.type:s,a,b)}})(h,y),function(l,s){var a=s.name,f=s.type,b=s.direction,z="forEach"+a[0].toUpperCase()+a.slice(1,-1);l.prototype[z]=function(ot,yt){if("mixed"===f||"mixed"===this.type||f===this.type){var mt=this._nodes.get(ot=""+ot);if(void 0===mt)throw new lt("Graph.".concat(z,': could not find the "').concat(ot,'" node in the graph.'));Cn(!1,"mixed"===f?this.type:f,b,mt,yt)}};var Y="map"+a[0].toUpperCase()+a.slice(1);l.prototype[Y]=function(ot,yt){var mt=[];return this[z](ot,function(Gt,Ft){mt.push(yt(Gt,Ft))}),mt};var ct="filter"+a[0].toUpperCase()+a.slice(1);l.prototype[ct]=function(ot,yt){var mt=[];return this[z](ot,function(Gt,Ft){yt(Gt,Ft)&&mt.push(Gt)}),mt};var ut="reduce"+a[0].toUpperCase()+a.slice(1);l.prototype[ut]=function(ot,yt,mt){if(arguments.length<3)throw new dt("Graph.".concat(ut,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));var Gt=mt;return this[z](ot,function(Ft,Yt){Gt=yt(Gt,Ft,Yt)}),Gt}}(h,y),l=h,f=(s=y).type,b=s.direction,z=(a=s.name)[0].toUpperCase()+a.slice(1,-1),l.prototype[Y="find"+z]=function(ot,yt){if("mixed"===f||"mixed"===this.type||f===this.type){var mt=this._nodes.get(ot=""+ot);if(void 0===mt)throw new lt("Graph.".concat(Y,': could not find the "').concat(ot,'" node in the graph.'));return Cn(!0,"mixed"===f?this.type:f,b,mt,yt)}},l.prototype["some"+z]=function(ot,yt){return!!this[Y](ot,yt)},l.prototype["every"+z]=function(ot,yt){return!this[Y](ot,function(mt,Gt){return!yt(mt,Gt)})},function Hr(h,y){var s=y.type,a=y.direction,f=y.name.slice(0,-1)+"Entries";h.prototype[f]=function(b){if("mixed"!==s&&"mixed"!==this.type&&s!==this.type)return zt.empty();var z=this._nodes.get(b=""+b);if(void 0===z)throw new lt("Graph.".concat(f,': could not find the "').concat(b,'" node in the graph.'));return function(Y,ct,ut){if("mixed"!==Y){if("undirected"===Y)return Re(null,ut,ut.undirected);if("string"==typeof ct)return Re(null,ut,ut[ct])}var ot=zt.empty(),yt=new ze;return"undirected"!==Y&&("out"!==ct&&(ot=ae(ot,Re(yt,ut,ut.in))),"in"!==ct&&(ot=ae(ot,Re(yt,ut,ut.out)))),"directed"!==Y&&(ot=ae(ot,Re(yt,ut,ut.undirected))),ot}("mixed"===s?this.type:s,a,z)}}(h,y)})}($t);var tr=function(h){function y(l){var s=S({type:"directed"},l);if("multi"in s&&!1!==s.multi)throw new dt("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==s.type)throw new dt('DirectedGraph.from: inconsistent "'+s.type+'" type in given options!');return h.call(this,s)||this}return N(y,h),y}($t),er=function(h){function y(l){var s=S({type:"undirected"},l);if("multi"in s&&!1!==s.multi)throw new dt("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==s.type)throw new dt('UndirectedGraph.from: inconsistent "'+s.type+'" type in given options!');return h.call(this,s)||this}return N(y,h),y}($t),nr=function(h){function y(l){var s=S({multi:!0},l);if("multi"in s&&!0!==s.multi)throw new dt("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return h.call(this,s)||this}return N(y,h),y}($t),rr=function(h){function y(l){var s=S({type:"directed",multi:!0},l);if("multi"in s&&!0!==s.multi)throw new dt("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==s.type)throw new dt('MultiDirectedGraph.from: inconsistent "'+s.type+'" type in given options!');return h.call(this,s)||this}return N(y,h),y}($t),ir=function(h){function y(l){var s=S({type:"undirected",multi:!0},l);if("multi"in s&&!0!==s.multi)throw new dt("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==s.type)throw new dt('MultiUndirectedGraph.from: inconsistent "'+s.type+'" type in given options!');return h.call(this,s)||this}return N(y,h),y}($t);function Ge(h){h.from=function(y,l){var s=S({},y.options,l),a=new h(s);return a.import(y),a}}return Ge($t),Ge(tr),Ge(er),Ge(nr),Ge(rr),Ge(ir),$t.Graph=$t,$t.DirectedGraph=tr,$t.UndirectedGraph=er,$t.MultiGraph=nr,$t.MultiDirectedGraph=rr,$t.MultiUndirectedGraph=ir,$t.InvalidArgumentsGraphError=dt,$t.NotFoundGraphError=lt,$t.UsageGraphError=bt,$t}()},8740:(pt,tt,N)=>{var B=N(6009),$=N(5701);function I(o,k){if(arguments.length<2)throw new Error("mnemonist/fixed-deque: expecting an Array class and a capacity.");if("number"!=typeof k||k<=0)throw new Error("mnemonist/fixed-deque: `capacity` should be a positive number.");this.ArrayClass=o,this.capacity=k,this.items=new o(this.capacity),this.clear()}I.prototype.clear=function(){this.start=0,this.size=0},I.prototype.push=function(o){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.push: deque capacity ("+this.capacity+") exceeded!");return this.items[(this.start+this.size)%this.capacity]=o,++this.size},I.prototype.unshift=function(o){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.unshift: deque capacity ("+this.capacity+") exceeded!");var k=this.start-1;return 0===this.start&&(k=this.capacity-1),this.items[k]=o,this.start=k,++this.size},I.prototype.pop=function(){if(0===this.size)return;const o=(this.start+this.size-1)%this.capacity;return this.size--,this.items[o]},I.prototype.shift=function(){if(0!==this.size){var o=this.start;return this.size--,this.start++,this.start===this.capacity&&(this.start=0),this.items[o]}},I.prototype.peekFirst=function(){if(0!==this.size)return this.items[this.start]},I.prototype.peekLast=function(){if(0!==this.size){var o=this.start+this.size-1;return o>this.capacity&&(o-=this.capacity),this.items[o]}},I.prototype.get=function(o){if(0!==this.size)return(o=this.start+o)>this.capacity&&(o-=this.capacity),this.items[o]},I.prototype.forEach=function(o,k){k=arguments.length>1?k:this;for(var A=this.capacity,S=this.size,g=this.start,d=0;d<S;)o.call(k,this.items[g],d,this),d++,++g===A&&(g=0)},I.prototype.toArray=function(){var o=this.start+this.size;if(o<this.capacity)return this.items.slice(this.start,o);for(var k=new this.ArrayClass(this.size),A=this.capacity,S=this.size,g=this.start,d=0;d<S;)k[d]=this.items[g],d++,++g===A&&(g=0);return k},I.prototype.values=function(){var o=this.items,k=this.capacity,A=this.size,S=this.start,g=0;return new $(function(){if(g>=A)return{done:!0};var d=o[S];return S++,g++,S===k&&(S=0),{value:d,done:!1}})},I.prototype.entries=function(){var o=this.items,k=this.capacity,A=this.size,S=this.start,g=0;return new $(function(){if(g>=A)return{done:!0};var d=o[S];return++S===k&&(S=0),{value:[g++,d],done:!1}})},"undefined"!=typeof Symbol&&(I.prototype[Symbol.iterator]=I.prototype.values),I.prototype.inspect=function(){var o=this.toArray();return o.type=this.ArrayClass.name,o.capacity=this.capacity,Object.defineProperty(o,"constructor",{value:I,enumerable:!1}),o},"undefined"!=typeof Symbol&&(I.prototype[Symbol.for("nodejs.util.inspect.custom")]=I.prototype.inspect),I.from=function(o,k,A){if(arguments.length<3&&"number"!=typeof(A=B.guessLength(o)))throw new Error("mnemonist/fixed-deque.from: could not guess iterable length. Please provide desired capacity as last argument.");var S=new I(k,A);if(B.isArrayLike(o)){var g,d;for(g=0,d=o.length;g<d;g++)S.items[g]=o[g];return S.size=d,S}return B.forEach(o,function(v){S.push(v)}),S},pt.exports=I},7451:(pt,tt,N)=>{var B=N(5701),$=N(6009);function I(o,k){if(arguments.length<2)throw new Error("mnemonist/fixed-stack: expecting an Array class and a capacity.");if("number"!=typeof k||k<=0)throw new Error("mnemonist/fixed-stack: `capacity` should be a positive number.");this.capacity=k,this.ArrayClass=o,this.items=new this.ArrayClass(this.capacity),this.clear()}I.prototype.clear=function(){this.size=0},I.prototype.push=function(o){if(this.size===this.capacity)throw new Error("mnemonist/fixed-stack.push: stack capacity ("+this.capacity+") exceeded!");return this.items[this.size++]=o,this.size},I.prototype.pop=function(){if(0!==this.size)return this.items[--this.size]},I.prototype.peek=function(){return this.items[this.size-1]},I.prototype.forEach=function(o,k){k=arguments.length>1?k:this;for(var A=0,S=this.items.length;A<S;A++)o.call(k,this.items[S-A-1],A,this)},I.prototype.toArray=function(){for(var o=new this.ArrayClass(this.size),k=this.size-1,A=this.size;A--;)o[A]=this.items[k-A];return o},I.prototype.values=function(){var o=this.items,k=this.size,A=0;return new B(function(){if(A>=k)return{done:!0};var S=o[k-A-1];return A++,{value:S,done:!1}})},I.prototype.entries=function(){var o=this.items,k=this.size,A=0;return new B(function(){if(A>=k)return{done:!0};var S=o[k-A-1];return{value:[A++,S],done:!1}})},"undefined"!=typeof Symbol&&(I.prototype[Symbol.iterator]=I.prototype.values),I.prototype.toString=function(){return this.toArray().join(",")},I.prototype.toJSON=function(){return this.toArray()},I.prototype.inspect=function(){var o=this.toArray();return o.type=this.ArrayClass.name,o.capacity=this.capacity,Object.defineProperty(o,"constructor",{value:I,enumerable:!1}),o},"undefined"!=typeof Symbol&&(I.prototype[Symbol.for("nodejs.util.inspect.custom")]=I.prototype.inspect),I.from=function(o,k,A){if(arguments.length<3&&"number"!=typeof(A=$.guessLength(o)))throw new Error("mnemonist/fixed-stack.from: could not guess iterable length. Please provide desired capacity as last argument.");var S=new I(k,A);if($.isArrayLike(o)){var g,d;for(g=0,d=o.length;g<d;g++)S.items[g]=o[g];return S.size=d,S}return $.forEach(o,function(v){S.push(v)}),S},pt.exports=I},4547:(pt,tt,N)=>{var B=N(4467),$=N(2062),I=N(6009),o=$.DEFAULT_COMPARATOR,k=$.reverseComparator;function A(D,L,G,C){for(var q,et,V=L[C];C>G&&D(V,et=L[q=C-1>>1])<0;)L[C]=et,C=q;L[C]=V}function S(D,L,G){for(var J,C=L.length,V=G,q=L[G],et=2*G+1;et<C;)(J=et+1)<C&&D(L[et],L[J])>=0&&(et=J),L[G]=L[et],et=2*(G=et)+1;L[G]=q,A(D,L,V,G)}function g(D,L,G){L.push(G),A(D,L,0,L.length-1)}function d(D,L){var G=L.pop();if(0!==L.length){var C=L[0];return L[0]=G,S(D,L,0),C}return G}function v(D,L,G){if(0===L.length)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var C=L[0];return L[0]=G,S(D,L,0),C}function x(D,L,G){var C;return 0!==L.length&&D(L[0],G)<0&&(C=L[0],L[0]=G,G=C,S(D,L,0)),G}function E(D,L){for(var V=L.length>>1;--V>=0;)S(D,L,V)}function _(D,L){for(var G=L.length,C=0,V=new Array(G);C<G;)V[C++]=d(D,L);return V}function U(D){if(this.clear(),this.comparator=D||o,"function"!=typeof this.comparator)throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}function W(D){if(this.clear(),this.comparator=D||o,"function"!=typeof this.comparator)throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=k(this.comparator)}U.prototype.clear=function(){this.items=[],this.size=0},U.prototype.push=function(D){return g(this.comparator,this.items,D),++this.size},U.prototype.peek=function(){return this.items[0]},U.prototype.pop=function(){return 0!==this.size&&this.size--,d(this.comparator,this.items)},U.prototype.replace=function(D){return v(this.comparator,this.items,D)},U.prototype.pushpop=function(D){return x(this.comparator,this.items,D)},U.prototype.consume=function(){return this.size=0,_(this.comparator,this.items)},U.prototype.toArray=function(){return _(this.comparator,this.items.slice())},U.prototype.inspect=function(){var D=this.toArray();return Object.defineProperty(D,"constructor",{value:U,enumerable:!1}),D},"undefined"!=typeof Symbol&&(U.prototype[Symbol.for("nodejs.util.inspect.custom")]=U.prototype.inspect),W.prototype=U.prototype,U.from=function(D,L){var C,G=new U(L);return C=I.isArrayLike(D)?D.slice():I.toArray(D),E(G.comparator,C),G.items=C,G.size=C.length,G},W.from=function(D,L){var C,G=new W(L);return C=I.isArrayLike(D)?D.slice():I.toArray(D),E(G.comparator,C),G.items=C,G.size=C.length,G},U.siftUp=S,U.siftDown=A,U.push=g,U.pop=d,U.replace=v,U.pushpop=x,U.heapify=E,U.consume=_,U.nsmallest=function F(D,L,G){2===arguments.length&&(G=L,L=D,D=o);var V,q,et,K,C=k(D),J=1/0;if(1===L){if(I.isArrayLike(G)){for(V=0,q=G.length;V<q;V++)et=G[V],(J===1/0||D(et,J)<0)&&(J=et);return(K=new G.constructor(1))[0]=J,K}return B(G,function(ft){(J===1/0||D(ft,J)<0)&&(J=ft)}),[J]}if(I.isArrayLike(G)){if(L>=G.length)return G.slice().sort(D);for(K=G.slice(0,L),E(C,K),V=L,q=G.length;V<q;V++)C(G[V],K[0])>0&&v(C,K,G[V]);return K.sort(D)}var it=I.guessLength(G);return null!==it&&it<L&&(L=it),K=new Array(L),V=0,B(G,function(ft){V<L?K[V]=ft:(V===L&&E(C,K),C(ft,K[0])>0&&v(C,K,ft)),V++}),K.length>V&&(K.length=V),K.sort(D)},U.nlargest=function T(D,L,G){2===arguments.length&&(G=L,L=D,D=o);var V,q,et,K,C=k(D),J=-1/0;if(1===L){if(I.isArrayLike(G)){for(V=0,q=G.length;V<q;V++)et=G[V],(J===-1/0||D(et,J)>0)&&(J=et);return(K=new G.constructor(1))[0]=J,K}return B(G,function(ft){(J===-1/0||D(ft,J)>0)&&(J=ft)}),[J]}if(I.isArrayLike(G)){if(L>=G.length)return G.slice().sort(C);for(K=G.slice(0,L),E(D,K),V=L,q=G.length;V<q;V++)D(G[V],K[0])>0&&v(D,K,G[V]);return K.sort(C)}var it=I.guessLength(G);return null!==it&&it<L&&(L=it),K=new Array(L),V=0,B(G,function(ft){V<L?K[V]=ft:(V===L&&E(D,K),D(ft,K[0])>0&&v(D,K,ft)),V++}),K.length>V&&(K.length=V),K.sort(C)},U.MinHeap=U,U.MaxHeap=W,pt.exports=U},7621:(pt,tt,N)=>{var B=N(5701),$=N(4467);function I(){this.clear()}I.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},I.prototype.enqueue=function(o){return this.items.push(o),++this.size},I.prototype.dequeue=function(){if(this.size){var o=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,o}},I.prototype.peek=function(){if(this.size)return this.items[this.offset]},I.prototype.forEach=function(o,k){k=arguments.length>1?k:this;for(var A=this.offset,S=0,g=this.items.length;A<g;A++,S++)o.call(k,this.items[A],S,this)},I.prototype.toArray=function(){return this.items.slice(this.offset)},I.prototype.values=function(){var o=this.items,k=this.offset;return new B(function(){if(k>=o.length)return{done:!0};var A=o[k];return k++,{value:A,done:!1}})},I.prototype.entries=function(){var o=this.items,k=this.offset,A=0;return new B(function(){if(k>=o.length)return{done:!0};var S=o[k];return k++,{value:[A++,S],done:!1}})},"undefined"!=typeof Symbol&&(I.prototype[Symbol.iterator]=I.prototype.values),I.prototype.toString=function(){return this.toArray().join(",")},I.prototype.toJSON=function(){return this.toArray()},I.prototype.inspect=function(){var o=this.toArray();return Object.defineProperty(o,"constructor",{value:I,enumerable:!1}),o},"undefined"!=typeof Symbol&&(I.prototype[Symbol.for("nodejs.util.inspect.custom")]=I.prototype.inspect),I.from=function(o){var k=new I;return $(o,function(A){k.enqueue(A)}),k},I.of=function(){return I.from(arguments)},pt.exports=I},8090:(pt,tt,N)=>{var B=N(5701),$=N(6116).getPointerArray;function I(o,k){arguments.length<2&&(k=o,o=Array);var A=$(k);this.size=0,this.length=k,this.dense=new A(k),this.sparse=new A(k),this.vals=new o(k)}I.prototype.clear=function(){this.size=0},I.prototype.has=function(o){var k=this.sparse[o];return k<this.size&&this.dense[k]===o},I.prototype.get=function(o){var k=this.sparse[o];if(k<this.size&&this.dense[k]===o)return this.vals[k]},I.prototype.set=function(o,k){var A=this.sparse[o];return A<this.size&&this.dense[A]===o?(this.vals[A]=k,this):(this.dense[this.size]=o,this.sparse[o]=this.size,this.vals[this.size]=k,this.size++,this)},I.prototype.delete=function(o){var k=this.sparse[o];return!(k>=this.size||this.dense[k]!==o||(this.dense[this.sparse[o]]=k=this.dense[this.size-1],this.sparse[k]=this.sparse[o],this.size--,0))},I.prototype.forEach=function(o,k){k=arguments.length>1?k:this;for(var A=0;A<this.size;A++)o.call(k,this.vals[A],this.dense[A])},I.prototype.keys=function(){var o=this.size,k=this.dense,A=0;return new B(function(){if(A<o){var S=k[A];return A++,{value:S}}return{done:!0}})},I.prototype.values=function(){var o=this.size,k=this.vals,A=0;return new B(function(){if(A<o){var S=k[A];return A++,{value:S}}return{done:!0}})},I.prototype.entries=function(){var o=this.size,k=this.dense,A=this.vals,S=0;return new B(function(){if(S<o){var g=[k[S],A[S]];return S++,{value:g}}return{done:!0}})},"undefined"!=typeof Symbol&&(I.prototype[Symbol.iterator]=I.prototype.entries),I.prototype.inspect=function(){for(var o=new Map,k=0;k<this.size;k++)o.set(this.dense[k],this.vals[k]);return Object.defineProperty(o,"constructor",{value:I,enumerable:!1}),o.length=this.length,this.vals.constructor!==Array&&(o.type=this.vals.constructor.name),o},"undefined"!=typeof Symbol&&(I.prototype[Symbol.for("nodejs.util.inspect.custom")]=I.prototype.inspect),pt.exports=I},5766:(pt,tt,N)=>{var B=N(5701),$=N(6116).getPointerArray;function I(o){var k=$(o);this.start=0,this.size=0,this.capacity=o,this.dense=new k(o),this.sparse=new k(o)}I.prototype.clear=function(){this.start=0,this.size=0},I.prototype.has=function(o){if(0===this.size)return!1;var k=this.sparse[o];return(k<this.capacity&&k>=this.start&&k<this.start+this.size||k<(this.start+this.size)%this.capacity)&&this.dense[k]===o},I.prototype.enqueue=function(o){var k=this.sparse[o];return 0!==this.size&&(k<this.capacity&&k>=this.start&&k<this.start+this.size||k<(this.start+this.size)%this.capacity)&&this.dense[k]===o||(this.dense[k=(this.start+this.size)%this.capacity]=o,this.sparse[o]=k,this.size++),this},I.prototype.dequeue=function(){if(0!==this.size){var o=this.start;this.size--,this.start++,this.start===this.capacity&&(this.start=0);var k=this.dense[o];return this.sparse[k]=this.capacity,k}},I.prototype.forEach=function(o,k){k=arguments.length>1?k:this;for(var A=this.capacity,S=this.size,g=this.start,d=0;d<S;)o.call(k,this.dense[g],d,this),d++,++g===A&&(g=0)},I.prototype.values=function(){var o=this.dense,k=this.capacity,A=this.size,S=this.start,g=0;return new B(function(){if(g>=A)return{done:!0};var d=o[S];return S++,g++,S===k&&(S=0),{value:d,done:!1}})},"undefined"!=typeof Symbol&&(I.prototype[Symbol.iterator]=I.prototype.values),I.prototype.inspect=function(){var o=[];return this.forEach(function(k){o.push(k)}),Object.defineProperty(o,"constructor",{value:I,enumerable:!1}),o.capacity=this.capacity,o},"undefined"!=typeof Symbol&&(I.prototype[Symbol.for("nodejs.util.inspect.custom")]=I.prototype.inspect),pt.exports=I},4268:(pt,tt,N)=>{var B=N(5701),$=N(6116).getPointerArray;function I(o){var k=$(o);this.size=0,this.length=o,this.dense=new k(o),this.sparse=new k(o)}I.prototype.clear=function(){this.size=0},I.prototype.has=function(o){var k=this.sparse[o];return k<this.size&&this.dense[k]===o},I.prototype.add=function(o){var k=this.sparse[o];return k<this.size&&this.dense[k]===o||(this.dense[this.size]=o,this.sparse[o]=this.size,this.size++),this},I.prototype.delete=function(o){var k=this.sparse[o];return!(k>=this.size||this.dense[k]!==o||(this.dense[this.sparse[o]]=k=this.dense[this.size-1],this.sparse[k]=this.sparse[o],this.size--,0))},I.prototype.forEach=function(o,k){k=arguments.length>1?k:this;for(var A,S=0;S<this.size;S++)o.call(k,A=this.dense[S],A)},I.prototype.values=function(){var o=this.size,k=this.dense,A=0;return new B(function(){if(A<o){var S=k[A];return A++,{value:S}}return{done:!0}})},"undefined"!=typeof Symbol&&(I.prototype[Symbol.iterator]=I.prototype.values),I.prototype.inspect=function(){for(var o=new Set,k=0;k<this.size;k++)o.add(this.dense[k]);return Object.defineProperty(o,"constructor",{value:I,enumerable:!1}),o.length=this.length,o},"undefined"!=typeof Symbol&&(I.prototype[Symbol.for("nodejs.util.inspect.custom")]=I.prototype.inspect),pt.exports=I},2062:(pt,tt)=>{tt.DEFAULT_COMPARATOR=function(o,k){return o<k?-1:o>k?1:0},tt.DEFAULT_REVERSE_COMPARATOR=function(o,k){return o<k?1:o>k?-1:0},tt.reverseComparator=function $(o){return function(k,A){return o(A,k)}},tt.createTupleComparator=function I(o){return 2===o?function(k,A){return k[0]<A[0]?-1:k[0]>A[0]?1:k[1]<A[1]?-1:k[1]>A[1]?1:0}:function(k,A){for(var S=0;S<o;){if(k[S]<A[S])return-1;if(k[S]>A[S])return 1;S++}return 0}}},6009:(pt,tt,N)=>{var B=N(4467),$=N(6116);function o(S){return"number"==typeof S.length?S.length:"number"==typeof S.size?S.size:void 0}tt.isArrayLike=function I(S){return Array.isArray(S)||$.isTypedArray(S)},tt.guessLength=o,tt.toArray=function k(S){var g=o(S),d="number"==typeof g?new Array(g):[],v=0;return B(S,function(x){d[v++]=x}),d},tt.toArrayWithIndices=function A(S){var g=o(S),d="number"==typeof g?$.getPointerArray(g):Array,v="number"==typeof g?new Array(g):[],x="number"==typeof g?new d(g):[],E=0;return B(S,function(_){v[E]=_,x[E]=E++}),[v,x]}},6116:(pt,tt)=>{var N=Math.pow(2,8)-1,B=Math.pow(2,16)-1,$=Math.pow(2,32)-1,I=Math.pow(2,7)-1,o=Math.pow(2,15)-1,k=Math.pow(2,31)-1;tt.getPointerArray=function(S){var g=S-1;if(g<=N)return Uint8Array;if(g<=B)return Uint16Array;if(g<=$)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},tt.getSignedPointerArray=function(S){var g=S-1;return g<=I?Int8Array:g<=o?Int16Array:g<=k?Int32Array:Float64Array},tt.getNumberType=function(S){return S===(0|S)?-1===Math.sign(S)?S<=127&&S>=-128?Int8Array:S<=32767&&S>=-32768?Int16Array:Int32Array:S<=255?Uint8Array:S<=65535?Uint16Array:Uint32Array:Float64Array};var A={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};tt.getMinimalRepresentation=function(S,g){var x,E,_,F,T,d=null,v=0;for(F=0,T=S.length;F<T;F++)_=g?g(S[F]):S[F],E=tt.getNumberType(_),(x=A[E.name])>v&&(v=x,d=E);return d},tt.isTypedArray=function(S){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView(S)},tt.concat=function(){var g,d,v,S=0;for(g=0,v=arguments.length;g<v;g++)S+=arguments[g].length;var x=new arguments[0].constructor(S);for(g=0,d=0;g<v;g++)x.set(arguments[g],d),d+=arguments[g].length;return x},tt.indices=function(S){for(var d=new(tt.getPointerArray(S))(S),v=0;v<S;v++)d[v]=v;return d}},4467:(pt,tt,N)=>{var B=N(8123),$=B.ARRAY_BUFFER_SUPPORT,I=B.SYMBOL_SUPPORT;pt.exports=function(k,A){var S,g,d,v,x;if(!k)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof A)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(k)||$&&ArrayBuffer.isView(k)||"string"==typeof k||"[object Arguments]"===k.toString())for(d=0,v=k.length;d<v;d++)A(k[d],d);else if("function"!=typeof k.forEach)if(I&&Symbol.iterator in k&&"function"!=typeof k.next&&(k=k[Symbol.iterator]()),"function"!=typeof k.next)for(g in k)k.hasOwnProperty(g)&&A(k[g],g);else for(S=k,d=0;!0!==(x=S.next()).done;)A(x.value,d),d++;else k.forEach(A)}},5701:pt=>{function tt(N){if("function"!=typeof N)throw new Error("obliterator/iterator: expecting a function!");this.next=N}"undefined"!=typeof Symbol&&(tt.prototype[Symbol.iterator]=function(){return this}),tt.of=function(){var N=arguments,B=N.length,$=0;return new tt(function(){return $>=B?{done:!0}:{done:!1,value:N[$++]}})},tt.empty=function(){return new tt(function(){return{done:!0}})},tt.fromSequence=function(N){var B=0,$=N.length;return new tt(function(){return B>=$?{done:!0}:{done:!1,value:N[B++]}})},tt.is=function(N){return N instanceof tt||"object"==typeof N&&null!==N&&"function"==typeof N.next},pt.exports=tt},8123:(pt,tt)=>{tt.ARRAY_BUFFER_SUPPORT="undefined"!=typeof ArrayBuffer,tt.SYMBOL_SUPPORT="undefined"!=typeof Symbol},8859:pt=>{function tt(B){return function($){return"number"!=typeof $&&($=$.length),Math.floor(B()*$)}}var N=tt(Math.random);N.createRandomIndex=tt,pt.exports=N},340:(pt,tt,N)=>{var B=N(9471),$=N(2992),I=N(7657),o=N(5583),k=N(1929),A=N(8083),S=N(3818);S.alea=B,S.xor128=$,S.xorwow=I,S.xorshift7=o,S.xor4096=k,S.tychei=A,pt.exports=S},9471:function(pt,tt,N){var B;!function($,I,o){function k(d){var v=this,x=function g(){var d=4022871197;return function(x){x=String(x);for(var E=0;E<x.length;E++){var _=.02519603282416938*(d+=x.charCodeAt(E));_-=d=_>>>0,d=(_*=d)>>>0,d+=4294967296*(_-=d)}return 2.3283064365386963e-10*(d>>>0)}}();v.next=function(){var E=2091639*v.s0+2.3283064365386963e-10*v.c;return v.s0=v.s1,v.s1=v.s2,v.s2=E-(v.c=0|E)},v.c=1,v.s0=x(" "),v.s1=x(" "),v.s2=x(" "),v.s0-=x(d),v.s0<0&&(v.s0+=1),v.s1-=x(d),v.s1<0&&(v.s1+=1),v.s2-=x(d),v.s2<0&&(v.s2+=1),x=null}function A(d,v){return v.c=d.c,v.s0=d.s0,v.s1=d.s1,v.s2=d.s2,v}function S(d,v){var x=new k(d),E=v&&v.state,_=x.next;return _.int32=function(){return 4294967296*x.next()|0},_.double=function(){return _()+11102230246251565e-32*(2097152*_()|0)},_.quick=_,E&&("object"==typeof E&&A(E,x),_.state=function(){return A(x,{})}),_}I&&I.exports?I.exports=S:N.amdD&&N.amdO?void 0!==(B=function(){return S}.call(tt,N,tt,I))&&(I.exports=B):this.alea=S}(0,pt=N.nmd(pt))},8083:function(pt,tt,N){var B;!function($,I,o){function k(g){var d=this,v="";d.next=function(){var E=d.b,_=d.c,F=d.d,T=d.a;return E=E<<25^E>>>7^_,_=_-F|0,F=F<<24^F>>>8^T,T=T-E|0,d.b=E=E<<20^E>>>12^_,d.c=_=_-F|0,d.d=F<<16^_>>>16^T,d.a=T-E|0},d.a=0,d.b=0,d.c=-1640531527,d.d=1367130551,g===Math.floor(g)?(d.a=g/4294967296|0,d.b=0|g):v+=g;for(var x=0;x<v.length+20;x++)d.b^=0|v.charCodeAt(x),d.next()}function A(g,d){return d.a=g.a,d.b=g.b,d.c=g.c,d.d=g.d,d}function S(g,d){var v=new k(g),x=d&&d.state,E=function(){return(v.next()>>>0)/4294967296};return E.double=function(){do{var T=((v.next()>>>11)+(v.next()>>>0)/4294967296)/(1<<21)}while(0===T);return T},E.int32=v.next,E.quick=E,x&&("object"==typeof x&&A(x,v),E.state=function(){return A(v,{})}),E}I&&I.exports?I.exports=S:N.amdD&&N.amdO?void 0!==(B=function(){return S}.call(tt,N,tt,I))&&(I.exports=B):this.tychei=S}(0,pt=N.nmd(pt))},2992:function(pt,tt,N){var B;!function($,I,o){function k(g){var d=this,v="";d.x=0,d.y=0,d.z=0,d.w=0,d.next=function(){var E=d.x^d.x<<11;return d.x=d.y,d.y=d.z,d.z=d.w,d.w^=d.w>>>19^E^E>>>8},g===(0|g)?d.x=g:v+=g;for(var x=0;x<v.length+64;x++)d.x^=0|v.charCodeAt(x),d.next()}function A(g,d){return d.x=g.x,d.y=g.y,d.z=g.z,d.w=g.w,d}function S(g,d){var v=new k(g),x=d&&d.state,E=function(){return(v.next()>>>0)/4294967296};return E.double=function(){do{var T=((v.next()>>>11)+(v.next()>>>0)/4294967296)/(1<<21)}while(0===T);return T},E.int32=v.next,E.quick=E,x&&("object"==typeof x&&A(x,v),E.state=function(){return A(v,{})}),E}I&&I.exports?I.exports=S:N.amdD&&N.amdO?void 0!==(B=function(){return S}.call(tt,N,tt,I))&&(I.exports=B):this.xor128=S}(0,pt=N.nmd(pt))},1929:function(pt,tt,N){var B;!function($,I,o){function k(g){var d=this;d.next=function(){var F,T,x=d.w,E=d.X,_=d.i;return d.w=x=x+1640531527|0,T=E[_+34&127],F=E[_=_+1&127],T^=T<<13,F^=F<<17,T=E[_]=(T^=T>>>15)^(F^=F>>>12),d.i=_,T+(x^x>>>16)|0},function v(x,E){var _,F,T,U,W,D=[],L=128;for(E===(0|E)?(F=E,E=null):(E+="\0",F=0,L=Math.max(L,E.length)),T=0,U=-32;U<L;++U)E&&(F^=E.charCodeAt((U+32)%E.length)),0===U&&(W=F),F^=F<<10,F^=F>>>15,F^=F<<4,F^=F>>>13,U>=0&&(T=0==(_=D[127&U]^=F+(W=W+1640531527|0))?T+1:0);for(T>=128&&(D[127&(E&&E.length||0)]=-1),T=127,U=512;U>0;--U)F=D[T+34&127],_=D[T=T+1&127],F^=F<<13,_^=_<<17,D[T]=(F^=F>>>15)^(_^=_>>>12);x.w=W,x.X=D,x.i=T}(d,g)}function A(g,d){return d.i=g.i,d.w=g.w,d.X=g.X.slice(),d}function S(g,d){null==g&&(g=+new Date);var v=new k(g),x=d&&d.state,E=function(){return(v.next()>>>0)/4294967296};return E.double=function(){do{var T=((v.next()>>>11)+(v.next()>>>0)/4294967296)/(1<<21)}while(0===T);return T},E.int32=v.next,E.quick=E,x&&(x.X&&A(x,v),E.state=function(){return A(v,{})}),E}I&&I.exports?I.exports=S:N.amdD&&N.amdO?void 0!==(B=function(){return S}.call(tt,N,tt,I))&&(I.exports=B):this.xor4096=S}(0,pt=N.nmd(pt))},5583:function(pt,tt,N){var B;!function($,I,o){function k(g){var d=this;d.next=function(){var _,F,x=d.x,E=d.i;return _=x[E],F=(_^=_>>>7)^_<<24,F^=(_=x[E+1&7])^_>>>10,F^=(_=x[E+3&7])^_>>>3,F^=(_=x[E+4&7])^_<<7,_=x[E+7&7],x[E]=F^=(_^=_<<13)^_<<9,d.i=E+1&7,F},function v(x,E){var _,T=[];if(E===(0|E))T[0]=E;else for(E=""+E,_=0;_<E.length;++_)T[7&_]=T[7&_]<<15^E.charCodeAt(_)+T[_+1&7]<<13;for(;T.length<8;)T.push(0);for(_=0;_<8&&0===T[_];++_);for(8==_&&(T[7]=-1),x.x=T,x.i=0,_=256;_>0;--_)x.next()}(d,g)}function A(g,d){return d.x=g.x.slice(),d.i=g.i,d}function S(g,d){null==g&&(g=+new Date);var v=new k(g),x=d&&d.state,E=function(){return(v.next()>>>0)/4294967296};return E.double=function(){do{var T=((v.next()>>>11)+(v.next()>>>0)/4294967296)/(1<<21)}while(0===T);return T},E.int32=v.next,E.quick=E,x&&(x.x&&A(x,v),E.state=function(){return A(v,{})}),E}I&&I.exports?I.exports=S:N.amdD&&N.amdO?void 0!==(B=function(){return S}.call(tt,N,tt,I))&&(I.exports=B):this.xorshift7=S}(0,pt=N.nmd(pt))},7657:function(pt,tt,N){var B;!function($,I,o){function k(g){var d=this,v="";d.next=function(){var E=d.x^d.x>>>2;return d.x=d.y,d.y=d.z,d.z=d.w,d.w=d.v,(d.d=d.d+362437|0)+(d.v=d.v^d.v<<4^E^E<<1)|0},d.x=0,d.y=0,d.z=0,d.w=0,d.v=0,g===(0|g)?d.x=g:v+=g;for(var x=0;x<v.length+64;x++)d.x^=0|v.charCodeAt(x),x==v.length&&(d.d=d.x<<10^d.x>>>4),d.next()}function A(g,d){return d.x=g.x,d.y=g.y,d.z=g.z,d.w=g.w,d.v=g.v,d.d=g.d,d}function S(g,d){var v=new k(g),x=d&&d.state,E=function(){return(v.next()>>>0)/4294967296};return E.double=function(){do{var T=((v.next()>>>11)+(v.next()>>>0)/4294967296)/(1<<21)}while(0===T);return T},E.int32=v.next,E.quick=E,x&&("object"==typeof x&&A(x,v),E.state=function(){return A(v,{})}),E}I&&I.exports?I.exports=S:N.amdD&&N.amdO?void 0!==(B=function(){return S}.call(tt,N,tt,I))&&(I.exports=B):this.xorwow=S}(0,pt=N.nmd(pt))},3818:function(pt,tt,N){var B;!function($,I,o){var _,k=256,d=o.pow(k,6),v=o.pow(2,52),x=2*v,E=255;function F(C,V,q){var et=[],J=D(W((V=1==V?{entropy:!0}:V||{}).entropy?[C,G(I)]:null==C?function L(){try{var C;return _&&(C=_.randomBytes)?C=C(k):(C=new Uint8Array(k),($.crypto||$.msCrypto).getRandomValues(C)),G(C)}catch(et){var V=$.navigator,q=V&&V.plugins;return[+new Date,$,q,$.screen,G(I)]}}():C,3),et),K=new T(et),it=function(){for(var ft=K.g(6),gt=d,St=0;ft<v;)ft=(ft+St)*k,gt*=k,St=K.g(1);for(;ft>=x;)ft/=2,gt/=2,St>>>=1;return(ft+St)/gt};return it.int32=function(){return 0|K.g(4)},it.quick=function(){return K.g(4)/4294967296},it.double=it,D(G(K.S),I),(V.pass||q||function(ft,gt,St,zt){return zt&&(zt.S&&U(zt,K),ft.state=function(){return U(K,{})}),St?(o.random=ft,gt):ft})(it,J,"global"in V?V.global:this==o,V.state)}function T(C){var V,q=C.length,et=this,J=0,K=et.i=et.j=0,it=et.S=[];for(q||(C=[q++]);J<k;)it[J]=J++;for(J=0;J<k;J++)it[J]=it[K=E&K+C[J%q]+(V=it[J])],it[K]=V;(et.g=function(ft){for(var gt,St=0,zt=et.i,Dt=et.j,Lt=et.S;ft--;)gt=Lt[zt=E&zt+1],St=St*k+Lt[E&(Lt[zt]=Lt[Dt=E&Dt+gt])+(Lt[Dt]=gt)];return et.i=zt,et.j=Dt,St})(k)}function U(C,V){return V.i=C.i,V.j=C.j,V.S=C.S.slice(),V}function W(C,V){var J,q=[],et=typeof C;if(V&&"object"==et)for(J in C)try{q.push(W(C[J],V-1))}catch(K){}return q.length?q:"string"==et?C:C+"\0"}function D(C,V){for(var et,q=C+"",J=0;J<q.length;)V[E&J]=E&(et^=19*V[E&J])+q.charCodeAt(J++);return G(V)}function G(C){return String.fromCharCode.apply(0,C)}if(D(o.random(),I),pt.exports){pt.exports=F;try{_=N(5042)}catch(C){}}else void 0!==(B=function(){return F}.call(tt,N,tt,pt))&&(pt.exports=B)}("undefined"!=typeof self?self:this,[],Math)},5042:()=>{}}]);