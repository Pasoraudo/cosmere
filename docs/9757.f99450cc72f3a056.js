(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9757],{5131:(lt,nt,J)=>{"use strict";J.d(nt,{J:()=>gv});var ge=J(9976),he=J(6479),W=J(9268),m=J(5e3);J(655);"undefined"!=typeof window&&window,"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self;"undefined"!=typeof global&&global;Object.keys({useClass:null}),Object.keys({useFactory:null}),Object.keys({useValue:null}),Object.keys({useExisting:null});const Eo="undefined"!=typeof Zone?Zone:null,yt=Eo&&Eo[Eo.__symbol__("fakeAsyncTest")];function Ug(n=0,e={processNewMacroTasksSynchronously:!0}){if(yt)return yt.tick(n,e);throw new Error("zone-testing.js is needed for the fakeAsync() test helper but could not be found.\n        Please make sure that your environment includes zone.js/testing")}"undefined"==typeof window?global:window;let gv=(()=>{class n extends ge.H{constructor(){super(),this.nodes=[],this.links=[],this.width=window.screen.availWidth,this.height=window.screen.availHeight,this.characterLinks=[],this.defaultOptions={zoom:!0},this.id=(0,W.V)(),this.groups=[]}ngOnChanges(t){this.nodes.length>0&&this.links.length>0&&this.create()}ngAfterViewInit(){this.nodes.length>0&&this.links.length>0&&this.create()}create(){this.options=Object.assign(Object.assign({},this.defaultOptions),this.options),this.element=document.getElementById(this.id+"-network"),he.Ys(this.element).selectChildren().remove(),this.createCharacterLinks(),this.initializeColor(),this.createSvg(),this.createLink(),this.createSimulation(),this.createNode()}initializeColor(){this.groups=Array.from(new Set(this.characterLinks.map(t=>t.group))),this.color=he.PKp(this.groups,he.Cn1)}createCharacterLinks(){const t=this.nodes.map(s=>s.id);this.characterLinks=this.links.filter(s=>t.includes(s.source)&&t.includes(s.target))}createSimulation(){this.simulation=he.A4v(this.nodes).force("link",he.Fsl(this.characterLinks).distance(100).id(this.getId)).force("charge",he.q5i().strength(t=>-50*t.score)).force("center",he.wqt(this.width/2,this.height/2)).force("radius",he.Hh(t=>t.score+20)).force("cluster",this.cluster(this.nodes)).on("tick",()=>{this.link.attr("d",this.linkArc),this.node.attr("transform",t=>`translate(${t.x}, ${t.y})`),setTimeout(Ug,200)})}createSvg(){const t=this;this.svg=he.Ue8("svg").attr("viewBox",[0,0,this.width,this.height]).style("font","12px sans-serif"),this.g=this.svg.append("g"),this.options.zoom&&this.svg.call(he.sPX().extent([[0,0],[this.width,this.height]]).on("zoom",function s({transform:r}){t.g.attr("transform",r)})),this.element.append(this.svg.node()),this.svg.attr("width",this.width).attr("height",this.height),this.svg.append("defs").selectAll("marker").data(this.groups).join("marker").attr("id",r=>`arrow-${r}`).attr("viewBox","0 -5 10 10").attr("refX",15).attr("refY",-.5).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("fill",this.color).attr("d","M0,-5L10,0L0,5")}createLink(){this.link=this.g.append("g").attr("fill","none").attr("stroke-width",1.5).selectAll("path").data(this.characterLinks).join("path").attr("stroke",t=>this.color(t.group))}createNode(){this.node=this.g.append("g").attr("fill","currentColor").attr("stroke-linecap","round").attr("stroke-linejoin","round").selectAll("g").data(this.nodes).join("g").call(this.drag(this.simulation)),this.node.append("circle").attr("stroke","black").attr("stroke-width",1).attr("r",t=>t.score).style("fill",t=>this.color(t.group)),this.node.append("text").text(t=>t.label).style("font-size","1rem").style("color","white").style("text-anchor","middle").style("dominant-baseline","central")}getId(t){return t.id}linkArc(t){const s=Math.hypot(t.target.x-t.source.x,t.target.y-t.source.y);return`\n    M${t.source.x},${t.source.y}\n    A${s},${s} 0 0,1 ${t.target.x},${t.target.y}\n  `}drag(t){return he.ohM().on("start",function s(o,a){o.active||t.alphaTarget(.3).restart(),a.fx=a.x,a.fy=a.y}).on("drag",function r(o,a){a.fx=o.x,a.fy=o.y}).on("end",function i(o,a){o.active||t.alphaTarget(0),a.fx=null,a.fy=null})}cluster(t){return function r(i){for(const o of t){const a=t.filter(c=>c.group===o.group),u=a.reduce((c,h)=>c+h.x,0)/a.length,l=a.reduce((c,h)=>c+h.y,0)/a.length;o.vx+=(u-o.x)*i*.2,o.vy+=(l-o.y)*i*.2}}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["d3-network"]],inputs:{nodes:"nodes",links:"links",options:"options",width:"width",height:"height"},features:[m.qOj,m.TTD],decls:1,vars:1,consts:[[1,"flex","flex-1",3,"id"]],template:function(t,s){1&t&&m._UZ(0,"div",0),2&t&&m.MGl("id","",s.id,"-network")},encapsulation:2}),n})()},4498:(lt,nt,J)=>{"use strict";J.d(nt,{H:()=>x});var ge=J(5861),he=J(4004),m=J(5e3),D=J(6579),N=J(9175),q=J(7327),d=J(7489),w=J(9909);let _=(()=>{class g extends N.m1{constructor(){super({characters:[]}),this.characters$=this.select(k=>k.characters)}saveAllCharacters(k){(0,d.isEqual)(this.get().characters,k)||this.patchState(te=>({characters:(0,w.eG)(te.characters,k)}))}syncState(){return this.get()}syncCharacter(k){return(0,q.L)(k,this.get().characters)}reset(){this.patchState({characters:[]})}}return g.\u0275fac=function(k){return new(k||g)},g.\u0275prov=m.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})(),x=(()=>{class g{constructor(k,te){this.api=k,this.store=te}fetchAllCharacter(){var k=this;return(0,ge.Z)(function*(){const te=yield k.api.get("characters");k.store.saveAllCharacters(te)})()}fetchAllCosmereCharacter(){var k=this;return(0,ge.Z)(function*(){const z=(yield k.api.get("characters")).filter(b=>["Roshar","Yolen","Scadrial","Nalthis"].includes(b.planet));k.store.saveAllCharacters(z)})()}syncAllCharacters(){return this.store.syncState().characters}allCharacters(){return this.store.characters$}cosmereCharacters(){return this.store.characters$.pipe((0,he.U)(k=>k.filter(te=>["Roshar","Yolen","Scadrial","Nalthis"].includes(te.planet))))}}return g.\u0275fac=function(k){return new(k||g)(m.LFG(D.S),m.LFG(_))},g.\u0275prov=m.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},7749:(lt,nt,J)=>{var ge=J(8487),he=J(6714),W=J(5568),m=J(8090),D=J(5766),N=J(8859).createRandomIndex,q=J(6956),d=q.UndirectedLouvainIndex,w=q.DirectedLouvainIndex,S={nodeCommunityAttribute:"community",getEdgeWeight:"weight",fastLocalMoves:!0,randomWalk:!0,resolution:1,rng:Math.random};function _(b,G,I){var C=b.get(G);void 0===C&&(C=0),b.set(G,C+=I)}function g(b,G,I,C,we){return Math.abs(C-we)<1e-10?b!==G&&I>b:C>we}function X(b,G,I){var U,H,B,$,je,rt,Le,xe,be,ue,Fe,oe,Ce,ae,de,fe,Bt,_t,C=new d(G,{getEdgeWeight:I.getEdgeWeight,keepDendrogram:b,resolution:I.resolution}),we=N(I.rng),R=!0,j=!0,Q=new m(Float64Array,C.C),He=0,Mt=0,ct=[];for(I.fastLocalMoves&&(B=new D(C.C));R;){if(oe=C.C,R=!1,j=!0,I.fastLocalMoves){for(_t=0,xe=I.randomWalk?we(oe):0,be=0;be<oe;be++,xe++)B.enqueue(ue=xe%oe);for(;0!==B.size;){for(ue=B.dequeue(),Mt++,Ce=0,Q.clear(),U=C.belongings[ue],$=C.starts[ue],je=C.starts[ue+1];$<je;$++)Ce+=rt=C.weights[$],_(Q,H=C.belongings[Fe=C.neighborhood[$]],rt);for(de=C.fastDeltaWithOwnCommunity(ue,Ce,Q.get(U)||0,U),ae=U,Le=0;Le<Q.size;Le++)(H=Q.dense[Le])!==U&&(He++,g(ae,U,H,fe=C.fastDelta(ue,Ce,Q.vals[Le],H),de)&&(de=fe,ae=H));if(de<0){if((ae=C.isolate(ue,Ce))===U)continue}else{if(ae===U)continue;C.move(ue,Ce,ae)}for(R=!0,_t++,$=C.starts[ue],je=C.starts[ue+1];$<je;$++)(H=C.belongings[Fe=C.neighborhood[$]])!==ae&&B.enqueue(Fe)}ct.push(_t)}else for(ct.push(Bt=[]);j;){for(j=!1,_t=0,xe=I.randomWalk?we(oe):0,be=0;be<oe;be++,xe++){for(ue=xe%oe,Mt++,Ce=0,Q.clear(),U=C.belongings[ue],$=C.starts[ue],je=C.starts[ue+1];$<je;$++)Ce+=rt=C.weights[$],_(Q,H=C.belongings[Fe=C.neighborhood[$]],rt);for(de=C.fastDeltaWithOwnCommunity(ue,Ce,Q.get(U)||0,U),ae=U,Le=0;Le<Q.size;Le++)(H=Q.dense[Le])!==U&&(He++,g(ae,U,H,fe=C.fastDelta(ue,Ce,Q.vals[Le],H),de)&&(de=fe,ae=H));if(de<0){if((ae=C.isolate(ue,Ce))===U)continue}else{if(ae===U)continue;C.move(ue,Ce,ae)}j=!0,_t++}Bt.push(_t),R=j||R}R&&C.zoomOut()}return{index:C,deltaComputations:He,nodesVisited:Mt,moves:ct}}function k(b,G,I){var U,H,B,$,je,rt,xe,be,ue,Fe,oe,Ce,Ue,ae,de,fe,He,ct,Zs,Zt,C=new w(G,{getEdgeWeight:I.getEdgeWeight,keepDendrogram:b,resolution:I.resolution}),we=N(I.rng),R=!0,j=!0,Q=new m(Float64Array,C.C),Bt=0,_t=0,ht=[];for(I.fastLocalMoves&&(B=new D(C.C));R;){if(Ue=C.C,R=!1,j=!0,I.fastLocalMoves){for(Zt=0,ue=I.randomWalk?we(Ue):0,Fe=0;Fe<Ue;Fe++,ue++)B.enqueue(oe=ue%Ue);for(;0!==B.size;){for(oe=B.dequeue(),_t++,ae=0,de=0,Q.clear(),U=C.belongings[oe],$=C.starts[oe],je=C.starts[oe+1],rt=C.offsets[oe];$<je;$++)xe=C.weights[$],$<rt?de+=xe:ae+=xe,_(Q,H=C.belongings[Ce=C.neighborhood[$]],xe);for(He=C.deltaWithOwnCommunity(oe,ae,de,Q.get(U)||0,U),fe=U,be=0;be<Q.size;be++)(H=Q.dense[be])!==U&&(Bt++,g(fe,U,H,ct=C.delta(oe,ae,de,Q.vals[be],H),He)&&(He=ct,fe=H));if(He<0){if((fe=C.isolate(oe,ae,de))===U)continue}else{if(fe===U)continue;C.move(oe,ae,de,fe)}for(R=!0,Zt++,$=C.starts[oe],je=C.starts[oe+1];$<je;$++)(H=C.belongings[Ce=C.neighborhood[$]])!==fe&&B.enqueue(Ce)}ht.push(Zt)}else for(ht.push(Zs=[]);j;){for(j=!1,Zt=0,ue=I.randomWalk?we(Ue):0,Fe=0;Fe<Ue;Fe++,ue++){for(oe=ue%Ue,_t++,ae=0,de=0,Q.clear(),U=C.belongings[oe],$=C.starts[oe],je=C.starts[oe+1],rt=C.offsets[oe];$<je;$++)xe=C.weights[$],$<rt?de+=xe:ae+=xe,_(Q,H=C.belongings[Ce=C.neighborhood[$]],xe);for(He=C.deltaWithOwnCommunity(oe,ae,de,Q.get(U)||0,U),fe=U,be=0;be<Q.size;be++)(H=Q.dense[be])!==U&&(Bt++,g(fe,U,H,ct=C.delta(oe,ae,de,Q.vals[be],H),He)&&(He=ct,fe=H));if(He<0){if((fe=C.isolate(oe,ae,de))===U)continue}else{if(fe===U)continue;C.move(oe,ae,de,fe)}j=!0,Zt++}Zs.push(Zt),R=j||R}R&&C.zoomOut()}return{index:C,deltaComputations:Bt,nodesVisited:_t,moves:ht}}function te(b,G,I,C){if(!he(I))throw new Error("graphology-communities-louvain: the given graph is not a valid graphology instance.");var we=W(I);if("mixed"===we)throw new Error("graphology-communities-louvain: cannot run the algorithm on a true mixed graph.");C=ge(C,S);var R=0;if(0===I.size){if(b)return void I.forEachNode(function($){I.setNodeAttribute($,C.nodeCommunityAttribute,R++)});var j={};return I.forEachNode(function($){j[$]=R++}),G?{communities:j,count:I.order,deltaComputations:0,dendrogram:null,level:0,modularity:NaN,moves:null,nodesVisited:0,resolution:C.resolution}:j}var H=("undirected"===we?X:k)(G,I,C),Q=H.index;if(!G)return b?void Q.assign(C.nodeCommunityAttribute):Q.collect();var B={count:Q.C,deltaComputations:H.deltaComputations,dendrogram:Q.dendrogram,level:Q.level,modularity:Q.modularity(),moves:H.moves,nodesVisited:H.nodesVisited,resolution:C.resolution};return b?(Q.assign(C.nodeCommunityAttribute),B):(B.communities=Q.collect(),B)}var z=te.bind(null,!1,!1);z.assign=te.bind(null,!0,!1),z.detailed=te.bind(null,!1,!0),z.defaults=S,lt.exports=z},6956:(lt,nt,J)=>{var ge=J(6116),he=J(8487),W=J(2954).Q6,m=Symbol.for("nodejs.util.inspect.custom"),D={getEdgeWeight:"weight",keepDendrogram:!1,resolution:1};function N(d,w){var S=(w=he(w,D)).resolution,_=W(w.getEdgeWeight).fromEntry,x=2*(d.size-d.selfLoopCount),g=ge.getPointerArray(x),X=ge.getPointerArray(d.order+1),k=w.getEdgeWeight?Float64Array:ge.getPointerArray(2*d.size);this.C=d.order,this.M=0,this.E=x,this.U=0,this.resolution=S,this.level=0,this.graph=d,this.nodes=new Array(d.order),this.keepDendrogram=w.keepDendrogram,this.neighborhood=new X(x),this.weights=new k(x),this.loops=new k(d.order),this.starts=new g(d.order+1),this.belongings=new X(d.order),this.dendrogram=[],this.mapping=null,this.counts=new X(d.order),this.unused=new X(d.order),this.totalWeights=new k(d.order);var z,te={},b=0,G=0,I=this;d.forEachNode(function(C){I.nodes[b]=C,te[C]=b,G+=d.undirectedDegreeWithoutSelfLoops(C),I.starts[b]=G,I.belongings[b]=b,I.counts[b]=1,b++}),d.forEachEdge(function(C,we,R,j,U,H,Q){if(z=_(C,we,R,j,U,H,Q),R=te[R],j=te[j],I.M+=z,R===j)I.totalWeights[R]+=2*z,I.loops[R]=2*z;else{I.totalWeights[R]+=z,I.totalWeights[j]+=z;var B=--I.starts[R],$=--I.starts[j];I.neighborhood[B]=j,I.neighborhood[$]=R,I.weights[B]=z,I.weights[$]=z}}),this.starts[b]=this.E,this.keepDendrogram?this.dendrogram.push(this.belongings.slice()):this.mapping=this.belongings.slice()}function q(d,w){var S=(w=he(w,D)).resolution,_=W(w.getEdgeWeight).fromEntry,x=2*(d.size-d.selfLoopCount),g=ge.getPointerArray(x),X=ge.getPointerArray(d.order+1),k=w.getEdgeWeight?Float64Array:ge.getPointerArray(2*d.size);this.C=d.order,this.M=0,this.E=x,this.U=0,this.resolution=S,this.level=0,this.graph=d,this.nodes=new Array(d.order),this.keepDendrogram=w.keepDendrogram,this.neighborhood=new X(x),this.weights=new k(x),this.loops=new k(d.order),this.starts=new g(d.order+1),this.offsets=new g(d.order),this.belongings=new X(d.order),this.dendrogram=[],this.counts=new X(d.order),this.unused=new X(d.order),this.totalInWeights=new k(d.order),this.totalOutWeights=new k(d.order);var z,te={},b=0,G=0,I=this;d.forEachNode(function(C){I.nodes[b]=C,te[C]=b,G+=d.outDegreeWithoutSelfLoops(C),I.starts[b]=G,G+=d.inDegreeWithoutSelfLoops(C),I.offsets[b]=G,I.belongings[b]=b,I.counts[b]=1,b++}),d.forEachEdge(function(C,we,R,j,U,H,Q){if(z=_(C,we,R,j,U,H,Q),R=te[R],j=te[j],I.M+=z,R===j)I.loops[R]+=z,I.totalInWeights[R]+=z,I.totalOutWeights[R]+=z;else{I.totalOutWeights[R]+=z,I.totalInWeights[j]+=z;var B=--I.starts[R],$=--I.offsets[j];I.neighborhood[B]=j,I.neighborhood[$]=R,I.weights[B]=z,I.weights[$]=z}}),this.starts[b]=this.E,this.keepDendrogram?this.dendrogram.push(this.belongings.slice()):this.mapping=this.belongings.slice()}N.prototype.isolate=function(d,w){var S=this.belongings[d];if(1===this.counts[S])return S;var _=this.unused[--this.U],x=this.loops[d];return this.totalWeights[S]-=w+x,this.totalWeights[_]+=w+x,this.belongings[d]=_,this.counts[S]--,this.counts[_]++,_},N.prototype.move=function(d,w,S){var _=this.belongings[d],x=this.loops[d];this.totalWeights[_]-=w+x,this.totalWeights[S]+=w+x,this.belongings[d]=S;var g=1==this.counts[_]--;this.counts[S]++,g&&(this.unused[this.U++]=_)},N.prototype.computeNodeDegree=function(d){var w,S,x=0;for(w=this.starts[d],S=this.starts[d+1];w<S;w++)x+=this.weights[w];return x},N.prototype.expensiveIsolate=function(d){var w=this.computeNodeDegree(d);return this.isolate(d,w)},N.prototype.expensiveMove=function(d,w){var S=this.computeNodeDegree(d);this.move(d,S,w)},N.prototype.zoomOut=function(){var g,X,k,te,z,b,G,I,C,we,R,d=new Array(this.C-this.U),w={},S=this.nodes.length,_=0,x=0;for(g=0,k=this.C;g<k;g++)(b=this.belongings[g])in w||(w[b]=_,d[_]={adj:{},totalWeights:this.totalWeights[b],internalWeights:0},_++),this.belongings[g]=w[b];if(this.keepDendrogram){for(we=this.dendrogram[this.level],R=new(ge.getPointerArray(_))(S),g=0;g<S;g++)R[g]=this.belongings[we[g]];this.dendrogram.push(R)}else for(g=0;g<S;g++)this.mapping[g]=this.belongings[this.mapping[g]];for(g=0,k=this.C;g<k;g++)for(C=(I=d[b=this.belongings[g]]).adj,I.internalWeights+=this.loops[g],X=this.starts[g],te=this.starts[g+1];X<te;X++)b!==(G=this.belongings[z=this.neighborhood[X]])?(G in C||(C[G]=0),C[G]+=this.weights[X]):I.internalWeights+=this.weights[X];for(this.C=_,z=0,b=0;b<_;b++)for(G in C=(I=d[b]).adj,this.totalWeights[b=+b]=I.totalWeights,this.loops[b]=I.internalWeights,this.counts[b]=1,this.starts[b]=z,this.belongings[b]=b,C)this.neighborhood[z]=+G,this.weights[z]=C[G],x++,z++;return this.starts[_]=x,this.E=x,this.U=0,this.level++,w},N.prototype.modularity=function(){var d,S,_,x,g=0,X=2*this.M,k=new Float64Array(this.C);for(S=0;S<this.C;S++)for(k[d=this.belongings[S]]+=this.loops[S],_=this.starts[S],x=this.starts[S+1];_<x;_++)d===this.belongings[this.neighborhood[_]]&&(k[d]+=this.weights[_]);for(S=0;S<this.C;S++)g+=k[S]/X-Math.pow(this.totalWeights[S]/X,2)*this.resolution;return g},N.prototype.delta=function(d,w,S,_){var x=this.M;return S/x-this.totalWeights[_]*(w+=this.loops[d])*this.resolution/(2*x*x)},N.prototype.deltaWithOwnCommunity=function(d,w,S,_){var x=this.M;return S/x-(this.totalWeights[_]-(w+=this.loops[d]))*w*this.resolution/(2*x*x)},N.prototype.fastDelta=function(d,w,S,_){return S-(w+=this.loops[d])*this.totalWeights[_]*this.resolution/(2*this.M)},N.prototype.fastDeltaWithOwnCommunity=function(d,w,S,_){return S-(w+=this.loops[d])*(this.totalWeights[_]-w)*this.resolution/(2*this.M)},N.prototype.bounds=function(d){return[this.starts[d],this.starts[d+1]]},N.prototype.project=function(){var d=this,w={};return d.nodes.slice(0,this.C).forEach(function(S,_){w[S]=Array.from(d.neighborhood.slice(d.starts[_],d.starts[_+1])).map(function(x){return d.nodes[x]})}),w},N.prototype.collect=function(d){arguments.length<1&&(d=this.level);var _,x,w={},S=this.keepDendrogram?this.dendrogram[d]:this.mapping;for(_=0,x=S.length;_<x;_++)w[this.nodes[_]]=S[_];return w},N.prototype.assign=function(d,w){arguments.length<2&&(w=this.level);var _,x,S=this.keepDendrogram?this.dendrogram[w]:this.mapping;for(_=0,x=S.length;_<x;_++)this.graph.setNodeAttribute(this.nodes[_],d,S[_])},N.prototype[m]=function(){var d={};Object.defineProperty(d,"constructor",{value:N,enumerable:!1}),d.C=this.C,d.M=this.M,d.E=this.E,d.U=this.U,d.resolution=this.resolution,d.level=this.level,d.nodes=this.nodes,d.starts=this.starts.slice(0,d.C+1);var _=this;return["neighborhood","weights"].forEach(function(x){d[x]=_[x].slice(0,d.E)}),["counts","loops","belongings","totalWeights"].forEach(function(x){d[x]=_[x].slice(0,d.C)}),d.unused=this.unused.slice(0,this.U),this.keepDendrogram?d.dendrogram=this.dendrogram:d.mapping=this.mapping,d},q.prototype.bounds=N.prototype.bounds,q.prototype.inBounds=function(d){return[this.offsets[d],this.starts[d+1]]},q.prototype.outBounds=function(d){return[this.starts[d],this.offsets[d]]},q.prototype.project=N.prototype.project,q.prototype.projectIn=function(){var d=this,w={};return d.nodes.slice(0,this.C).forEach(function(S,_){w[S]=Array.from(d.neighborhood.slice(d.offsets[_],d.starts[_+1])).map(function(x){return d.nodes[x]})}),w},q.prototype.projectOut=function(){var d=this,w={};return d.nodes.slice(0,this.C).forEach(function(S,_){w[S]=Array.from(d.neighborhood.slice(d.starts[_],d.offsets[_])).map(function(x){return d.nodes[x]})}),w},q.prototype.isolate=function(d,w,S){var _=this.belongings[d];if(1===this.counts[_])return _;var x=this.unused[--this.U],g=this.loops[d];return this.totalInWeights[_]-=w+g,this.totalInWeights[x]+=w+g,this.totalOutWeights[_]-=S+g,this.totalOutWeights[x]+=S+g,this.belongings[d]=x,this.counts[_]--,this.counts[x]++,x},q.prototype.move=function(d,w,S,_){var x=this.belongings[d],g=this.loops[d];this.totalInWeights[x]-=w+g,this.totalInWeights[_]+=w+g,this.totalOutWeights[x]-=S+g,this.totalOutWeights[_]+=S+g,this.belongings[d]=_;var X=1==this.counts[x]--;this.counts[_]++,X&&(this.unused[this.U++]=x)},q.prototype.computeNodeInDegree=function(d){var w,S,x=0;for(w=this.offsets[d],S=this.starts[d+1];w<S;w++)x+=this.weights[w];return x},q.prototype.computeNodeOutDegree=function(d){var w,S,x=0;for(w=this.starts[d],S=this.offsets[d];w<S;w++)x+=this.weights[w];return x},q.prototype.expensiveMove=function(d,w){var S=this.computeNodeInDegree(d),_=this.computeNodeOutDegree(d);this.move(d,S,_,w)},q.prototype.zoomOut=function(){var g,X,k,te,z,b,G,I,C,we,R,j,U,H,Q,d=new Array(this.C-this.U),w={},S=this.nodes.length,_=0,x=0;for(g=0,k=this.C;g<k;g++)(b=this.belongings[g])in w||(w[b]=_,d[_]={inAdj:{},outAdj:{},totalInWeights:this.totalInWeights[b],totalOutWeights:this.totalOutWeights[b],internalWeights:0},_++),this.belongings[g]=w[b];if(this.keepDendrogram){for(H=this.dendrogram[this.level],Q=new(ge.getPointerArray(_))(S),g=0;g<S;g++)Q[g]=this.belongings[H[g]];this.dendrogram.push(Q)}else for(g=0;g<S;g++)this.mapping[g]=this.belongings[this.mapping[g]];for(g=0,k=this.C;g<k;g++)for(C=this.offsets[g],j=(I=d[b=this.belongings[g]]).inAdj,U=I.outAdj,I.internalWeights+=this.loops[g],X=this.starts[g],te=this.starts[g+1];X<te;X++)R=(we=X<C)?U:j,b!==(G=this.belongings[z=this.neighborhood[X]])?(G in R||(R[G]=0),R[G]+=this.weights[X]):we&&(I.internalWeights+=this.weights[X]);for(this.C=_,z=0,b=0;b<_;b++){for(G in j=(I=d[b]).inAdj,U=I.outAdj,this.totalInWeights[b=+b]=I.totalInWeights,this.totalOutWeights[b]=I.totalOutWeights,this.loops[b]=I.internalWeights,this.counts[b]=1,this.starts[b]=z,this.belongings[b]=b,U)this.neighborhood[z]=+G,this.weights[z]=U[G],x++,z++;for(G in this.offsets[b]=z,j)this.neighborhood[z]=+G,this.weights[z]=j[G],x++,z++}return this.starts[_]=x,this.E=x,this.U=0,this.level++,w},q.prototype.modularity=function(){var d,S,_,x,g=0,X=this.M,k=new Float64Array(this.C);for(S=0;S<this.C;S++)for(k[d=this.belongings[S]]+=this.loops[S],_=this.starts[S],x=this.offsets[S];_<x;_++)d===this.belongings[this.neighborhood[_]]&&(k[d]+=this.weights[_]);for(S=0;S<this.C;S++)g+=k[S]/X-this.totalInWeights[S]*this.totalOutWeights[S]/Math.pow(X,2)*this.resolution;return g},q.prototype.delta=function(d,w,S,_,x){var g=this.M,te=this.loops[d];return _/g-((S+=te)*this.totalInWeights[x]+(w+=te)*this.totalOutWeights[x])*this.resolution/(g*g)},q.prototype.deltaWithOwnCommunity=function(d,w,S,_,x){var g=this.M,te=this.loops[d];return _/g-((S+=te)*(this.totalInWeights[x]-(w+=te))+w*(this.totalOutWeights[x]-S))*this.resolution/(g*g)},q.prototype.collect=N.prototype.collect,q.prototype.assign=N.prototype.assign,q.prototype[m]=function(){var d={};Object.defineProperty(d,"constructor",{value:q,enumerable:!1}),d.C=this.C,d.M=this.M,d.E=this.E,d.U=this.U,d.resolution=this.resolution,d.level=this.level,d.nodes=this.nodes,d.starts=this.starts.slice(0,d.C+1);var _=this;return["neighborhood","weights"].forEach(function(x){d[x]=_[x].slice(0,d.E)}),["counts","offsets","loops","belongings","totalInWeights","totalOutWeights"].forEach(function(x){d[x]=_[x].slice(0,d.C)}),d.unused=this.unused.slice(0,this.U),this.keepDendrogram?d.dendrogram=this.dendrogram:d.mapping=this.mapping,d},nt.UndirectedLouvainIndex=N,nt.DirectedLouvainIndex=q},5568:(lt,nt,J)=>{var ge=J(6714);lt.exports=function(W){if(!ge(W))throw new Error("graphology-utils/infer-type: expecting a valid graphology instance.");var m=W.type;return"mixed"!==m?m:0===W.directedSize&&0===W.undirectedSize||W.directedSize>0&&W.undirectedSize>0?"mixed":W.directedSize>0?"directed":"undirected"}},8090:(lt,nt,J)=>{var ge=J(5701),he=J(6116).getPointerArray;function W(m,D){arguments.length<2&&(D=m,m=Array);var N=he(D);this.size=0,this.length=D,this.dense=new N(D),this.sparse=new N(D),this.vals=new m(D)}W.prototype.clear=function(){this.size=0},W.prototype.has=function(m){var D=this.sparse[m];return D<this.size&&this.dense[D]===m},W.prototype.get=function(m){var D=this.sparse[m];if(D<this.size&&this.dense[D]===m)return this.vals[D]},W.prototype.set=function(m,D){var N=this.sparse[m];return N<this.size&&this.dense[N]===m?(this.vals[N]=D,this):(this.dense[this.size]=m,this.sparse[m]=this.size,this.vals[this.size]=D,this.size++,this)},W.prototype.delete=function(m){var D=this.sparse[m];return!(D>=this.size||this.dense[D]!==m||(this.dense[this.sparse[m]]=D=this.dense[this.size-1],this.sparse[D]=this.sparse[m],this.size--,0))},W.prototype.forEach=function(m,D){D=arguments.length>1?D:this;for(var N=0;N<this.size;N++)m.call(D,this.vals[N],this.dense[N])},W.prototype.keys=function(){var m=this.size,D=this.dense,N=0;return new ge(function(){if(N<m){var q=D[N];return N++,{value:q}}return{done:!0}})},W.prototype.values=function(){var m=this.size,D=this.vals,N=0;return new ge(function(){if(N<m){var q=D[N];return N++,{value:q}}return{done:!0}})},W.prototype.entries=function(){var m=this.size,D=this.dense,N=this.vals,q=0;return new ge(function(){if(q<m){var d=[D[q],N[q]];return q++,{value:d}}return{done:!0}})},"undefined"!=typeof Symbol&&(W.prototype[Symbol.iterator]=W.prototype.entries),W.prototype.inspect=function(){for(var m=new Map,D=0;D<this.size;D++)m.set(this.dense[D],this.vals[D]);return Object.defineProperty(m,"constructor",{value:W,enumerable:!1}),m.length=this.length,this.vals.constructor!==Array&&(m.type=this.vals.constructor.name),m},"undefined"!=typeof Symbol&&(W.prototype[Symbol.for("nodejs.util.inspect.custom")]=W.prototype.inspect),lt.exports=W},5766:(lt,nt,J)=>{var ge=J(5701),he=J(6116).getPointerArray;function W(m){var D=he(m);this.start=0,this.size=0,this.capacity=m,this.dense=new D(m),this.sparse=new D(m)}W.prototype.clear=function(){this.start=0,this.size=0},W.prototype.has=function(m){if(0===this.size)return!1;var D=this.sparse[m];return(D<this.capacity&&D>=this.start&&D<this.start+this.size||D<(this.start+this.size)%this.capacity)&&this.dense[D]===m},W.prototype.enqueue=function(m){var D=this.sparse[m];return 0!==this.size&&(D<this.capacity&&D>=this.start&&D<this.start+this.size||D<(this.start+this.size)%this.capacity)&&this.dense[D]===m||(this.dense[D=(this.start+this.size)%this.capacity]=m,this.sparse[m]=D,this.size++),this},W.prototype.dequeue=function(){if(0!==this.size){var m=this.start;this.size--,this.start++,this.start===this.capacity&&(this.start=0);var D=this.dense[m];return this.sparse[D]=this.capacity,D}},W.prototype.forEach=function(m,D){D=arguments.length>1?D:this;for(var N=this.capacity,q=this.size,d=this.start,w=0;w<q;)m.call(D,this.dense[d],w,this),w++,++d===N&&(d=0)},W.prototype.values=function(){var m=this.dense,D=this.capacity,N=this.size,q=this.start,d=0;return new ge(function(){if(d>=N)return{done:!0};var w=m[q];return q++,d++,q===D&&(q=0),{value:w,done:!1}})},"undefined"!=typeof Symbol&&(W.prototype[Symbol.iterator]=W.prototype.values),W.prototype.inspect=function(){var m=[];return this.forEach(function(D){m.push(D)}),Object.defineProperty(m,"constructor",{value:W,enumerable:!1}),m.capacity=this.capacity,m},"undefined"!=typeof Symbol&&(W.prototype[Symbol.for("nodejs.util.inspect.custom")]=W.prototype.inspect),lt.exports=W},8859:lt=>{function nt(ge){return function(he){return"number"!=typeof he&&(he=he.length),Math.floor(ge()*he)}}var J=nt(Math.random);J.createRandomIndex=nt,lt.exports=J}}]);