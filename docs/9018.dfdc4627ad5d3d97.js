(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9018],{9018:(ut,D,N)=>{"use strict";N.r(D),N.d(D,{WikiModule:()=>Dm});var Y=N(4521),z=N(5861),O=N(9268),i=N(5e3);let m=(()=>{class t{constructor(){this.subscriptionsData=[]}ngOnDestroy(){this.allSubscriptions().forEach(e=>{e.unsubscribe()})}subscribe(e,r,o,s){const g=(0,O.V)();return this.subscriptionsData.push({id:g,subscription:e.subscribe(r,o,s)}),g}unsubscribe(e){const r=this.subscriptionById(e);!r||r.closed||r.unsubscribe()}unsubscribeAll(){this.subscriptionsData.forEach(e=>e.subscription.unsubscribe())}allSubscriptions(){return this.subscriptionsData.map(e=>e.subscription)}subscriptionById(e){const r=this.subscriptionsData.find(o=>o.id===e);return null==r?void 0:r.subscription}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,r){},encapsulation:2}),t})();const u=(t,n)=>{if(0===t.length)return[];if(0===n.length)return[];const e=f(t,n);return t.map(r=>({id:r.id,label:r.name,group:r.planet,score:e[r.id]}))},l=t=>{const n={};for(const r of t){const o=`${r.characterId1}-${r.characterId2}`;n[o]?n[o]+=1:n[o]=1}let e=[];for(const r in n){const[o,s]=r.split("-");e.push({source:o,target:s,weight:n[r],group:"undefined"})}return e},p=t=>{const n=new Set;return t.forEach(e=>{n.add(e.characterId1),n.add(e.characterId2)}),Array.from(n)},f=(t,n)=>{const o={};n.forEach(V=>{var Q,q,J,dt;null!==(Q=o[J=V.characterId1])&&void 0!==Q||(o[J]=0),null!==(q=o[dt=V.characterId2])&&void 0!==q||(o[dt]=0),o[V.characterId1]+=1,o[V.characterId2]+=1});const s=Object.values(o);let g=Math.min(...s);const G=Math.max(...s)-g,I={};for(const[V,Q]of Object.entries(o))I[V]=(Q-g)/G*28+2;return I};var h=N(7489),F=N(5595),R=N.n(F),j=N(7749),H=N.n(j),k=N(4004),L=N(520),A=N(3905),_=N(2843),W=N(262),x=N(2340);let y=(()=>{class t{generate(e){let r=e;return r.startsWith("/")||(r="/"+r),"assets/db"+r+".json"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),w=(()=>{class t{constructor(e,r){this.http=e,this.router=r,this.requestCache={},setInterval(()=>{this.clearCache()},300)}get(e){var r=this;const o=this.router.generate(e);return new Promise(function(){var s=(0,z.Z)(function*(g,S){try{g(yield(0,A.z)(r.http.get(o).pipe((0,W.K)(I=>(0,_._)(I)))))}catch(G){S(G)}});return function(g,S){return s.apply(this,arguments)}}())}headers(){return{headers:(new L.WM).set("app-version",x.N.appVersion).set("Access-Control-Allow-Origin","*")}}clearCache(){const e=(0,h.keys)(this.requestCache),r=(new Date).getTime();for(const o of e){const s=this.requestCache[o];if(!s)continue;const g=r-s.timestamp;!s.response&&g<2e4||s.response&&g<200||(this.requestCache[o]=null,delete this.requestCache[o])}}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(L.eN),i.LFG(y))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var b=N(9175);const U=(t,n)=>n.find(e=>e.id===t),B=(t,n)=>{t||(t=[]);let e=[...t];return n.forEach(r=>{e=X(e,r)}),e},X=(t,n)=>{const e=n;let r=[...t];return(0,h.some)(r,o=>o.id===e.id)?r=r.map(o=>o.id===e.id?n:o):r.push(n),r};let rt=(()=>{class t extends b.m1{constructor(){super({characters:[]}),this.characters$=this.select(e=>e.characters)}saveAllCharacters(e){(0,h.isEqual)(this.get().characters,e)||this.patchState(r=>({characters:B(r.characters,e)}))}syncState(){return this.get()}syncCharacter(e){return U(e,this.get().characters)}reset(){this.patchState({characters:[]})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),it=(()=>{class t{constructor(e,r){this.api=e,this.store=r}fetchAllCharacter(){var e=this;return(0,z.Z)(function*(){const r=yield e.api.get("characters");e.store.saveAllCharacters(r)})()}fetchAllCosmereCharacter(){var e=this;return(0,z.Z)(function*(){const o=(yield e.api.get("characters")).filter(s=>"Cosmere"===s.universe);e.store.saveAllCharacters(o)})()}syncAllCharacters(){return this.store.syncState().characters}allCharacters(){return this.store.characters$}cosmereCharacters(){return this.store.characters$.pipe((0,k.U)(e=>e.filter(r=>"Cosmere"===r.universe)))}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(w),i.LFG(rt))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ct=(()=>{class t extends b.m1{constructor(){super({relationships:[]}),this.relationships$=this.select(e=>e.relationships)}saveAllRelationship(e){(0,h.isEqual)(this.get().relationships,e)||this.patchState(r=>({relationships:B(r.relationships,e)}))}syncState(){return this.get()}reset(){this.patchState({relationships:[]})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),lt=(()=>{class t{constructor(e,r){this.api=e,this.store=r}fetchAllRelationship(){var e=this;return(0,z.Z)(function*(){const r=yield e.api.get("relationships");e.store.saveAllRelationship(r)})()}fetchAllRelationshipByBookId(e){var r=this;return(0,z.Z)(function*(){const o=yield r.api.get("relationships-"+e);r.store.saveAllRelationship(o)})()}fetchAllCosmereRelationship(){var e=this;return(0,z.Z)(function*(){const r=[];for(const g of["warbreaker","mistborn1","mistborn2","mistborn3","mistborn4","mistborn5","mistborn6","stormlight1","stormlight2","stormlight3","stormlight4"])r.push(e.api.get("relationships-"+g).then(S=>S).catch(S=>{}));const o=yield Promise.all(r);let s=[];o.forEach(g=>s=B(s,g)),e.store.saveAllRelationship(s)})()}syncAllRelationship(){return this.store.syncState().relationships}allRelationship(){return this.store.relationships$}cosmereRelationships(){return this.store.relationships$.pipe((0,k.U)(e=>e.filter(r=>["warbreaker","mistborn1","mistborn2","mistborn3","mistborn4","mistborn5","mistborn6","stormlight1","stormlight2","stormlight3","stormlight4"].includes(r.bookId))))}relationshipsByBook(e){return this.store.relationships$.pipe((0,k.U)(r=>r.filter(o=>(null==o?void 0:o.bookId)===e)))}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(w),i.LFG(Ct))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Et=N(5598),Ot=N(9976);function Pt(t,n){let e;if(void 0===n)for(const r of t)null!=r&&(e<r||void 0===e&&r>=r)&&(e=r);else{let r=-1;for(let o of t)null!=(o=n(o,++r,t))&&(e<o||void 0===e&&o>=o)&&(e=o)}return e}function ht(t,n){let e;if(void 0===n)for(const r of t)null!=r&&(e>r||void 0===e&&r>=r)&&(e=r);else{let r=-1;for(let o of t)null!=(o=n(o,++r,t))&&(e>o||void 0===e&&o>=o)&&(e=o)}return e}function ft(t,n){return null==t||null==n?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function qt(t,n){return(null==t||!(t>=t))-(null==n||!(n>=n))||(t<n?-1:t>n?1:0)}function $t(t,n,e=0,r=1/0,o){if(n=Math.floor(n),e=Math.floor(Math.max(0,e)),r=Math.floor(Math.min(t.length-1,r)),!(e<=n&&n<=r))return t;for(o=void 0===o?qt:function Yt(t=ft){if(t===ft)return qt;if("function"!=typeof t)throw new TypeError("compare is not a function");return(n,e)=>{const r=t(n,e);return r||0===r?r:(0===t(e,e))-(0===t(n,n))}}(o);r>e;){if(r-e>600){const G=r-e+1,I=n-e+1,V=Math.log(G),Q=.5*Math.exp(2*V/3),q=.5*Math.sqrt(V*Q*(G-Q)/G)*(I-G/2<0?-1:1);$t(t,n,Math.max(e,Math.floor(n-I*Q/G+q)),Math.min(r,Math.floor(n+(G-I)*Q/G+q)),o)}const s=t[n];let g=e,S=r;for(Xt(t,e,n),o(t[r],s)>0&&Xt(t,e,r);g<S;){for(Xt(t,g,S),++g,--S;o(t[g],s)<0;)++g;for(;o(t[S],s)>0;)--S}0===o(t[e],s)?Xt(t,e,S):(++S,Xt(t,S,r)),S<=n&&(e=S+1),n<=S&&(r=S-1)}return t}function Xt(t,n,e){const r=t[n];t[n]=t[e],t[e]=r}function re(t,n,e){t=+t,n=+n,e=(o=arguments.length)<2?(n=t,t=0,1):o<3?1:+e;for(var r=-1,o=0|Math.max(0,Math.ceil((n-t)/e)),s=new Array(o);++r<o;)s[r]=t+r*e;return s}class fn extends Map{constructor(n,e=gn){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=n)for(const[r,o]of n)this.set(r,o)}get(n){return super.get(Be(this,n))}has(n){return super.has(Be(this,n))}set(n,e){return super.set(Ze(this,n),e)}delete(n){return super.delete(dn(this,n))}}class Un extends Set{constructor(n,e=gn){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=n)for(const r of n)this.add(r)}has(n){return super.has(Be(this,n))}add(n){return super.add(Ze(this,n))}delete(n){return super.delete(dn(this,n))}}function Be({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):e}function Ze({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):(t.set(r,e),e)}function dn({_intern:t,_key:n},e){const r=n(e);return t.has(r)&&(e=t.get(r),t.delete(r)),e}function gn(t){return null!==t&&"object"==typeof t?t.valueOf():t}function jn(t){return t}function yi(t){return"translate("+t+",0)"}function Bn(t){return"translate(0,"+t+")"}function mi(t){return n=>+t(n)}function wi(t,n){return n=Math.max(0,t.bandwidth()-2*n)/2,t.round()&&(n=Math.round(n)),e=>+t(e)+n}function bi(){return!this.__axis}function Pe(t,n){var e=[],r=null,o=null,s=6,g=6,S=3,G="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,I=1===t||4===t?-1:1,V=4===t||2===t?"x":"y",Q=1===t||3===t?yi:Bn;function q(J){var dt=null==r?n.ticks?n.ticks.apply(n,e):n.domain():r,ct=null==o?n.tickFormat?n.tickFormat.apply(n,e):jn:o,et=Math.max(s,0)+S,nt=n.range(),pt=+nt[0]+G,mt=+nt[nt.length-1]+G,ot=(n.bandwidth?wi:mi)(n.copy(),G),bt=J.selection?J.selection():J,Lt=bt.selectAll(".domain").data([null]),kt=bt.selectAll(".tick").data(dt,n).order(),It=kt.exit(),Bt=kt.enter().append("g").attr("class","tick"),Ft=kt.select("line"),Nt=kt.select("text");Lt=Lt.merge(Lt.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),kt=kt.merge(Bt),Ft=Ft.merge(Bt.append("line").attr("stroke","currentColor").attr(V+"2",I*s)),Nt=Nt.merge(Bt.append("text").attr("fill","currentColor").attr(V,I*et).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),J!==bt&&(Lt=Lt.transition(J),kt=kt.transition(J),Ft=Ft.transition(J),Nt=Nt.transition(J),It=It.transition(J).attr("opacity",1e-6).attr("transform",function(Vt){return isFinite(Vt=ot(Vt))?Q(Vt+G):this.getAttribute("transform")}),Bt.attr("opacity",1e-6).attr("transform",function(Vt){var jt=this.parentNode.__axis;return Q((jt&&isFinite(jt=jt(Vt))?jt:ot(Vt))+G)})),It.remove(),Lt.attr("d",4===t||2===t?g?"M"+I*g+","+pt+"H"+G+"V"+mt+"H"+I*g:"M"+G+","+pt+"V"+mt:g?"M"+pt+","+I*g+"V"+G+"H"+mt+"V"+I*g:"M"+pt+","+G+"H"+mt),kt.attr("opacity",1).attr("transform",function(Vt){return Q(ot(Vt)+G)}),Ft.attr(V+"2",I*s),Nt.attr(V,I*et).text(ct),bt.filter(bi).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),bt.each(function(){this.__axis=ot})}return q.scale=function(J){return arguments.length?(n=J,q):n},q.ticks=function(){return e=Array.from(arguments),q},q.tickArguments=function(J){return arguments.length?(e=null==J?[]:Array.from(J),q):e.slice()},q.tickValues=function(J){return arguments.length?(r=null==J?null:Array.from(J),q):r&&r.slice()},q.tickFormat=function(J){return arguments.length?(o=J,q):o},q.tickSize=function(J){return arguments.length?(s=g=+J,q):s},q.tickSizeInner=function(J){return arguments.length?(s=+J,q):s},q.tickSizeOuter=function(J){return arguments.length?(g=+J,q):g},q.tickPadding=function(J){return arguments.length?(S=+J,q):S},q.offset=function(J){return arguments.length?(G=+J,q):G},q}function He(t){return Pe(3,t)}function Hn(t){return Pe(4,t)}function _i(){}function Ye(t){return null==t?_i:function(){return this.querySelector(t)}}function Ai(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function gr(){return[]}function pr(t){return null==t?gr:function(){return this.querySelectorAll(t)}}function yr(t){return function(){return this.matches(t)}}function Yn(t){return function(n){return n.matches(t)}}var mr=Array.prototype.find;function Ve(){return this.firstElementChild}var wr=Array.prototype.filter;function br(){return Array.from(this.children)}function Ie(t){return new Array(t.length)}function P(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function T(t){return function(){return t}}function a(t,n,e,r,o,s){for(var S,g=0,G=n.length,I=s.length;g<I;++g)(S=n[g])?(S.__data__=s[g],r[g]=S):e[g]=new P(t,s[g]);for(;g<G;++g)(S=n[g])&&(o[g]=S)}function c(t,n,e,r,o,s,g){var S,G,J,I=new Map,V=n.length,Q=s.length,q=new Array(V);for(S=0;S<V;++S)(G=n[S])&&(q[S]=J=g.call(G,G.__data__,S,n)+"",I.has(J)?o[S]=G:I.set(J,G));for(S=0;S<Q;++S)J=g.call(t,s[S],S,s)+"",(G=I.get(J))?(r[S]=G,G.__data__=s[S],I.delete(J)):e[S]=new P(t,s[S]);for(S=0;S<V;++S)(G=n[S])&&I.get(q[S])===G&&(o[S]=G)}function M(t){return t.__data__}function K(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Tt(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}P.prototype={constructor:P,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var le="http://www.w3.org/1999/xhtml";const fe={svg:"http://www.w3.org/2000/svg",xhtml:le,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function de(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),fe.hasOwnProperty(n)?{space:fe[n],local:t}:t}function vn(t){return function(){this.removeAttribute(t)}}function yn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function _o(t,n){return function(){this.setAttribute(t,n)}}function xo(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function Er(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function Qs(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function Ao(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function tu(t){return function(){this.style.removeProperty(t)}}function eu(t,n,e){return function(){this.style.setProperty(t,n,e)}}function nu(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function mn(t,n){return t.style.getPropertyValue(n)||Ao(t).getComputedStyle(t,null).getPropertyValue(n)}function iu(t){return function(){delete this[t]}}function ou(t,n){return function(){this[t]=n}}function au(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function Eo(t){return t.trim().split(/^|\s+/)}function Si(t){return t.classList||new Co(t)}function Co(t){this._node=t,this._names=Eo(t.getAttribute("class")||"")}function So(t,n){for(var e=Si(t),r=-1,o=n.length;++r<o;)e.add(n[r])}function To(t,n){for(var e=Si(t),r=-1,o=n.length;++r<o;)e.remove(n[r])}function uu(t){return function(){So(this,t)}}function cu(t){return function(){To(this,t)}}function hu(t,n){return function(){(n.apply(this,arguments)?So:To)(this,t)}}function fu(){this.textContent=""}function du(t){return function(){this.textContent=t}}function gu(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}function vu(){this.innerHTML=""}function yu(t){return function(){this.innerHTML=t}}function mu(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}function bu(){this.nextSibling&&this.parentNode.appendChild(this)}function xu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Eu(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===le&&n.documentElement.namespaceURI===le?n.createElement(t):n.createElementNS(e,t)}}function Cu(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ti(t){var n=de(t);return(n.local?Cu:Eu)(n)}function Tu(){return null}function Nu(){var t=this.parentNode;t&&t.removeChild(this)}function Du(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Ru(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function ku(t){return t.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");return r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),{type:n,name:e}})}function Fu(t){return function(){var n=this.__on;if(n){for(var s,e=0,r=-1,o=n.length;e<o;++e)s=n[e],t.type&&s.type!==t.type||s.name!==t.name?n[++r]=s:this.removeEventListener(s.type,s.listener,s.options);++r?n.length=r:delete this.__on}}}function Gu(t,n,e){return function(){var o,r=this.__on,s=function Iu(t){return function(n){t.call(this,n,this.__data__)}}(n);if(r)for(var g=0,S=r.length;g<S;++g)if((o=r[g]).type===t.type&&o.name===t.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=s,o.options=e),void(o.value=n);this.addEventListener(t.type,s,e),o={type:t.type,name:t.name,value:n,listener:s,options:e},r?r.push(o):this.__on=[o]}}function Mo(t,n,e){var r=Ao(t),o=r.CustomEvent;"function"==typeof o?o=new o(n,e):(o=r.document.createEvent("Event"),e?(o.initEvent(n,e.bubbles,e.cancelable),o.detail=e.detail):o.initEvent(n,!1,!1)),t.dispatchEvent(o)}function Uu(t,n){return function(){return Mo(this,t,n)}}function ju(t,n){return function(){return Mo(this,t,n.apply(this,arguments))}}Co.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var No=[null];function Ce(t,n){this._groups=t,this._parents=n}function Lo(){return new Ce([[document.documentElement]],No)}Ce.prototype=Lo.prototype={constructor:Ce,select:function xi(t){"function"!=typeof t&&(t=Ye(t));for(var n=this._groups,e=n.length,r=new Array(e),o=0;o<e;++o)for(var G,I,s=n[o],g=s.length,S=r[o]=new Array(g),V=0;V<g;++V)(G=s[V])&&(I=t.call(G,G.__data__,V,s))&&("__data__"in G&&(I.__data__=G.__data__),S[V]=I);return new Ce(r,this._parents)},selectAll:function vr(t){t="function"==typeof t?function Ei(t){return function(){return Ai(t.apply(this,arguments))}}(t):pr(t);for(var n=this._groups,e=n.length,r=[],o=[],s=0;s<e;++s)for(var G,g=n[s],S=g.length,I=0;I<S;++I)(G=g[I])&&(r.push(t.call(G,G.__data__,I,g)),o.push(G));return new Ce(r,o)},selectChild:function Jt(t){return this.select(null==t?Ve:function Ci(t){return function(){return mr.call(this.children,t)}}("function"==typeof t?t:Yn(t)))},selectChildren:function xr(t){return this.selectAll(null==t?br:function _r(t){return function(){return wr.call(this.children,t)}}("function"==typeof t?t:Yn(t)))},filter:function Ar(t){"function"!=typeof t&&(t=yr(t));for(var n=this._groups,e=n.length,r=new Array(e),o=0;o<e;++o)for(var G,s=n[o],g=s.length,S=r[o]=[],I=0;I<g;++I)(G=s[I])&&t.call(G,G.__data__,I,s)&&S.push(G);return new Ce(r,this._parents)},data:function Z(t,n){if(!arguments.length)return Array.from(this,M);var e=n?c:a,r=this._parents,o=this._groups;"function"!=typeof t&&(t=T(t));for(var s=o.length,g=new Array(s),S=new Array(s),G=new Array(s),I=0;I<s;++I){var V=r[I],Q=o[I],q=Q.length,J=K(t.call(V,V&&V.__data__,I,r)),dt=J.length,ct=S[I]=new Array(dt),et=g[I]=new Array(dt),nt=G[I]=new Array(q);e(V,Q,ct,et,nt,J,n);for(var ot,bt,pt=0,mt=0;pt<dt;++pt)if(ot=ct[pt]){for(pt>=mt&&(mt=pt+1);!(bt=et[mt])&&++mt<dt;);ot._next=bt||null}}return(g=new Ce(g,r))._enter=S,g._exit=G,g},enter:function E(){return new Ce(this._enter||this._groups.map(Ie),this._parents)},exit:function at(){return new Ce(this._exit||this._groups.map(Ie),this._parents)},join:function xt(t,n,e){var r=this.enter(),o=this,s=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=n&&(o=n(o))&&(o=o.selection()),null==e?s.remove():e(s),r&&o?r.merge(o).order():o},merge:function _t(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,o=e.length,g=Math.min(o,r.length),S=new Array(o),G=0;G<g;++G)for(var J,I=e[G],V=r[G],Q=I.length,q=S[G]=new Array(Q),dt=0;dt<Q;++dt)(J=I[dt]||V[dt])&&(q[dt]=J);for(;G<o;++G)S[G]=e[G];return new Ce(S,this._parents)},selection:function Zu(){return this},order:function yt(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var g,r=t[n],o=r.length-1,s=r[o];--o>=0;)(g=r[o])&&(s&&4^g.compareDocumentPosition(s)&&s.parentNode.insertBefore(g,s),s=g);return this},sort:function St(t){function n(Q,q){return Q&&q?t(Q.__data__,q.__data__):!Q-!q}t||(t=Tt);for(var e=this._groups,r=e.length,o=new Array(r),s=0;s<r;++s){for(var I,g=e[s],S=g.length,G=o[s]=new Array(S),V=0;V<S;++V)(I=g[V])&&(G[V]=I);G.sort(n)}return new Ce(o,this._parents).order()},call:function Ut(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function Kt(){return Array.from(this)},node:function te(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],o=0,s=r.length;o<s;++o){var g=r[o];if(g)return g}return null},size:function ae(){let t=0;for(const n of this)++t;return t},empty:function oe(){return!this.node()},each:function we(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var S,o=n[e],s=0,g=o.length;s<g;++s)(S=o[s])&&t.call(S,S.__data__,s,o);return this},attr:function Js(t,n){var e=de(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?yn:vn:"function"==typeof n?e.local?Qs:Er:e.local?xo:_o)(e,n))},style:function ru(t,n,e){return arguments.length>1?this.each((null==n?tu:"function"==typeof n?nu:eu)(t,n,null==e?"":e)):mn(this.node(),t)},property:function su(t,n){return arguments.length>1?this.each((null==n?iu:"function"==typeof n?au:ou)(t,n)):this.node()[t]},classed:function lu(t,n){var e=Eo(t+"");if(arguments.length<2){for(var r=Si(this.node()),o=-1,s=e.length;++o<s;)if(!r.contains(e[o]))return!1;return!0}return this.each(("function"==typeof n?hu:n?uu:cu)(e,n))},text:function pu(t){return arguments.length?this.each(null==t?fu:("function"==typeof t?gu:du)(t)):this.node().textContent},html:function wu(t){return arguments.length?this.each(null==t?vu:("function"==typeof t?mu:yu)(t)):this.node().innerHTML},raise:function _u(){return this.each(bu)},lower:function Au(){return this.each(xu)},append:function Su(t){var n="function"==typeof t?t:Ti(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function Mu(t,n){var e="function"==typeof t?t:Ti(t),r=null==n?Tu:"function"==typeof n?n:Ye(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function Lu(){return this.each(Nu)},clone:function Ou(t){return this.select(t?Ru:Du)},datum:function Pu(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function zu(t,n,e){var o,g,r=ku(t+""),s=r.length;if(!(arguments.length<2)){for(S=n?Gu:Fu,o=0;o<s;++o)this.each(S(r[o],n,e));return this}var S=this.node().__on;if(S)for(var V,G=0,I=S.length;G<I;++G)for(o=0,V=S[G];o<s;++o)if((g=r[o]).type===V.type&&g.name===V.name)return V.value},dispatch:function Wu(t,n){return this.each(("function"==typeof n?ju:Uu)(t,n))},[Symbol.iterator]:function*Bu(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var g,r=t[n],o=0,s=r.length;o<s;++o)(g=r[o])&&(yield g)}};const Vn=Lo;var Hu={value:()=>{}};function Do(){for(var r,t=0,n=arguments.length,e={};t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new Cr(e)}function Cr(t){this._=t}function Yu(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",o=e.indexOf(".");if(o>=0&&(r=e.slice(o+1),e=e.slice(0,o)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}function Vu(t,n){for(var o,e=0,r=t.length;e<r;++e)if((o=t[e]).name===n)return o.value}function Ro(t,n,e){for(var r=0,o=t.length;r<o;++r)if(t[r].name===n){t[r]=Hu,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}Cr.prototype=Do.prototype={constructor:Cr,on:function(t,n){var o,e=this._,r=Yu(t+"",e),s=-1,g=r.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++s<g;)if(o=(t=r[s]).type)e[o]=Ro(e[o],t.name,n);else if(null==n)for(o in e)e[o]=Ro(e[o],t.name,null);return this}for(;++s<g;)if((o=(t=r[s]).type)&&(o=Vu(e[o],t.name)))return o},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new Cr(t)},call:function(t,n){if((o=arguments.length-2)>0)for(var o,s,e=new Array(o),r=0;r<o;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=0,o=(s=this._[t]).length;r<o;++r)s[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,s=r.length;o<s;++o)r[o].value.apply(n,e)}};const Sr=Do;var Tr,qn,wn=0,Xn=0,$n=0,Mr=0,en=0,Nr=0,Kn="object"==typeof performance&&performance.now?performance:Date,Po="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Mi(){return en||(Po(Xu),en=Kn.now()+Nr)}function Xu(){en=0}function Lr(){this._call=this._time=this._next=null}function Ni(t,n,e){var r=new Lr;return r.restart(t,n,e),r}function Io(){en=(Mr=Kn.now())+Nr,wn=Xn=0;try{!function $u(){Mi(),++wn;for(var n,t=Tr;t;)(n=en-t._time)>=0&&t._call.call(void 0,n),t=t._next;--wn}()}finally{wn=0,function Ku(){for(var t,e,n=Tr,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Tr=e);qn=t,Li(r)}(),en=0}}function qu(){var t=Kn.now(),n=t-Mr;n>1e3&&(Nr-=n,Mr=t)}function Li(t){wn||(Xn&&(Xn=clearTimeout(Xn)),t-en>24?(t<1/0&&(Xn=setTimeout(Io,t-Kn.now()-Nr)),$n&&($n=clearInterval($n))):($n||(Mr=Kn.now(),$n=setInterval(qu,1e3)),wn=1,Po(Io)))}function ko(t,n,e){var r=new Lr;return r.restart(o=>{r.stop(),t(o+n)},n=null==n?0:+n,e),r}Lr.prototype=Ni.prototype={constructor:Lr,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?Mi():+e)+(null==n?0:+n),!this._next&&qn!==this&&(qn?qn._next=this:Tr=this,qn=this),this._call=t,this._time=e,Li()},stop:function(){this._call&&(this._call=null,this._time=1/0,Li())}};var Qu=Sr("start","end","cancel","interrupt"),Ju=[];function Or(t,n,e,r,o,s){var g=t.__transition;if(g){if(e in g)return}else t.__transition={};!function tc(t,n,e){var o,r=t.__transition;function g(I){var V,Q,q,J;if(1!==e.state)return G();for(V in r)if((J=r[V]).name===e.name){if(3===J.state)return ko(g);4===J.state?(J.state=6,J.timer.stop(),J.on.call("interrupt",t,t.__data__,J.index,J.group),delete r[V]):+V<n&&(J.state=6,J.timer.stop(),J.on.call("cancel",t,t.__data__,J.index,J.group),delete r[V])}if(ko(function(){3===e.state&&(e.state=4,e.timer.restart(S,e.delay,e.time),S(I))}),e.state=2,e.on.call("start",t,t.__data__,e.index,e.group),2===e.state){for(e.state=3,o=new Array(q=e.tween.length),V=0,Q=-1;V<q;++V)(J=e.tween[V].value.call(t,t.__data__,e.index,e.group))&&(o[++Q]=J);o.length=Q+1}}function S(I){for(var V=I<e.duration?e.ease.call(null,I/e.duration):(e.timer.restart(G),e.state=5,1),Q=-1,q=o.length;++Q<q;)o[Q].call(t,V);5===e.state&&(e.on.call("end",t,t.__data__,e.index,e.group),G())}function G(){for(var I in e.state=6,e.timer.stop(),delete r[n],r)return;delete t.__transition}r[n]=e,e.timer=Ni(function s(I){e.state=1,e.timer.restart(g,e.delay,e.time),e.delay<=I&&g(I-e.delay)},0,e.time)}(t,e,{name:n,index:r,group:o,on:Qu,tween:Ju,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0})}function Oi(t,n){var e=Se(t,n);if(e.state>0)throw new Error("too late; already scheduled");return e}function Le(t,n){var e=Se(t,n);if(e.state>3)throw new Error("too late; already running");return e}function Se(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Pr(t,n){var r,o,g,e=t.__transition,s=!0;if(e){for(g in n=null==n?null:n+"",e)(r=e[g]).name===n?(o=r.state>2&&r.state<5,r.state=6,r.timer.stop(),r.on.call(o?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete e[g]):s=!1;s&&delete t.__transition}}function Te(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}var Ir,Uo=180/Math.PI,Pi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function jo(t,n,e,r,o,s){var g,S,G;return(g=Math.sqrt(t*t+n*n))&&(t/=g,n/=g),(G=t*e+n*r)&&(e-=t*G,r-=n*G),(S=Math.sqrt(e*e+r*r))&&(e/=S,r/=S,G/=S),t*r<n*e&&(t=-t,n=-n,G=-G,g=-g),{translateX:o,translateY:s,rotate:Math.atan2(n,t)*Uo,skewX:Math.atan(G)*Uo,scaleX:g,scaleY:S}}function Wo(t,n,e,r){function o(I){return I.length?I.pop()+" ":""}return function(I,V){var Q=[],q=[];return I=t(I),V=t(V),function s(I,V,Q,q,J,dt){if(I!==Q||V!==q){var ct=J.push("translate(",null,n,null,e);dt.push({i:ct-4,x:Te(I,Q)},{i:ct-2,x:Te(V,q)})}else(Q||q)&&J.push("translate("+Q+n+q+e)}(I.translateX,I.translateY,V.translateX,V.translateY,Q,q),function g(I,V,Q,q){I!==V?(I-V>180?V+=360:V-I>180&&(I+=360),q.push({i:Q.push(o(Q)+"rotate(",null,r)-2,x:Te(I,V)})):V&&Q.push(o(Q)+"rotate("+V+r)}(I.rotate,V.rotate,Q,q),function S(I,V,Q,q){I!==V?q.push({i:Q.push(o(Q)+"skewX(",null,r)-2,x:Te(I,V)}):V&&Q.push(o(Q)+"skewX("+V+r)}(I.skewX,V.skewX,Q,q),function G(I,V,Q,q,J,dt){if(I!==Q||V!==q){var ct=J.push(o(J)+"scale(",null,",",null,")");dt.push({i:ct-4,x:Te(I,Q)},{i:ct-2,x:Te(V,q)})}else(1!==Q||1!==q)&&J.push(o(J)+"scale("+Q+","+q+")")}(I.scaleX,I.scaleY,V.scaleX,V.scaleY,Q,q),I=V=null,function(J){for(var et,dt=-1,ct=q.length;++dt<ct;)Q[(et=q[dt]).i]=et.x(J);return Q.join("")}}}var ic=Wo(function nc(t){const n=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?Pi:jo(n.a,n.b,n.c,n.d,n.e,n.f)},"px, ","px)","deg)"),oc=Wo(function rc(t){return null!=t&&(Ir||(Ir=document.createElementNS("http://www.w3.org/2000/svg","g")),Ir.setAttribute("transform",t),t=Ir.transform.baseVal.consolidate())?jo((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Pi},", ",")",")");function ac(t,n){var e,r;return function(){var o=Le(this,t),s=o.tween;if(s!==e)for(var g=0,S=(r=e=s).length;g<S;++g)if(r[g].name===n){(r=r.slice()).splice(g,1);break}o.tween=r}}function sc(t,n,e){var r,o;if("function"!=typeof e)throw new Error;return function(){var s=Le(this,t),g=s.tween;if(g!==r){o=(r=g).slice();for(var S={name:n,value:e},G=0,I=o.length;G<I;++G)if(o[G].name===n){o[G]=S;break}G===I&&o.push(S)}s.tween=o}}function Ii(t,n,e){var r=t._id;return t.each(function(){var o=Le(this,r);(o.value||(o.value={}))[n]=e.apply(this,arguments)}),function(o){return Se(o,r).value[n]}}function kr(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function ki(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function bn(){}var _n=1/.7,xn="\\s*([+-]?\\d+)\\s*",Qn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",De="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cc=/^#([0-9a-f]{3,8})$/,hc=new RegExp(`^rgb\\(${xn},${xn},${xn}\\)$`),lc=new RegExp(`^rgb\\(${De},${De},${De}\\)$`),fc=new RegExp(`^rgba\\(${xn},${xn},${xn},${Qn}\\)$`),dc=new RegExp(`^rgba\\(${De},${De},${De},${Qn}\\)$`),gc=new RegExp(`^hsl\\(${Qn},${De},${De}\\)$`),pc=new RegExp(`^hsla\\(${Qn},${De},${De},${Qn}\\)$`),Bo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Zo(){return this.rgb().formatHex()}function Ho(){return this.rgb().formatRgb()}function rn(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=cc.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?Yo(n):3===e?new ge(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?Fr(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?Fr(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=hc.exec(t))?new ge(n[1],n[2],n[3],1):(n=lc.exec(t))?new ge(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=fc.exec(t))?Fr(n[1],n[2],n[3],n[4]):(n=dc.exec(t))?Fr(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=gc.exec(t))?qo(n[1],n[2]/100,n[3]/100,1):(n=pc.exec(t))?qo(n[1],n[2]/100,n[3]/100,n[4]):Bo.hasOwnProperty(t)?Yo(Bo[t]):"transparent"===t?new ge(NaN,NaN,NaN,0):null}function Yo(t){return new ge(t>>16&255,t>>8&255,255&t,1)}function Fr(t,n,e,r){return r<=0&&(t=n=e=NaN),new ge(t,n,e,r)}function Vo(t){return t instanceof bn||(t=rn(t)),t?new ge((t=t.rgb()).r,t.g,t.b,t.opacity):new ge}function Gr(t,n,e,r){return 1===arguments.length?Vo(t):new ge(t,n,e,null==r?1:r)}function ge(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function Xo(){return`#${an(this.r)}${an(this.g)}${an(this.b)}`}function $o(){const t=zr(this.opacity);return`${1===t?"rgb(":"rgba("}${on(this.r)}, ${on(this.g)}, ${on(this.b)}${1===t?")":`, ${t})`}`}function zr(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function on(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function an(t){return((t=on(t))<16?"0":"")+t.toString(16)}function qo(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new Me(t,n,e,r)}function Ko(t){if(t instanceof Me)return new Me(t.h,t.s,t.l,t.opacity);if(t instanceof bn||(t=rn(t)),!t)return new Me;if(t instanceof Me)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,o=Math.min(n,e,r),s=Math.max(n,e,r),g=NaN,S=s-o,G=(s+o)/2;return S?(g=n===s?(e-r)/S+6*(e<r):e===s?(r-n)/S+2:(n-e)/S+4,S/=G<.5?s+o:2-s-o,g*=60):S=G>0&&G<1?0:g,new Me(g,S,G,t.opacity)}function Me(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Qo(t){return(t=(t||0)%360)<0?t+360:t}function Ur(t){return Math.max(0,Math.min(1,t||0))}function Fi(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}function Jo(t,n,e,r,o){var s=t*t,g=s*t;return((1-3*t+3*s-g)*n+(4-6*s+3*g)*e+(1+3*t+3*s-3*g)*r+g*o)/6}kr(bn,rn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Zo,formatHex:Zo,formatHex8:function vc(){return this.rgb().formatHex8()},formatHsl:function yc(){return Ko(this).formatHsl()},formatRgb:Ho,toString:Ho}),kr(ge,Gr,ki(bn,{brighter(t){return t=null==t?_n:Math.pow(_n,t),new ge(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new ge(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ge(on(this.r),on(this.g),on(this.b),zr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xo,formatHex:Xo,formatHex8:function mc(){return`#${an(this.r)}${an(this.g)}${an(this.b)}${an(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:$o,toString:$o})),kr(Me,function wc(t,n,e,r){return 1===arguments.length?Ko(t):new Me(t,n,e,null==r?1:r)},ki(bn,{brighter(t){return t=null==t?_n:Math.pow(_n,t),new Me(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Me(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,o=2*e-r;return new ge(Fi(t>=240?t-240:t+120,o,r),Fi(t,o,r),Fi(t<120?t+240:t-120,o,r),this.opacity)},clamp(){return new Me(Qo(this.h),Ur(this.s),Ur(this.l),zr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=zr(this.opacity);return`${1===t?"hsl(":"hsla("}${Qo(this.h)}, ${100*Ur(this.s)}%, ${100*Ur(this.l)}%${1===t?")":`, ${t})`}`}}));const jr=t=>()=>t;function ta(t,n){return function(e){return t+e*n}}function An(t,n){var e=n-t;return e?ta(t,e):jr(isNaN(t)?n:t)}const Wr=function t(n){var e=function Ec(t){return 1==(t=+t)?An:function(n,e){return e-n?function xc(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):jr(isNaN(n)?e:n)}}(n);function r(o,s){var g=e((o=Gr(o)).r,(s=Gr(s)).r),S=e(o.g,s.g),G=e(o.b,s.b),I=An(o.opacity,s.opacity);return function(V){return o.r=g(V),o.g=S(V),o.b=G(V),o.opacity=I(V),o+""}}return r.gamma=t,r}(1);function ea(t){return function(n){var g,S,e=n.length,r=new Array(e),o=new Array(e),s=new Array(e);for(g=0;g<e;++g)S=Gr(n[g]),r[g]=S.r||0,o[g]=S.g||0,s[g]=S.b||0;return r=t(r),o=t(o),s=t(s),S.opacity=1,function(G){return S.r=r(G),S.g=o(G),S.b=s(G),S+""}}}ea(function bc(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),o=t[r],s=t[r+1];return Jo((e-r/n)*n,r>0?t[r-1]:2*o-s,o,s,r<n-1?t[r+2]:2*s-o)}}),ea(function _c(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n);return Jo((e-r/n)*n,t[(r+n-1)%n],t[r%n],t[(r+1)%n],t[(r+2)%n])}});var Gi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zi=new RegExp(Gi.source,"g");function na(t,n){var r,o,s,e=Gi.lastIndex=zi.lastIndex=0,g=-1,S=[],G=[];for(t+="",n+="";(r=Gi.exec(t))&&(o=zi.exec(n));)(s=o.index)>e&&(s=n.slice(e,s),S[g]?S[g]+=s:S[++g]=s),(r=r[0])===(o=o[0])?S[g]?S[g]+=o:S[++g]=o:(S[++g]=null,G.push({i:g,x:Te(r,o)})),e=zi.lastIndex;return e<n.length&&(s=n.slice(e),S[g]?S[g]+=s:S[++g]=s),S.length<2?G[0]?function Sc(t){return function(n){return t(n)+""}}(G[0].x):function Cc(t){return function(){return t}}(n):(n=G.length,function(I){for(var Q,V=0;V<n;++V)S[(Q=G[V]).i]=Q.x(I);return S.join("")})}function ra(t,n){var e;return("number"==typeof n?Te:n instanceof rn?Wr:(e=rn(n))?(n=e,Wr):na)(t,n)}function Tc(t){return function(){this.removeAttribute(t)}}function Mc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Nc(t,n,e){var r,s,o=e+"";return function(){var g=this.getAttribute(t);return g===o?null:g===r?s:s=n(r=g,e)}}function Lc(t,n,e){var r,s,o=e+"";return function(){var g=this.getAttributeNS(t.space,t.local);return g===o?null:g===r?s:s=n(r=g,e)}}function Dc(t,n,e){var r,o,s;return function(){var g,G,S=e(this);return null==S?void this.removeAttribute(t):(g=this.getAttribute(t))===(G=S+"")?null:g===r&&G===o?s:(o=G,s=n(r=g,S))}}function Rc(t,n,e){var r,o,s;return function(){var g,G,S=e(this);return null==S?void this.removeAttributeNS(t.space,t.local):(g=this.getAttributeNS(t.space,t.local))===(G=S+"")?null:g===r&&G===o?s:(o=G,s=n(r=g,S))}}function Pc(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function Ic(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function kc(t,n){var e,r;function o(){var s=n.apply(this,arguments);return s!==r&&(e=(r=s)&&Ic(t,s)),e}return o._value=n,o}function Fc(t,n){var e,r;function o(){var s=n.apply(this,arguments);return s!==r&&(e=(r=s)&&Pc(t,s)),e}return o._value=n,o}function zc(t,n){return function(){Oi(this,t).delay=+n.apply(this,arguments)}}function Uc(t,n){return n=+n,function(){Oi(this,t).delay=n}}function Wc(t,n){return function(){Le(this,t).duration=+n.apply(this,arguments)}}function Bc(t,n){return n=+n,function(){Le(this,t).duration=n}}function Hc(t,n){if("function"!=typeof n)throw new Error;return function(){Le(this,t).ease=n}}function Qc(t,n,e){var r,o,s=function Kc(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||"start"===n})}(n)?Oi:Le;return function(){var g=s(this,t),S=g.on;S!==r&&(o=(r=S).copy()).on(n,e),g.on=o}}var ih=Vn.prototype.constructor;function ia(t){return function(){this.style.removeProperty(t)}}function lh(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function fh(t,n,e){var r,o;function s(){var g=n.apply(this,arguments);return g!==o&&(r=(o=g)&&lh(t,g,e)),r}return s._value=n,s}function yh(t){return function(n){this.textContent=t.call(this,n)}}function mh(t){var n,e;function r(){var o=t.apply(this,arguments);return o!==e&&(n=(e=o)&&yh(o)),n}return r._value=t,r}var xh=0;function ke(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function oa(){return++xh}var Fe=Vn.prototype;ke.prototype=function Ah(t){return Vn().transition(t)}.prototype={constructor:ke,select:function nh(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=Ye(t));for(var r=this._groups,o=r.length,s=new Array(o),g=0;g<o;++g)for(var V,Q,S=r[g],G=S.length,I=s[g]=new Array(G),q=0;q<G;++q)(V=S[q])&&(Q=t.call(V,V.__data__,q,S))&&("__data__"in V&&(Q.__data__=V.__data__),I[q]=Q,Or(I[q],n,e,q,I,Se(V,e)));return new ke(s,this._parents,n,e)},selectAll:function rh(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=pr(t));for(var r=this._groups,o=r.length,s=[],g=[],S=0;S<o;++S)for(var V,G=r[S],I=G.length,Q=0;Q<I;++Q)if(V=G[Q]){for(var J,q=t.call(V,V.__data__,Q,G),dt=Se(V,e),ct=0,et=q.length;ct<et;++ct)(J=q[ct])&&Or(J,n,e,ct,q,dt);s.push(q),g.push(V)}return new ke(s,g,n,e)},selectChild:Fe.selectChild,selectChildren:Fe.selectChildren,filter:function $c(t){"function"!=typeof t&&(t=yr(t));for(var n=this._groups,e=n.length,r=new Array(e),o=0;o<e;++o)for(var G,s=n[o],g=s.length,S=r[o]=[],I=0;I<g;++I)(G=s[I])&&t.call(G,G.__data__,I,s)&&S.push(G);return new ke(r,this._parents,this._name,this._id)},merge:function qc(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,s=Math.min(r,e.length),g=new Array(r),S=0;S<s;++S)for(var q,G=n[S],I=e[S],V=G.length,Q=g[S]=new Array(V),J=0;J<V;++J)(q=G[J]||I[J])&&(Q[J]=q);for(;S<r;++S)g[S]=n[S];return new ke(g,this._parents,this._name,this._id)},selection:function oh(){return new ih(this._groups,this._parents)},transition:function bh(){for(var t=this._name,n=this._id,e=oa(),r=this._groups,o=r.length,s=0;s<o;++s)for(var G,g=r[s],S=g.length,I=0;I<S;++I)if(G=g[I]){var V=Se(G,n);Or(G,t,e,I,g,{time:V.time+V.delay+V.duration,delay:0,duration:V.duration,ease:V.ease})}return new ke(r,this._parents,t,e)},call:Fe.call,nodes:Fe.nodes,node:Fe.node,size:Fe.size,empty:Fe.empty,each:Fe.each,on:function Jc(t,n){var e=this._id;return arguments.length<2?Se(this.node(),e).on.on(t):this.each(Qc(e,t,n))},attr:function Oc(t,n){var e=de(t),r="transform"===e?oc:ra;return this.attrTween(t,"function"==typeof n?(e.local?Rc:Dc)(e,r,Ii(this,"attr."+t,n)):null==n?(e.local?Mc:Tc)(e):(e.local?Lc:Nc)(e,r,n))},attrTween:function Gc(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=de(t);return this.tween(e,(r.local?kc:Fc)(r,n))},style:function hh(t,n,e){var r="transform"==(t+="")?ic:ra;return null==n?this.styleTween(t,function ah(t,n){var e,r,o;return function(){var s=mn(this,t),g=(this.style.removeProperty(t),mn(this,t));return s===g?null:s===e&&g===r?o:o=n(e=s,r=g)}}(t,r)).on("end.style."+t,ia(t)):"function"==typeof n?this.styleTween(t,function uh(t,n,e){var r,o,s;return function(){var g=mn(this,t),S=e(this),G=S+"";return null==S&&(this.style.removeProperty(t),G=S=mn(this,t)),g===G?null:g===r&&G===o?s:(o=G,s=n(r=g,S))}}(t,r,Ii(this,"style."+t,n))).each(function ch(t,n){var e,r,o,S,s="style."+n,g="end."+s;return function(){var G=Le(this,t),I=G.on,V=null==G.value[s]?S||(S=ia(n)):void 0;(I!==e||o!==V)&&(r=(e=I).copy()).on(g,o=V),G.on=r}}(this._id,t)):this.styleTween(t,function sh(t,n,e){var r,s,o=e+"";return function(){var g=mn(this,t);return g===o?null:g===r?s:s=n(r=g,e)}}(t,r,n),e).on("end.style."+t,null)},styleTween:function dh(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,fh(t,n,null==e?"":e))},text:function vh(t){return this.tween("text","function"==typeof t?function ph(t){return function(){var n=t(this);this.textContent=null==n?"":n}}(Ii(this,"text",t)):function gh(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function wh(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;return this.tween(n,mh(t))},remove:function eh(){return this.on("end.remove",function th(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}(this._id))},tween:function uc(t,n){var e=this._id;if(t+="",arguments.length<2){for(var g,r=Se(this.node(),e).tween,o=0,s=r.length;o<s;++o)if((g=r[o]).name===t)return g.value;return null}return this.each((null==n?ac:sc)(e,t,n))},delay:function jc(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?zc:Uc)(n,t)):Se(this.node(),n).delay},duration:function Zc(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?Wc:Bc)(n,t)):Se(this.node(),n).duration},ease:function Yc(t){var n=this._id;return arguments.length?this.each(Hc(n,t)):Se(this.node(),n).ease},easeVarying:function Xc(t){if("function"!=typeof t)throw new Error;return this.each(function Vc(t,n){return function(){var e=n.apply(this,arguments);if("function"!=typeof e)throw new Error;Le(this,t).ease=e}}(this._id,t))},end:function _h(){var t,n,e=this,r=e._id,o=e.size();return new Promise(function(s,g){var S={value:g},G={value:function(){0==--o&&s()}};e.each(function(){var I=Le(this,r),V=I.on;V!==t&&((n=(t=V).copy())._.cancel.push(S),n._.interrupt.push(S),n._.end.push(G)),I.on=n}),0===o&&s()})},[Symbol.iterator]:Fe[Symbol.iterator]};var Ch={time:null,delay:0,duration:250,ease:function Eh(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Sh(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}Vn.prototype.interrupt=function ec(t){return this.each(function(){Pr(this,t)})},Vn.prototype.transition=function Th(t){var n,e;t instanceof ke?(n=t._id,t=t._name):(n=oa(),(e=Ch).time=Mi(),t=null==t?null:t+"");for(var r=this._groups,o=r.length,s=0;s<o;++s)for(var G,g=r[s],S=g.length,I=0;I<S;++I)(G=g[I])&&Or(G,t,n,I,g,e||Sh(G,n));return new ke(r,this._parents,t,n)};Math;function Jn(t){return{type:t}}function he(t){return"string"==typeof t?new Ce([[document.querySelector(t)]],[document.documentElement]):new Ce([[t]],No)}function ze(t,n){if(t=function Ih(t){let n;for(;n=t.sourceEvent;)t=n;return t}(t),void 0===n&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(n.getScreenCTM().inverse())).x,r.y]}if(n.getBoundingClientRect){var o=n.getBoundingClientRect();return[t.clientX-o.left-n.clientLeft,t.clientY-o.top-n.clientTop]}}return[t.pageX,t.pageY]}["w","e"].map(Jn),["n","s"].map(Jn),["n","w","e","s","nw","ne","sw","se"].map(Jn);const kh={passive:!1},tr={capture:!0,passive:!1};function Zi(t){t.stopImmediatePropagation()}function Sn(t){t.preventDefault(),t.stopImmediatePropagation()}function la(t){var n=t.document.documentElement,e=he(t).on("dragstart.drag",Sn,tr);"onselectstart"in n?e.on("selectstart.drag",Sn,tr):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function fa(t,n){var e=t.document.documentElement,r=he(t).on("dragstart.drag",null);n&&(r.on("click.drag",Sn,tr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const Hr=t=>()=>t;function Hi(t,{sourceEvent:n,subject:e,target:r,identifier:o,active:s,x:g,y:S,dx:G,dy:I,dispatch:V}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:g,enumerable:!0,configurable:!0},y:{value:S,enumerable:!0,configurable:!0},dx:{value:G,enumerable:!0,configurable:!0},dy:{value:I,enumerable:!0,configurable:!0},_:{value:V}})}function Fh(t){return!t.ctrlKey&&!t.button}function Gh(){return this.parentNode}function zh(t,n){return null==n?{x:t.x,y:t.y}:n}function Uh(){return navigator.maxTouchPoints||"ontouchstart"in this}function da(t,n){var e,r=1;function o(){var s,S,g=e.length,G=0,I=0;for(s=0;s<g;++s)G+=(S=e[s]).x,I+=S.y;for(G=(G/g-t)*r,I=(I/g-n)*r,s=0;s<g;++s)(S=e[s]).x-=G,S.y-=I}return null==t&&(t=0),null==n&&(n=0),o.initialize=function(s){e=s},o.x=function(s){return arguments.length?(t=+s,o):t},o.y=function(s){return arguments.length?(n=+s,o):n},o.strength=function(s){return arguments.length?(r=+s,o):r},o}function ga(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var o,Q,q,J,dt,ct,et,nt,pt,s=t._root,g={data:r},S=t._x0,G=t._y0,I=t._x1,V=t._y1;if(!s)return t._root=g,t;for(;s.length;)if((ct=n>=(Q=(S+I)/2))?S=Q:I=Q,(et=e>=(q=(G+V)/2))?G=q:V=q,o=s,!(s=s[nt=et<<1|ct]))return o[nt]=g,t;if(J=+t._x.call(null,s.data),dt=+t._y.call(null,s.data),n===J&&e===dt)return g.next=s,o?o[nt]=g:t._root=g,t;do{o=o?o[nt]=new Array(4):t._root=new Array(4),(ct=n>=(Q=(S+I)/2))?S=Q:I=Q,(et=e>=(q=(G+V)/2))?G=q:V=q}while((nt=et<<1|ct)==(pt=(dt>=q)<<1|J>=Q));return o[pt]=s,o[nt]=g,t}function be(t,n,e,r,o){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=o}function tl(t){return t[0]}function nl(t){return t[1]}function Yi(t,n,e){var r=new Vi(null==n?tl:n,null==e?nl:e,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Vi(t,n,e,r,o,s){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=o,this._y1=s,this._root=void 0}function pa(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}Hi.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var _e=Yi.prototype=Vi.prototype;function sn(t){return function(){return t}}function Xe(t){return 1e-6*(t()-.5)}function il(t){return t.x+t.vx}function ol(t){return t.y+t.vy}function va(t){var n,e,r,o=1,s=1;function g(){for(var I,Q,q,J,dt,ct,et,V=n.length,nt=0;nt<s;++nt)for(Q=Yi(n,il,ol).visitAfter(S),I=0;I<V;++I)et=(ct=e[(q=n[I]).index])*ct,J=q.x+q.vx,dt=q.y+q.vy,Q.visit(pt);function pt(mt,ot,bt,Lt,kt){var It=mt.data,Bt=mt.r,Ft=ct+Bt;if(!It)return ot>J+Ft||Lt<J-Ft||bt>dt+Ft||kt<dt-Ft;if(It.index>q.index){var Nt=J-It.x-It.vx,Vt=dt-It.y-It.vy,jt=Nt*Nt+Vt*Vt;jt<Ft*Ft&&(0===Nt&&(jt+=(Nt=Xe(r))*Nt),0===Vt&&(jt+=(Vt=Xe(r))*Vt),jt=(Ft-(jt=Math.sqrt(jt)))/jt*o,q.vx+=(Nt*=jt)*(Ft=(Bt*=Bt)/(et+Bt)),q.vy+=(Vt*=jt)*Ft,It.vx-=Nt*(Ft=1-Ft),It.vy-=Vt*Ft)}}}function S(I){if(I.data)return I.r=e[I.data.index];for(var V=I.r=0;V<4;++V)I[V]&&I[V].r>I.r&&(I.r=I[V].r)}function G(){if(n){var I,Q,V=n.length;for(e=new Array(V),I=0;I<V;++I)e[(Q=n[I]).index]=+t(Q,I,n)}}return"function"!=typeof t&&(t=sn(null==t?1:+t)),g.initialize=function(I,V){n=I,r=V,G()},g.iterations=function(I){return arguments.length?(s=+I,g):s},g.strength=function(I){return arguments.length?(o=+I,g):o},g.radius=function(I){return arguments.length?(t="function"==typeof I?I:sn(+I),G(),g):t},g}function al(t){return t.index}function ya(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}function ma(t){var r,s,g,S,G,I,n=al,e=function Q(et){return 1/Math.min(S[et.source.index],S[et.target.index])},o=sn(30),V=1;function q(et){for(var nt=0,pt=t.length;nt<V;++nt)for(var ot,bt,Lt,kt,It,Bt,Ft,mt=0;mt<pt;++mt)kt=(Lt=(ot=t[mt]).target).x+Lt.vx-(bt=ot.source).x-bt.vx||Xe(I),It=Lt.y+Lt.vy-bt.y-bt.vy||Xe(I),It*=Bt=((Bt=Math.sqrt(kt*kt+It*It))-s[mt])/Bt*et*r[mt],Lt.vx-=(kt*=Bt)*(Ft=G[mt]),Lt.vy-=It*Ft,bt.vx+=kt*(Ft=1-Ft),bt.vy+=It*Ft}function J(){if(g){var et,ot,nt=g.length,pt=t.length,mt=new Map(g.map((bt,Lt)=>[n(bt,Lt,g),bt]));for(et=0,S=new Array(nt);et<pt;++et)(ot=t[et]).index=et,"object"!=typeof ot.source&&(ot.source=ya(mt,ot.source)),"object"!=typeof ot.target&&(ot.target=ya(mt,ot.target)),S[ot.source.index]=(S[ot.source.index]||0)+1,S[ot.target.index]=(S[ot.target.index]||0)+1;for(et=0,G=new Array(pt);et<pt;++et)G[et]=S[(ot=t[et]).source.index]/(S[ot.source.index]+S[ot.target.index]);r=new Array(pt),dt(),s=new Array(pt),ct()}}function dt(){if(g)for(var et=0,nt=t.length;et<nt;++et)r[et]=+e(t[et],et,t)}function ct(){if(g)for(var et=0,nt=t.length;et<nt;++et)s[et]=+o(t[et],et,t)}return null==t&&(t=[]),q.initialize=function(et,nt){g=et,I=nt,J()},q.links=function(et){return arguments.length?(t=et,J(),q):t},q.id=function(et){return arguments.length?(n=et,q):n},q.iterations=function(et){return arguments.length?(V=+et,q):V},q.strength=function(et){return arguments.length?(e="function"==typeof et?et:sn(+et),dt(),q):e},q.distance=function(et){return arguments.length?(o="function"==typeof et?et:sn(+et),ct(),q):o},q}_e.copy=function(){var e,r,t=new Vi(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return t;if(!n.length)return t._root=pa(n),t;for(e=[{source:n,target:t._root=new Array(4)}];n=e.pop();)for(var o=0;o<4;++o)(r=n.source[o])&&(r.length?e.push({source:r,target:n.target[o]=new Array(4)}):n.target[o]=pa(r));return t},_e.add=function Wh(t){const n=+this._x.call(null,t),e=+this._y.call(null,t);return ga(this.cover(n,e),n,e,t)},_e.addAll=function Bh(t){var n,e,o,s,r=t.length,g=new Array(r),S=new Array(r),G=1/0,I=1/0,V=-1/0,Q=-1/0;for(e=0;e<r;++e)isNaN(o=+this._x.call(null,n=t[e]))||isNaN(s=+this._y.call(null,n))||(g[e]=o,S[e]=s,o<G&&(G=o),o>V&&(V=o),s<I&&(I=s),s>Q&&(Q=s));if(G>V||I>Q)return this;for(this.cover(G,I).cover(V,Q),e=0;e<r;++e)ga(this,g[e],S[e],t[e]);return this},_e.cover=function Zh(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,o=this._x1,s=this._y1;if(isNaN(e))o=(e=Math.floor(t))+1,s=(r=Math.floor(n))+1;else{for(var G,I,g=o-e||1,S=this._root;e>t||t>=o||r>n||n>=s;)switch(I=(n<r)<<1|t<e,G=new Array(4),G[I]=S,S=G,g*=2,I){case 0:o=e+g,s=r+g;break;case 1:e=o-g,s=r+g;break;case 2:o=e+g,r=s-g;break;case 3:e=o-g,r=s-g}this._root&&this._root.length&&(this._root=S)}return this._x0=e,this._y0=r,this._x1=o,this._y1=s,this},_e.data=function Hh(){var t=[];return this.visit(function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)}),t},_e.extent=function Yh(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},_e.find=function Vh(t,n,e){var r,g,S,G,I,dt,ct,o=this._x0,s=this._y0,V=this._x1,Q=this._y1,q=[],J=this._root;for(J&&q.push(new be(J,o,s,V,Q)),null==e?e=1/0:(o=t-e,s=n-e,V=t+e,Q=n+e,e*=e);dt=q.pop();)if(!(!(J=dt.node)||(g=dt.x0)>V||(S=dt.y0)>Q||(G=dt.x1)<o||(I=dt.y1)<s))if(J.length){var et=(g+G)/2,nt=(S+I)/2;q.push(new be(J[3],et,nt,G,I),new be(J[2],g,nt,et,I),new be(J[1],et,S,G,nt),new be(J[0],g,S,et,nt)),(ct=(n>=nt)<<1|t>=et)&&(dt=q[q.length-1],q[q.length-1]=q[q.length-1-ct],q[q.length-1-ct]=dt)}else{var pt=t-+this._x.call(null,J.data),mt=n-+this._y.call(null,J.data),ot=pt*pt+mt*mt;if(ot<e){var bt=Math.sqrt(e=ot);o=t-bt,s=n-bt,V=t+bt,Q=n+bt,r=J.data}}return r},_e.remove=function Xh(t){if(isNaN(V=+this._x.call(null,t))||isNaN(Q=+this._y.call(null,t)))return this;var n,r,o,s,V,Q,q,J,dt,ct,et,nt,e=this._root,g=this._x0,S=this._y0,G=this._x1,I=this._y1;if(!e)return this;if(e.length)for(;;){if((dt=V>=(q=(g+G)/2))?g=q:G=q,(ct=Q>=(J=(S+I)/2))?S=J:I=J,n=e,!(e=e[et=ct<<1|dt]))return this;if(!e.length)break;(n[et+1&3]||n[et+2&3]||n[et+3&3])&&(r=n,nt=et)}for(;e.data!==t;)if(o=e,!(e=e.next))return this;return(s=e.next)&&delete e.next,o?(s?o.next=s:delete o.next,this):n?(s?n[et]=s:delete n[et],(e=n[0]||n[1]||n[2]||n[3])&&e===(n[3]||n[2]||n[1]||n[0])&&!e.length&&(r?r[nt]=e:this._root=e),this):(this._root=s,this)},_e.removeAll=function $h(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this},_e.root=function qh(){return this._root},_e.size=function Kh(){var t=0;return this.visit(function(n){if(!n.length)do{++t}while(n=n.next)}),t},_e.visit=function Qh(t){var e,o,s,g,S,G,n=[],r=this._root;for(r&&n.push(new be(r,this._x0,this._y0,this._x1,this._y1));e=n.pop();)if(!t(r=e.node,s=e.x0,g=e.y0,S=e.x1,G=e.y1)&&r.length){var I=(s+S)/2,V=(g+G)/2;(o=r[3])&&n.push(new be(o,I,V,S,G)),(o=r[2])&&n.push(new be(o,s,V,I,G)),(o=r[1])&&n.push(new be(o,I,g,S,V)),(o=r[0])&&n.push(new be(o,s,g,I,V))}return this},_e.visitAfter=function Jh(t){var r,n=[],e=[];for(this._root&&n.push(new be(this._root,this._x0,this._y0,this._x1,this._y1));r=n.pop();){var o=r.node;if(o.length){var s,g=r.x0,S=r.y0,G=r.x1,I=r.y1,V=(g+G)/2,Q=(S+I)/2;(s=o[0])&&n.push(new be(s,g,S,V,Q)),(s=o[1])&&n.push(new be(s,V,S,G,Q)),(s=o[2])&&n.push(new be(s,g,Q,V,I)),(s=o[3])&&n.push(new be(s,V,Q,G,I))}e.push(r)}for(;r=e.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this},_e.x=function el(t){return arguments.length?(this._x=t,this):this._x},_e.y=function rl(t){return arguments.length?(this._y=t,this):this._y};const wa=4294967296;function hl(t){return t.x}function ll(t){return t.y}var dl=Math.PI*(3-Math.sqrt(5));function ba(t){var n,e=1,r=.001,o=1-Math.pow(r,1/300),s=0,g=.6,S=new Map,G=Ni(Q),I=Sr("tick","end"),V=function cl(){let t=1;return()=>(t=(1664525*t+1013904223)%wa)/wa}();function Q(){q(),I.call("tick",n),e<r&&(G.stop(),I.call("end",n))}function q(ct){var et,pt,nt=t.length;void 0===ct&&(ct=1);for(var mt=0;mt<ct;++mt)for(e+=(s-e)*o,S.forEach(function(ot){ot(e)}),et=0;et<nt;++et)null==(pt=t[et]).fx?pt.x+=pt.vx*=g:(pt.x=pt.fx,pt.vx=0),null==pt.fy?pt.y+=pt.vy*=g:(pt.y=pt.fy,pt.vy=0);return n}function J(){for(var nt,ct=0,et=t.length;ct<et;++ct){if((nt=t[ct]).index=ct,null!=nt.fx&&(nt.x=nt.fx),null!=nt.fy&&(nt.y=nt.fy),isNaN(nt.x)||isNaN(nt.y)){var pt=10*Math.sqrt(.5+ct),mt=ct*dl;nt.x=pt*Math.cos(mt),nt.y=pt*Math.sin(mt)}(isNaN(nt.vx)||isNaN(nt.vy))&&(nt.vx=nt.vy=0)}}function dt(ct){return ct.initialize&&ct.initialize(t,V),ct}return null==t&&(t=[]),J(),n={tick:q,restart:function(){return G.restart(Q),n},stop:function(){return G.stop(),n},nodes:function(ct){return arguments.length?(t=ct,J(),S.forEach(dt),n):t},alpha:function(ct){return arguments.length?(e=+ct,n):e},alphaMin:function(ct){return arguments.length?(r=+ct,n):r},alphaDecay:function(ct){return arguments.length?(o=+ct,n):+o},alphaTarget:function(ct){return arguments.length?(s=+ct,n):s},velocityDecay:function(ct){return arguments.length?(g=1-ct,n):1-g},randomSource:function(ct){return arguments.length?(V=ct,S.forEach(dt),n):V},force:function(ct,et){return arguments.length>1?(null==et?S.delete(ct):S.set(ct,dt(et)),n):S.get(ct)},find:function(ct,et,nt){var ot,bt,Lt,kt,It,pt=0,mt=t.length;for(null==nt?nt=1/0:nt*=nt,pt=0;pt<mt;++pt)(Lt=(ot=ct-(kt=t[pt]).x)*ot+(bt=et-kt.y)*bt)<nt&&(It=kt,nt=Lt);return It},on:function(ct,et){return arguments.length>1?(I.on(ct,et),n):I.on(ct)}}}function _a(){var t,n,e,r,s,o=sn(-30),g=1,S=1/0,G=.81;function I(J){var dt,ct=t.length,et=Yi(t,hl,ll).visitAfter(Q);for(r=J,dt=0;dt<ct;++dt)n=t[dt],et.visit(q)}function V(){if(t){var J,ct,dt=t.length;for(s=new Array(dt),J=0;J<dt;++J)s[(ct=t[J]).index]=+o(ct,J,t)}}function Q(J){var ct,et,pt,mt,ot,dt=0,nt=0;if(J.length){for(pt=mt=ot=0;ot<4;++ot)(ct=J[ot])&&(et=Math.abs(ct.value))&&(dt+=ct.value,nt+=et,pt+=et*ct.x,mt+=et*ct.y);J.x=pt/nt,J.y=mt/nt}else{(ct=J).x=ct.data.x,ct.y=ct.data.y;do{dt+=s[ct.data.index]}while(ct=ct.next)}J.value=dt}function q(J,dt,ct,et){if(!J.value)return!0;var nt=J.x-n.x,pt=J.y-n.y,mt=et-dt,ot=nt*nt+pt*pt;if(mt*mt/G<ot)return ot<S&&(0===nt&&(ot+=(nt=Xe(e))*nt),0===pt&&(ot+=(pt=Xe(e))*pt),ot<g&&(ot=Math.sqrt(g*ot)),n.vx+=nt*J.value*r/ot,n.vy+=pt*J.value*r/ot),!0;if(!(J.length||ot>=S)){(J.data!==n||J.next)&&(0===nt&&(ot+=(nt=Xe(e))*nt),0===pt&&(ot+=(pt=Xe(e))*pt),ot<g&&(ot=Math.sqrt(g*ot)));do{J.data!==n&&(n.vx+=nt*(mt=s[J.data.index]*r/ot),n.vy+=pt*mt)}while(J=J.next)}}return I.initialize=function(J,dt){t=J,e=dt,V()},I.strength=function(J){return arguments.length?(o="function"==typeof J?J:sn(+J),V(),I):o},I.distanceMin=function(J){return arguments.length?(g=J*J,I):Math.sqrt(g)},I.distanceMax=function(J){return arguments.length?(S=J*J,I):Math.sqrt(S)},I.theta=function(J){return arguments.length?(G=J*J,I):Math.sqrt(G)},I}function Yr(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function Tn(t){return(t=Yr(Math.abs(t)))?t[1]:NaN}var xa,yl=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vr(t){if(!(n=yl.exec(t)))throw new Error("invalid format: "+t);var n;return new Xi({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function Xi(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Aa(t,n){var e=Yr(t,n);if(!e)return t+"";var r=e[0],o=e[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}Vr.prototype=Xi.prototype,Xi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Ea={"%":(t,n)=>(100*t).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function gl(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>Aa(100*t,n),r:Aa,s:function wl(t,n){var e=Yr(t,n);if(!e)return t+"";var r=e[0],o=e[1],s=o-(xa=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,g=r.length;return s===g?r:s>g?r+new Array(s-g+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Yr(t,Math.max(0,n+s-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ca(t){return t}var Xr,$r,Ma,Sa=Array.prototype.map,Ta=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Na(t,n){var g,e=n?n.length:0,r=t?Math.min(e,t.length):0,o=new Array(r),s=new Array(e);for(g=0;g<r;++g)o[g]=Mn(t[g],n[g]);for(;g<e;++g)s[g]=n[g];return function(S){for(g=0;g<r;++g)s[g]=o[g](S);return s}}function xl(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function Al(t,n){var o,e={},r={};for(o in(null===t||"object"!=typeof t)&&(t={}),(null===n||"object"!=typeof n)&&(n={}),n)o in t?e[o]=Mn(t[o],n[o]):r[o]=n[o];return function(s){for(o in e)r[o]=e[o](s);return r}}function El(t,n){n||(n=[]);var o,e=t?Math.min(n.length,t.length):0,r=n.slice();return function(s){for(o=0;o<e;++o)r[o]=t[o]*(1-s)+n[o]*s;return r}}function Mn(t,n){var r,e=typeof n;return null==n||"boolean"===e?jr(n):("number"===e?Te:"string"===e?(r=rn(n))?(n=r,Wr):na:n instanceof rn?Wr:n instanceof Date?xl:function Cl(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(n)?El:Array.isArray(n)?Na:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?Al:Te)(t,n)}function $i(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}function La(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t(r/(n-1));return e}function qi(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}function Sl(t,n){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof n?this.interpolator(n):this.range(n)}return this}!function _l(t){Xr=function bl(t){var n=void 0===t.grouping||void 0===t.thousands?Ca:function pl(t,n){return function(e,r){for(var o=e.length,s=[],g=0,S=t[0],G=0;o>0&&S>0&&(G+S+1>r&&(S=Math.max(1,r-G)),s.push(e.substring(o-=S,o+S)),!((G+=S+1)>r));)S=t[g=(g+1)%t.length];return s.reverse().join(n)}}(Sa.call(t.grouping,Number),t.thousands+""),e=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Ca:function vl(t){return function(n){return n.replace(/[0-9]/g,function(e){return t[+e]})}}(Sa.call(t.numerals,String)),g=void 0===t.percent?"%":t.percent+"",S=void 0===t.minus?"\u2212":t.minus+"",G=void 0===t.nan?"NaN":t.nan+"";function I(Q){var q=(Q=Vr(Q)).fill,J=Q.align,dt=Q.sign,ct=Q.symbol,et=Q.zero,nt=Q.width,pt=Q.comma,mt=Q.precision,ot=Q.trim,bt=Q.type;"n"===bt?(pt=!0,bt="g"):Ea[bt]||(void 0===mt&&(mt=12),ot=!0,bt="g"),(et||"0"===q&&"="===J)&&(et=!0,q="0",J="=");var Lt="$"===ct?e:"#"===ct&&/[boxX]/.test(bt)?"0"+bt.toLowerCase():"",kt="$"===ct?r:/[%p]/.test(bt)?g:"",It=Ea[bt],Bt=/[defgprs%]/.test(bt);function Ft(Nt){var st,Dt,wt,Vt=Lt,jt=kt;if("c"===bt)jt=It(Nt)+jt,Nt="";else{var Mt=(Nt=+Nt)<0||1/Nt<0;if(Nt=isNaN(Nt)?G:It(Math.abs(Nt),mt),ot&&(Nt=function ml(t){t:for(var o,n=t.length,e=1,r=-1;e<n;++e)switch(t[e]){case".":r=o=e;break;case"0":0===r&&(r=e),o=e;break;default:if(!+t[e])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(o+1):t}(Nt)),Mt&&0==+Nt&&"+"!==dt&&(Mt=!1),Vt=(Mt?"("===dt?dt:S:"-"===dt||"("===dt?"":dt)+Vt,jt=("s"===bt?Ta[8+xa/3]:"")+jt+(Mt&&"("===dt?")":""),Bt)for(st=-1,Dt=Nt.length;++st<Dt;)if(48>(wt=Nt.charCodeAt(st))||wt>57){jt=(46===wt?o+Nt.slice(st+1):Nt.slice(st))+jt,Nt=Nt.slice(0,st);break}}pt&&!et&&(Nt=n(Nt,1/0));var zt=Vt.length+Nt.length+jt.length,Rt=zt<nt?new Array(nt-zt+1).join(q):"";switch(pt&&et&&(Nt=n(Rt+Nt,Rt.length?nt-jt.length:1/0),Rt=""),J){case"<":Nt=Vt+Nt+jt+Rt;break;case"=":Nt=Vt+Rt+Nt+jt;break;case"^":Nt=Rt.slice(0,zt=Rt.length>>1)+Vt+Nt+jt+Rt.slice(zt);break;default:Nt=Rt+Vt+Nt+jt}return s(Nt)}return mt=void 0===mt?6:/[gprs]/.test(bt)?Math.max(1,Math.min(21,mt)):Math.max(0,Math.min(20,mt)),Ft.toString=function(){return Q+""},Ft}return{format:I,formatPrefix:function V(Q,q){var J=I(((Q=Vr(Q)).type="f",Q)),dt=3*Math.max(-8,Math.min(8,Math.floor(Tn(q)/3))),ct=Math.pow(10,-dt),et=Ta[8+dt/3];return function(nt){return J(ct*nt)+et}}}}(t),$r=Xr.format,Ma=Xr.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});const Da=Symbol("implicit");function er(){var t=new fn,n=[],e=[],r=Da;function o(s){let g=t.get(s);if(void 0===g){if(r!==Da)return r;t.set(s,g=n.push(s)-1)}return e[g%e.length]}return o.domain=function(s){if(!arguments.length)return n.slice();n=[],t=new fn;for(const g of s)t.has(g)||t.set(g,n.push(g)-1);return o},o.range=function(s){return arguments.length?(e=Array.from(s),o):e.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.copy=function(){return er(n,e).unknown(r)},qi.apply(o,arguments),o}function nr(){var s,g,t=er().unknown(void 0),n=t.domain,e=t.range,r=0,o=1,S=!1,G=0,I=0,V=.5;function Q(){var q=n().length,J=o<r,dt=J?o:r,ct=J?r:o;s=(ct-dt)/Math.max(1,q-G+2*I),S&&(s=Math.floor(s)),dt+=(ct-dt-s*(q-G))*V,g=s*(1-G),S&&(dt=Math.round(dt),g=Math.round(g));var et=re(q).map(function(nt){return dt+s*nt});return e(J?et.reverse():et)}return delete t.unknown,t.domain=function(q){return arguments.length?(n(q),Q()):n()},t.range=function(q){return arguments.length?([r,o]=q,r=+r,o=+o,Q()):[r,o]},t.rangeRound=function(q){return[r,o]=q,r=+r,o=+o,S=!0,Q()},t.bandwidth=function(){return g},t.step=function(){return s},t.round=function(q){return arguments.length?(S=!!q,Q()):S},t.padding=function(q){return arguments.length?(G=Math.min(1,I=+q),Q()):G},t.paddingInner=function(q){return arguments.length?(G=Math.min(1,q),Q()):G},t.paddingOuter=function(q){return arguments.length?(I=+q,Q()):I},t.align=function(q){return arguments.length?(V=Math.max(0,Math.min(1,q)),Q()):V},t.copy=function(){return nr(n(),[r,o]).round(S).paddingInner(G).paddingOuter(I).align(V)},qi.apply(Q(),arguments)}const Tl=Math.sqrt(50),Ml=Math.sqrt(10),Nl=Math.sqrt(2);function qr(t,n,e){const r=(n-t)/Math.max(0,e),o=Math.floor(Math.log10(r)),s=r/Math.pow(10,o),g=s>=Tl?10:s>=Ml?5:s>=Nl?2:1;let S,G,I;return o<0?(I=Math.pow(10,-o)/g,S=Math.round(t*I),G=Math.round(n*I),S/I<t&&++S,G/I>n&&--G,I=-I):(I=Math.pow(10,o)*g,S=Math.round(t/I),G=Math.round(n/I),S*I<t&&++S,G*I>n&&--G),G<S&&.5<=e&&e<2?qr(t,n,2*e):[S,G,I]}function Ki(t,n,e){return qr(t=+t,n=+n,e=+e)[2]}function Rl(t,n){return null==t||null==n?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function Oa(t){let n,e,r;function o(S,G,I=0,V=S.length){if(I<V){if(0!==n(G,G))return V;do{const Q=I+V>>>1;e(S[Q],G)<0?I=Q+1:V=Q}while(I<V)}return I}return 2!==t.length?(n=ft,e=(S,G)=>ft(t(S),G),r=(S,G)=>t(S)-G):(n=t===ft||t===Rl?t:Ol,e=t,r=t),{left:o,center:function g(S,G,I=0,V=S.length){const Q=o(S,G,I,V-1);return Q>I&&r(S[Q-1],G)>-r(S[Q],G)?Q-1:Q},right:function s(S,G,I=0,V=S.length){if(I<V){if(0!==n(G,G))return V;do{const Q=I+V>>>1;e(S[Q],G)<=0?I=Q+1:V=Q}while(I<V)}return I}}}function Ol(){return 0}const Pl=Oa(ft).right,Il=(Oa(function Qt(t){return null===t?NaN:+t}),Pl);function Fl(t){return+t}var Ia=[0,1];function $e(t){return t}function Qi(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:function kl(t){return function(){return t}}(isNaN(n)?NaN:.5)}function zl(t,n,e){var r=t[0],o=t[1],s=n[0],g=n[1];return o<r?(r=Qi(o,r),s=e(g,s)):(r=Qi(r,o),s=e(s,g)),function(S){return s(r(S))}}function Ul(t,n,e){var r=Math.min(t.length,n.length)-1,o=new Array(r),s=new Array(r),g=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++g<r;)o[g]=Qi(t[g],t[g+1]),s[g]=e(n[g],n[g+1]);return function(S){var G=Il(t,S,1,r)-1;return s[G](o[G](S))}}function jl(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Bl(){return function Wl(){var r,o,s,S,G,I,t=Ia,n=Ia,e=Mn,g=$e;function V(){var q=Math.min(t.length,n.length);return g!==$e&&(g=function Gl(t,n){var e;return t>n&&(e=t,t=n,n=e),function(r){return Math.max(t,Math.min(n,r))}}(t[0],t[q-1])),S=q>2?Ul:zl,G=I=null,Q}function Q(q){return null==q||isNaN(q=+q)?s:(G||(G=S(t.map(r),n,e)))(r(g(q)))}return Q.invert=function(q){return g(o((I||(I=S(n,t.map(r),Te)))(q)))},Q.domain=function(q){return arguments.length?(t=Array.from(q,Fl),V()):t.slice()},Q.range=function(q){return arguments.length?(n=Array.from(q),V()):n.slice()},Q.rangeRound=function(q){return n=Array.from(q),e=$i,V()},Q.clamp=function(q){return arguments.length?(g=!!q||$e,V()):g!==$e},Q.interpolate=function(q){return arguments.length?(e=q,V()):e},Q.unknown=function(q){return arguments.length?(s=q,Q):s},function(q,J){return r=q,o=J,V()}}()($e,$e)}function ka(t){var n=t.domain;return t.ticks=function(e){var r=n();return function Ll(t,n,e){if(!((e=+e)>0))return[];if((t=+t)==(n=+n))return[t];const r=n<t,[o,s,g]=r?qr(n,t,e):qr(t,n,e);if(!(s>=o))return[];const S=s-o+1,G=new Array(S);if(r)if(g<0)for(let I=0;I<S;++I)G[I]=(s-I)/-g;else for(let I=0;I<S;++I)G[I]=(s-I)*g;else if(g<0)for(let I=0;I<S;++I)G[I]=(o+I)/-g;else for(let I=0;I<S;++I)G[I]=(o+I)*g;return G}(r[0],r[r.length-1],null==e?10:e)},t.tickFormat=function(e,r){var o=n();return function Vl(t,n,e,r){var s,o=function Dl(t,n,e){e=+e;const r=(n=+n)<(t=+t),o=r?Ki(n,t,e):Ki(t,n,e);return(r?-1:1)*(o<0?1/-o:o)}(t,n,e);switch((r=Vr(null==r?",f":r)).type){case"s":var g=Math.max(Math.abs(t),Math.abs(n));return null==r.precision&&!isNaN(s=function Zl(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Tn(n)/3)))-Tn(Math.abs(t)))}(o,g))&&(r.precision=s),Ma(r,g);case"":case"e":case"g":case"p":case"r":null==r.precision&&!isNaN(s=function Hl(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,Tn(n)-Tn(t))+1}(o,Math.max(Math.abs(t),Math.abs(n))))&&(r.precision=s-("e"===r.type));break;case"f":case"%":null==r.precision&&!isNaN(s=function Yl(t){return Math.max(0,-Tn(Math.abs(t)))}(o))&&(r.precision=s-2*("%"===r.type))}return $r(r)}(o[0],o[o.length-1],null==e?10:e,r)},t.nice=function(e){null==e&&(e=10);var G,I,r=n(),o=0,s=r.length-1,g=r[o],S=r[s],V=10;for(S<g&&(I=g,g=S,S=I,I=o,o=s,s=I);V-- >0;){if((I=Ki(g,S,e))===G)return r[o]=g,r[s]=S,n(r);if(I>0)g=Math.floor(g/I)*I,S=Math.ceil(S/I)*I;else{if(!(I<0))break;g=Math.ceil(g*I)/I,S=Math.floor(S*I)/I}G=I}return t},t}function Nn(){var t=Bl();return t.copy=function(){return jl(t,Nn())},qi.apply(t,arguments),ka(t)}function Kr(){var e,r,o,s,G,t=0,n=1,g=$e,S=!1;function I(Q){return null==Q||isNaN(Q=+Q)?G:g(0===o?.5:(Q=(s(Q)-e)*o,S?Math.max(0,Math.min(1,Q)):Q))}function V(Q){return function(q){var J,dt;return arguments.length?([J,dt]=q,g=Q(J,dt),I):[g(0),g(1)]}}return I.domain=function(Q){return arguments.length?([t,n]=Q,e=s(t=+t),r=s(n=+n),o=e===r?0:1/(r-e),I):[t,n]},I.clamp=function(Q){return arguments.length?(S=!!Q,I):S},I.interpolator=function(Q){return arguments.length?(g=Q,I):g},I.range=V(Mn),I.rangeRound=V($i),I.unknown=function(Q){return arguments.length?(G=Q,I):G},function(Q){return s=Q,e=Q(t),r=Q(n),o=e===r?0:1/(r-e),I}}function Qr(t,n){return n.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Fa(){var t=ka(Kr()($e));return t.copy=function(){return Qr(t,Fa())},Sl.apply(t,arguments)}const za=function ql(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(6*r,6*++r);return e}("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Kl=Math.PI/180,Ql=180/Math.PI;var Ji=1.78277,to=-.29227,Jr=-.90649,rr=1.97294,ja=rr*Jr,Wa=rr*Ji,Ba=Ji*to- -.14861*Jr;function Jl(t){if(t instanceof un)return new un(t.h,t.s,t.l,t.opacity);t instanceof ge||(t=Vo(t));var e=t.g/255,r=t.b/255,o=(Ba*r+ja*(t.r/255)-Wa*e)/(Ba+ja-Wa),s=r-o,g=(rr*(e-o)-to*s)/Jr,S=Math.sqrt(g*g+s*s)/(rr*o*(1-o)),G=S?Math.atan2(g,s)*Ql-120:NaN;return new un(G<0?G+360:G,S,o,t.opacity)}function qe(t,n,e,r){return 1===arguments.length?Jl(t):new un(t,n,e,null==r?1:r)}function un(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Za(t){return function n(e){function r(o,s){var g=t((o=qe(o)).h,(s=qe(s)).h),S=An(o.s,s.s),G=An(o.l,s.l),I=An(o.opacity,s.opacity);return function(V){return o.h=g(V),o.s=S(V),o.l=G(Math.pow(V,e)),o.opacity=I(V),o+""}}return e=+e,r.gamma=n,r}(1)}kr(un,qe,ki(bn,{brighter(t){return t=null==t?_n:Math.pow(_n,t),new un(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new un(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*Kl,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),o=Math.sin(t);return new ge(255*(n+e*(-.14861*r+Ji*o)),255*(n+e*(to*r+Jr*o)),255*(n+e*(rr*r)),this.opacity)}})),Za(function Ac(t,n){var e=n-t;return e?ta(t,e>180||e<-180?e-360*Math.round(e/360):e):jr(isNaN(t)?n:t)});var Ha=Za(An),tf=(Ha(qe(-100,.75,.35),qe(80,1.5,.8)),Ha(qe(260,.75,.35),qe(80,1.5,.8)));function Ya(t){return he(Ti(t).call(document.documentElement))}function Va(t){return((t=Math.exp(t))+1/t)/2}qe();const of=function t(n,e,r){function o(s,g){var et,nt,S=s[0],G=s[1],I=s[2],q=g[2],J=g[0]-S,dt=g[1]-G,ct=J*J+dt*dt;if(ct<1e-12)nt=Math.log(q/I)/n,et=function(kt){return[S+kt*J,G+kt*dt,I*Math.exp(n*kt*nt)]};else{var pt=Math.sqrt(ct),mt=(q*q-I*I+r*ct)/(2*I*e*pt),ot=(q*q-I*I-r*ct)/(2*q*e*pt),bt=Math.log(Math.sqrt(mt*mt+1)-mt),Lt=Math.log(Math.sqrt(ot*ot+1)-ot);nt=(Lt-bt)/n,et=function(kt){var It=kt*nt,Bt=Va(bt),Ft=I/(e*pt)*(Bt*function rf(t){return((t=Math.exp(2*t))-1)/(t+1)}(n*It+bt)-function nf(t){return((t=Math.exp(t))-1/t)/2}(bt));return[S+Ft*J,G+Ft*dt,I*Bt/Va(n*It+bt)]}}return et.duration=1e3*nt*n/Math.SQRT2,et}return o.rho=function(s){var g=Math.max(.001,+s),S=g*g;return t(g,S,S*S)},o}(Math.SQRT2,2,4),ei=t=>()=>t;function af(t,{sourceEvent:n,target:e,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Ue(t,n,e){this.k=t,this.x=n,this.y=e}Ue.prototype={constructor:Ue,scale:function(t){return 1===t?this:new Ue(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new Ue(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var eo=new Ue(1,0,0);function no(t){t.stopImmediatePropagation()}function ir(t){t.preventDefault(),t.stopImmediatePropagation()}function uf(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function cf(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function Xa(){return this.__zoom||eo}function hf(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function lf(){return navigator.maxTouchPoints||"ontouchstart"in this}function ff(t,n,e){var r=t.invertX(n[0][0])-e[0][0],o=t.invertX(n[1][0])-e[1][0],s=t.invertY(n[0][1])-e[0][1],g=t.invertY(n[1][1])-e[1][1];return t.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),g>s?(s+g)/2:Math.min(0,s)||Math.max(0,g))}var gf=N(4825);let pf=(()=>{class t extends Ot.H{constructor(){super(),this.nodes=[],this.edges=[],this.width=window.screen.availWidth,this.height=window.screen.availHeight,this.characterLinks=[],this.defaultOptions={zoom:!0,edgeRadius:0,directed:!1,drag:!1,curveEdges:!1},this.id=(0,O.V)(),this.groups=[]}ngOnChanges(){this.nodes.length>0&&this.edges.length>0&&this.create()}ngAfterViewInit(){this.nodes.length>0&&this.edges.length>0&&this.create()}create(){this.options=Object.assign(Object.assign({},this.defaultOptions),this.options),this.element=document.getElementById(this.id+"-network");const e=this.element.getBoundingClientRect();this.width=e.width,this.height=e.height,he(this.element).selectChildren().remove(),this.createCharacterLinks(),this.initializeColor(),this.createSvg(),this.createLink(),this.createSimulation(),this.createNode()}initializeColor(){this.groups=Array.from(new Set(this.characterLinks.map(e=>e.group))),this.color=this.options.colors?er(Object.keys(this.options.colors),Object.values(this.options.colors)):er(this.groups,za)}createCharacterLinks(){const e=this.nodes.map(r=>r.id);this.characterLinks=this.edges.filter(r=>e.includes(r.source)&&e.includes(r.target))}createSimulation(){this.simulation=ba(this.nodes).force("link",ma(this.characterLinks).distance(20).id(this.getId)).force("charge",_a().strength(e=>-100*e.score)).force("center",da(this.width/2,this.height/2)).force("radius",va(e=>e.score+20)).force("cluster",this.cluster(this.nodes)).on("tick",()=>{this.link.attr("d",this.options.curveEdges?this.linkArc:e=>`\n            M${e.source.x},${e.source.y}\n            A${this.options.edgeRadius},${this.options.edgeRadius} 0 0, 1 ${e.target.x},${e.target.y}\n            `),this.node.attr("transform",e=>`translate(${e.x}, ${e.y})`),(0,gf.g)(1e4)}),setTimeout(()=>{this.simulation.stop()},1e4)}createSvg(){const e=this;this.svg=Ya("svg").attr("viewBox",[0,0,this.width,this.height]).style("font","12px sans-serif"),this.g=this.svg.append("g"),this.options.zoom&&this.svg.call(function df(){var V,Q,q,t=uf,n=cf,e=ff,r=hf,o=lf,s=[0,1/0],g=[[-1/0,-1/0],[1/0,1/0]],S=250,G=of,I=Sr("start","zoom","end"),J=500,ct=0,et=10;function nt(st){st.property("__zoom",Xa).on("wheel.zoom",It,{passive:!1}).on("mousedown.zoom",Bt).on("dblclick.zoom",Ft).filter(o).on("touchstart.zoom",Nt).on("touchmove.zoom",Vt).on("touchend.zoom touchcancel.zoom",jt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function pt(st,Dt){return(Dt=Math.max(s[0],Math.min(s[1],Dt)))===st.k?st:new Ue(Dt,st.x,st.y)}function mt(st,Dt,wt){var Mt=Dt[0]-wt[0]*st.k,zt=Dt[1]-wt[1]*st.k;return Mt===st.x&&zt===st.y?st:new Ue(st.k,Mt,zt)}function ot(st){return[(+st[0][0]+ +st[1][0])/2,(+st[0][1]+ +st[1][1])/2]}function bt(st,Dt,wt,Mt){st.on("start.zoom",function(){Lt(this,arguments).event(Mt).start()}).on("interrupt.zoom end.zoom",function(){Lt(this,arguments).event(Mt).end()}).tween("zoom",function(){var zt=this,Rt=arguments,Gt=Lt(zt,Rt).event(Mt),Wt=n.apply(zt,Rt),Zt=null==wt?ot(Wt):"function"==typeof wt?wt.apply(zt,Rt):wt,Ae=Math.max(Wt[1][0]-Wt[0][0],Wt[1][1]-Wt[0][1]),ie=zt.__zoom,ye="function"==typeof Dt?Dt.apply(zt,Rt):Dt,Ee=G(ie.invert(Zt).concat(Ae/ie.k),ye.invert(Zt).concat(Ae/ye.k));return function(ee){if(1===ee)ee=ye;else{var xe=Ee(ee),zn=Ae/xe[2];ee=new Ue(zn,Zt[0]-xe[0]*zn,Zt[1]-xe[1]*zn)}Gt.zoom(null,ee)}})}function Lt(st,Dt,wt){return!wt&&st.__zooming||new kt(st,Dt)}function kt(st,Dt){this.that=st,this.args=Dt,this.active=0,this.sourceEvent=null,this.extent=n.apply(st,Dt),this.taps=0}function It(st,...Dt){if(t.apply(this,arguments)){var wt=Lt(this,Dt).event(st),Mt=this.__zoom,zt=Math.max(s[0],Math.min(s[1],Mt.k*Math.pow(2,r.apply(this,arguments)))),Rt=ze(st);if(wt.wheel)(wt.mouse[0][0]!==Rt[0]||wt.mouse[0][1]!==Rt[1])&&(wt.mouse[1]=Mt.invert(wt.mouse[0]=Rt)),clearTimeout(wt.wheel);else{if(Mt.k===zt)return;wt.mouse=[Rt,Mt.invert(Rt)],Pr(this),wt.start()}ir(st),wt.wheel=setTimeout(Gt,150),wt.zoom("mouse",e(mt(pt(Mt,zt),wt.mouse[0],wt.mouse[1]),wt.extent,g))}function Gt(){wt.wheel=null,wt.end()}}function Bt(st,...Dt){if(!q&&t.apply(this,arguments)){var wt=st.currentTarget,Mt=Lt(this,Dt,!0).event(st),zt=he(st.view).on("mousemove.zoom",Zt,!0).on("mouseup.zoom",Ae,!0),Rt=ze(st,wt),Gt=st.clientX,Wt=st.clientY;la(st.view),no(st),Mt.mouse=[Rt,this.__zoom.invert(Rt)],Pr(this),Mt.start()}function Zt(ie){if(ir(ie),!Mt.moved){var ye=ie.clientX-Gt,Ee=ie.clientY-Wt;Mt.moved=ye*ye+Ee*Ee>ct}Mt.event(ie).zoom("mouse",e(mt(Mt.that.__zoom,Mt.mouse[0]=ze(ie,wt),Mt.mouse[1]),Mt.extent,g))}function Ae(ie){zt.on("mousemove.zoom mouseup.zoom",null),fa(ie.view,Mt.moved),ir(ie),Mt.event(ie).end()}}function Ft(st,...Dt){if(t.apply(this,arguments)){var wt=this.__zoom,Mt=ze(st.changedTouches?st.changedTouches[0]:st,this),zt=wt.invert(Mt),Gt=e(mt(pt(wt,wt.k*(st.shiftKey?.5:2)),Mt,zt),n.apply(this,Dt),g);ir(st),S>0?he(this).transition().duration(S).call(bt,Gt,Mt,st):he(this).call(nt.transform,Gt,Mt,st)}}function Nt(st,...Dt){if(t.apply(this,arguments)){var Rt,Gt,Wt,Zt,wt=st.touches,Mt=wt.length,zt=Lt(this,Dt,st.changedTouches.length===Mt).event(st);for(no(st),Gt=0;Gt<Mt;++Gt)Zt=[Zt=ze(Wt=wt[Gt],this),this.__zoom.invert(Zt),Wt.identifier],zt.touch0?!zt.touch1&&zt.touch0[2]!==Zt[2]&&(zt.touch1=Zt,zt.taps=0):(zt.touch0=Zt,Rt=!0,zt.taps=1+!!V);V&&(V=clearTimeout(V)),Rt&&(zt.taps<2&&(Q=Zt[0],V=setTimeout(function(){V=null},J)),Pr(this),zt.start())}}function Vt(st,...Dt){if(this.__zooming){var Rt,Gt,Wt,Zt,wt=Lt(this,Dt).event(st),Mt=st.changedTouches,zt=Mt.length;for(ir(st),Rt=0;Rt<zt;++Rt)Wt=ze(Gt=Mt[Rt],this),wt.touch0&&wt.touch0[2]===Gt.identifier?wt.touch0[0]=Wt:wt.touch1&&wt.touch1[2]===Gt.identifier&&(wt.touch1[0]=Wt);if(Gt=wt.that.__zoom,wt.touch1){var Ae=wt.touch0[0],ie=wt.touch0[1],ye=wt.touch1[0],Ee=wt.touch1[1],ee=(ee=ye[0]-Ae[0])*ee+(ee=ye[1]-Ae[1])*ee,xe=(xe=Ee[0]-ie[0])*xe+(xe=Ee[1]-ie[1])*xe;Gt=pt(Gt,Math.sqrt(ee/xe)),Wt=[(Ae[0]+ye[0])/2,(Ae[1]+ye[1])/2],Zt=[(ie[0]+Ee[0])/2,(ie[1]+Ee[1])/2]}else{if(!wt.touch0)return;Wt=wt.touch0[0],Zt=wt.touch0[1]}wt.zoom("touch",e(mt(Gt,Wt,Zt),wt.extent,g))}}function jt(st,...Dt){if(this.__zooming){var Rt,Gt,wt=Lt(this,Dt).event(st),Mt=st.changedTouches,zt=Mt.length;for(no(st),q&&clearTimeout(q),q=setTimeout(function(){q=null},J),Rt=0;Rt<zt;++Rt)Gt=Mt[Rt],wt.touch0&&wt.touch0[2]===Gt.identifier?delete wt.touch0:wt.touch1&&wt.touch1[2]===Gt.identifier&&delete wt.touch1;if(wt.touch1&&!wt.touch0&&(wt.touch0=wt.touch1,delete wt.touch1),wt.touch0)wt.touch0[1]=this.__zoom.invert(wt.touch0[0]);else if(wt.end(),2===wt.taps&&(Gt=ze(Gt,this),Math.hypot(Q[0]-Gt[0],Q[1]-Gt[1])<et)){var Wt=he(this).on("dblclick.zoom");Wt&&Wt.apply(this,arguments)}}}return nt.transform=function(st,Dt,wt,Mt){var zt=st.selection?st.selection():st;zt.property("__zoom",Xa),st!==zt?bt(st,Dt,wt,Mt):zt.interrupt().each(function(){Lt(this,arguments).event(Mt).start().zoom(null,"function"==typeof Dt?Dt.apply(this,arguments):Dt).end()})},nt.scaleBy=function(st,Dt,wt,Mt){nt.scaleTo(st,function(){return this.__zoom.k*("function"==typeof Dt?Dt.apply(this,arguments):Dt)},wt,Mt)},nt.scaleTo=function(st,Dt,wt,Mt){nt.transform(st,function(){var zt=n.apply(this,arguments),Rt=this.__zoom,Gt=null==wt?ot(zt):"function"==typeof wt?wt.apply(this,arguments):wt,Wt=Rt.invert(Gt),Zt="function"==typeof Dt?Dt.apply(this,arguments):Dt;return e(mt(pt(Rt,Zt),Gt,Wt),zt,g)},wt,Mt)},nt.translateBy=function(st,Dt,wt,Mt){nt.transform(st,function(){return e(this.__zoom.translate("function"==typeof Dt?Dt.apply(this,arguments):Dt,"function"==typeof wt?wt.apply(this,arguments):wt),n.apply(this,arguments),g)},null,Mt)},nt.translateTo=function(st,Dt,wt,Mt,zt){nt.transform(st,function(){var Rt=n.apply(this,arguments),Gt=this.__zoom,Wt=null==Mt?ot(Rt):"function"==typeof Mt?Mt.apply(this,arguments):Mt;return e(eo.translate(Wt[0],Wt[1]).scale(Gt.k).translate("function"==typeof Dt?-Dt.apply(this,arguments):-Dt,"function"==typeof wt?-wt.apply(this,arguments):-wt),Rt,g)},Mt,zt)},kt.prototype={event:function(st){return st&&(this.sourceEvent=st),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(st,Dt){return this.mouse&&"mouse"!==st&&(this.mouse[1]=Dt.invert(this.mouse[0])),this.touch0&&"touch"!==st&&(this.touch0[1]=Dt.invert(this.touch0[0])),this.touch1&&"touch"!==st&&(this.touch1[1]=Dt.invert(this.touch1[0])),this.that.__zoom=Dt,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(st){var Dt=he(this.that).datum();I.call(st,this.that,new af(st,{sourceEvent:this.sourceEvent,target:nt,type:st,transform:this.that.__zoom,dispatch:I}),Dt)}},nt.wheelDelta=function(st){return arguments.length?(r="function"==typeof st?st:ei(+st),nt):r},nt.filter=function(st){return arguments.length?(t="function"==typeof st?st:ei(!!st),nt):t},nt.touchable=function(st){return arguments.length?(o="function"==typeof st?st:ei(!!st),nt):o},nt.extent=function(st){return arguments.length?(n="function"==typeof st?st:ei([[+st[0][0],+st[0][1]],[+st[1][0],+st[1][1]]]),nt):n},nt.scaleExtent=function(st){return arguments.length?(s[0]=+st[0],s[1]=+st[1],nt):[s[0],s[1]]},nt.translateExtent=function(st){return arguments.length?(g[0][0]=+st[0][0],g[1][0]=+st[1][0],g[0][1]=+st[0][1],g[1][1]=+st[1][1],nt):[[g[0][0],g[0][1]],[g[1][0],g[1][1]]]},nt.constrain=function(st){return arguments.length?(e=st,nt):e},nt.duration=function(st){return arguments.length?(S=+st,nt):S},nt.interpolate=function(st){return arguments.length?(G=st,nt):G},nt.on=function(){var st=I.on.apply(I,arguments);return st===I?nt:st},nt.clickDistance=function(st){return arguments.length?(ct=(st=+st)*st,nt):Math.sqrt(ct)},nt.tapDistance=function(st){return arguments.length?(et=+st,nt):et},nt}().extent([[0,0],[this.width,this.height]]).on("zoom",function r({transform:o}){e.g.attr("transform",o)})),this.element.append(this.svg.node()),this.svg.attr("width",this.width).attr("height",this.height),this.options.directed&&this.svg.append("defs").selectAll("marker").data(this.groups).join("marker").attr("id",o=>`arrow-${o}`).attr("viewBox","0 -5 10 10").attr("refX",30).attr("refY",-5).attr("markerWidth",10).attr("markerHeight",10).attr("orient","auto").append("path").attr("fill",this.color).attr("d","M0,-5L10,0L0,5")}createLink(){this.link=this.g.append("g").attr("fill","none").attr("stroke-width",1.5).selectAll("path").data(this.characterLinks).join("path").attr("stroke",e=>this.color(e.group)).attr("marker-end",e=>`url(${new URL(`#arrow-${e.group}`,location.toString())})`)}createNode(){this.node=this.g.append("g").attr("fill","currentColor").attr("stroke-linecap","round").attr("stroke-linejoin","round").selectAll("g").data(this.nodes).join("g"),this.options.drag&&this.node.call(this.drag(this.simulation)),this.node.append("circle").attr("stroke","black").attr("stroke-width",1).attr("r",e=>e.score).style("fill",e=>this.color(e.group)),this.node.append("text").text(e=>""!==e.label?e.label:e.id).style("font-size","1rem").style("color","white").style("text-anchor","middle").style("dominant-baseline","central")}getId(e){return e.id}drag(e){return function jh(){var S,G,I,V,t=Fh,n=Gh,e=zh,r=Uh,o={},s=Sr("start","drag","end"),g=0,Q=0;function q(ot){ot.on("mousedown.drag",J).filter(r).on("touchstart.drag",et).on("touchmove.drag",nt,kh).on("touchend.drag touchcancel.drag",pt).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function J(ot,bt){if(!V&&t.call(this,ot,bt)){var Lt=mt(this,n.call(this,ot,bt),ot,bt,"mouse");!Lt||(he(ot.view).on("mousemove.drag",dt,tr).on("mouseup.drag",ct,tr),la(ot.view),Zi(ot),I=!1,S=ot.clientX,G=ot.clientY,Lt("start",ot))}}function dt(ot){if(Sn(ot),!I){var bt=ot.clientX-S,Lt=ot.clientY-G;I=bt*bt+Lt*Lt>Q}o.mouse("drag",ot)}function ct(ot){he(ot.view).on("mousemove.drag mouseup.drag",null),fa(ot.view,I),Sn(ot),o.mouse("end",ot)}function et(ot,bt){if(t.call(this,ot,bt)){var Bt,Ft,Lt=ot.changedTouches,kt=n.call(this,ot,bt),It=Lt.length;for(Bt=0;Bt<It;++Bt)(Ft=mt(this,kt,ot,bt,Lt[Bt].identifier,Lt[Bt]))&&(Zi(ot),Ft("start",ot,Lt[Bt]))}}function nt(ot){var kt,It,bt=ot.changedTouches,Lt=bt.length;for(kt=0;kt<Lt;++kt)(It=o[bt[kt].identifier])&&(Sn(ot),It("drag",ot,bt[kt]))}function pt(ot){var kt,It,bt=ot.changedTouches,Lt=bt.length;for(V&&clearTimeout(V),V=setTimeout(function(){V=null},500),kt=0;kt<Lt;++kt)(It=o[bt[kt].identifier])&&(Zi(ot),It("end",ot,bt[kt]))}function mt(ot,bt,Lt,kt,It,Bt){var Vt,jt,st,Ft=s.copy(),Nt=ze(Bt||Lt,bt);if(null!=(st=e.call(ot,new Hi("beforestart",{sourceEvent:Lt,target:q,identifier:It,active:g,x:Nt[0],y:Nt[1],dx:0,dy:0,dispatch:Ft}),kt)))return Vt=st.x-Nt[0]||0,jt=st.y-Nt[1]||0,function Dt(wt,Mt,zt){var Gt,Rt=Nt;switch(wt){case"start":o[It]=Dt,Gt=g++;break;case"end":delete o[It],--g;case"drag":Nt=ze(zt||Mt,bt),Gt=g}Ft.call(wt,ot,new Hi(wt,{sourceEvent:Mt,subject:st,target:q,identifier:It,active:Gt,x:Nt[0]+Vt,y:Nt[1]+jt,dx:Nt[0]-Rt[0],dy:Nt[1]-Rt[1],dispatch:Ft}),kt)}}return q.filter=function(ot){return arguments.length?(t="function"==typeof ot?ot:Hr(!!ot),q):t},q.container=function(ot){return arguments.length?(n="function"==typeof ot?ot:Hr(ot),q):n},q.subject=function(ot){return arguments.length?(e="function"==typeof ot?ot:Hr(ot),q):e},q.touchable=function(ot){return arguments.length?(r="function"==typeof ot?ot:Hr(!!ot),q):r},q.on=function(){var ot=s.on.apply(s,arguments);return ot===s?q:ot},q.clickDistance=function(ot){return arguments.length?(Q=(ot=+ot)*ot,q):Math.sqrt(Q)},q}().on("start",function r(g,S){g.active||e.alphaTarget(.3).restart(),S.fx=S.x,S.fy=S.y}).on("drag",function o(g,S){S.fx=g.x,S.fy=g.y}).on("end",function s(g,S){g.active||e.alphaTarget(0),S.fx=null,S.fy=null})}cluster(e){return function o(s){for(const g of e){const S=e.filter(V=>V.group===g.group),G=S.reduce((V,Q)=>V+Q.x,0)/S.length,I=S.reduce((V,Q)=>V+Q.y,0)/S.length;g.vx+=(G-g.x)*s*.7,g.vy+=(I-g.y)*s*.7}}}linkArc(e){const r=Math.hypot(e.target.x-e.source.x,e.target.y-e.source.y);return`\n    M${e.source.x},${e.source.y}\n    A${r},${r} 0 0,1 ${e.target.x},${e.target.y}\n  `}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["d3-network"]],inputs:{nodes:"nodes",edges:"edges",options:"options",width:"width",height:"height"},features:[i.qOj,i.TTD],decls:2,vars:1,consts:[[1,"svg-container","w-full"],[1,"h-full","w-full",3,"id"]],template:function(e,r){1&e&&(i.TgZ(0,"div",0),i._UZ(1,"div",1),i.qZA()),2&e&&(i.xp6(1),i.MGl("id","",r.id,"-network"))},styles:[".svg-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100%;overflow:hidden}.svg-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{max-width:100%;max-height:100%}"]}),t})();var ni=N(7423),ri=N(9118);const vf=function(){return["/wiki/network"]},yf=function(){return["/wiki/analysis"]},mf=[{path:"",component:(()=>{class t extends m{constructor(e,r,o){super(),this.characterApi=e,this.relationshipApi=r,this.authApi=o,this.nodes=[],this.edges=[],this.characters=[],this.relationships=[],this.networkOptions={zoom:!1}}ngOnInit(){var e=this;this.subscribe(this.characterApi.cosmereCharacters(),r=>this.onCharactersChanges(r)),this.subscribe(this.relationshipApi.relationshipsByBook("mistborn1"),r=>this.onRelationshipsChanges(r)),(0,h.defer)((0,z.Z)(function*(){yield e.characterApi.fetchAllCosmereCharacter(),yield e.relationshipApi.fetchAllCosmereRelationship()}))}generateNetworkParameters(){this.edges=l(this.relationships);const e=new F.UndirectedGraph;p(this.relationships).forEach(s=>e.addNode(s)),this.relationships.forEach(s=>e.addEdge(s.characterId1,s.characterId2));const o=H()(e);this.nodes=u(this.characters,this.relationships).filter(s=>this.edges.map(g=>g.source).includes(s.id)||this.edges.map(g=>g.target).includes(s.id)),this.nodes=this.nodes.map(s=>Object.assign(Object.assign({},s),{group:o[s.id]}))}onCharactersChanges(e){this.characters=e,this.generateNetworkParameters()}onRelationshipsChanges(e){this.relationships=e,this.generateNetworkParameters()}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(it),i.Y36(lt),i.Y36(Et.z))},t.\u0275cmp=i.Xpm({type:t,selectors:[["home"]],features:[i.qOj],decls:26,vars:25,consts:[[1,"inset-0","flex","flex-col","min-w-0","w-full","overflow-x-hidden"],[1,"flex","flex-col","mx-100","text-center","p-6","gap-5"],[1,"font-black","mt-3","text-7xl","text-center","mb-7"],[2,"height","600px",3,"nodes","edges","options"],[1,"flex","flex-col"],[1,"font-bold","mt-3","text-2xl","text-center","mb-3"],["mat-button","",1,"bg-primary","text-lg",3,"routerLink"],[1,"font-bold","mt-3","text-2xl","text-center","mb-7"]],template:function(e,r){1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.TgZ(2,"div",2),i._uU(3),i.ALo(4,"trans"),i.qZA(),i._UZ(5,"d3-network",3),i.TgZ(6,"div",4),i.TgZ(7,"div",5),i._uU(8),i.ALo(9,"trans"),i.qZA(),i.TgZ(10,"div"),i.TgZ(11,"button",6),i._uU(12),i.ALo(13,"trans"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(14,"div",4),i.TgZ(15,"div",5),i._uU(16),i.ALo(17,"trans"),i.qZA(),i.TgZ(18,"div"),i.TgZ(19,"button",6),i._uU(20),i.ALo(21,"trans"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(22,"div",4),i.TgZ(23,"div",7),i._uU(24),i.ALo(25,"trans"),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.xp6(3),i.hij(" ",i.lcZ(4,11,"home.title")," "),i.xp6(2),i.Q6J("nodes",r.nodes)("edges",r.edges)("options",r.networkOptions),i.xp6(3),i.hij(" ",i.lcZ(9,13,"home.network.1")," "),i.xp6(3),i.Q6J("routerLink",i.DdM(23,vf)),i.xp6(1),i.hij(" ",i.lcZ(13,15,"home.connections")," "),i.xp6(4),i.hij(" ",i.lcZ(17,17,"home.analysis.1")," "),i.xp6(3),i.Q6J("routerLink",i.DdM(24,yf)),i.xp6(1),i.hij(" ",i.lcZ(21,19,"home.analysis")," "),i.xp6(4),i.hij(" ",i.lcZ(25,21,"home.me.1")," "))},directives:[pf,ni.lW,Y.rH],pipes:[ri.u],encapsulation:2}),t})()}];var wf=N(5245),or=N(7791),ii=N(6767),oi=N(393);let ai=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[]]}),t})(),bf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[Y.Bz.forChild(mf),ni.ot,wf.Ps,or.m,ii.d,oi.ZD,oi.Cl,ai]]}),t})();const $a=()=>({id:(0,O.V)(),books:[]}),qa=()=>({configuration:$a()});let _f=(()=>{class t extends b.m1{constructor(){super(qa()),this.configuration$=this.select(e=>e.configuration)}saveConfiguration(e){(0,h.isEqual)(this.get().configuration,e)||this.patchState(r=>({configuration:e}))}syncState(){return this.get()}syncConfiguration(){return this.get().configuration}reset(){this.patchState(qa())}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ro=(()=>{class t{constructor(e){this.store=e}syncConfiguration(){return this.store.syncState().configuration}configuration(){return this.store.configuration$}saveConfiguration(e){this.store.saveConfiguration(e)}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(_f))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const ar=function xf(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)};var Ne=N(3075);let Ka=(()=>{class t{constructor(e){this.formBuilder=e}build(e,r=[],o=[]){const s={};return Object.keys(e).forEach(g=>{const S=e[g],G=this.getValidator(g,r);if(s[g]=[S,G],o.includes(g)&&(0,h.isArray)(S)){const I=[];S.forEach(V=>{I.push(ar(V)?this.build(V,r):V)}),s[g]=this.formBuilder.array(I)}if(!o.includes(g)&&!(0,h.isArray)(S)&&ar(S)){const I=this.extractSubValidator(g,r);s[g]=this.build(S,I)}}),this.formBuilder.group(s)}extractSubValidator(e,r){return r.filter(o=>o.key.startsWith(e)).map(o=>({key:o.key.replace(e+".",""),validators:o.validators}))}getValidator(e,r){const o=r.find(s=>s.key===e);return o?o.validators:[]}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(Ne.qu))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Af=(()=>{class t extends b.m1{constructor(){super({books:[]}),this.books$=this.select(e=>e.books)}saveAllBooks(e){(0,h.isEqual)(this.get().books,e)||this.patchState(r=>({books:B(r.books,e)}))}syncState(){return this.get()}syncBook(e){return U(e,this.get().books)}reset(){this.patchState({books:[]})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),io=(()=>{class t{constructor(e,r){this.api=e,this.store=r}fetchAllBooks(){var e=this;return(0,z.Z)(function*(){const r=yield e.api.get("books");e.store.saveAllBooks(r)})()}syncAllBooks(){return this.store.syncState().books}allBooks(){return this.store.books$}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(w),i.LFG(Af))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Ja=N(678),je=N(9808),oo=N(9895),Ln=N(7322),si=N(4107),ao=N(508);function Ef(t,n){if(1&t&&(i.TgZ(0,"mat-option",12),i._uU(1),i.ALo(2,"uppercase"),i.ALo(3,"trans"),i.qZA()),2&t){const e=n.$implicit;i.Q6J("value",e.id),i.xp6(1),i.hij(" ",i.lcZ(2,2,i.lcZ(3,4,e.title))," ")}}function Cf(t,n){if(1&t&&(i.TgZ(0,"div",5),i.TgZ(1,"app-card",6),i.TgZ(2,"form",7),i.TgZ(3,"mat-form-field",8),i.TgZ(4,"mat-label",9),i._uU(5),i.ALo(6,"titlecase"),i.ALo(7,"trans"),i.qZA(),i.TgZ(8,"mat-select",10),i.ALo(9,"trans"),i.YNc(10,Ef,4,6,"mat-option",11),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&t){const e=i.oxw();i.xp6(2),i.Q6J("formGroup",e.configurationForm),i.xp6(3),i.Oqu(i.lcZ(6,4,i.lcZ(7,6,"books"))),i.xp6(3),i.s9C("placeholder",i.lcZ(9,8,"all.books")),i.xp6(2),i.Q6J("ngForOf",e.data.books)}}let ts=(()=>{class t extends Ot.H{constructor(e,r,o){super(),this.configurationApi=e,this.formBuilder=r,this.bookApi=o,this.configurationChanges=new i.vpe,this.showCard=!1,this.data={books:[]}}ngOnInit(){var e=this;this.subscribe(this.bookApi.allBooks(),r=>this.data.books=r),this.subscribe(this.configurationApi.configuration(),r=>this.setConfiguration(r)),(0,h.defer)((0,z.Z)(function*(){yield e.bookApi.fetchAllBooks()})),this.buildForm()}buildForm(){this.configurationForm=this.formBuilder.build(this.configuration),this.configurationForm.get("books").valueChanges.subscribe(e=>{this.configuration.books=e,this.saveConfiguration()})}toggle(){this.showCard=!this.showCard}setConfiguration(e){this.configuration=Object.assign({},e),this.configurationForm&&this.configurationForm.patchValue(e)}saveConfiguration(){this.configurationApi.saveConfiguration(this.configuration)}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(ro),i.Y36(Ka),i.Y36(io))},t.\u0275cmp=i.Xpm({type:t,selectors:[["configuration"]],outputs:{configurationChanges:"configurationChanges"},features:[i.qOj],decls:5,vars:1,consts:[[1,"absolute","top-0","right-0","z-50"],[1,"flex","flex-col","items-end","pr-6"],["mat-icon-button","",3,"click"],["icon","settings"],["class","z-50",4,"ngIf"],[1,"z-50"],[1,"flex","flex-col","h-full","p-6","gap-5","w-100"],[1,"w-full",3,"formGroup"],["floatLabel","always",1,"w-full"],[1,"text-white"],["multiple","","formControlName","books",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,r){1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.TgZ(2,"button",2),i.NdJ("click",function(){return r.toggle()}),i._UZ(3,"app-icon",3),i.qZA(),i.YNc(4,Cf,11,10,"div",4),i.qZA(),i.qZA()),2&e&&(i.xp6(4),i.Q6J("ngIf",r.showCard))},directives:[ni.lW,Ja.o,je.O5,oo.A,Ne._Y,Ne.JL,Ne.sg,Ln.KE,Ln.hX,si.gD,Ne.JJ,Ne.u,je.sg,ao.ey],pipes:[je.rS,ri.u,je.gd],encapsulation:2,changeDetection:0}),t})();var Sf=N(340);let Tf=(()=>{class t extends b.m1{constructor(){super({planets:[]}),this.planets$=this.select(e=>e.planets)}saveAllPlanets(e){(0,h.isEqual)(this.get().planets,e)||this.patchState(r=>({planets:B(r.planets,e)}))}syncState(){return this.get()}syncPlanet(e){return U(e,this.get().planets)}reset(){this.patchState({planets:[]})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Mf=(()=>{class t{constructor(e,r){this.api=e,this.store=r}fetchAllPlanets(){var e=this;return(0,z.Z)(function*(){const r=yield e.api.get("planets");e.store.saveAllPlanets(r)})()}syncAllPlanets(){return this.store.syncState().planets}allPlanets(){return this.store.planets$}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(w),i.LFG(Tf))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Nf=N(335),Lf=N(756),Df=N.n(Lf),Rf=N(2568);const ns=function If(t,n){return t===n||t!=t&&n!=n},ui=function kf(t,n){for(var e=t.length;e--;)if(ns(t[e][0],n))return e;return-1};var Gf=Array.prototype.splice;function Dn(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}Dn.prototype.clear=function Of(){this.__data__=[],this.size=0},Dn.prototype.delete=function zf(t){var n=this.__data__,e=ui(n,t);return!(e<0||(e==n.length-1?n.pop():Gf.call(n,e,1),--this.size,0))},Dn.prototype.get=function jf(t){var n=this.__data__,e=ui(n,t);return e<0?void 0:n[e][1]},Dn.prototype.has=function Bf(t){return ui(this.__data__,t)>-1},Dn.prototype.set=function Hf(t,n){var e=this.__data__,r=ui(e,t);return r<0?(++this.size,e.push([t,n])):e[r][1]=n,this};const ci=Dn;var Rn=N(7079);const rs=function od(t){if(!ar(t))return!1;var n=(0,Rn.Z)(t);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n};var t,Ke=N(5946),ad=Ke.Z["__core-js_shared__"],is=(t=/[^.]+$/.exec(ad&&ad.keys&&ad.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"";var hd=Function.prototype.toString;const cn=function ld(t){if(null!=t){try{return hd.call(t)}catch(n){}try{return t+""}catch(n){}}return""};var dd=/^\[object .+?Constructor\]$/,md=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const bd=function wd(t){return!(!ar(t)||function sd(t){return!!is&&is in t}(t))&&(rs(t)?md:dd).test(cn(t))},On=function Ad(t,n){var e=function _d(t,n){return null==t?void 0:t[n]}(t,n);return bd(e)?e:void 0},sr=On(Ke.Z,"Map"),ur=On(Object,"create");var Rd=Object.prototype.hasOwnProperty;var kd=Object.prototype.hasOwnProperty;function Pn(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}Pn.prototype.clear=function Sd(){this.__data__=ur?ur(null):{},this.size=0},Pn.prototype.delete=function Md(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n},Pn.prototype.get=function Od(t){var n=this.__data__;if(ur){var e=n[t];return"__lodash_hash_undefined__"===e?void 0:e}return Rd.call(n,t)?n[t]:void 0},Pn.prototype.has=function Fd(t){var n=this.__data__;return ur?void 0!==n[t]:kd.call(n,t)},Pn.prototype.set=function Ud(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=ur&&void 0===n?"__lodash_hash_undefined__":n,this};const os=Pn,hi=function Yd(t,n){var e=t.__data__;return function Zd(t){var n=typeof t;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t}(n)?e["string"==typeof n?"string":"hash"]:e.map};function In(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}In.prototype.clear=function Wd(){this.size=0,this.__data__={hash:new os,map:new(sr||ci),string:new os}},In.prototype.delete=function Vd(t){var n=hi(this,t).delete(t);return this.size-=n?1:0,n},In.prototype.get=function $d(t){return hi(this,t).get(t)},In.prototype.has=function Kd(t){return hi(this,t).has(t)},In.prototype.set=function Jd(t,n){var e=hi(this,t),r=e.size;return e.set(t,n),this.size+=e.size==r?0:1,this};const li=In;function kn(t){var n=this.__data__=new ci(t);this.size=n.size}kn.prototype.clear=function Vf(){this.__data__=new ci,this.size=0},kn.prototype.delete=function $f(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e},kn.prototype.get=function Kf(t){return this.__data__.get(t)},kn.prototype.has=function Jf(t){return this.__data__.has(t)},kn.prototype.set=function ng(t,n){var e=this.__data__;if(e instanceof ci){var r=e.__data__;if(!sr||r.length<199)return r.push([t,n]),this.size=++e.size,this;e=this.__data__=new li(r)}return e.set(t,n),this.size=e.size,this};const fi=kn;function di(t){var n=-1,e=null==t?0:t.length;for(this.__data__=new li;++n<e;)this.add(t[n])}di.prototype.add=di.prototype.push=function og(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},di.prototype.has=function sg(t){return this.__data__.has(t)};const as=di,hg=function cg(t,n){for(var e=-1,r=null==t?0:t.length;++e<r;)if(n(t[e],e,t))return!0;return!1},ss=function lg(t,n){return t.has(n)},us=function gg(t,n,e,r,o,s){var g=1&e,S=t.length,G=n.length;if(S!=G&&!(g&&G>S))return!1;var I=s.get(t),V=s.get(n);if(I&&V)return I==n&&V==t;var Q=-1,q=!0,J=2&e?new as:void 0;for(s.set(t,n),s.set(n,t);++Q<S;){var dt=t[Q],ct=n[Q];if(r)var et=g?r(ct,dt,Q,n,t,s):r(dt,ct,Q,t,n,s);if(void 0!==et){if(et)continue;q=!1;break}if(J){if(!hg(n,function(nt,pt){if(!ss(J,pt)&&(dt===nt||o(dt,nt,e,r,s)))return J.push(pt)})){q=!1;break}}else if(dt!==ct&&!o(dt,ct,e,r,s)){q=!1;break}}return s.delete(t),s.delete(n),q};var gi=N(8492);const cs=Ke.Z.Uint8Array,yg=function vg(t){var n=-1,e=Array(t.size);return t.forEach(function(r,o){e[++n]=[o,r]}),e},uo=function mg(t){var n=-1,e=Array(t.size);return t.forEach(function(r){e[++n]=r}),e};var hs=gi.Z?gi.Z.prototype:void 0,co=hs?hs.valueOf:void 0;var We=N(4177);var Bg=Object.prototype.propertyIsEnumerable,ls=Object.getOwnPropertySymbols,Zg=ls?function(t){return null==t?[]:(t=Object(t),function Gg(t,n){for(var e=-1,r=null==t?0:t.length,o=0,s=[];++e<r;){var g=t[e];n(g,e,t)&&(s[o++]=g)}return s}(ls(t),function(n){return Bg.call(t,n)}))}:function Ug(){return[]};const Hg=Zg;var Fn=N(214);const fs=function $g(t){return(0,Fn.Z)(t)&&"[object Arguments]"==(0,Rn.Z)(t)};var ds=Object.prototype,qg=ds.hasOwnProperty,Kg=ds.propertyIsEnumerable,Qg=fs(function(){return arguments}())?fs:function(t){return(0,Fn.Z)(t)&&qg.call(t,"callee")&&!Kg.call(t,"callee")};const gs=Qg;var ps="object"==typeof exports&&exports&&!exports.nodeType&&exports,vs=ps&&"object"==typeof module&&module&&!module.nodeType&&module,ys=vs&&vs.exports===ps?Ke.Z.Buffer:void 0;const ho=(ys?ys.isBuffer:void 0)||function Jg(){return!1};var op=/^(?:0|[1-9]\d*)$/;const ms=function ap(t,n){var e=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==e||"symbol"!=e&&op.test(t))&&t>-1&&t%1==0&&t<n},lo=function up(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var ne={};ne["[object Float32Array]"]=ne["[object Float64Array]"]=ne["[object Int8Array]"]=ne["[object Int16Array]"]=ne["[object Int32Array]"]=ne["[object Uint8Array]"]=ne["[object Uint8ClampedArray]"]=ne["[object Uint16Array]"]=ne["[object Uint32Array]"]=!0,ne["[object Arguments]"]=ne["[object Array]"]=ne["[object ArrayBuffer]"]=ne["[object Boolean]"]=ne["[object DataView]"]=ne["[object Date]"]=ne["[object Error]"]=ne["[object Function]"]=ne["[object Map]"]=ne["[object Number]"]=ne["[object Object]"]=ne["[object RegExp]"]=ne["[object Set]"]=ne["[object String]"]=ne["[object WeakMap]"]=!1;var Fp=N(8346),ws="object"==typeof exports&&exports&&!exports.nodeType&&exports,cr=ws&&"object"==typeof module&&module&&!module.nodeType&&module,fo=cr&&cr.exports===ws&&Fp.Z.process,zp=function(){try{return cr&&cr.require&&cr.require("util").types||fo&&fo.binding&&fo.binding("util")}catch(n){}}(),_s=zp&&zp.isTypedArray;const xs=_s?function Ip(t){return function(n){return t(n)}}(_s):function Op(t){return(0,Fn.Z)(t)&&lo(t.length)&&!!ne[(0,Rn.Z)(t)]};var Wp=Object.prototype.hasOwnProperty;const Zp=function Bp(t,n){var e=(0,We.Z)(t),r=!e&&gs(t),o=!e&&!r&&ho(t),s=!e&&!r&&!o&&xs(t),g=e||r||o||s,S=g?function Yg(t,n){for(var e=-1,r=Array(t);++e<t;)r[e]=n(e);return r}(t.length,String):[],G=S.length;for(var I in t)(n||Wp.call(t,I))&&(!g||!("length"==I||o&&("offset"==I||"parent"==I)||s&&("buffer"==I||"byteLength"==I||"byteOffset"==I)||ms(I,G)))&&S.push(I);return S};var Hp=Object.prototype;var $p=function Xp(t,n){return function(e){return t(n(e))}}(Object.keys,Object);const qp=$p;var Qp=Object.prototype.hasOwnProperty;const tv=function Jp(t){if(!function Yp(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||Hp)}(t))return qp(t);var n=[];for(var e in Object(t))Qp.call(t,e)&&"constructor"!=e&&n.push(e);return n},As=function rv(t){return function ev(t){return null!=t&&lo(t.length)&&!rs(t)}(t)?Zp(t):tv(t)},Es=function iv(t){return function kg(t,n,e){var r=n(t);return(0,We.Z)(t)?r:function Pg(t,n){for(var e=-1,r=n.length,o=t.length;++e<r;)t[o+e]=n[e];return t}(r,e(t))}(t,As,Hg)};var sv=Object.prototype.hasOwnProperty;const go=On(Ke.Z,"DataView"),po=On(Ke.Z,"Promise"),Gn=On(Ke.Z,"Set"),vo=On(Ke.Z,"WeakMap");var Cs="[object Map]",Ss="[object Promise]",Ts="[object Set]",Ms="[object WeakMap]",Ns="[object DataView]",pv=cn(go),vv=cn(sr),yv=cn(po),mv=cn(Gn),wv=cn(vo),hn=Rn.Z;(go&&hn(new go(new ArrayBuffer(1)))!=Ns||sr&&hn(new sr)!=Cs||po&&hn(po.resolve())!=Ss||Gn&&hn(new Gn)!=Ts||vo&&hn(new vo)!=Ms)&&(hn=function(t){var n=(0,Rn.Z)(t),e="[object Object]"==n?t.constructor:void 0,r=e?cn(e):"";if(r)switch(r){case pv:return Ns;case vv:return Cs;case yv:return Ss;case mv:return Ts;case wv:return Ms}return n});const Ls=hn;var Ds="[object Arguments]",Rs="[object Array]",pi="[object Object]",Os=Object.prototype.hasOwnProperty;const Av=function xv(t,n,e,r,o,s){var g=(0,We.Z)(t),S=(0,We.Z)(n),G=g?Rs:Ls(t),I=S?Rs:Ls(n),V=(G=G==Ds?pi:G)==pi,Q=(I=I==Ds?pi:I)==pi,q=G==I;if(q&&ho(t)){if(!ho(n))return!1;g=!0,V=!1}if(q&&!V)return s||(s=new fi),g||xs(t)?us(t,n,e,r,o,s):function Rg(t,n,e,r,o,s,g){switch(e){case"[object DataView]":if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=n.byteLength||!s(new cs(t),new cs(n)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ns(+t,+n);case"[object Error]":return t.name==n.name&&t.message==n.message;case"[object RegExp]":case"[object String]":return t==n+"";case"[object Map]":var S=yg;case"[object Set]":if(S||(S=uo),t.size!=n.size&&!(1&r))return!1;var I=g.get(t);if(I)return I==n;r|=2,g.set(t,n);var V=us(S(t),S(n),r,o,s,g);return g.delete(t),V;case"[object Symbol]":if(co)return co.call(t)==co.call(n)}return!1}(t,n,G,e,r,o,s);if(!(1&e)){var J=V&&Os.call(t,"__wrapped__"),dt=Q&&Os.call(n,"__wrapped__");if(J||dt){var ct=J?t.value():t,et=dt?n.value():n;return s||(s=new fi),o(ct,et,e,r,s)}}return!!q&&(s||(s=new fi),function uv(t,n,e,r,o,s){var g=1&e,S=Es(t),G=S.length;if(G!=Es(n).length&&!g)return!1;for(var Q=G;Q--;){var q=S[Q];if(!(g?q in n:sv.call(n,q)))return!1}var J=s.get(t),dt=s.get(n);if(J&&dt)return J==n&&dt==t;var ct=!0;s.set(t,n),s.set(n,t);for(var et=g;++Q<G;){var nt=t[q=S[Q]],pt=n[q];if(r)var mt=g?r(pt,nt,q,n,t,s):r(nt,pt,q,t,n,s);if(!(void 0===mt?nt===pt||o(nt,pt,e,r,s):mt)){ct=!1;break}et||(et="constructor"==q)}if(ct&&!et){var ot=t.constructor,bt=n.constructor;ot!=bt&&"constructor"in t&&"constructor"in n&&!("function"==typeof ot&&ot instanceof ot&&"function"==typeof bt&&bt instanceof bt)&&(ct=!1)}return s.delete(t),s.delete(n),ct}(t,n,e,r,o,s))},Is=function Ps(t,n,e,r,o){return t===n||(null==t||null==n||!(0,Fn.Z)(t)&&!(0,Fn.Z)(n)?t!=t&&n!=n:Av(t,n,e,r,Ps,o))},ks=function Mv(t){return t==t&&!ar(t)},Fs=function Dv(t,n){return function(e){return null!=e&&e[t]===n&&(void 0!==n||t in Object(e))}},Ov=function Rv(t){var n=function Nv(t){for(var n=As(t),e=n.length;e--;){var r=n[e],o=t[r];n[e]=[r,o,ks(o)]}return n}(t);return 1==n.length&&n[0][2]?Fs(n[0][0],n[0][1]):function(e){return e===t||function Sv(t,n,e,r){var o=e.length,s=o,g=!r;if(null==t)return!s;for(t=Object(t);o--;){var S=e[o];if(g&&S[2]?S[1]!==t[S[0]]:!(S[0]in t))return!1}for(;++o<s;){var G=(S=e[o])[0],I=t[G],V=S[1];if(g&&S[2]){if(void 0===I&&!(G in t))return!1}else{var Q=new fi;if(r)var q=r(I,V,G,t,n,Q);if(!(void 0===q?Is(V,I,3,r,Q):q))return!1}}return!0}(e,t,n)}},yo=function Iv(t){return"symbol"==typeof t||(0,Fn.Z)(t)&&"[object Symbol]"==(0,Rn.Z)(t)};var kv=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fv=/^\w*$/;const mo=function Gv(t,n){if((0,We.Z)(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!yo(t))||Fv.test(t)||!kv.test(t)||null!=n&&t in Object(n)};function wo(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var e=function(){var r=arguments,o=n?n.apply(this,r):r[0],s=e.cache;if(s.has(o))return s.get(o);var g=t.apply(this,r);return e.cache=s.set(o,g)||s,g};return e.cache=new(wo.Cache||li),e}wo.Cache=li;const Uv=wo;var Zv=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Hv=/\\(\\)?/g,Yv=function Wv(t){var n=Uv(t,function(r){return 500===e.size&&e.clear(),r}),e=n.cache;return n}(function(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(Zv,function(e,r,o,s){n.push(o?s.replace(Hv,"$1"):r||e)}),n});const Vv=Yv;var Gs=gi.Z?gi.Z.prototype:void 0,zs=Gs?Gs.toString:void 0;const Kv=function Us(t){if("string"==typeof t)return t;if((0,We.Z)(t))return function Xv(t,n){for(var e=-1,r=null==t?0:t.length,o=Array(r);++e<r;)o[e]=n(t[e],e,t);return o}(t,Us)+"";if(yo(t))return zs?zs.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},js=function ty(t,n){return(0,We.Z)(t)?t:mo(t,n)?[t]:Vv(function Qv(t){return null==t?"":Kv(t)}(t))},vi=function ny(t){if("string"==typeof t||yo(t))return t;var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},Ws=function ry(t,n){for(var e=0,r=(n=js(n,t)).length;null!=t&&e<r;)t=t[vi(n[e++])];return e&&e==r?t:void 0},sy=function ay(t,n){return null!=t&&n in Object(t)},ly=function hy(t,n){return null!=t&&function uy(t,n,e){for(var r=-1,o=(n=js(n,t)).length,s=!1;++r<o;){var g=vi(n[r]);if(!(s=null!=t&&e(t,g)))break;t=t[g]}return s||++r!=o?s:!!(o=null==t?0:t.length)&&lo(o)&&ms(g,o)&&((0,We.Z)(t)||gs(t))}(t,n,sy)},py=function gy(t,n){return mo(t)&&ks(n)?Fs(vi(t),n):function(e){var r=function iy(t,n,e){var r=null==t?void 0:Ws(t,n);return void 0===r?e:r}(e,t);return void 0===r&&r===n?ly(e,t):Is(n,r,3)}},yy=function vy(t){return t},Ay=function xy(t){return mo(t)?function my(t){return function(n){return null==n?void 0:n[t]}}(vi(t)):function by(t){return function(n){return Ws(n,t)}}(t)},Ny=function My(t){return t!=t},Iy=function Py(t,n){return!(null==t||!t.length)&&function Ry(t,n,e){return n==n?function Ly(t,n,e){for(var r=e-1,o=t.length;++r<o;)if(t[r]===n)return r;return-1}(t,n,e):function Sy(t,n,e,r){for(var o=t.length,s=e+(r?1:-1);r?s--:++s<o;)if(n(t[s],s,t))return s;return-1}(t,Ny,e)}(t,n,0)>-1},Fy=function ky(t,n,e){for(var r=-1,o=null==t?0:t.length;++r<o;)if(e(n,t[r]))return!0;return!1};var jy=Gn&&1/uo(new Gn([,-0]))[1]==1/0?function(t){return new Gn(t)}:function Gy(){};const Wy=jy,Bs=function Zy(t,n,e){var r=-1,o=Iy,s=t.length,g=!0,S=[],G=S;if(e)g=!1,o=Fy;else if(s>=200){var I=n?null:Wy(t);if(I)return uo(I);g=!1,o=ss,G=new as}else G=n?[]:S;t:for(;++r<s;){var V=t[r],Q=n?n(V):V;if(V=e||0!==V?V:0,g&&Q==Q){for(var q=G.length;q--;)if(G[q]===Q)continue t;n&&G.push(Q),S.push(V)}else o(G,Q,e)||(G!==S&&G.push(Q),S.push(V))}return S},Yy=function Hy(t,n){return t&&t.length?Bs(t,function Ey(t){return"function"==typeof t?t:null==t?yy:"object"==typeof t?(0,We.Z)(t)?py(t[0],t[1]):Ov(t):Ay(t)}(n)):[]},$y=["network"];let Zs=(()=>{class t extends Ot.H{constructor(){super(),this.state={searchQuery:""}}ngOnInit(){this.initializeColor()}ngOnChanges(){!this.el||this.renderGraph()}ngAfterViewInit(){!this.el||this.renderGraph()}ngOnDestroy(){this.sigma&&this.sigma.kill()}renderGraph(){this.sigma&&this.sigma.kill(),this.filterParameters(),this.createGraph(),this.sigma=new(Df())(this.graph,this.el.nativeElement,{renderLabels:!0,labelColor:{color:"#FFFFFF"}}),this.sigma.on("enterNode",({node:e})=>{this.setHoveredNode(e)}),this.sigma.on("leaveNode",()=>{this.setHoveredNode(void 0)}),this.sigma.setSetting("nodeReducer",(e,r)=>{const o=Object.assign({},r);return this.state.hoveredNeighbors&&!this.state.hoveredNeighbors.has(e)&&this.state.hoveredNode!==e&&(o.label="",o.size=0,o.color="none"),this.state.selectedNode===e?o.highlighted=!0:this.state.suggestions&&!this.state.suggestions.has(e)&&(o.label="",o.size=0,o.color="none"),o}),this.sigma.setSetting("edgeReducer",(e,r)=>{const o=Object.assign({},r);return this.state.hoveredNode&&!this.graph.hasExtremity(e,this.state.hoveredNode)&&(o.hidden=!0),this.state.suggestions&&(!this.state.suggestions.has(this.graph.source(e))||!this.state.suggestions.has(this.graph.target(e)))&&(o.hidden=!0),o})}filterParameters(){this.nodes=Yy(this.nodes,e=>e.id),this.edges=function Vy(t,n){return n="function"==typeof n?n:void 0,t&&t.length?Bs(t,void 0,n):[]}(this.edges,(e,r)=>e.source===r.source&&e.target===r.target||e.source===r.target&&e.target===r.source)}createGraph(){this.graph=new(R()),this.nodes.forEach(s=>this.graph.addNode(s.id,{label:s.label,size:s.score,color:this.color(s.group)})),this.edges.forEach(s=>this.graph.addEdge(s.source,s.target,{size:1,type:"line",color:this.color(s.group)})),this.nodes.forEach((s,g)=>{const S=2*g*Math.PI/this.graph.order;s.x=100*Math.cos(S),s.y=100*Math.cos(S)}),Rf.circular.assign(this.graph);const e=this,o=ba(this.nodes).force("link",ma(this.edges).id(this.getId)).force("charge",_a().strength(s=>-100*s.score)).force("center",da(0,0)).force("radius",va(s=>100*s.score)).force("cluster",this.cluster()).on("tick",()=>{e.graph.nodes().forEach((s,g)=>{const S=e.nodes[g];e.graph.setNodeAttribute(s,"x",S.x),e.graph.setNodeAttribute(s,"y",S.y),"Vin"===S.id&&console.log(S.x,S.y)})}).on("end",()=>o.restart())}initializeColor(){const e=Array.from(new Set(this.edges.map(r=>r.group)));this.color=er(e,za)}cluster(){const r=this;return function o(s){r.graph.nodes().forEach((g,S)=>{const G=r.nodes[S],I=r.nodes.filter(q=>q.group===G.group),V=I.reduce((q,J)=>q+J.x,0)/I.length,Q=I.reduce((q,J)=>q+J.y,0)/I.length;G.vx+=(V-G.x)*s*.7,G.vy+=(Q-G.y)*s*.7})}}getId(e){return e.id}setHoveredNode(e){e?(this.state.hoveredNode=e,this.state.hoveredNeighbors=new Set(this.graph.neighbors(e))):(this.state.hoveredNode=void 0,this.state.hoveredNeighbors=void 0),this.sigma.refresh()}clamp(e,r,o){return Math.min(Math.max(e,r),o)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["sigma-network"]],viewQuery:function(e,r){if(1&e&&i.Gf($y,5),2&e){let o;i.iGM(o=i.CRH())&&(r.el=o.first)}},inputs:{nodes:"nodes",edges:"edges"},features:[i.qOj,i.TTD],decls:2,vars:0,consts:[[1,"w-full","h-full","flex"],["network",""]],template:function(e,r){1&e&&i._UZ(0,"div",0,1)},encapsulation:2}),t})(),qy=(()=>{class t extends Ot.H{constructor(e,r,o,s,g,S,G){super(),this.characterApi=e,this.relationshipApi=r,this.formBuilder=o,this.bookApi=s,this.planetApi=g,this.modal=S,this.configurationApi=G,this.nodes=[],this.edges=[],this.characters=[],this.relationships=[]}ngOnInit(){var e=this;return(0,z.Z)(function*(){e.subscribe(e.characterApi.cosmereCharacters(),r=>{e.onCharactersChanges(r)}),e.subscribe(e.relationshipApi.cosmereRelationships(),r=>{e.onRelationshipsChanges(r)}),e.subscribe(e.configurationApi.configuration(),r=>e.onConfigurationChanges(r)),(0,h.defer)((0,z.Z)(function*(){yield e.characterApi.fetchAllCosmereCharacter(),yield e.relationshipApi.fetchAllCosmereRelationship()}))})()}regenerateNetworkParameters(){this.edges=l(this.filterRelationships(this.relationships));const e=new F.UndirectedGraph;p(this.relationships).forEach(s=>e.addNode(s)),this.filterRelationships(this.relationships).forEach(s=>{e.hasEdge(s.characterId1,s.characterId2)||e.addEdge(s.characterId1,s.characterId2)});const o=H()(e,{rng:Sf("1231312"),resolution:2});this.nodes=u(this.filterCharacters(this.characters),this.filterRelationships(this.relationships)).filter(s=>this.edges.map(g=>g.source).includes(s.id)||this.edges.map(g=>g.target).includes(s.id)),this.nodes=this.nodes.map(s=>Object.assign(Object.assign({},s),{group:o[s.id]})),this.edges=this.edges.filter(s=>this.nodes.map(g=>g.id).includes(s.target)&&this.nodes.map(g=>g.id).includes(s.source)),this.edges=this.edges.map(s=>{const g=this.nodes.find(I=>I.id===s.target),S=this.nodes.find(I=>I.id===s.source);if(void 0===g||void 0===S)return s;const G=g.score>S.score?o[g.id]:o[S.id];return Object.assign(Object.assign({},s),{group:G})})}filterCharacters(e){return e}filterRelationships(e){if(!this.configuration)return e;let r=e;return this.configuration.books.length>0&&(r=r.filter(o=>this.configuration.books.includes(o.bookId))),r}onCharactersChanges(e){this.characters=e,this.regenerateNetworkParameters()}onRelationshipsChanges(e){this.relationships=e,this.regenerateNetworkParameters()}onConfigurationChanges(e){this.configuration=e,this.regenerateNetworkParameters()}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(it),i.Y36(lt),i.Y36(Ka),i.Y36(io),i.Y36(Mf),i.Y36(Nf.u),i.Y36(ro))},t.\u0275cmp=i.Xpm({type:t,selectors:[["characters-relationships-graph"]],features:[i.qOj],decls:2,vars:2,consts:[[1,"relative","w-full","h-full","justify-center"],[3,"nodes","edges"]],template:function(e,r){1&e&&(i.TgZ(0,"div",0),i._UZ(1,"sigma-network",1),i.qZA()),2&e&&(i.xp6(1),i.Q6J("nodes",r.nodes)("edges",r.edges))},directives:[Zs],encapsulation:2}),t})();const Ky=[{path:"",component:(()=>{class t extends m{constructor(){super()}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["network"]],features:[i.qOj],decls:4,vars:0,consts:[[1,"inset-0","flex","flex-col","min-w-0","w-full","overflow-hidden"],[1,"flex","flex-row","h-full","grow","justify-center"],[1,"w-full"]],template:function(e,r){1&e&&(i.TgZ(0,"div",0),i._UZ(1,"configuration"),i.TgZ(2,"div",1),i._UZ(3,"characters-relationships-graph",2),i.qZA(),i.qZA())},directives:[ts,qy],encapsulation:2}),t})()}];let Hs=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[]]}),t})(),Qy=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[Ln.lN,si.LD,je.ez,ii.d,Ne.UX,or.m,Hs,ai]]}),t})(),Jy=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[Y.Bz.forChild(Ky),Qy,oi.ZD,or.m]]}),t})();var tm=N(5547),em=N(3378),nm=N.n(em),rm=N(5894),im=N.n(rm),om=N(1063),am=N.n(om);const hr=t=>(t=>t.map(([n,e])=>({label:n,value:e})))(h.map((t=>(0,h.fromPairs)((0,h.sortBy)((0,h.toPairs)(t),1).reverse()))(t),(n,e)=>[e,n])),bo=t=>{const n=Math.min(...t.map(r=>r.value)),e=Math.max(...t.map(r=>r.value));return t.map(r=>Object.assign(Object.assign({},r),{value:(r.value-n)/(e-n)}))};var um=N(5408),cm=N(5149),hm=N(9637);let gm=(()=>{class t extends Ot.H{constructor(){super(),this.config={colors:{highlight:"#b11adc",highlightLight:"#d975f6",text:"#777",xAxis:"#eee",yAxis:"#999"},height:500,width:640,margin:{top:30,left:150,right:5,bottom:0},gap:.4,xFormat:"",animationDuration:300,ticksInterval:10,type:Nn,titleColor:"white",title:""},this.id=(0,O.V)()}ngOnChanges(e){this.create()}ngAfterViewInit(){this.create()}create(){!this.data||0===this.data.length||(this.data=this.data.splice(0,10),this.element=document.getElementById(this.id+"-vertical-bar-chart"),this.initValues(),this.initScales(),this.createSvg())}initValues(){this.X=this.data.map(e=>e.value),this.Y=this.data.map(e=>e.label)}initScales(){const e=[this.config.margin.left,this.config.width-this.config.margin.right],r=[this.config.margin.top,this.config.height-this.config.margin.bottom];this.xDomain=[0,Pt(this.X)],this.yDomain=new Un(this.Y),this.xScale=this.config.type(this.xDomain,e),this.yScale=nr(this.yDomain,r).padding(this.config.gap),this.xAxis=function tn(t){return Pe(1,t)}(this.xScale).ticks(this.config.width/80,this.config.xFormat),this.yAxis=Hn(this.yScale).tickSizeOuter(0)}createSvg(){const e=re(this.X.length).filter(o=>this.yDomain.has(this.Y[o]));he(this.element).select("svg").remove(),this.svg=this.svg=he(this.element).append("svg").attr("width",this.config.width).attr("height",this.config.height).attr("viewBox",[0,0,this.config.width,this.config.height]).attr("style","max-width: 100%; height: auto; height: intrinsic;"),this.svg.append("g").attr("transform",`translate(0,${this.config.margin.top})`).call(this.xAxis).call(o=>o.select(".domain").remove()).call(o=>o.selectAll(".tick line").clone().attr("y2",this.config.height-this.config.margin.top-this.config.margin.bottom).attr("stroke-opacity",.1)).call(o=>o.append("text").attr("x",this.config.width-this.config.margin.right).attr("y",-22).attr("fill","none").attr("text-anchor","end"));const r=this.svg.append("g").selectAll("rect").data(e).join("rect").attr("x",this.xScale(0)).attr("y",o=>this.yScale(this.Y[o])).attr("width",0).attr("height",this.yScale.bandwidth());this.svg.append("g").attr("fill",this.config.titleColor).attr("text-anchor","end").attr("font-family","sans-serif").attr("font-size",10).selectAll("text").data(e).join("text").attr("x",o=>this.xScale(this.X[o])).attr("y",o=>this.yScale(this.Y[o])+this.yScale.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(this.config.title).call(o=>o.filter(s=>this.xScale(this.X[s])-this.xScale(0)<20).attr("dx",4).attr("fill",this.config.titleAltColor).attr("text-anchor","start")),this.svg.append("g").attr("transform",`translate(${this.config.margin.left},0)`).call(this.yAxis),r.transition().style("fill",(o,s)=>this.getBarColor(s)).duration(this.config.animationDuration).delay((o,s)=>s*this.config.animationDuration/3).attr("height",this.yScale.bandwidth()).attr("width",(o,s)=>this.xScale(this.X[s])-this.config.margin.left)}getBarColor(e,r=0){return`rgb(${(210+r).toString()}, ${(10+20*e+r).toString()}, ${(220-20*e+r).toString()})`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["vertical-bar-chart"]],inputs:{data:"data",config:"config"},features:[i.qOj,i.TTD],decls:1,vars:1,consts:[[1,"flex","flex-1",3,"id"]],template:function(e,r){1&e&&i._UZ(0,"div",0),2&e&&i.MGl("id","",r.id,"-vertical-bar-chart")},encapsulation:2}),t})();const pm=({color:t,title:n,tickSize:e=6,width:r=36+e,height:o=320,marginTop:s=20,marginRight:g=10+e,marginBottom:S=20,marginLeft:G=5,ticks:I=o/64,tickFormat:V,tickValues:Q}={})=>{const q=Ya("svg").attr("width",r).attr("height",o).attr("viewBox",[0,0,r,o]).style("overflow","visible").style("display","block");let dt,J=ct=>ct.selectAll(".tick line").attr("x1",G-r+g);if(t.interpolate){const ct=Math.min(t.domain().length,t.range().length);dt=t.copy().rangeRound(La(Mn(o-S,s),ct)),q.append("image").attr("x",G).attr("y",s).attr("width",r-G-g).attr("height",o-s-S).attr("preserveAspectRatio","none").attr("xlink:href",Ys(t.copy().domain(La(Mn(0,1),ct))).toDataURL())}else if(t.interpolator){if(dt=Object.assign(t.copy().interpolator($i(o-S,s)),{range:()=>[o-S,s]}),q.append("image").attr("x",G).attr("y",s).attr("width",r-G-g).attr("height",o-s-S).attr("preserveAspectRatio","none").attr("xlink:href",Ys(t.interpolator()).toDataURL()),!dt.ticks){if(void 0===Q){const ct=Math.round(I+1);Q=re(ct).map(et=>function me(t,n,e){if(t=Float64Array.from(function*ue(t,n){if(void 0===n)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let e=-1;for(let r of t)null!=(r=n(r,++e,t))&&(r=+r)>=r&&(yield r)}}(t,e)),(r=t.length)&&!isNaN(n=+n)){if(n<=0||r<2)return ht(t);if(n>=1)return Pt(t);var r,o=(r-1)*n,s=Math.floor(o),g=Pt($t(t,s).subarray(0,s+1));return g+(ht(t.subarray(s+1))-g)*(o-s)}}(t.domain(),et/(ct-1)))}"function"!=typeof V&&(V=$r(void 0===V?",f":V))}}else if(t.invertExtent){const ct=t.thresholds?t.thresholds():t.quantiles?t.quantiles():t.domain(),et=void 0===V?nt=>nt:"string"==typeof V?$r(V):V;dt=Nn().domain([-1,t.range().length-1]).rangeRound([o-S,s]),q.append("g").selectAll("rect").data(t.range()).join("rect").attr("y",(nt,pt)=>dt(pt)).attr("x",G).attr("height",(nt,pt)=>dt(pt-1)-dt(pt)).attr("width",r-g-G).attr("fill",nt=>nt),Q=re(ct.length),V=nt=>et(ct[nt],nt)}else dt=nr().domain(t.domain()).rangeRound([o-S,s]),q.append("g").selectAll("rect").data(t.domain()).join("rect").attr("y",dt).attr("x",G).attr("height",Math.max(0,dt.bandwidth()-1)).attr("width",r-G-g).attr("fill",t),J=()=>{};return q.append("g").attr("transform",`translate(${r-g},0)`).call(function Zn(t){return Pe(2,t)}(dt).ticks(I,"string"==typeof V?V:void 0).tickFormat("function"==typeof V?V:void 0).tickSize(e).tickValues(Q)).call(J).call(ct=>ct.select(".domain").remove()).call(ct=>ct.append("text").attr("x",G-r+g).attr("y",0).attr("fill","currentColor").attr("text-anchor","start").attr("font-weight","bold").attr("class","title").text(n)),q.node()};function Ys(t,n=256){const e=document.createElement("canvas");e.width=1,e.height=n;const r=e.getContext("2d");for(let o=0;o<n;++o)r.fillStyle=t(o/(n-1)),r.fillRect(0,n-o,1,1);return e}let vm=(()=>{class t extends Ot.H{constructor(){super(),this.xLabel="",this.yLabel="",this.config={height:500,width:500,margin:{top:20,left:40,right:50,bottom:30},inset:{top:6,right:6,bottom:6,left:6},dot:{radius:20,strokeWidth:0,strokeColor:"white"},domain:{x:[.3,1],y:[.3,1]},padding:10,animationDuration:300,ticksInterval:10,color:tf},this.id=(0,O.V)()}ngOnChanges(e){this.create()}ngAfterViewInit(){this.create()}create(){!this.data||0===this.data.length||(this.element=document.getElementById(this.id+"-chart-3d"),this.initValues(),this.createColorBar(),this.initScales(),this.createAxis(),this.createSvg())}createColorBar(){const e=pm({color:Fa([0,1],this.color),title:"Degree"});this.legendElement=document.getElementById(this.id+"-legend-bar"),this.legendElement&&(he(this.legendElement).select("svg").remove(),this.legendElement.append(e))}initValues(){this.color=this.config.color,this.X=this.data.map(e=>e.x),this.Y=this.data.map(e=>e.y),this.Z=this.data.map(e=>e.z),this.labels=this.data.map(e=>e.label)}initScales(){const r=[this.config.height-this.config.margin.bottom-this.config.inset.bottom,this.config.margin.top+this.config.inset.top];this.xScale=Nn(this.config.domain.x,[this.config.margin.left+this.config.inset.left,this.config.width-this.config.margin.right-this.config.inset.right]),this.yScale=Nn(this.config.domain.y,r)}createAxis(){this.xAxis=He(this.xScale).ticks(this.config.width/80),this.yAxis=Hn(this.yScale).ticks(this.config.height/50)}createSvg(){he(this.element).select("svg").remove(),this.svg=he(this.element).append("svg").attr("width",this.config.width).attr("height",this.config.height).attr("viewBox",[0,0,this.config.width,this.config.height]).attr("style","max-width: 100%; this.options.height: auto; height: intrinsic;"),this.svg.append("g").attr("transform",`translate(0,${this.config.height-this.config.margin.bottom})`).call(this.xAxis).call(o=>o.select(".domain").remove()).call(o=>o.selectAll(".tick line").clone().attr("y2",this.config.margin.top+this.config.margin.bottom-this.config.height).attr("stroke-opacity",.1)).call(o=>o.append("text").attr("x",this.config.width).attr("y",this.config.margin.bottom-4).attr("fill","currentColor").attr("text-anchor","end").text(this.xLabel)),this.svg.append("g").attr("transform",`translate(${this.config.margin.left},0)`).call(this.yAxis).call(o=>o.select(".domain").remove()).call(o=>o.selectAll(".tick line").clone().attr("x2",this.config.width-this.config.margin.left-this.config.margin.right).attr("stroke-opacity",.1)).call(o=>o.append("text").attr("x",-this.config.margin.left).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text(this.yLabel));const r=re(this.X.length).filter(o=>!isNaN(this.X[o])&&!isNaN(this.Y[o]));this.svg.append("g").attr("stroke",this.config.dot.strokeColor).attr("stroke-width",this.config.dot.strokeWidth).selectAll("circle").data(r).join("circle").attr("cx",o=>this.xScale(this.X[o])).attr("cy",o=>this.yScale(this.Y[o])).attr("fill",o=>this.color(this.Z[o])).attr("r",this.config.dot.radius).attr("opacity",.5),this.svg.append("g").attr("font-family","sans-serif").attr("font-size",15).attr("stroke-linejoin","round").attr("stroke-linecap","round").selectAll("text").data(r).join("text").attr("x",o=>this.xScale(this.X[o])).attr("y",o=>this.yScale(this.Y[o])).text(o=>this.labels[o]).style("fill","white").style("text-anchor","middle").style("dominant-baseline","central")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["chart-3d"]],inputs:{data:"data",xLabel:"xLabel",yLabel:"yLabel",config:"config"},features:[i.qOj,i.TTD],decls:3,vars:2,consts:[[1,"flex","flex-row"],[3,"id"],[1,"flex","flex-1","items-end","pb-10",3,"id"]],template:function(e,r){1&e&&(i.TgZ(0,"div",0),i._UZ(1,"div",1),i._UZ(2,"div",2),i.qZA()),2&e&&(i.xp6(1),i.MGl("id","",r.id,"-chart-3d"),i.xp6(1),i.MGl("id","",r.id,"-legend-bar"))},encapsulation:2}),t})(),ym=(()=>{class t extends Ot.H{constructor(){super(),this.options={colors:{highlight:"#b11adc",highlightLight:"#d975f6",text:"#777",xAxis:"#eee",yAxis:"#999"},height:200,width:600,margin:{top:10,left:70,right:10,bottom:20},animationDuration:300,ticksInterval:10},this.id=(0,O.V)()}ngOnChanges(e){this.create()}ngAfterViewInit(){this.create()}create(){!this.data||0===this.data.length||(this.data=this.data.splice(0,10),this.element=document.getElementById(this.id+"-barchart"),this.initValues(),this.initScales(),this.initChart(),this.createAxis(),this.createBars())}initChart(){he(this.element).select("svg").remove(),this.svg=he(this.element).append("svg").attr("viewBox",`0 0 ${this.options.width} ${this.options.height+100}`)}initValues(){const e=Number(ht(this.data.map(o=>o.value))),r=Number(Pt(this.data.map(o=>o.value)));this.minValue=e<0?e-this.options.ticksInterval:0,this.maxValue=r}initScales(){this.yScale=Nn().domain([this.minValue,this.maxValue]).range([this.options.height-this.options.margin.bottom,this.options.margin.top]),this.xScale=nr().domain(re(this.data.length)).range([this.options.margin.left+this.options.margin.right,this.options.width-this.options.margin.right]).paddingInner(this.calculatePadding(this.data.length))}getBarMaxWidth(){const e=window.innerWidth;return e<=768?e<=480?10:15:20}getBarColor(e,r=0){return`rgb(${(210+r).toString()}, ${(10+20*e+r).toString()}, ${(220-20*e+r).toString()})`}createBars(){this.svg.selectAll(".bar").data(this.data).enter().append("rect").classed("bar",!0).style("fill","transparent").style("display",r=>"number"==typeof r.value?"initial":"none").attr("x",(r,o)=>this.xScale(o)).attr("y",this.yScale(0)).attr("width",this.xScale.bandwidth()).attr("height",0).transition().style("fill",(r,o)=>this.getBarColor(o)).duration(this.options.animationDuration).delay((r,o)=>o*this.options.animationDuration/3).attr("x",(r,o)=>this.xScale(o)).attr("y",(r,o)=>this.yScale(r.value<0?0:r.value)).attr("width",this.xScale.bandwidth()).attr("height",(r,o)=>r.value<0?this.yScale(r.value)-this.yScale(0):this.yScale(0)-this.yScale(r.value))}createAxis(){const e=He(this.xScale).tickSize(-this.options.width).tickFormat((o,s)=>this.data[s].label.toUpperCase()),r=Hn(this.yScale).tickSize(-this.options.width).tickFormat(o=>`${o}`).ticks(this.options.ticksInterval);this.svg.append("g").attr("class","axis x-axis").attr("transform",`translate(0, ${this.options.height-15})`).call(e).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end"),this.svg.append("g").attr("class","axis y-axis").attr("transform",`translate(${+this.options.margin.left}, 0)`).call(r),this.svg.selectAll(".axis .domain").remove(),this.svg.selectAll(".axis .tick text").style("fill",this.options.colors.text),this.svg.selectAll(".y-axis .tick line").style("stroke",this.options.colors.yAxis),this.svg.selectAll(".x-axis .tick line").style("stroke",this.options.colors.xAxis)}calculatePadding(e){return 1-e*this.getBarMaxWidth()/this.options.width}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["bar-chart"]],inputs:{data:"data",options:"options"},features:[i.qOj,i.TTD],decls:1,vars:1,consts:[[1,"flex","flex-1",3,"id"]],template:function(e,r){1&e&&i._UZ(0,"div",0),2&e&&i.MGl("id","",r.id,"-barchart")},encapsulation:2}),t})();const mm=[{path:"",component:(()=>{class t extends m{constructor(e,r,o){super(),this.relationshipApi=e,this.characterApi=r,this.configurationApi=o,this.pagerankEigenvectorAndDegreeCentrality=[],this.configuration=$a()}ngOnInit(){var e=this;return(0,z.Z)(function*(){e.subscribe(e.relationshipApi.cosmereRelationships(),r=>e.onRelationshipsChanges(r)),e.subscribe(e.characterApi.cosmereCharacters(),r=>e.onCharactersChanges(r)),e.subscribe(e.configurationApi.configuration(),r=>e.onConfigurationChanges(r)),yield e.relationshipApi.fetchAllCosmereRelationship(),yield e.characterApi.fetchAllCosmereCharacter()})()}analyseNetwork(e){var r=this;return(0,z.Z)(function*(){const o=(0,cm.dQ)(e),s=o.nodes(),g=(0,tm.pagerank)(o,{getEdgeWeight:void 0,maxIterations:300});r.pagerankCosmere=hr(g);const S=am()(o);r.betweennessCosmere=hr(S);const G=nm()(o);r.closenessCosmere=hr(G),r.closenessCosmere=(0,h.reject)(r.closenessCosmere,J=>1===J.value);const I=im()(o,{maxIterations:200});r.eigenvectorCosmere=hr(I);const V=(0,um.degreeCentrality)(o);r.degreeCentralityCosmere=hr(V),r.pageRankNormalized=bo(r.pagerankCosmere);const Q=bo(r.eigenvectorCosmere),q=bo(r.degreeCentralityCosmere);r.pagerankEigenvectorAndDegreeCentrality=s.map(J=>({label:J,x:r.pageRankNormalized.find(dt=>dt.label===J).value,y:Q.find(dt=>dt.label===J).value,z:q.find(dt=>dt.label===J).value})).filter(J=>J.x>.3&&J.y>.3),console.log("calculateClusteringCoefficient",(t=>{let n=0;return t.forEachNode(e=>{n+=((t,n)=>{const e=t.neighbors(n),r=e.length;if(r<2)return 0;let o=0;for(let s=0;s<r;s++){const g=e[s];for(let S=s+1;S<r;S++)t.hasEdge(g,e[S])&&o++}return 2*o/(r*(r-1))})(t,e)}),n/t.order})(o)),console.log("calculateEccentricityCoefficient",(t=>{let n=0;return t.forEachNode(e=>{n+=(0,hm.eccentricity)(t,e)}),n/t.order})(o))})()}onRelationshipsChanges(e){var r=this;return(0,z.Z)(function*(){r.relationships=e,yield r.analyseNetwork(r.graph())})()}onCharactersChanges(e){var r=this;return(0,z.Z)(function*(){r.characters=e,yield r.analyseNetwork(r.graph())})()}onConfigurationChanges(e){var r=this;return(0,z.Z)(function*(){r.configuration=e,yield r.analyseNetwork(r.graph())})()}filterRelationships(e){if(!this.configuration)return e;let r=e;return this.configuration.books.length>0&&(r=r.filter(o=>this.configuration.books.includes(o.bookId))),r}graph(){const e=this.filterRelationships(this.relationships),r=new F.UndirectedGraph;return p(e).forEach(s=>r.addNode(this.getCharacterName(s))),e.forEach(s=>{r.hasEdge(this.getCharacterName(s.characterId1),this.getCharacterName(s.characterId2))||r.addEdge(this.getCharacterName(s.characterId1),this.getCharacterName(s.characterId2))}),r}getCharacterName(e){if(0===this.characters.length)return e;const r=U(e,this.characters);return r&&r.name&&""!==r.name?r.name:e}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(lt),i.Y36(it),i.Y36(ro))},t.\u0275cmp=i.Xpm({type:t,selectors:[["network"]],features:[i.qOj],decls:49,vars:22,consts:[[1,"inset-0","flex","flex-col","min-w-0","w-full","h-screen"],[1,"mr-6"],[1,"flex","flex-col","p-10"],[1,"flex","flex-row","mt-5","gap-5"],[1,"flex","flex-col","p-10","basis-1/2"],[1,"flex","flex-row","text-xl","mb-5","justify-between"],["href","https://en.wikipedia.org/wiki/PageRank","target","_blank"],["icon","info",3,"tooltip"],[1,"w-full",3,"data"],[1,"flex","flex-col","p-6","basis-1/2"],[1,"text-xl","mb-5"],["href","https://networkofthrones.wordpress.com/fractal-protagonists/#:~:text=Recently%2C%20writer%20Mike%20Carey%20used,scale%20you%20consider%20the%20storyline.","target","_blank"],[1,"flex","flex-auto","w-full",3,"data","xLabel","yLabel"],[1,"flex","flex-auto","grow","p-6"],[1,"flex","flex-col","grow"],["href","https://en.wikipedia.org/wiki/Eigenvalues_and_eigenvectors","target","_blank"],["href","https://en.wikipedia.org/wiki/Betweenness_centrality","target","_blank"],["href","https://en.wikipedia.org/wiki/Closeness","target","_blank"]],template:function(e,r){1&e&&(i.TgZ(0,"div",0),i._UZ(1,"configuration",1),i.TgZ(2,"div",2),i.TgZ(3,"div",3),i.TgZ(4,"app-card",4),i.TgZ(5,"div",5),i.TgZ(6,"a",6),i.TgZ(7,"span"),i._uU(8,"PageRank"),i.qZA(),i.qZA(),i._UZ(9,"app-icon",7),i.ALo(10,"trans"),i.qZA(),i._UZ(11,"vertical-bar-chart",8),i.qZA(),i.TgZ(12,"app-card",9),i._UZ(13,"div",10),i.TgZ(14,"div",5),i.TgZ(15,"a",11),i.TgZ(16,"span"),i._uU(17,"Fractal protagonism"),i.qZA(),i.qZA(),i._UZ(18,"app-icon",7),i.ALo(19,"trans"),i.qZA(),i._UZ(20,"chart-3d",12),i.qZA(),i.qZA(),i.TgZ(21,"div",3),i.TgZ(22,"app-card",13),i.TgZ(23,"div",14),i.TgZ(24,"div",5),i.TgZ(25,"a",15),i.TgZ(26,"span"),i._uU(27,"Eigenvector"),i.qZA(),i.qZA(),i._UZ(28,"app-icon",7),i.ALo(29,"trans"),i.qZA(),i._UZ(30,"bar-chart",8),i.qZA(),i.qZA(),i.TgZ(31,"app-card",13),i.TgZ(32,"div",14),i.TgZ(33,"div",5),i.TgZ(34,"a",16),i.TgZ(35,"span"),i._uU(36,"Betweenness"),i.qZA(),i.qZA(),i._UZ(37,"app-icon",7),i.ALo(38,"trans"),i.qZA(),i._UZ(39,"bar-chart",8),i.qZA(),i.qZA(),i.TgZ(40,"app-card",13),i.TgZ(41,"div",14),i.TgZ(42,"div",5),i.TgZ(43,"a",17),i.TgZ(44,"span"),i._uU(45,"Closeness"),i.qZA(),i.qZA(),i._UZ(46,"app-icon",7),i.ALo(47,"trans"),i.qZA(),i._UZ(48,"bar-chart",8),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.xp6(9),i.Q6J("tooltip",i.lcZ(10,12,"info.pagerank")),i.xp6(2),i.Q6J("data",r.pageRankNormalized),i.xp6(7),i.Q6J("tooltip",i.lcZ(19,14,"info.fractal_protagonism")),i.xp6(2),i.Q6J("data",r.pagerankEigenvectorAndDegreeCentrality)("xLabel","pagerank")("yLabel","eigenvector"),i.xp6(8),i.Q6J("tooltip",i.lcZ(29,16,"info.eigenvector")),i.xp6(2),i.Q6J("data",r.eigenvectorCosmere),i.xp6(7),i.Q6J("tooltip",i.lcZ(38,18,"info.betweenness")),i.xp6(2),i.Q6J("data",r.betweennessCosmere),i.xp6(7),i.Q6J("tooltip",i.lcZ(47,20,"info.closeness")),i.xp6(2),i.Q6J("data",r.closenessCosmere))},directives:[ts,oo.A,Ja.o,gm,vm,ym],pipes:[ri.u],encapsulation:2}),t})()}];let wm=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[Y.Bz.forChild(mm),oi.ZD,ai,je.ez,or.m,ii.d]]}),t})();var _m=N(4524);let xm=(()=>{class t extends b.m1{constructor(){super({guides:[]}),this.guides$=this.select(e=>e.guides)}saveAllGuides(e){(0,h.isEqual)(this.get().guides,e)||this.patchState(r=>({guides:B(r.guides,e)}))}syncState(){return this.get()}syncGuide(e){return U(e,this.get().guides)}reset(){this.patchState({guides:[]})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Am=(()=>{class t{constructor(e,r){this.api=e,this.store=r}fetchAllGuides(){var e=this;return(0,z.Z)(function*(){const r=yield e.api.get("guides");e.store.saveAllGuides(r)})()}syncAllGuides(){return this.store.syncState().guides}allGuides(){return this.store.guides$}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(w),i.LFG(xm))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Em=(()=>{class t extends b.m1{constructor(){super({sagas:[]}),this.sagas$=this.select(e=>e.sagas)}saveAllSagas(e){(0,h.isEqual)(this.get().sagas,e)||this.patchState(r=>({sagas:B(r.sagas,e)}))}syncState(){return this.get()}syncSaga(e){return U(e,this.get().sagas)}reset(){this.patchState({sagas:[]})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Cm=(()=>{class t{constructor(e,r){this.api=e,this.store=r}fetchAllSagas(){var e=this;return(0,z.Z)(function*(){const r=yield e.api.get("sagas");e.store.saveAllSagas(r)})()}syncAllSagas(){return this.store.syncState().sagas}allSagas(){return this.store.sagas$}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(w),i.LFG(Em))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Sm(t,n){if(1&t&&(i.TgZ(0,"mat-option",12),i._uU(1),i.qZA()),2&t){const e=n.$implicit;i.Q6J("value",e.id),i.xp6(1),i.hij(" ",e.name," ")}}function Tm(t,n){if(1&t&&(i.TgZ(0,"div",13),i._UZ(1,"div",14),i.TgZ(2,"div"),i._uU(3),i.ALo(4,"trans"),i.qZA(),i.qZA()),2&t){const e=n.$implicit,r=i.oxw();i.xp6(1),i.Udp("background-color",r.colors()[e]),i.xp6(2),i.Oqu(i.lcZ(4,3,"guide."+e))}}const Mm=[{path:"",component:(()=>{class t extends m{constructor(e,r,o){super(),this.bookApi=e,this.guideApi=r,this.sagaApi=o,this.nodes=[],this.edges=[],this.books=[],this.guides=[],this.sagas=[],this.guideRelationshipTypes=["highly_recommended","recommended","not_recommended","optional"],this.options={directed:!0,drag:!0,colors:this.colors(),curveEdges:!0},this.guideControl=new Ne.NI}ngOnInit(){var e=this;return(0,z.Z)(function*(){e.subscribe(e.bookApi.allBooks(),r=>{e.onBooksChanged(r)}),e.subscribe(e.guideApi.allGuides(),r=>{e.onGuidesChanged(r)}),e.subscribe(e.sagaApi.allSagas(),r=>{e.onSagasChanged(r)}),e.subscribe(e.guideControl.valueChanges,r=>e.regenerateNetworkParameters()),(0,h.defer)((0,z.Z)(function*(){yield e.bookApi.fetchAllBooks(),yield e.guideApi.fetchAllGuides(),yield e.sagaApi.fetchAllSagas()}))})()}regenerateNetworkParameters(){if(0===this.guides.length||0===this.books.length)return;const e=this.guides.find(r=>r.id===this.guideControl.value);this.nodes=this.books.map(r=>({id:r.id,label:(0,_m.d)(r.title),group:this.getSagaFromBook(r),score:30})),this.edges=e.order.map(r=>({source:r.sourceId,target:r.targetId,weight:1}))}onBooksChanged(e){this.books=e,this.regenerateNetworkParameters()}onGuidesChanged(e){this.guides=e,this.guideControl.setValue(e[1].id),this.regenerateNetworkParameters()}onSagasChanged(e){this.sagas=e,this.regenerateNetworkParameters()}getSagaFromBook(e){var r,o,s;return null!==(s=null===(o=null===(r=this.sagas)||void 0===r?void 0:r.find(g=>g.bookIds.includes(e.id)))||void 0===o?void 0:o.title)&&void 0!==s?s:e.title}colors(){return{highly_recommended:"#00A78E",recommended:"#FFC107",not_recommended:"#E53935",optional:"#9E9E9E"}}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(io),i.Y36(Am),i.Y36(Cm))},t.\u0275cmp=i.Xpm({type:t,selectors:[["network"]],features:[i.qOj],decls:17,vars:13,consts:[[1,"inset-0","flex","flex-col","min-w-0","w-full","overflow-hidden"],[1,"flex","flex-row","h-full","grow","justify-center"],[1,"w-full",3,"nodes","edges"],[1,"absolute","bottom-0","right-0","z-50"],[1,"z-50"],[1,"flex","flex-col","p-6","gap-5","rounded-none"],["floatLabel","always",1,"w-full"],[1,"text-white"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[1,"text-xl"],["class","flex flex-row",4,"ngFor","ngForOf"],[3,"value"],[1,"flex","flex-row"],[1,"square","mr-3"]],template:function(e,r){1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i._UZ(2,"sigma-network",2),i.qZA(),i.TgZ(3,"div",3),i.TgZ(4,"div",4),i.TgZ(5,"app-card",5),i.TgZ(6,"mat-form-field",6),i.TgZ(7,"mat-label",7),i._uU(8),i.ALo(9,"titlecase"),i.ALo(10,"trans"),i.qZA(),i.TgZ(11,"mat-select",8),i.YNc(12,Sm,2,2,"mat-option",9),i.qZA(),i.qZA(),i.TgZ(13,"div",10),i._uU(14),i.ALo(15,"trans"),i.qZA(),i.YNc(16,Tm,5,5,"div",11),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.xp6(2),i.Q6J("nodes",r.nodes)("edges",r.edges),i.xp6(6),i.Oqu(i.lcZ(9,7,i.lcZ(10,9,"guide"))),i.xp6(3),i.Q6J("formControl",r.guideControl),i.xp6(1),i.Q6J("ngForOf",r.guides),i.xp6(2),i.Oqu(i.lcZ(15,11,"guide.legend.title")),i.xp6(2),i.Q6J("ngForOf",r.guideRelationshipTypes))},directives:[Zs,oo.A,Ln.KE,Ln.hX,si.gD,Ne.JJ,Ne.oH,je.sg,ao.ey],pipes:[je.rS,ri.u],styles:[".square{width:20px;height:20px;border:black;border-radius:6px}\n"],encapsulation:2}),t})()}];let Nm=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[Y.Bz.forChild(Mm),or.m,ai,je.ez,ni.ot,Ln.lN,ao.Ng,si.LD,ii.d,Ne.UX,Hs]]}),t})();const Lm=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",loadChildren:()=>bf},{path:"network",loadChildren:()=>Jy},{path:"analysis",loadChildren:()=>wm},{path:"guide",loadChildren:()=>Nm}];let Dm=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[Y.Bz.forChild(Lm)]]}),t})()},3333:ut=>{ut.exports=function(N,Y){var z=Y.length;if(0!==z){var O=N.length;N.length+=z;for(var i=0;i<z;i++)N[O+i]=Y[i]}}},9069:ut=>{"use strict";var Y,D="object"==typeof Reflect?Reflect:null,N=D&&"function"==typeof D.apply?D.apply:function(A,_,W){return Function.prototype.apply.call(A,_,W)};Y=D&&"function"==typeof D.ownKeys?D.ownKeys:Object.getOwnPropertySymbols?function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:function(A){return Object.getOwnPropertyNames(A)};var O=Number.isNaN||function(A){return A!=A};function i(){i.init.call(this)}ut.exports=i,ut.exports.once=function j(L,A){return new Promise(function(_,W){function x(w){L.removeListener(A,y),W(w)}function y(){"function"==typeof L.removeListener&&L.removeListener("error",x),_([].slice.call(arguments))}k(L,A,y,{once:!0}),"error"!==A&&function H(L,A,_){"function"==typeof L.on&&k(L,"error",A,_)}(L,x,{once:!0})})},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var m=10;function v(L){if("function"!=typeof L)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof L)}function C(L){return void 0===L._maxListeners?i.defaultMaxListeners:L._maxListeners}function u(L,A,_,W){var x,y,w;if(v(_),void 0===(y=L._events)?(y=L._events=Object.create(null),L._eventsCount=0):(void 0!==y.newListener&&(L.emit("newListener",A,_.listener?_.listener:_),y=L._events),w=y[A]),void 0===w)w=y[A]=_,++L._eventsCount;else if("function"==typeof w?w=y[A]=W?[_,w]:[w,_]:W?w.unshift(_):w.push(_),(x=C(L))>0&&w.length>x&&!w.warned){w.warned=!0;var b=new Error("Possible EventEmitter memory leak detected. "+w.length+" "+String(A)+" listeners added. Use emitter.setMaxListeners() to increase limit");b.name="MaxListenersExceededWarning",b.emitter=L,b.type=A,b.count=w.length,function z(L){console&&console.warn&&console.warn(L)}(b)}return L}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(L,A,_){var W={fired:!1,wrapFn:void 0,target:L,type:A,listener:_},x=l.bind(W);return x.listener=_,W.wrapFn=x,x}function f(L,A,_){var W=L._events;if(void 0===W)return[];var x=W[A];return void 0===x?[]:"function"==typeof x?_?[x.listener||x]:[x]:_?function R(L){for(var A=new Array(L.length),_=0;_<A.length;++_)A[_]=L[_].listener||L[_];return A}(x):h(x,x.length)}function d(L){var A=this._events;if(void 0!==A){var _=A[L];if("function"==typeof _)return 1;if(void 0!==_)return _.length}return 0}function h(L,A){for(var _=new Array(A),W=0;W<A;++W)_[W]=L[W];return _}function k(L,A,_,W){if("function"==typeof L.on)W.once?L.once(A,_):L.on(A,_);else{if("function"!=typeof L.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof L);L.addEventListener(A,function x(y){W.once&&L.removeEventListener(A,x),_(y)})}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return m},set:function(L){if("number"!=typeof L||L<0||O(L))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+L+".");m=L}}),i.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(A){if("number"!=typeof A||A<0||O(A))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+A+".");return this._maxListeners=A,this},i.prototype.getMaxListeners=function(){return C(this)},i.prototype.emit=function(A){for(var _=[],W=1;W<arguments.length;W++)_.push(arguments[W]);var x="error"===A,y=this._events;if(void 0!==y)x=x&&void 0===y.error;else if(!x)return!1;if(x){var w;if(_.length>0&&(w=_[0]),w instanceof Error)throw w;var b=new Error("Unhandled error."+(w?" ("+w.message+")":""));throw b.context=w,b}var U=y[A];if(void 0===U)return!1;if("function"==typeof U)N(U,this,_);else{var B=U.length,X=h(U,B);for(W=0;W<B;++W)N(X[W],this,_)}return!0},i.prototype.on=i.prototype.addListener=function(A,_){return u(this,A,_,!1)},i.prototype.prependListener=function(A,_){return u(this,A,_,!0)},i.prototype.once=function(A,_){return v(_),this.on(A,p(this,A,_)),this},i.prototype.prependOnceListener=function(A,_){return v(_),this.prependListener(A,p(this,A,_)),this},i.prototype.off=i.prototype.removeListener=function(A,_){var W,x,y,w,b;if(v(_),void 0===(x=this._events))return this;if(void 0===(W=x[A]))return this;if(W===_||W.listener===_)0==--this._eventsCount?this._events=Object.create(null):(delete x[A],x.removeListener&&this.emit("removeListener",A,W.listener||_));else if("function"!=typeof W){for(y=-1,w=W.length-1;w>=0;w--)if(W[w]===_||W[w].listener===_){b=W[w].listener,y=w;break}if(y<0)return this;0===y?W.shift():function F(L,A){for(;A+1<L.length;A++)L[A]=L[A+1];L.pop()}(W,y),1===W.length&&(x[A]=W[0]),void 0!==x.removeListener&&this.emit("removeListener",A,b||_)}return this},i.prototype.removeAllListeners=function(A){var _,W,x;if(void 0===(W=this._events))return this;if(void 0===W.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==W[A]&&(0==--this._eventsCount?this._events=Object.create(null):delete W[A]),this;if(0===arguments.length){var w,y=Object.keys(W);for(x=0;x<y.length;++x)"removeListener"!==(w=y[x])&&this.removeAllListeners(w);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(_=W[A]))this.removeListener(A,_);else if(void 0!==_)for(x=_.length-1;x>=0;x--)this.removeListener(A,_[x]);return this},i.prototype.listeners=function(A){return f(this,A,!0)},i.prototype.rawListeners=function(A){return f(this,A,!1)},i.listenerCount=function(L,A){return"function"==typeof L.listenerCount?L.listenerCount(A):d.call(L,A)},i.prototype.listenerCount=d,i.prototype.eventNames=function(){return this._eventsCount>0?Y(this._events):[]}},7749:(ut,D,N)=>{var Y=N(8487),z=N(6714),O=N(5568),i=N(8090),m=N(5766),v=N(8859).createRandomIndex,C=N(6956),u=C.UndirectedLouvainIndex,l=C.DirectedLouvainIndex,p={nodeCommunityAttribute:"community",getEdgeWeight:"weight",fastLocalMoves:!0,randomWalk:!0,resolution:1,rng:Math.random};function f(k,L,A){var _=k.get(L);void 0===_&&(_=0),k.set(L,_+=A)}function h(k,L,A,_,W){return Math.abs(_-W)<1e-10?k!==L&&A>k:_>W}function F(k,L,A){var w,b,B,X,$,tt,rt,it,vt,gt,Ct,lt,Et,Pt,ht,At,Xt,Qt,_=new u(L,{getEdgeWeight:A.getEdgeWeight,keepDendrogram:k,resolution:A.resolution}),W=v(A.rng),x=!0,y=!0,U=new i(Float64Array,_.C),Yt=0,qt=0,$t=[];for(A.fastLocalMoves&&(B=new m(_.C));x;){if(lt=_.C,x=!1,y=!0,A.fastLocalMoves){for(Qt=0,it=A.randomWalk?W(lt):0,vt=0;vt<lt;vt++,it++)B.enqueue(gt=it%lt);for(;0!==B.size;){for(gt=B.dequeue(),qt++,Et=0,U.clear(),w=_.belongings[gt],X=_.starts[gt],$=_.starts[gt+1];X<$;X++)Et+=tt=_.weights[X],f(U,b=_.belongings[Ct=_.neighborhood[X]],tt);for(ht=_.fastDeltaWithOwnCommunity(gt,Et,U.get(w)||0,w),Pt=w,rt=0;rt<U.size;rt++)(b=U.dense[rt])!==w&&(Yt++,h(Pt,w,b,At=_.fastDelta(gt,Et,U.vals[rt],b),ht)&&(ht=At,Pt=b));if(ht<0){if((Pt=_.isolate(gt,Et))===w)continue}else{if(Pt===w)continue;_.move(gt,Et,Pt)}for(x=!0,Qt++,X=_.starts[gt],$=_.starts[gt+1];X<$;X++)(b=_.belongings[Ct=_.neighborhood[X]])!==Pt&&B.enqueue(Ct)}$t.push(Qt)}else for($t.push(Xt=[]);y;){for(y=!1,Qt=0,it=A.randomWalk?W(lt):0,vt=0;vt<lt;vt++,it++){for(gt=it%lt,qt++,Et=0,U.clear(),w=_.belongings[gt],X=_.starts[gt],$=_.starts[gt+1];X<$;X++)Et+=tt=_.weights[X],f(U,b=_.belongings[Ct=_.neighborhood[X]],tt);for(ht=_.fastDeltaWithOwnCommunity(gt,Et,U.get(w)||0,w),Pt=w,rt=0;rt<U.size;rt++)(b=U.dense[rt])!==w&&(Yt++,h(Pt,w,b,At=_.fastDelta(gt,Et,U.vals[rt],b),ht)&&(ht=At,Pt=b));if(ht<0){if((Pt=_.isolate(gt,Et))===w)continue}else{if(Pt===w)continue;_.move(gt,Et,Pt)}y=!0,Qt++}Xt.push(Qt),x=y||x}x&&_.zoomOut()}return{index:_,deltaComputations:Yt,nodesVisited:qt,moves:$t}}function R(k,L,A){var w,b,B,X,$,tt,it,vt,gt,Ct,lt,Et,Ot,Pt,ht,At,Yt,$t,me,ce,_=new l(L,{getEdgeWeight:A.getEdgeWeight,keepDendrogram:k,resolution:A.resolution}),W=v(A.rng),x=!0,y=!0,U=new i(Float64Array,_.C),Xt=0,Qt=0,ue=[];for(A.fastLocalMoves&&(B=new m(_.C));x;){if(Ot=_.C,x=!1,y=!0,A.fastLocalMoves){for(ce=0,gt=A.randomWalk?W(Ot):0,Ct=0;Ct<Ot;Ct++,gt++)B.enqueue(lt=gt%Ot);for(;0!==B.size;){for(lt=B.dequeue(),Qt++,Pt=0,ht=0,U.clear(),w=_.belongings[lt],X=_.starts[lt],$=_.starts[lt+1],tt=_.offsets[lt];X<$;X++)it=_.weights[X],X<tt?ht+=it:Pt+=it,f(U,b=_.belongings[Et=_.neighborhood[X]],it);for(Yt=_.deltaWithOwnCommunity(lt,Pt,ht,U.get(w)||0,w),At=w,vt=0;vt<U.size;vt++)(b=U.dense[vt])!==w&&(Xt++,h(At,w,b,$t=_.delta(lt,Pt,ht,U.vals[vt],b),Yt)&&(Yt=$t,At=b));if(Yt<0){if((At=_.isolate(lt,Pt,ht))===w)continue}else{if(At===w)continue;_.move(lt,Pt,ht,At)}for(x=!0,ce++,X=_.starts[lt],$=_.starts[lt+1];X<$;X++)(b=_.belongings[Et=_.neighborhood[X]])!==At&&B.enqueue(Et)}ue.push(ce)}else for(ue.push(me=[]);y;){for(y=!1,ce=0,gt=A.randomWalk?W(Ot):0,Ct=0;Ct<Ot;Ct++,gt++){for(lt=gt%Ot,Qt++,Pt=0,ht=0,U.clear(),w=_.belongings[lt],X=_.starts[lt],$=_.starts[lt+1],tt=_.offsets[lt];X<$;X++)it=_.weights[X],X<tt?ht+=it:Pt+=it,f(U,b=_.belongings[Et=_.neighborhood[X]],it);for(Yt=_.deltaWithOwnCommunity(lt,Pt,ht,U.get(w)||0,w),At=w,vt=0;vt<U.size;vt++)(b=U.dense[vt])!==w&&(Xt++,h(At,w,b,$t=_.delta(lt,Pt,ht,U.vals[vt],b),Yt)&&(Yt=$t,At=b));if(Yt<0){if((At=_.isolate(lt,Pt,ht))===w)continue}else{if(At===w)continue;_.move(lt,Pt,ht,At)}y=!0,ce++}me.push(ce),x=y||x}x&&_.zoomOut()}return{index:_,deltaComputations:Xt,nodesVisited:Qt,moves:ue}}function j(k,L,A,_){if(!z(A))throw new Error("graphology-communities-louvain: the given graph is not a valid graphology instance.");var W=O(A);if("mixed"===W)throw new Error("graphology-communities-louvain: cannot run the algorithm on a true mixed graph.");_=Y(_,p);var x=0;if(0===A.size){if(k)return void A.forEachNode(function(X){A.setNodeAttribute(X,_.nodeCommunityAttribute,x++)});var y={};return A.forEachNode(function(X){y[X]=x++}),L?{communities:y,count:A.order,deltaComputations:0,dendrogram:null,level:0,modularity:NaN,moves:null,nodesVisited:0,resolution:_.resolution}:y}var b=("undirected"===W?F:R)(L,A,_),U=b.index;if(!L)return k?void U.assign(_.nodeCommunityAttribute):U.collect();var B={count:U.C,deltaComputations:b.deltaComputations,dendrogram:U.dendrogram,level:U.level,modularity:U.modularity(),moves:b.moves,nodesVisited:b.nodesVisited,resolution:_.resolution};return k?(U.assign(_.nodeCommunityAttribute),B):(B.communities=U.collect(),B)}var H=j.bind(null,!1,!1);H.assign=j.bind(null,!0,!1),H.detailed=j.bind(null,!1,!0),H.defaults=p,ut.exports=H},5149:(ut,D,N)=>{var z=N(6714),O=N(6262).B,i=N(778).De,m=N(3882);D.dQ=function d(R){var j=function f(R){if(!z(R))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(!R.order)return[];var L,j=new m(R),H=j.push.bind(j),k=[];return j.forEachNodeYetUnseen(function(A){L=[],j.push(A);for(var _;0!==j.size;)_=j.pop(),L.push(_),R.forEachNeighbor(_,H);return L.length>k.length&&(k=L),k.length>j.countUnseenNodes()}),k}(R),H=R.nullCopy();return j.forEach(function(k){O(H,k,R.getNodeAttributes(k))}),R.forEachEdge(function(k,L,A,_,W,x,y){H.hasNode(A)&&i(H,y,k,A,_,L)}),H}},3882:ut=>{function D(N){this.graph=N,this.stack=new Array(N.order),this.seen=new Set,this.size=0}D.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order},D.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size},D.prototype.forEachNodeYetUnseen=function(N){var Y=this.seen,z=this.graph;z.someNode(function(O,i){return Y.size===z.order||!Y.has(O)&&!!N(O,i)})},D.prototype.has=function(N){return this.seen.has(N)},D.prototype.push=function(N){var Y=this.seen.size;return this.seen.add(N),Y!==this.seen.size&&(this.stack[this.size++]=N,!0)},D.prototype.pushWith=function(N,Y){var z=this.seen.size;return this.seen.add(N),z!==this.seen.size&&(this.stack[this.size++]=Y,!0)},D.prototype.pop=function(){if(0!==this.size)return this.stack[--this.size]},ut.exports=D},6956:(ut,D,N)=>{var Y=N(6116),z=N(8487),O=N(2954).Q6,i=Symbol.for("nodejs.util.inspect.custom"),m={getEdgeWeight:"weight",keepDendrogram:!1,resolution:1};function v(u,l){var p=(l=z(l,m)).resolution,f=O(l.getEdgeWeight).fromEntry,d=2*(u.size-u.selfLoopCount),h=Y.getPointerArray(d),F=Y.getPointerArray(u.order+1),R=l.getEdgeWeight?Float64Array:Y.getPointerArray(2*u.size);this.C=u.order,this.M=0,this.E=d,this.U=0,this.resolution=p,this.level=0,this.graph=u,this.nodes=new Array(u.order),this.keepDendrogram=l.keepDendrogram,this.neighborhood=new F(d),this.weights=new R(d),this.loops=new R(u.order),this.starts=new h(u.order+1),this.belongings=new F(u.order),this.dendrogram=[],this.mapping=null,this.counts=new F(u.order),this.unused=new F(u.order),this.totalWeights=new R(u.order);var H,j={},k=0,L=0,A=this;u.forEachNode(function(_){A.nodes[k]=_,j[_]=k,L+=u.undirectedDegreeWithoutSelfLoops(_),A.starts[k]=L,A.belongings[k]=k,A.counts[k]=1,k++}),u.forEachEdge(function(_,W,x,y,w,b,U){if(H=f(_,W,x,y,w,b,U),x=j[x],y=j[y],A.M+=H,x===y)A.totalWeights[x]+=2*H,A.loops[x]=2*H;else{A.totalWeights[x]+=H,A.totalWeights[y]+=H;var B=--A.starts[x],X=--A.starts[y];A.neighborhood[B]=y,A.neighborhood[X]=x,A.weights[B]=H,A.weights[X]=H}}),this.starts[k]=this.E,this.keepDendrogram?this.dendrogram.push(this.belongings.slice()):this.mapping=this.belongings.slice()}function C(u,l){var p=(l=z(l,m)).resolution,f=O(l.getEdgeWeight).fromEntry,d=2*(u.size-u.selfLoopCount),h=Y.getPointerArray(d),F=Y.getPointerArray(u.order+1),R=l.getEdgeWeight?Float64Array:Y.getPointerArray(2*u.size);this.C=u.order,this.M=0,this.E=d,this.U=0,this.resolution=p,this.level=0,this.graph=u,this.nodes=new Array(u.order),this.keepDendrogram=l.keepDendrogram,this.neighborhood=new F(d),this.weights=new R(d),this.loops=new R(u.order),this.starts=new h(u.order+1),this.offsets=new h(u.order),this.belongings=new F(u.order),this.dendrogram=[],this.counts=new F(u.order),this.unused=new F(u.order),this.totalInWeights=new R(u.order),this.totalOutWeights=new R(u.order);var H,j={},k=0,L=0,A=this;u.forEachNode(function(_){A.nodes[k]=_,j[_]=k,L+=u.outDegreeWithoutSelfLoops(_),A.starts[k]=L,L+=u.inDegreeWithoutSelfLoops(_),A.offsets[k]=L,A.belongings[k]=k,A.counts[k]=1,k++}),u.forEachEdge(function(_,W,x,y,w,b,U){if(H=f(_,W,x,y,w,b,U),x=j[x],y=j[y],A.M+=H,x===y)A.loops[x]+=H,A.totalInWeights[x]+=H,A.totalOutWeights[x]+=H;else{A.totalOutWeights[x]+=H,A.totalInWeights[y]+=H;var B=--A.starts[x],X=--A.offsets[y];A.neighborhood[B]=y,A.neighborhood[X]=x,A.weights[B]=H,A.weights[X]=H}}),this.starts[k]=this.E,this.keepDendrogram?this.dendrogram.push(this.belongings.slice()):this.mapping=this.belongings.slice()}v.prototype.isolate=function(u,l){var p=this.belongings[u];if(1===this.counts[p])return p;var f=this.unused[--this.U],d=this.loops[u];return this.totalWeights[p]-=l+d,this.totalWeights[f]+=l+d,this.belongings[u]=f,this.counts[p]--,this.counts[f]++,f},v.prototype.move=function(u,l,p){var f=this.belongings[u],d=this.loops[u];this.totalWeights[f]-=l+d,this.totalWeights[p]+=l+d,this.belongings[u]=p;var h=1==this.counts[f]--;this.counts[p]++,h&&(this.unused[this.U++]=f)},v.prototype.computeNodeDegree=function(u){var l,p,d=0;for(l=this.starts[u],p=this.starts[u+1];l<p;l++)d+=this.weights[l];return d},v.prototype.expensiveIsolate=function(u){var l=this.computeNodeDegree(u);return this.isolate(u,l)},v.prototype.expensiveMove=function(u,l){var p=this.computeNodeDegree(u);this.move(u,p,l)},v.prototype.zoomOut=function(){var h,F,R,j,H,k,L,A,_,W,x,u=new Array(this.C-this.U),l={},p=this.nodes.length,f=0,d=0;for(h=0,R=this.C;h<R;h++)(k=this.belongings[h])in l||(l[k]=f,u[f]={adj:{},totalWeights:this.totalWeights[k],internalWeights:0},f++),this.belongings[h]=l[k];if(this.keepDendrogram){for(W=this.dendrogram[this.level],x=new(Y.getPointerArray(f))(p),h=0;h<p;h++)x[h]=this.belongings[W[h]];this.dendrogram.push(x)}else for(h=0;h<p;h++)this.mapping[h]=this.belongings[this.mapping[h]];for(h=0,R=this.C;h<R;h++)for(_=(A=u[k=this.belongings[h]]).adj,A.internalWeights+=this.loops[h],F=this.starts[h],j=this.starts[h+1];F<j;F++)k!==(L=this.belongings[H=this.neighborhood[F]])?(L in _||(_[L]=0),_[L]+=this.weights[F]):A.internalWeights+=this.weights[F];for(this.C=f,H=0,k=0;k<f;k++)for(L in _=(A=u[k]).adj,this.totalWeights[k=+k]=A.totalWeights,this.loops[k]=A.internalWeights,this.counts[k]=1,this.starts[k]=H,this.belongings[k]=k,_)this.neighborhood[H]=+L,this.weights[H]=_[L],d++,H++;return this.starts[f]=d,this.E=d,this.U=0,this.level++,l},v.prototype.modularity=function(){var u,p,f,d,h=0,F=2*this.M,R=new Float64Array(this.C);for(p=0;p<this.C;p++)for(R[u=this.belongings[p]]+=this.loops[p],f=this.starts[p],d=this.starts[p+1];f<d;f++)u===this.belongings[this.neighborhood[f]]&&(R[u]+=this.weights[f]);for(p=0;p<this.C;p++)h+=R[p]/F-Math.pow(this.totalWeights[p]/F,2)*this.resolution;return h},v.prototype.delta=function(u,l,p,f){var d=this.M;return p/d-this.totalWeights[f]*(l+=this.loops[u])*this.resolution/(2*d*d)},v.prototype.deltaWithOwnCommunity=function(u,l,p,f){var d=this.M;return p/d-(this.totalWeights[f]-(l+=this.loops[u]))*l*this.resolution/(2*d*d)},v.prototype.fastDelta=function(u,l,p,f){return p-(l+=this.loops[u])*this.totalWeights[f]*this.resolution/(2*this.M)},v.prototype.fastDeltaWithOwnCommunity=function(u,l,p,f){return p-(l+=this.loops[u])*(this.totalWeights[f]-l)*this.resolution/(2*this.M)},v.prototype.bounds=function(u){return[this.starts[u],this.starts[u+1]]},v.prototype.project=function(){var u=this,l={};return u.nodes.slice(0,this.C).forEach(function(p,f){l[p]=Array.from(u.neighborhood.slice(u.starts[f],u.starts[f+1])).map(function(d){return u.nodes[d]})}),l},v.prototype.collect=function(u){arguments.length<1&&(u=this.level);var f,d,l={},p=this.keepDendrogram?this.dendrogram[u]:this.mapping;for(f=0,d=p.length;f<d;f++)l[this.nodes[f]]=p[f];return l},v.prototype.assign=function(u,l){arguments.length<2&&(l=this.level);var f,d,p=this.keepDendrogram?this.dendrogram[l]:this.mapping;for(f=0,d=p.length;f<d;f++)this.graph.setNodeAttribute(this.nodes[f],u,p[f])},v.prototype[i]=function(){var u={};Object.defineProperty(u,"constructor",{value:v,enumerable:!1}),u.C=this.C,u.M=this.M,u.E=this.E,u.U=this.U,u.resolution=this.resolution,u.level=this.level,u.nodes=this.nodes,u.starts=this.starts.slice(0,u.C+1);var f=this;return["neighborhood","weights"].forEach(function(d){u[d]=f[d].slice(0,u.E)}),["counts","loops","belongings","totalWeights"].forEach(function(d){u[d]=f[d].slice(0,u.C)}),u.unused=this.unused.slice(0,this.U),this.keepDendrogram?u.dendrogram=this.dendrogram:u.mapping=this.mapping,u},C.prototype.bounds=v.prototype.bounds,C.prototype.inBounds=function(u){return[this.offsets[u],this.starts[u+1]]},C.prototype.outBounds=function(u){return[this.starts[u],this.offsets[u]]},C.prototype.project=v.prototype.project,C.prototype.projectIn=function(){var u=this,l={};return u.nodes.slice(0,this.C).forEach(function(p,f){l[p]=Array.from(u.neighborhood.slice(u.offsets[f],u.starts[f+1])).map(function(d){return u.nodes[d]})}),l},C.prototype.projectOut=function(){var u=this,l={};return u.nodes.slice(0,this.C).forEach(function(p,f){l[p]=Array.from(u.neighborhood.slice(u.starts[f],u.offsets[f])).map(function(d){return u.nodes[d]})}),l},C.prototype.isolate=function(u,l,p){var f=this.belongings[u];if(1===this.counts[f])return f;var d=this.unused[--this.U],h=this.loops[u];return this.totalInWeights[f]-=l+h,this.totalInWeights[d]+=l+h,this.totalOutWeights[f]-=p+h,this.totalOutWeights[d]+=p+h,this.belongings[u]=d,this.counts[f]--,this.counts[d]++,d},C.prototype.move=function(u,l,p,f){var d=this.belongings[u],h=this.loops[u];this.totalInWeights[d]-=l+h,this.totalInWeights[f]+=l+h,this.totalOutWeights[d]-=p+h,this.totalOutWeights[f]+=p+h,this.belongings[u]=f;var F=1==this.counts[d]--;this.counts[f]++,F&&(this.unused[this.U++]=d)},C.prototype.computeNodeInDegree=function(u){var l,p,d=0;for(l=this.offsets[u],p=this.starts[u+1];l<p;l++)d+=this.weights[l];return d},C.prototype.computeNodeOutDegree=function(u){var l,p,d=0;for(l=this.starts[u],p=this.offsets[u];l<p;l++)d+=this.weights[l];return d},C.prototype.expensiveMove=function(u,l){var p=this.computeNodeInDegree(u),f=this.computeNodeOutDegree(u);this.move(u,p,f,l)},C.prototype.zoomOut=function(){var h,F,R,j,H,k,L,A,_,W,x,y,w,b,U,u=new Array(this.C-this.U),l={},p=this.nodes.length,f=0,d=0;for(h=0,R=this.C;h<R;h++)(k=this.belongings[h])in l||(l[k]=f,u[f]={inAdj:{},outAdj:{},totalInWeights:this.totalInWeights[k],totalOutWeights:this.totalOutWeights[k],internalWeights:0},f++),this.belongings[h]=l[k];if(this.keepDendrogram){for(b=this.dendrogram[this.level],U=new(Y.getPointerArray(f))(p),h=0;h<p;h++)U[h]=this.belongings[b[h]];this.dendrogram.push(U)}else for(h=0;h<p;h++)this.mapping[h]=this.belongings[this.mapping[h]];for(h=0,R=this.C;h<R;h++)for(_=this.offsets[h],y=(A=u[k=this.belongings[h]]).inAdj,w=A.outAdj,A.internalWeights+=this.loops[h],F=this.starts[h],j=this.starts[h+1];F<j;F++)x=(W=F<_)?w:y,k!==(L=this.belongings[H=this.neighborhood[F]])?(L in x||(x[L]=0),x[L]+=this.weights[F]):W&&(A.internalWeights+=this.weights[F]);for(this.C=f,H=0,k=0;k<f;k++){for(L in y=(A=u[k]).inAdj,w=A.outAdj,this.totalInWeights[k=+k]=A.totalInWeights,this.totalOutWeights[k]=A.totalOutWeights,this.loops[k]=A.internalWeights,this.counts[k]=1,this.starts[k]=H,this.belongings[k]=k,w)this.neighborhood[H]=+L,this.weights[H]=w[L],d++,H++;for(L in this.offsets[k]=H,y)this.neighborhood[H]=+L,this.weights[H]=y[L],d++,H++}return this.starts[f]=d,this.E=d,this.U=0,this.level++,l},C.prototype.modularity=function(){var u,p,f,d,h=0,F=this.M,R=new Float64Array(this.C);for(p=0;p<this.C;p++)for(R[u=this.belongings[p]]+=this.loops[p],f=this.starts[p],d=this.offsets[p];f<d;f++)u===this.belongings[this.neighborhood[f]]&&(R[u]+=this.weights[f]);for(p=0;p<this.C;p++)h+=R[p]/F-this.totalInWeights[p]*this.totalOutWeights[p]/Math.pow(F,2)*this.resolution;return h},C.prototype.delta=function(u,l,p,f,d){var h=this.M,j=this.loops[u];return f/h-((p+=j)*this.totalInWeights[d]+(l+=j)*this.totalOutWeights[d])*this.resolution/(h*h)},C.prototype.deltaWithOwnCommunity=function(u,l,p,f,d){var h=this.M,j=this.loops[u];return f/h-((p+=j)*(this.totalInWeights[d]-(l+=j))+l*(this.totalOutWeights[d]-p))*this.resolution/(h*h)},C.prototype.collect=v.prototype.collect,C.prototype.assign=v.prototype.assign,C.prototype[i]=function(){var u={};Object.defineProperty(u,"constructor",{value:C,enumerable:!1}),u.C=this.C,u.M=this.M,u.E=this.E,u.U=this.U,u.resolution=this.resolution,u.level=this.level,u.nodes=this.nodes,u.starts=this.starts.slice(0,u.C+1);var f=this;return["neighborhood","weights"].forEach(function(d){u[d]=f[d].slice(0,u.E)}),["counts","offsets","loops","belongings","totalInWeights","totalOutWeights"].forEach(function(d){u[d]=f[d].slice(0,u.C)}),u.unused=this.unused.slice(0,this.U),this.keepDendrogram?u.dendrogram=this.dendrogram:u.mapping=this.mapping,u},D.UndirectedLouvainIndex=v,D.DirectedLouvainIndex=C},6078:(ut,D,N)=>{var Y=N(6116),z=N(2954).Q6;function O(v,C){return"outbound"===v||"inbound"===v?C.directedSize+2*C.undirectedSize:"in"===v||"out"===v||"directed"===v?C.directedSize:2*C.undirectedSize}function i(v,C){var u=v[(C=C||"outbound")+"Neighbors"].bind(v),l=O(C,v),p=Y.getPointerArray(l),f=Y.getPointerArray(v.order);this.graph=v,this.neighborhood=new f(l),this.starts=new p(v.order+1),this.nodes=v.nodes();var h,F,R,j,k,d={},L=0;for(h=0,F=v.order;h<F;h++)d[this.nodes[h]]=h;for(h=0,F=v.order;h<F;h++)for(k=u(this.nodes[h]),this.starts[h]=L,R=0,j=k.length;R<j;R++)this.neighborhood[L++]=d[k[R]];this.starts[h]=l}function m(v,C,u){var l=v[(u=u||"outbound")+"Edges"].bind(v),p=O(u,v),f=Y.getPointerArray(p),d=Y.getPointerArray(v.order),h=z(C).fromMinimalEntry;this.graph=v,this.neighborhood=new d(p),this.weights=new Float64Array(p),this.outDegrees=new Float64Array(v.order),this.starts=new f(v.order+1),this.nodes=v.nodes();var R,j,H,k,L,A,_,W,x,F={},y=0;for(R=0,j=v.order;R<j;R++)F[this.nodes[R]]=R;for(R=0,j=v.order;R<j;R++)for(_=l(L=this.nodes[R]),this.starts[R]=y,H=0,k=_.length;H<k;H++)A=v.opposite(L,W=_[H]),x=h(W,v.getEdgeAttributes(W)),this.neighborhood[y]=F[A],this.weights[y++]=x,this.outDegrees[R]+=x;this.starts[R]=p}i.prototype.bounds=function(v){return[this.starts[v],this.starts[v+1]]},i.prototype.project=function(){var v=this,C={};return v.nodes.forEach(function(u,l){C[u]=Array.from(v.neighborhood.slice(v.starts[l],v.starts[l+1])).map(function(p){return v.nodes[p]})}),C},i.prototype.collect=function(v){var C,u,l={};for(C=0,u=v.length;C<u;C++)l[this.nodes[C]]=v[C];return l},i.prototype.assign=function(v,C){var u=0;this.graph.updateEachNodeAttributes(function(l,p){return p[v]=C[u++],p},{attributes:[v]})},D.NeighborhoodIndex=i,m.prototype.bounds=i.prototype.bounds,m.prototype.project=i.prototype.project,m.prototype.collect=i.prototype.collect,m.prototype.assign=i.prototype.assign,D.WeightedNeighborhoodIndex=m},5681:(ut,D,N)=>{var Y=N(8487),z=N(6714),O=N(909),i={attributes:{x:"x",y:"y"},center:0,hierarchyAttributes:[],rng:Math.random,scale:1};function m(y,w,b,U,B){this.wrappedCircle=B||null,this.children={},this.countChildren=0,this.id=y||null,this.next=null,this.previous=null,this.x=w||null,this.y=b||null,this.r=B?1010101:U||999}function v(y,w,b){for(var U in w.children){var B=w.children[U];B.hasChildren()?v(y,B,b):b[B.id]={x:B.x,y:B.y}}}function C(y,w){var b=y.r-w.r,U=w.x-y.x,B=w.y-y.y;return b<0||b*b<U*U+B*B}function u(y,w){var b=y.r-w.r+1e-6,U=w.x-y.x,B=w.y-y.y;return b>0&&b*b>U*U+B*B}function l(y,w){for(var b=0;b<w.length;++b)if(!u(y,w[b]))return!1;return!0}function f(y,w){var b=y.x,U=y.y,B=y.r,X=w.x,$=w.y,tt=w.r,rt=X-b,it=$-U,vt=tt-B,gt=Math.sqrt(rt*rt+it*it);return new m(null,(b+X+rt/gt*vt)/2,(U+$+it/gt*vt)/2,(gt+B+tt)/2)}function d(y,w,b){var U=y.x,B=y.y,X=y.r,$=w.x,tt=w.y,rt=w.r,it=b.x,vt=b.y,gt=b.r,Ct=U-$,lt=U-it,Et=B-tt,Ot=B-vt,Pt=rt-X,ht=gt-X,ft=U*U+B*B-X*X,At=ft-$*$-tt*tt+rt*rt,Yt=ft-it*it-vt*vt+gt*gt,qt=lt*Et-Ct*Ot,$t=(Et*Yt-Ot*At)/(2*qt)-U,Xt=(Ot*Pt-Et*ht)/qt,Qt=(lt*At-Ct*Yt)/(2*qt)-B,ue=(Ct*ht-lt*Pt)/qt,me=Xt*Xt+ue*ue-1,ce=2*(X+$t*Xt+Qt*ue),Re=$t*$t+Qt*Qt-X*X,re=-(me?(ce+Math.sqrt(ce*ce-4*me*Re))/(2*me):Re/ce);return new m(null,U+$t+Xt*re,B+Qt+ue*re,re)}function h(y){switch(y.length){case 1:return function p(y){return new m(null,y.x,y.y,y.r)}(y[0]);case 2:return f(y[0],y[1]);case 3:return d(y[0],y[1],y[2]);default:throw new Error("graphology-layout/circlepack: Invalid basis length "+y.length)}}function F(y,w){var b,U;if(l(w,y))return[w];for(b=0;b<y.length;++b)if(C(w,y[b])&&l(f(y[b],w),y))return[y[b],w];for(b=0;b<y.length-1;++b)for(U=b+1;U<y.length;++U)if(C(f(y[b],y[U]),w)&&C(f(y[b],w),y[U])&&C(f(y[U],w),y[b])&&l(d(y[b],y[U],w),y))return[y[b],y[U],w];throw new Error("graphology-layout/circlepack: extendBasis failure !")}function R(y){var w=y.wrappedCircle,b=y.next.wrappedCircle,U=w.r+b.r,B=(w.x*b.r+b.x*w.r)/U,X=(w.y*b.r+b.y*w.r)/U;return B*B+X*X}function H(y,w,b){var B,X,tt,rt,U=y.x-w.x,$=y.y-w.y,it=U*U+$*$;it?(X=w.r+b.r,rt=y.r+b.r,(X*=X)>(rt*=rt)?(B=(it+rt-X)/(2*it),tt=Math.sqrt(Math.max(0,rt/it-B*B)),b.x=y.x-B*U-tt*$,b.y=y.y-B*$+tt*U):(B=(it+X-rt)/(2*it),tt=Math.sqrt(Math.max(0,X/it-B*B)),b.x=w.x+B*U-tt*$,b.y=w.y+B*$+tt*U)):(b.x=w.x+b.r,b.y=w.y)}function k(y,w){var b=y.r+w.r-1e-6,U=w.x-y.x,B=w.y-y.y;return b>0&&b*b>U*U+B*B}function A(y,w){var b=0;if(y.hasChildren()){for(var U in y.children){var B=y.children[U];B.hasChildren()&&(B.r=A(B,w))}b=function L(y,w){var U,B,X,$,tt,rt,it,vt,gt,Ct,b=y.length;if(0===b)return 0;if((U=y[0]).x=0,U.y=0,b<=1)return U.r;if(U.x=-(B=y[1]).r,B.x=U.r,B.y=0,b<=2)return U.r+B.r;H(B,U,X=y[2]),U=new m(null,null,null,null,U),B=new m(null,null,null,null,B),X=new m(null,null,null,null,X),U.next=X.previous=B,B.next=U.previous=X,X.next=B.previous=U;t:for(rt=3;rt<b;++rt){H(U.wrappedCircle,B.wrappedCircle,X=y[rt]),X=new m(null,null,null,null,X),it=B.next,vt=U.previous,gt=B.wrappedCircle.r,Ct=U.wrappedCircle.r;do{if(gt<=Ct){if(k(it.wrappedCircle,X.wrappedCircle)){U.next=B=it,B.previous=U,--rt;continue t}gt+=it.wrappedCircle.r,it=it.next}else{if(k(vt.wrappedCircle,X.wrappedCircle)){(U=vt).next=B,B.previous=U,--rt;continue t}Ct+=vt.wrappedCircle.r,vt=vt.previous}}while(it!==vt.next);for(X.previous=U,X.next=B,U.next=B.previous=B=X,$=R(U);(X=X.next)!==B;)(tt=R(X))<$&&(U=X,$=tt);B=U.next}U=[B.wrappedCircle],X=B;for(var lt=1e4;(X=X.next)!==B&&0!=--lt;)U.push(X.wrappedCircle);for(X=function j(y,w){var $,tt,b=0,U=y.slice(),B=y.length,X=[];for(w(U);b<B;)$=U[b],tt&&u(tt,$)?++b:(tt=h(X=F(X,$)),b=0);return tt}(U,w),rt=0;rt<b;++rt)(U=y[rt]).x-=X.x,U.y-=X.y;return X.r}(Object.values(y.children),w)}return b}function W(y,w,b){if(!z(w))throw new Error("graphology-layout/circlepack: the given graph is not a valid graphology instance.");b=Y(b,i);var U={},B={},X=w.nodes(),$=b.center,tt=b.hierarchyAttributes,rt=O.createShuffleInPlace(b.rng),it=b.scale,vt=new m;w.forEachNode(function(Pt,ht){var At=new m(Pt,null,null,ht.size?ht.size:1),Yt=vt;tt.forEach(function(qt){Yt=Yt.getChild(ht[qt])}),Yt.addChild(Pt,At)}),function _(y,w){for(var b in A(y,w),y.children)y.children[b].applyPositionToChildren()}(vt,rt),v(w,vt,U);var Ct,lt,Et,gt=X.length;for(Et=0;Et<gt;Et++){var Ot=X[Et];B[Ot]={x:Ct=$+it*U[Ot].x,y:lt=$+it*U[Ot].y},y&&(w.setNodeAttribute(Ot,b.attributes.x,Ct),w.setNodeAttribute(Ot,b.attributes.y,lt))}return B}m.prototype.hasChildren=function(){return this.countChildren>0},m.prototype.addChild=function(y,w){this.children[y]=w,++this.countChildren},m.prototype.getChild=function(y){if(!this.children.hasOwnProperty(y)){var w=new m;this.children[y]=w,++this.countChildren}return this.children[y]},m.prototype.applyPositionToChildren=function(){if(this.hasChildren()){var y=this;for(var w in y.children){var b=y.children[w];b.x+=y.x,b.y+=y.y,b.applyPositionToChildren()}}};var x=W.bind(null,!1);x.assign=W.bind(null,!0),ut.exports=x},6651:(ut,D,N)=>{var Y=N(8487),z=N(6714),O={dimensions:["x","y"],center:.5,scale:1};function i(v,C,u){if(!z(C))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");var l=(u=Y(u,O)).dimensions;if(!Array.isArray(l)||2!==l.length)throw new Error("graphology-layout/random: given dimensions are invalid.");var f=u.scale,d=2*Math.PI,h=(u.center-.5)*f,F=C.order,R=l[0],j=l[1];function H(A,_){return _[R]=f*Math.cos(A*d/F)+h,_[j]=f*Math.sin(A*d/F)+h,_}var k=0;if(!v){var L={};return C.forEachNode(function(A){L[A]=H(k++,{})}),L}C.updateEachNodeAttributes(function(A,_){return H(k++,_),_},{attributes:l})}var m=i.bind(null,!1);m.assign=i.bind(null,!0),ut.exports=m},2568:(ut,D,N)=>{N(5681),D.circular=N(6651),N(2738),N(6660)},2738:(ut,D,N)=>{var Y=N(8487),z=N(6714),O={dimensions:["x","y"],center:.5,rng:Math.random,scale:1};function i(v,C,u){if(!z(C))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");var l=(u=Y(u,O)).dimensions;if(!Array.isArray(l)||l.length<1)throw new Error("graphology-layout/random: given dimensions are invalid.");var p=l.length,d=u.rng,h=u.scale,F=(u.center-.5)*h;function R(H){for(var k=0;k<p;k++)H[l[k]]=d()*h+F;return H}if(!v){var j={};return C.forEachNode(function(H){j[H]=R({})}),j}C.updateEachNodeAttributes(function(H,k){return R(k),k},{attributes:l})}var m=i.bind(null,!1);m.assign=i.bind(null,!0),ut.exports=m},6660:(ut,D,N)=>{var Y=N(8487),z=N(6714),O=Math.PI/180,i={dimensions:["x","y"],centeredOnZero:!1,degrees:!1};function m(C,u,l,p){if(!z(u))throw new Error("graphology-layout/rotation: the given graph is not a valid graphology instance.");(p=Y(p,i)).degrees&&(l*=O);var f=p.dimensions;if(!Array.isArray(f)||2!==f.length)throw new Error("graphology-layout/random: given dimensions are invalid.");if(0===u.order)return C?void 0:{};var d=f[0],h=f[1],F=0,R=0;if(!p.centeredOnZero){var j=1/0,H=-1/0,k=1/0,L=-1/0;u.forEachNode(function(y,w){var b=w[d],U=w[h];b<j&&(j=b),b>H&&(H=b),U<k&&(k=U),U>L&&(L=U)}),F=(j+H)/2,R=(k+L)/2}var A=Math.cos(l),_=Math.sin(l);function W(y){var w=y[d],b=y[h];return y[d]=F+(w-F)*A-(b-R)*_,y[h]=R+(w-F)*_+(b-R)*A,y}if(!C){var x={};return u.forEachNode(function(y,w){var b={};b[d]=w[d],b[h]=w[h],x[y]=W(b)}),x}u.updateEachNodeAttributes(function(y,w){return W(w),w},{attributes:f})}var v=m.bind(null,!1);v.assign=m.bind(null,!0),ut.exports=v},1063:(ut,D,N)=>{var Y=N(6714),z=N(3933),O=N(8487),i=z.createUnweightedIndexedBrandes,m=z.createDijkstraIndexedBrandes,v={nodeCentralityAttribute:"betweennessCentrality",getEdgeWeight:"weight",normalized:!0};function C(l,p,f){if(!Y(p))throw new Error("graphology-centrality/beetweenness-centrality: the given graph is not a valid graphology instance.");var j,H,k,L,A,_,W,x,y,w,d=(f=O(f,v)).nodeCentralityAttribute,h=f.normalized,F=f.getEdgeWeight?m(p,f.getEdgeWeight):i(p),R=p.order,b=new Float64Array(R),U=new Float64Array(R);for(_=0;_<R;_++){for(k=(j=F(_))[1],L=j[2],W=(H=j[0]).size;W--;)b[H.items[H.size-W]]=0;for(;0!==H.size;){for(A=(1+b[w=H.pop()])/L[w],W=0,x=k[w].length;W<x;W++)b[y=k[w][W]]+=L[y]*A;w!==_&&(U[w]+=b[w])}}var B;if(null!==(B=h?R<=2?null:1/((R-1)*(R-2)):"undirected"===p.type?.5:null))for(_=0;_<R;_++)U[_]*=B;return l?F.index.assign(d,U):F.index.collect(U)}var u=C.bind(null,!1);u.assign=C.bind(null,!0),ut.exports=u},3378:(ut,D,N)=>{var Y=N(6714),z=N(8487),O=N(8740),i=N(4268),m=N(6078).NeighborhoodIndex,v={nodeCentralityAttribute:"closenessCentrality",wassermanFaust:!1};function C(p){this.index=new m(p,"inbound"),this.queue=new O(Array,p.order),this.seen=new i(p.order)}function u(p,f,d){if(!Y(f))throw new Error("graphology-metrics/centrality/closeness: the given graph is not a valid graphology instance.");var j,H,k,L,A,h=(d=z(d,v)).wassermanFaust,F=new C(f),R=f.order,_=new Float64Array(R);for(j=0;j<R;j++)k=(H=F.fromNode(j))[0],A=0,(L=H[1])>0&&R>1&&(A=k/L,h&&(A*=k/(R-1))),_[j]=A;return p?F.index.assign(d.nodeCentralityAttribute,_):F.index.collect(_)}C.prototype.fromNode=function(p){var f=this.index,d=this.queue,h=this.seen;h.clear(),d.clear(),h.add(p),d.push([p,0]);for(var F,R,j,H,k,L,A=0,_=0;0!==d.size;)for(0!==(j=(F=d.shift())[1])&&(A+=j,_+=1),k=f.starts[(R=F[0])+1],H=f.starts[R];H<k;H++)!h.has(L=f.neighborhood[H])&&(h.add(L),d.push([L,j+1]));return[_,A]};var l=u.bind(null,!1);l.assign=u.bind(null,!0),ut.exports=l},5408:(ut,D,N)=>{var Y=N(6714);function z(v,C,u,l){var p=C+"Centrality";if(!Y(u))throw new Error("graphology-centrality/"+p+": the given graph is not a valid graphology instance.");if("degree"!==C&&"undirected"===u.type)throw new Error("graphology-centrality/"+p+": cannot compute "+C+" centrality on an undirected graph.");var f=(l=l||{}).nodeCentralityAttribute||p,d=u.order-1,h=u[C].bind(u);if(!v){var F={};return u.forEachNode(function(R){F[R]=h(R)/d}),F}u.updateEachNodeAttributes(function(R,j){return j[f]=h(R)/d,j},{attributes:[f]})}var O=z.bind(null,!1,"degree"),i=z.bind(null,!1,"inDegree"),m=z.bind(null,!1,"outDegree");O.assign=z.bind(null,!0,"degree"),i.assign=z.bind(null,!0,"inDegree"),m.assign=z.bind(null,!0,"outDegree"),D.degreeCentrality=O,D.inDegreeCentrality=i,D.outDegreeCentrality=m},5894:(ut,D,N)=>{var Y=N(6714),z=N(8487),O=N(6078).WeightedNeighborhoodIndex,i={nodeCentralityAttribute:"eigenvectorCentrality",getEdgeWeight:"weight",maxIterations:100,tolerance:1e-6};function m(u){for(var l=0,p=0,f=0,d=u.length;f<d;f++){var h=Math.abs(u[f]);h>l&&(p*=l/h*(l/h),l=h),p+=0===h&&0===l?0:h/l*(h/l)}return l===1/0?1:l*Math.sqrt(p)}function v(u,l,p){if(!Y(l))throw new Error("graphology-metrics/centrality/eigenvector: the given graph is not a valid graphology instance.");var R,j,H,f=(p=z(p,i)).maxIterations,d=p.tolerance,h=l.order,F=new O(l,p.getEdgeWeight),L=new Float64Array(l.order);for(R=0;R<h;R++)L[R]=1/h;for(var x,y,A=0,_=0,w=!1;A<f;){for(x=L,L=new Float64Array(x),R=0;R<h;R++)for(H=F.starts[R+1],j=F.starts[R];j<H;j++)L[F.neighborhood[j]]+=x[R]*F.weights[j];for(y=m(L),R=0;R<h;R++)L[R]/=y;for(_=0,R=0;R<h;R++)_+=Math.abs(L[R]-x[R]);if(_<h*d){w=!0;break}A++}if(!w)throw Error("graphology-metrics/centrality/eigenvector: failed to converge.");if(!u)return F.collect(L);F.assign(p.nodeCentralityAttribute,L)}var C=v.bind(null,!1);C.assign=v.bind(null,!0),ut.exports=C},9850:(ut,D,N)=>{var Y=N(8487),z=N(6714),O=N(2954).Q6,i={nodeAuthorityAttribute:"authority",nodeHubAttribute:"hub",getEdgeWeight:"weight",maxIterations:100,normalize:!0,tolerance:1e-8};function m(l,p){var d,h,f=Object.create(null);for(d=0,h=l.length;d<h;d++)f[l[d]]=p;return f}function v(l){var p=0;for(var f in l)p+=l[f];return p}function C(l,p,f){if(!z(p))throw new Error("graphology-hits: the given graph is not a valid graphology instance.");if(p.multi)throw new Error("graphology-hits: the HITS algorithm does not work with MultiGraphs.");f=Y(f,i);var R,L,A,_,W,x,y,w,b,U,B,X,$,tt,d=O(f.getEdgeWeight).fromEntry,h=p.order,F=p.nodes(),j=m(F,1/h),H={},k=!1;for(p.forEachEdge(function(rt,it,vt,gt,Ct,lt,Et){H[rt]=d(rt,it,vt,gt,Ct,lt,Et)}),y=0;y<f.maxIterations;y++){for(L=j,j=m(F,0),A=m(F,0),b=0,w=0,X=0;X<h;X++)for($=0,tt=(R=p.outboundEdges(_=F[X])).length;$<tt;$++)W=p.opposite(_,x=R[$]),A[W]+=L[_]*H[x],A[W]>w&&(w=A[W]);for(X=0;X<h;X++)for($=0,tt=(R=p.outboundEdges(_=F[X])).length;$<tt;$++)W=p.opposite(_,x=R[$]),j[_]+=A[W]*H[x],j[W]>b&&(b=j[W]);for(_ in B=1/b,j)j[_]*=B;for(_ in B=1/w,A)A[_]*=B;for(_ in U=0,j)U+=Math.abs(j[_]-L[_]);if(U<f.tolerance){k=!0;break}}if(!k)throw Error("graphology-metrics/centrality/hits: failed to converge.");if(f.normalize){for(_ in B=1/v(A),A)A[_]*=B;for(_ in B=1/v(j),j)j[_]*=B}if(!l)return{hubs:j,authorities:A};p.updateEachNodeAttributes(function(rt,it){return it[f.nodeAuthorityAttribute]=A[rt],it[f.nodeHubAttribute]=j[rt],it},{attributes:[f.nodeAuthorityAttribute,f.nodeHubAttribute]})}var u=C.bind(null,!1);u.assign=C.bind(null,!0),ut.exports=u},5547:(ut,D,N)=>{N(5408);N(1063),N(3378),N(5894),N(9850),D.pagerank=N(593)},593:(ut,D,N)=>{var Y=N(6714),z=N(8487),O=N(6078).WeightedNeighborhoodIndex,i={nodePagerankAttribute:"pagerank",getEdgeWeight:"weight",alpha:.85,maxIterations:100,tolerance:1e-6};function m(C,u,l){if(!Y(u))throw new Error("graphology-metrics/centrality/pagerank: the given graph is not a valid graphology instance.");var H,k,L,A,p=(l=z(l,i)).alpha,f=l.maxIterations,d=l.tolerance,h=l.nodePagerankAttribute,F=u.order,R=1/F,j=new O(u,l.getEdgeWeight),_=new Float64Array(u.order),W=new Float64Array(j.weights.length),x=[];for(H=0;H<F;H++)for(_[H]=R,L=j.starts[H+1],0===(A=j.outDegrees[H])&&x.push(H),k=j.starts[H];k<L;k++)W[k]=j.weights[k]/A;for(var b,B,y=0,w=0,X=!1;y<f;){for(B=_,_=new Float64Array(u.order),b=0,H=0,L=x.length;H<L;H++)b+=B[x[H]];for(b*=p,H=0;H<F;H++){for(L=j.starts[H+1],k=j.starts[H];k<L;k++)_[j.neighborhood[k]]+=p*B[H]*W[k];_[H]+=b*R+(1-p)*R}for(w=0,H=0;H<F;H++)w+=Math.abs(_[H]-B[H]);if(w<F*d){X=!0;break}y++}if(!X)throw Error("graphology-metrics/centrality/pagerank: failed to converge.");if(!C)return j.collect(_);j.assign(h,_)}var v=m.bind(null,!1);v.assign=m.bind(null,!0),ut.exports=v},3956:(ut,D,N)=>{var Y=N(6714),z=N(4651).jZ;ut.exports=function(i,m){if(!Y(i))throw new Error("graphology-metrics/eccentricity: given graph is not a valid graphology instance.");if(0===i.size)return 1/0;var u,l,v=-1/0,C=z(i,m),p=0;for(u in C)(l=C[u])>v&&(v=l),p++;return p<i.order?1/0:v}},9637:(ut,D,N)=>{N(677);D.eccentricity=N(3956)},677:(ut,D,N)=>{var Y=N(6714);function O(i,m,v,C,u){if(!Y(v))throw new Error("graphology-metrics/"+i+": the given graph is not a valid graphology instance.");u=u||"weight";var l=0;return v[m](C,function(p,f,d,h,F,R,j){var H="function"==typeof u?u(p,f,d,h,F,R,j):f[u];("number"!=typeof H||isNaN(H))&&(H=1),l+=H}),l}D.weightedDegree=O.bind(null,"weightedDegree","forEachEdge"),D.weightedInDegree=O.bind(null,"weightedInDegree","forEachInEdge"),D.weightedOutDegree=O.bind(null,"weightedOutDegree","forEachOutEdge"),D.weightedInboundDegree=O.bind(null,"weightedInboundDegree","forEachInboundEdge"),D.weightedOutboundDegree=O.bind(null,"weightedOutboundDegree","forEachOutboundEdge"),D.weightedUndirectedDegree=O.bind(null,"weightedUndirectedDegree","forEachUndirectedEdge"),D.weightedDirectedDegree=O.bind(null,"weightedDirectedDegree","forEachDirectedEdge")},3933:(ut,D,N)=>{var Y=N(8740),z=N(7451),O=N(4547),i=N(6116),m=N(6078),v=m.NeighborhoodIndex,C=m.WeightedNeighborhoodIndex;function u(l,p){return l[0]>p[0]?1:l[0]<p[0]?-1:l[1]>p[1]?1:l[1]<p[1]?-1:l[2]>p[2]?1:l[2]<p[2]?-1:l[3]>p[3]?1:l[3]<p[3]?-1:0}D.createUnweightedIndexedBrandes=function(p){var f=new v(p),d=f.neighborhood,h=f.starts,F=p.order,R=new z(i.getPointerArray(F),F),j=new Uint32Array(F),H=new Array(F),k=new Int32Array(F),L=new Y(Uint32Array,F),A=function(_){var W,x,w,b,U,B;for(U=0;U<F;U++)H[U]=[],j[U]=0,k[U]=-1;for(j[_]=1,k[_]=0,L.push(_);0!==L.size;)for(U=L.shift(),R.push(U),W=k[U],x=j[U],w=h[U+1],b=h[U];b<w;b++)-1===k[B=d[b]]&&(L.push(B),k[B]=W+1),k[B]===W+1&&(j[B]+=x,H[B].push(U));return[R,H,j]};return A.index=f,A},D.createDijkstraIndexedBrandes=function(p,f){var d=new C(p,f||"weight"),h=d.neighborhood,F=d.weights,R=d.starts,j=p.order,H=new z(i.getPointerArray(j),j),k=new Uint32Array(j),L=new Array(j),A=new Float64Array(j),_=new Float64Array(j),W=new O(u),x=function(y){var b,U,B,X,$,tt,rt,it,vt=0;for(rt=0;rt<j;rt++)L[rt]=[],k[rt]=0,A[rt]=-1,_[rt]=-1;for(k[y]=1,_[y]=0,W.push([0,vt++,y,y]);0!==W.size;)if(B=(U=W.pop())[0],X=U[2],-1===A[rt=U[3]])for(H.push(rt),A[rt]=B,k[rt]+=k[X],b=R[rt+1],tt=R[rt];tt<b;tt++)$=B+F[tt],-1===A[it=h[tt]]&&(-1===_[it]||$<_[it])?(_[it]=$,W.push([$,vt++,rt,it]),k[it]=0,L[it]=[rt]):$===_[it]&&(k[it]+=k[rt],L[it].push(rt));return[H,L,k]};return x.index=d,x}},4651:(ut,D,N)=>{var z=N(6714),i=(N(7621),N(3333));function C(f,d,h){if(!z(d))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!d.hasNode(h))throw new Error('graphology-shortest-path: the "'+h+'" source node does not exist in the given graph.');h=""+h;var F=new Set,R={},j=0;R[h]=0;for(var k,L,A,H=[h];0!==H.length;){var _=[];for(k=0,L=H.length;k<L;k++)!F.has(A=H[k])&&(F.add(A),i(_,d[f](A)),R[A]=j);j++,H=_}return R}var u=C.bind(null,"outboundNeighbors");C.bind(null,"neighbors");D.jZ=u},778:(ut,D)=>{D.De=function(z,O,i,m,v,C){return C=Object.assign({},C),O?null==i?z.addUndirectedEdge(m,v,C):z.addUndirectedEdgeWithKey(i,m,v,C):null==i?z.addDirectedEdge(m,v,C):z.addDirectedEdgeWithKey(i,m,v,C)}},6262:(ut,D)=>{D.B=function(N,Y,z){return z=Object.assign({},z),N.addNode(Y,z)}},8487:ut=>{function D(Y){return!Y||"object"!=typeof Y||"function"==typeof Y||Array.isArray(Y)||Y instanceof Set||Y instanceof Map||Y instanceof RegExp||Y instanceof Date}ut.exports=function N(Y,z){Y=Y||{};var O={};for(var i in z){var m=Y[i],v=z[i];O[i]=D(v)?void 0===m?v:m:N(m,v)}return O}},2954:(ut,D)=>{function Y(i){return"number"!=typeof i||isNaN(i)?1:i}D.Q6=function(i){return function O(i,m){var v={},C=function(p){return void 0===p?m:p};"function"==typeof m&&(C=m);var u=function(p){return C(p[i])},l=function(){return C(void 0)};return"string"==typeof i?(v.fromAttributes=u,v.fromGraph=function(p,f){return u(p.getEdgeAttributes(f))},v.fromEntry=function(p,f){return u(f)},v.fromPartialEntry=v.fromEntry,v.fromMinimalEntry=v.fromEntry):"function"==typeof i?(v.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},v.fromGraph=function(p,f){var d=p.extremities(f);return C(i(f,p.getEdgeAttributes(f),d[0],d[1],p.getNodeAttributes(d[0]),p.getNodeAttributes(d[1]),p.isUndirected(f)))},v.fromEntry=function(p,f,d,h,F,R,j){return C(i(p,f,d,h,F,R,j))},v.fromPartialEntry=function(p,f,d,h){return C(i(p,f,d,h))},v.fromMinimalEntry=function(p,f){return C(i(p,f))}):(v.fromAttributes=l,v.fromGraph=l,v.fromEntry=l,v.fromMinimalEntry=l),v}(i,Y)}},5568:(ut,D,N)=>{var Y=N(6714);ut.exports=function(O){if(!Y(O))throw new Error("graphology-utils/infer-type: expecting a valid graphology instance.");var i=O.type;return"mixed"!==i?i:0===O.directedSize&&0===O.undirectedSize||O.directedSize>0&&O.undirectedSize>0?"mixed":O.directedSize>0?"directed":"undirected"}},6714:ut=>{ut.exports=function(N){return null!==N&&"object"==typeof N&&"function"==typeof N.addUndirectedEdgeWithKey&&"function"==typeof N.dropNode&&"boolean"==typeof N.multi}},5595:function(ut){ut.exports=function(){"use strict";function D(E){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(P){return typeof P}:function(P){return P&&"function"==typeof Symbol&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P})(E)}function N(E,P){E.prototype=Object.create(P.prototype),E.prototype.constructor=E,z(E,P)}function Y(E){return(Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(P){return P.__proto__||Object.getPrototypeOf(P)})(E)}function z(E,P){return(z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(T,a){return T.__proto__=a,T})(E,P)}function O(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(E){return!1}}function i(E,P,T){return(i=O()?Reflect.construct.bind():function(a,c,M){var Z=[null];Z.push.apply(Z,c);var K=new(Function.bind.apply(a,Z));return M&&z(K,M.prototype),K}).apply(null,arguments)}function m(E){var P="function"==typeof Map?new Map:void 0;return m=function(T){if(null===T||-1===Function.toString.call(T).indexOf("[native code]"))return T;if("function"!=typeof T)throw new TypeError("Super expression must either be null or a function");if(void 0!==P){if(P.has(T))return P.get(T);P.set(T,c)}function c(){return i(T,arguments,Y(this).constructor)}return c.prototype=Object.create(T.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),z(c,T)},m(E)}function v(E){if(void 0===E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}var C=function(){for(var E=arguments[0],P=1,T=arguments.length;P<T;P++)if(arguments[P])for(var a in arguments[P])E[a]=arguments[P][a];return E};function u(E,P,T,a){var c=E._nodes.get(P),M=null;return c?M="mixed"===a?c.out&&c.out[T]||c.undirected&&c.undirected[T]:"directed"===a?c.out&&c.out[T]:c.undirected&&c.undirected[T]:M}function l(E){return"object"===D(E)&&null!==E}function p(E){var P;for(P in E)return!1;return!0}function f(E,P,T){Object.defineProperty(E,P,{enumerable:!1,configurable:!1,writable:!0,value:T})}function d(E,P,T){var a={enumerable:!0,configurable:!0};"function"==typeof T?a.get=T:(a.value=T,a.writable=!1),Object.defineProperty(E,P,a)}function h(E){return!(!l(E)||E.attributes&&!Array.isArray(E.attributes))}"function"==typeof Object.assign&&(C=Object.assign);var F,R={exports:{}},j="object"==typeof Reflect?Reflect:null,H=j&&"function"==typeof j.apply?j.apply:function(E,P,T){return Function.prototype.apply.call(E,P,T)};F=j&&"function"==typeof j.ownKeys?j.ownKeys:Object.getOwnPropertySymbols?function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))}:function(E){return Object.getOwnPropertyNames(E)};var k=Number.isNaN||function(E){return E!=E};function L(){L.init.call(this)}R.exports=L,R.exports.once=function(E,P){return new Promise(function(T,a){function c(Z){E.removeListener(P,M),a(Z)}function M(){"function"==typeof E.removeListener&&E.removeListener("error",c),T([].slice.call(arguments))}var Z;X(E,P,M,{once:!0}),"error"!==P&&("function"==typeof(Z=E).on&&X(Z,"error",c,{once:!0}))})},L.EventEmitter=L,L.prototype._events=void 0,L.prototype._eventsCount=0,L.prototype._maxListeners=void 0;var A=10;function _(E){if("function"!=typeof E)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}function W(E){return void 0===E._maxListeners?L.defaultMaxListeners:E._maxListeners}function x(E,P,T,a){var c,M,Z;if(_(T),void 0===(M=E._events)?(M=E._events=Object.create(null),E._eventsCount=0):(void 0!==M.newListener&&(E.emit("newListener",P,T.listener?T.listener:T),M=E._events),Z=M[P]),void 0===Z)Z=M[P]=T,++E._eventsCount;else if("function"==typeof Z?Z=M[P]=a?[T,Z]:[Z,T]:a?Z.unshift(T):Z.push(T),(c=W(E))>0&&Z.length>c&&!Z.warned){Z.warned=!0;var at=new Error("Possible EventEmitter memory leak detected. "+Z.length+" "+String(P)+" listeners added. Use emitter.setMaxListeners() to increase limit");at.name="MaxListenersExceededWarning",at.emitter=E,at.type=P,at.count=Z.length,console&&console.warn&&console.warn(at)}return E}function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function w(E,P,T){var a={fired:!1,wrapFn:void 0,target:E,type:P,listener:T},c=y.bind(a);return c.listener=T,a.wrapFn=c,c}function b(E,P,T){var a=E._events;if(void 0===a)return[];var c=a[P];return void 0===c?[]:"function"==typeof c?T?[c.listener||c]:[c]:T?function(M){for(var Z=new Array(M.length),K=0;K<Z.length;++K)Z[K]=M[K].listener||M[K];return Z}(c):B(c,c.length)}function U(E){var P=this._events;if(void 0!==P){var T=P[E];if("function"==typeof T)return 1;if(void 0!==T)return T.length}return 0}function B(E,P){for(var T=new Array(P),a=0;a<P;++a)T[a]=E[a];return T}function X(E,P,T,a){if("function"==typeof E.on)a.once?E.once(P,T):E.on(P,T);else{if("function"!=typeof E.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E);E.addEventListener(P,function c(M){a.once&&E.removeEventListener(P,c),T(M)})}}function $(E){if("function"!=typeof E)throw new Error("obliterator/iterator: expecting a function!");this.next=E}Object.defineProperty(L,"defaultMaxListeners",{enumerable:!0,get:function(){return A},set:function(E){if("number"!=typeof E||E<0||k(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");A=E}}),L.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},L.prototype.setMaxListeners=function(E){if("number"!=typeof E||E<0||k(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this},L.prototype.getMaxListeners=function(){return W(this)},L.prototype.emit=function(E){for(var P=[],T=1;T<arguments.length;T++)P.push(arguments[T]);var a="error"===E,c=this._events;if(void 0!==c)a=a&&void 0===c.error;else if(!a)return!1;if(a){var M;if(P.length>0&&(M=P[0]),M instanceof Error)throw M;var Z=new Error("Unhandled error."+(M?" ("+M.message+")":""));throw Z.context=M,Z}var K=c[E];if(void 0===K)return!1;if("function"==typeof K)H(K,this,P);else{var at=K.length,xt=B(K,at);for(T=0;T<at;++T)H(xt[T],this,P)}return!0},L.prototype.on=L.prototype.addListener=function(E,P){return x(this,E,P,!1)},L.prototype.prependListener=function(E,P){return x(this,E,P,!0)},L.prototype.once=function(E,P){return _(P),this.on(E,w(this,E,P)),this},L.prototype.prependOnceListener=function(E,P){return _(P),this.prependListener(E,w(this,E,P)),this},L.prototype.off=L.prototype.removeListener=function(E,P){var T,a,c,M,Z;if(_(P),void 0===(a=this._events))return this;if(void 0===(T=a[E]))return this;if(T===P||T.listener===P)0==--this._eventsCount?this._events=Object.create(null):(delete a[E],a.removeListener&&this.emit("removeListener",E,T.listener||P));else if("function"!=typeof T){for(c=-1,M=T.length-1;M>=0;M--)if(T[M]===P||T[M].listener===P){Z=T[M].listener,c=M;break}if(c<0)return this;0===c?T.shift():function(K,at){for(;at+1<K.length;at++)K[at]=K[at+1];K.pop()}(T,c),1===T.length&&(a[E]=T[0]),void 0!==a.removeListener&&this.emit("removeListener",E,Z||P)}return this},L.prototype.removeAllListeners=function(E){var P,T,a;if(void 0===(T=this._events))return this;if(void 0===T.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==T[E]&&(0==--this._eventsCount?this._events=Object.create(null):delete T[E]),this;if(0===arguments.length){var c,M=Object.keys(T);for(a=0;a<M.length;++a)"removeListener"!==(c=M[a])&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(P=T[E]))this.removeListener(E,P);else if(void 0!==P)for(a=P.length-1;a>=0;a--)this.removeListener(E,P[a]);return this},L.prototype.listeners=function(E){return b(this,E,!0)},L.prototype.rawListeners=function(E){return b(this,E,!1)},L.listenerCount=function(E,P){return"function"==typeof E.listenerCount?E.listenerCount(P):U.call(E,P)},L.prototype.listenerCount=U,L.prototype.eventNames=function(){return this._eventsCount>0?F(this._events):[]},"undefined"!=typeof Symbol&&($.prototype[Symbol.iterator]=function(){return this}),$.of=function(){var E=arguments,P=E.length,T=0;return new $(function(){return T>=P?{done:!0}:{done:!1,value:E[T++]}})},$.empty=function(){return new $(function(){return{done:!0}})},$.fromSequence=function(E){var P=0,T=E.length;return new $(function(){return P>=T?{done:!0}:{done:!1,value:E[P++]}})},$.is=function(E){return E instanceof $||"object"==typeof E&&null!==E&&"function"==typeof E.next};var tt=$,rt={};rt.ARRAY_BUFFER_SUPPORT="undefined"!=typeof ArrayBuffer,rt.SYMBOL_SUPPORT="undefined"!=typeof Symbol;var it=tt,gt=rt.ARRAY_BUFFER_SUPPORT,Ct=rt.SYMBOL_SUPPORT,lt=function(E){var T,P="string"==typeof(T=E)||Array.isArray(T)||gt&&ArrayBuffer.isView(T)?it.fromSequence(T):"object"!=typeof T||null===T?null:Ct&&"function"==typeof T[Symbol.iterator]?T[Symbol.iterator]():"function"==typeof T.next?T:null;if(!P)throw new Error("obliterator: target is not iterable nor a valid iterator.");return P},Et=lt,Ot=function(E,P){for(var T,a=arguments.length>1?P:1/0,c=a!==1/0?new Array(a):[],M=0,Z=Et(E);;){if(M===a)return c;if((T=Z.next()).done)return M!==P&&(c.length=M),c;c[M++]=T.value}},Pt=function(E){function P(T){var a;return(a=E.call(this)||this).name="GraphError",a.message=T,a}return N(P,E),P}(m(Error)),ht=function(E){function P(T){var a;return(a=E.call(this,T)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(v(a),P.prototype.constructor),a}return N(P,E),P}(Pt),ft=function(E){function P(T){var a;return(a=E.call(this,T)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(v(a),P.prototype.constructor),a}return N(P,E),P}(Pt),At=function(E){function P(T){var a;return(a=E.call(this,T)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(v(a),P.prototype.constructor),a}return N(P,E),P}(Pt);function Yt(E,P){this.key=E,this.attributes=P,this.clear()}function qt(E,P){this.key=E,this.attributes=P,this.clear()}function $t(E,P){this.key=E,this.attributes=P,this.clear()}function Xt(E,P,T,a,c){this.key=P,this.attributes=c,this.undirected=E,this.source=T,this.target=a}function Qt(E,P,T,a,c,M,Z){var K,at,xt,_t;if(a=""+a,0===T){if(!(K=E._nodes.get(a)))throw new ft("Graph.".concat(P,': could not find the "').concat(a,'" node in the graph.'));xt=c,_t=M}else if(3===T){if(!(at=E._edges.get(c=""+c)))throw new ft("Graph.".concat(P,': could not find the "').concat(c,'" edge in the graph.'));var yt=at.source.key,St=at.target.key;if(a===yt)K=at.target;else{if(a!==St)throw new ft("Graph.".concat(P,': the "').concat(a,'" node is not attached to the "').concat(c,'" edge (').concat(yt,", ").concat(St,")."));K=at.source}xt=M,_t=Z}else{if(!(at=E._edges.get(a)))throw new ft("Graph.".concat(P,': could not find the "').concat(a,'" edge in the graph.'));K=1===T?at.source:at.target,xt=c,_t=M}return[K,xt,_t]}Yt.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}},qt.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}},$t.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}},Xt.prototype.attach=function(){var E="out",P="in";this.undirected&&(E=P="undirected");var T=this.source.key,a=this.target.key;this.source[E][a]=this,this.undirected&&T===a||(this.target[P][T]=this)},Xt.prototype.attachMulti=function(){var E="out",P="in",T=this.source.key,a=this.target.key;this.undirected&&(E=P="undirected");var c=this.source[E],M=c[a];if(void 0===M)return c[a]=this,void(this.undirected&&T===a||(this.target[P][T]=this));M.previous=this,this.next=M,c[a]=this,this.target[P][T]=this},Xt.prototype.detach=function(){var E=this.source.key,T="out",a="in";this.undirected&&(T=a="undirected"),delete this.source[T][this.target.key],delete this.target[a][E]},Xt.prototype.detachMulti=function(){var E=this.source.key,P=this.target.key,T="out",a="in";this.undirected&&(T=a="undirected"),void 0===this.previous?void 0===this.next?(delete this.source[T][P],delete this.target[a][E]):(this.next.previous=void 0,this.source[T][P]=this.next,this.target[a][E]=this.next):(this.previous.next=this.next,void 0!==this.next&&(this.next.previous=this.previous))};var ue=[{name:function(E){return"get".concat(E,"Attribute")},attacher:function(E,P,T){E.prototype[P]=function(a,c,M){var Z=Qt(this,P,T,a,c,M);return Z[0].attributes[Z[1]]}}},{name:function(E){return"get".concat(E,"Attributes")},attacher:function(E,P,T){E.prototype[P]=function(a,c){return Qt(this,P,T,a,c)[0].attributes}}},{name:function(E){return"has".concat(E,"Attribute")},attacher:function(E,P,T){E.prototype[P]=function(a,c,M){var Z=Qt(this,P,T,a,c,M);return Z[0].attributes.hasOwnProperty(Z[1])}}},{name:function(E){return"set".concat(E,"Attribute")},attacher:function(E,P,T){E.prototype[P]=function(a,c,M,Z){var K=Qt(this,P,T,a,c,M,Z),at=K[0],xt=K[1];return at.attributes[xt]=K[2],this.emit("nodeAttributesUpdated",{key:at.key,type:"set",attributes:at.attributes,name:xt}),this}}},{name:function(E){return"update".concat(E,"Attribute")},attacher:function(E,P,T){E.prototype[P]=function(a,c,M,Z){var K=Qt(this,P,T,a,c,M,Z),at=K[0],xt=K[1],_t=K[2];if("function"!=typeof _t)throw new ht("Graph.".concat(P,": updater should be a function."));var yt=at.attributes,St=_t(yt[xt]);return yt[xt]=St,this.emit("nodeAttributesUpdated",{key:at.key,type:"set",attributes:at.attributes,name:xt}),this}}},{name:function(E){return"remove".concat(E,"Attribute")},attacher:function(E,P,T){E.prototype[P]=function(a,c,M){var Z=Qt(this,P,T,a,c,M),K=Z[0],at=Z[1];return delete K.attributes[at],this.emit("nodeAttributesUpdated",{key:K.key,type:"remove",attributes:K.attributes,name:at}),this}}},{name:function(E){return"replace".concat(E,"Attributes")},attacher:function(E,P,T){E.prototype[P]=function(a,c,M){var Z=Qt(this,P,T,a,c,M),K=Z[0],at=Z[1];if(!l(at))throw new ht("Graph.".concat(P,": provided attributes are not a plain object."));return K.attributes=at,this.emit("nodeAttributesUpdated",{key:K.key,type:"replace",attributes:K.attributes}),this}}},{name:function(E){return"merge".concat(E,"Attributes")},attacher:function(E,P,T){E.prototype[P]=function(a,c,M){var Z=Qt(this,P,T,a,c,M),K=Z[0],at=Z[1];if(!l(at))throw new ht("Graph.".concat(P,": provided attributes are not a plain object."));return C(K.attributes,at),this.emit("nodeAttributesUpdated",{key:K.key,type:"merge",attributes:K.attributes,data:at}),this}}},{name:function(E){return"update".concat(E,"Attributes")},attacher:function(E,P,T){E.prototype[P]=function(a,c,M){var Z=Qt(this,P,T,a,c,M),K=Z[0],at=Z[1];if("function"!=typeof at)throw new ht("Graph.".concat(P,": provided updater is not a function."));return K.attributes=at(K.attributes),this.emit("nodeAttributesUpdated",{key:K.key,type:"update",attributes:K.attributes}),this}}}],me=[{name:function(E){return"get".concat(E,"Attribute")},attacher:function(E,P,T){E.prototype[P]=function(a,c){var M;if("mixed"!==this.type&&"mixed"!==T&&T!==this.type)throw new At("Graph.".concat(P,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new At("Graph.".concat(P,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Z=""+a,K=""+c;if(c=arguments[2],!(M=u(this,Z,K,T)))throw new ft("Graph.".concat(P,': could not find an edge for the given path ("').concat(Z,'" - "').concat(K,'").'))}else{if("mixed"!==T)throw new At("Graph.".concat(P,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(M=this._edges.get(a=""+a)))throw new ft("Graph.".concat(P,': could not find the "').concat(a,'" edge in the graph.'))}return M.attributes[c]}}},{name:function(E){return"get".concat(E,"Attributes")},attacher:function(E,P,T){E.prototype[P]=function(a){var c;if("mixed"!==this.type&&"mixed"!==T&&T!==this.type)throw new At("Graph.".concat(P,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new At("Graph.".concat(P,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var M=""+a,Z=""+arguments[1];if(!(c=u(this,M,Z,T)))throw new ft("Graph.".concat(P,': could not find an edge for the given path ("').concat(M,'" - "').concat(Z,'").'))}else{if("mixed"!==T)throw new At("Graph.".concat(P,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(c=this._edges.get(a=""+a)))throw new ft("Graph.".concat(P,': could not find the "').concat(a,'" edge in the graph.'))}return c.attributes}}},{name:function(E){return"has".concat(E,"Attribute")},attacher:function(E,P,T){E.prototype[P]=function(a,c){var M;if("mixed"!==this.type&&"mixed"!==T&&T!==this.type)throw new At("Graph.".concat(P,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new At("Graph.".concat(P,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Z=""+a,K=""+c;if(c=arguments[2],!(M=u(this,Z,K,T)))throw new ft("Graph.".concat(P,': could not find an edge for the given path ("').concat(Z,'" - "').concat(K,'").'))}else{if("mixed"!==T)throw new At("Graph.".concat(P,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(M=this._edges.get(a=""+a)))throw new ft("Graph.".concat(P,': could not find the "').concat(a,'" edge in the graph.'))}return M.attributes.hasOwnProperty(c)}}},{name:function(E){return"set".concat(E,"Attribute")},attacher:function(E,P,T){E.prototype[P]=function(a,c,M){var Z;if("mixed"!==this.type&&"mixed"!==T&&T!==this.type)throw new At("Graph.".concat(P,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new At("Graph.".concat(P,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var K=""+a,at=""+c;if(c=arguments[2],M=arguments[3],!(Z=u(this,K,at,T)))throw new ft("Graph.".concat(P,': could not find an edge for the given path ("').concat(K,'" - "').concat(at,'").'))}else{if("mixed"!==T)throw new At("Graph.".concat(P,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(Z=this._edges.get(a=""+a)))throw new ft("Graph.".concat(P,': could not find the "').concat(a,'" edge in the graph.'))}return Z.attributes[c]=M,this.emit("edgeAttributesUpdated",{key:Z.key,type:"set",attributes:Z.attributes,name:c}),this}}},{name:function(E){return"update".concat(E,"Attribute")},attacher:function(E,P,T){E.prototype[P]=function(a,c,M){var Z;if("mixed"!==this.type&&"mixed"!==T&&T!==this.type)throw new At("Graph.".concat(P,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new At("Graph.".concat(P,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var K=""+a,at=""+c;if(c=arguments[2],M=arguments[3],!(Z=u(this,K,at,T)))throw new ft("Graph.".concat(P,': could not find an edge for the given path ("').concat(K,'" - "').concat(at,'").'))}else{if("mixed"!==T)throw new At("Graph.".concat(P,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(Z=this._edges.get(a=""+a)))throw new ft("Graph.".concat(P,': could not find the "').concat(a,'" edge in the graph.'))}if("function"!=typeof M)throw new ht("Graph.".concat(P,": updater should be a function."));return Z.attributes[c]=M(Z.attributes[c]),this.emit("edgeAttributesUpdated",{key:Z.key,type:"set",attributes:Z.attributes,name:c}),this}}},{name:function(E){return"remove".concat(E,"Attribute")},attacher:function(E,P,T){E.prototype[P]=function(a,c){var M;if("mixed"!==this.type&&"mixed"!==T&&T!==this.type)throw new At("Graph.".concat(P,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new At("Graph.".concat(P,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Z=""+a,K=""+c;if(c=arguments[2],!(M=u(this,Z,K,T)))throw new ft("Graph.".concat(P,': could not find an edge for the given path ("').concat(Z,'" - "').concat(K,'").'))}else{if("mixed"!==T)throw new At("Graph.".concat(P,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(M=this._edges.get(a=""+a)))throw new ft("Graph.".concat(P,': could not find the "').concat(a,'" edge in the graph.'))}return delete M.attributes[c],this.emit("edgeAttributesUpdated",{key:M.key,type:"remove",attributes:M.attributes,name:c}),this}}},{name:function(E){return"replace".concat(E,"Attributes")},attacher:function(E,P,T){E.prototype[P]=function(a,c){var M;if("mixed"!==this.type&&"mixed"!==T&&T!==this.type)throw new At("Graph.".concat(P,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new At("Graph.".concat(P,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Z=""+a,K=""+c;if(c=arguments[2],!(M=u(this,Z,K,T)))throw new ft("Graph.".concat(P,': could not find an edge for the given path ("').concat(Z,'" - "').concat(K,'").'))}else{if("mixed"!==T)throw new At("Graph.".concat(P,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(M=this._edges.get(a=""+a)))throw new ft("Graph.".concat(P,': could not find the "').concat(a,'" edge in the graph.'))}if(!l(c))throw new ht("Graph.".concat(P,": provided attributes are not a plain object."));return M.attributes=c,this.emit("edgeAttributesUpdated",{key:M.key,type:"replace",attributes:M.attributes}),this}}},{name:function(E){return"merge".concat(E,"Attributes")},attacher:function(E,P,T){E.prototype[P]=function(a,c){var M;if("mixed"!==this.type&&"mixed"!==T&&T!==this.type)throw new At("Graph.".concat(P,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new At("Graph.".concat(P,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Z=""+a,K=""+c;if(c=arguments[2],!(M=u(this,Z,K,T)))throw new ft("Graph.".concat(P,': could not find an edge for the given path ("').concat(Z,'" - "').concat(K,'").'))}else{if("mixed"!==T)throw new At("Graph.".concat(P,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(M=this._edges.get(a=""+a)))throw new ft("Graph.".concat(P,': could not find the "').concat(a,'" edge in the graph.'))}if(!l(c))throw new ht("Graph.".concat(P,": provided attributes are not a plain object."));return C(M.attributes,c),this.emit("edgeAttributesUpdated",{key:M.key,type:"merge",attributes:M.attributes,data:c}),this}}},{name:function(E){return"update".concat(E,"Attributes")},attacher:function(E,P,T){E.prototype[P]=function(a,c){var M;if("mixed"!==this.type&&"mixed"!==T&&T!==this.type)throw new At("Graph.".concat(P,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new At("Graph.".concat(P,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Z=""+a,K=""+c;if(c=arguments[2],!(M=u(this,Z,K,T)))throw new ft("Graph.".concat(P,': could not find an edge for the given path ("').concat(Z,'" - "').concat(K,'").'))}else{if("mixed"!==T)throw new At("Graph.".concat(P,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(M=this._edges.get(a=""+a)))throw new ft("Graph.".concat(P,': could not find the "').concat(a,'" edge in the graph.'))}if("function"!=typeof c)throw new ht("Graph.".concat(P,": provided updater is not a function."));return M.attributes=c(M.attributes),this.emit("edgeAttributesUpdated",{key:M.key,type:"update",attributes:M.attributes}),this}}}],ce=tt,Re=lt,re=function(){var E=arguments,P=null,T=-1;return new ce(function(){for(var a=null;;){if(null===P){if(++T>=E.length)return{done:!0};P=Re(E[T])}if(!0!==(a=P.next()).done)break;P=null}return a})},fn=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Un(E,P,T,a){var c=!1;for(var M in P)if(M!==a){var Z=P[M];if(c=T(Z.key,Z.attributes,Z.source.key,Z.target.key,Z.source.attributes,Z.target.attributes,Z.undirected),E&&c)return Z.key}}function Be(E,P,T,a){var c,M,Z,K=!1;for(var at in P)if(at!==a){c=P[at];do{if(K=T(c.key,c.attributes,(M=c.source).key,(Z=c.target).key,M.attributes,Z.attributes,c.undirected),E&&K)return c.key;c=c.next}while(void 0!==c)}}function Ze(E,P){var T,a=Object.keys(E),c=a.length,M=0;return new tt(function(){do{if(T)T=T.next;else{if(M>=c)return{done:!0};var Z=a[M++];if(Z===P){T=void 0;continue}T=E[Z]}}while(!T);return{done:!1,value:{edge:T.key,attributes:T.attributes,source:T.source.key,target:T.target.key,sourceAttributes:T.source.attributes,targetAttributes:T.target.attributes,undirected:T.undirected}}})}function dn(E,P,T,a){var c=P[T];if(c){var M=c.source,Z=c.target;return a(c.key,c.attributes,M.key,Z.key,M.attributes,Z.attributes,c.undirected)&&E?c.key:void 0}}function gn(E,P,T,a){var c=P[T];if(c){var M=!1;do{if(M=a(c.key,c.attributes,c.source.key,c.target.key,c.source.attributes,c.target.attributes,c.undirected),E&&M)return c.key;c=c.next}while(void 0!==c)}}function jn(E,P){var T=E[P];return void 0!==T.next?new tt(function(){if(!T)return{done:!0};var a={edge:T.key,attributes:T.attributes,source:T.source.key,target:T.target.key,sourceAttributes:T.source.attributes,targetAttributes:T.target.attributes,undirected:T.undirected};return T=T.next,{done:!1,value:a}}):tt.of({edge:T.key,attributes:T.attributes,source:T.source.key,target:T.target.key,sourceAttributes:T.source.attributes,targetAttributes:T.target.attributes,undirected:T.undirected})}function pn(E,P){if(0===E.size)return[];if("mixed"===P||P===E.type)return"function"==typeof Array.from?Array.from(E._edges.keys()):Ot(E._edges.keys(),E._edges.size);for(var T,a,M=new Array("undirected"===P?E.undirectedSize:E.directedSize),Z="undirected"===P,K=E._edges.values(),at=0;!0!==(T=K.next()).done;)(a=T.value).undirected===Z&&(M[at++]=a.key);return M}function Je(E,P,T,a){if(0!==P.size)for(var c,M,Z="mixed"!==T&&T!==P.type,K="undirected"===T,at=!1,xt=P._edges.values();!0!==(c=xt.next()).done;)if(M=c.value,!Z||M.undirected===K){var yt=M.key,Tt=M.source,Ut=M.target;if(at=a(yt,M.attributes,Tt.key,Ut.key,Tt.attributes,Ut.attributes,M.undirected),E&&at)return yt}}function Wn(E,P){if(0===E.size)return tt.empty();var T="mixed"!==P&&P!==E.type,a="undirected"===P,c=E._edges.values();return new tt(function(){for(var M,Z;;){if((M=c.next()).done)return M;if(Z=M.value,!T||Z.undirected===a)break}return{value:{edge:Z.key,attributes:Z.attributes,source:Z.source.key,target:Z.target.key,sourceAttributes:Z.source.attributes,targetAttributes:Z.target.attributes,undirected:Z.undirected},done:!1}})}function Oe(E,P,T,a,c,M){var Z,K=P?Be:Un;if("undirected"!==T&&("out"!==a&&(Z=K(E,c.in,M),E&&Z)||"in"!==a&&(Z=K(E,c.out,M,a?void 0:c.key),E&&Z))||"directed"!==T&&(Z=K(E,c.undirected,M),E&&Z))return Z}function dr(E,P,T,a){var c=[];return Oe(!1,E,P,T,a,function(M){c.push(M)}),c}function yi(E,P,T){var a=tt.empty();return"undirected"!==E&&("out"!==P&&void 0!==T.in&&(a=re(a,Ze(T.in))),"in"!==P&&void 0!==T.out&&(a=re(a,Ze(T.out,P?void 0:T.key)))),"directed"!==E&&void 0!==T.undirected&&(a=re(a,Ze(T.undirected))),a}function Bn(E,P,T,a,c,M,Z){var K,at=T?gn:dn;if("undirected"!==P&&(void 0!==c.in&&"out"!==a&&(K=at(E,c.in,M,Z),E&&K)||void 0!==c.out&&"in"!==a&&(a||c.key!==M)&&(K=at(E,c.out,M,Z),E&&K))||"directed"!==P&&void 0!==c.undirected&&(K=at(E,c.undirected,M,Z),E&&K))return K}function mi(E,P,T,a,c){var M=[];return Bn(!1,E,P,T,a,c,function(Z){M.push(Z)}),M}function wi(E,P,T,a){var c=tt.empty();return"undirected"!==E&&(void 0!==T.in&&"out"!==P&&a in T.in&&(c=re(c,jn(T.in,a))),void 0!==T.out&&"in"!==P&&a in T.out&&(P||T.key!==a)&&(c=re(c,jn(T.out,a)))),"directed"!==E&&void 0!==T.undirected&&a in T.undirected&&(c=re(c,jn(T.undirected,a))),c}var bi=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Pe(){this.A=null,this.B=null}function tn(E,P,T,a,c){for(var M in a){var Z=a[M],K=Z.source,xt=K===T?Z.target:K;if(!P||!P.has(xt.key)){var _t=c(xt.key,xt.attributes);if(E&&_t)return xt.key}}}function Zn(E,P,T,a,c){if("mixed"!==P){if("undirected"===P)return tn(E,null,a,a.undirected,c);if("string"==typeof T)return tn(E,null,a,a[T],c)}var M,Z=new Pe;if("undirected"!==P){if("out"!==T){if(M=tn(E,null,a,a.in,c),E&&M)return M;Z.wrap(a.in)}if("in"!==T){if(M=tn(E,Z,a,a.out,c),E&&M)return M;Z.wrap(a.out)}}if("directed"!==P&&(M=tn(E,Z,a,a.undirected,c),E&&M))return M}function He(E,P,T){var a=Object.keys(T),c=a.length,M=0;return new tt(function(){var Z=null;do{if(M>=c)return E&&E.wrap(T),{done:!0};var K=T[a[M++]],at=K.source;Z=at===P?K.target:at,E&&E.has(Z.key)&&(Z=null)}while(null===Z);return{done:!1,value:{neighbor:Z.key,attributes:Z.attributes}}})}function Ye(E,P,T,a,c){for(var M,Z,K,at,xt,_t,yt,St=a._nodes.values(),Tt=a.type;!0!==(M=St.next()).done;){var Ut=!1;if(Z=M.value,"undirected"!==Tt)for(K in at=Z.out){xt=at[K];do{if(Ut=!0,yt=c(Z.key,(_t=xt.target).key,Z.attributes,_t.attributes,xt.key,xt.attributes,xt.undirected),E&&yt)return xt;xt=xt.next}while(xt)}if("directed"!==Tt)for(K in at=Z.undirected)if(!(P&&Z.key>K)){xt=at[K];do{if((_t=xt.target).key!==K&&(_t=xt.source),Ut=!0,yt=c(Z.key,_t.key,Z.attributes,_t.attributes,xt.key,xt.attributes,xt.undirected),E&&yt)return xt;xt=xt.next}while(xt)}if(T&&!Ut&&(yt=c(Z.key,null,Z.attributes,null,null,null,null),E&&yt))return null}}function xi(E){if(!l(E))throw new ht('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in E))throw new ht("Graph.import: serialized node is missing its key.");if("attributes"in E&&(!l(E.attributes)||null===E.attributes))throw new ht("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Ai(E){if(!l(E))throw new ht('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in E))throw new ht("Graph.import: serialized edge is missing its source.");if(!("target"in E))throw new ht("Graph.import: serialized edge is missing its target.");if("attributes"in E&&(!l(E.attributes)||null===E.attributes))throw new ht("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in E&&"boolean"!=typeof E.undirected)throw new ht("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}Pe.prototype.wrap=function(E){null===this.A?this.A=E:null===this.B&&(this.B=E)},Pe.prototype.has=function(E){return null!==this.A&&E in this.A||null!==this.B&&E in this.B};var gr,pr=(gr=255&Math.floor(256*Math.random()),function(){return gr++}),Ei=new Set(["directed","undirected","mixed"]),vr=new Set(["domain","_events","_eventsCount","_maxListeners"]),yr={allowSelfLoops:!0,multi:!1,type:"mixed"};function Yn(E,P,T){var a=new E.NodeDataClass(P,T);return E._nodes.set(P,a),E.emit("nodeAdded",{key:P,attributes:T}),a}function mr(E,P,T,a,c,M,Z,K){if(!a&&"undirected"===E.type)throw new At("Graph.".concat(P,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(a&&"directed"===E.type)throw new At("Graph.".concat(P,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(K&&!l(K))throw new ht("Graph.".concat(P,': invalid attributes. Expecting an object but got "').concat(K,'"'));if(M=""+M,Z=""+Z,K=K||{},!E.allowSelfLoops&&M===Z)throw new At("Graph.".concat(P,': source & target are the same ("').concat(M,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var at=E._nodes.get(M),xt=E._nodes.get(Z);if(!at)throw new ft("Graph.".concat(P,': source node "').concat(M,'" not found.'));if(!xt)throw new ft("Graph.".concat(P,': target node "').concat(Z,'" not found.'));var _t={key:null,undirected:a,source:M,target:Z,attributes:K};if(T)c=E._edgeKeyGenerator();else if(E._edges.has(c=""+c))throw new At("Graph.".concat(P,': the "').concat(c,'" edge already exists in the graph.'));if(!E.multi&&(a?void 0!==at.undirected[Z]:void 0!==at.out[Z]))throw new At("Graph.".concat(P,': an edge linking "').concat(M,'" to "').concat(Z,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var yt=new Xt(a,c,at,xt,K);E._edges.set(c,yt);var St=M===Z;return a?(at.undirectedDegree++,xt.undirectedDegree++,St&&(at.undirectedLoops++,E._undirectedSelfLoopCount++)):(at.outDegree++,xt.inDegree++,St&&(at.directedLoops++,E._directedSelfLoopCount++)),E.multi?yt.attachMulti():yt.attach(),a?E._undirectedSize++:E._directedSize++,_t.key=c,E.emit("edgeAdded",_t),c}function Ci(E,P,T,a,c,M,Z,K,at){if(!a&&"undirected"===E.type)throw new At("Graph.".concat(P,": you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead."));if(a&&"directed"===E.type)throw new At("Graph.".concat(P,": you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead."));if(K)if(at){if("function"!=typeof K)throw new ht("Graph.".concat(P,': invalid updater function. Expecting a function but got "').concat(K,'"'))}else if(!l(K))throw new ht("Graph.".concat(P,': invalid attributes. Expecting an object but got "').concat(K,'"'));var xt;if(M=""+M,Z=""+Z,at&&(xt=K,K=void 0),!E.allowSelfLoops&&M===Z)throw new At("Graph.".concat(P,': source & target are the same ("').concat(M,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var _t,yt,St=E._nodes.get(M),Tt=E._nodes.get(Z);if(!T&&(_t=E._edges.get(c))){if(!(_t.source.key===M&&_t.target.key===Z||a&&_t.source.key===Z&&_t.target.key===M))throw new At("Graph.".concat(P,': inconsistency detected when attempting to merge the "').concat(c,'" edge with "').concat(M,'" source & "').concat(Z,'" target vs. ("').concat(_t.source.key,'", "').concat(_t.target.key,'").'));yt=_t}if(yt||E.multi||!St||(yt=a?St.undirected[Z]:St.out[Z]),yt){var Ut=[yt.key,!1,!1,!1];return(at?xt:K)?(at?(yt.attributes=xt(yt.attributes),E.emit("edgeAttributesUpdated",{type:"replace",key:yt.key,attributes:yt.attributes})):(C(yt.attributes,K),E.emit("edgeAttributesUpdated",{type:"merge",key:yt.key,attributes:yt.attributes,data:K})),Ut):Ut}K=K||{},at&&xt&&(K=xt(K));var te={key:null,undirected:a,source:M,target:Z,attributes:K};if(T)c=E._edgeKeyGenerator();else if(E._edges.has(c=""+c))throw new At("Graph.".concat(P,': the "').concat(c,'" edge already exists in the graph.'));var ae=!1,oe=!1;St||(St=Yn(E,M,{}),ae=!0,M===Z&&(Tt=St,oe=!0)),Tt||(Tt=Yn(E,Z,{}),oe=!0),_t=new Xt(a,c,St,Tt,K),E._edges.set(c,_t);var we=M===Z;return a?(St.undirectedDegree++,Tt.undirectedDegree++,we&&(St.undirectedLoops++,E._undirectedSelfLoopCount++)):(St.outDegree++,Tt.inDegree++,we&&(St.directedLoops++,E._directedSelfLoopCount++)),E.multi?_t.attachMulti():_t.attach(),a?E._undirectedSize++:E._directedSize++,te.key=c,E.emit("edgeAdded",te),[c,!0,ae,oe]}function Ve(E,P){E._edges.delete(P.key);var T=P.source,a=P.target,c=P.attributes,M=P.undirected,Z=T===a;M?(T.undirectedDegree--,a.undirectedDegree--,Z&&(T.undirectedLoops--,E._undirectedSelfLoopCount--)):(T.outDegree--,a.inDegree--,Z&&(T.directedLoops--,E._directedSelfLoopCount--)),E.multi?P.detachMulti():P.detach(),M?E._undirectedSize--:E._directedSize--,E.emit("edgeDropped",{key:P.key,attributes:c,source:T.key,target:a.key,undirected:M})}var E,Jt=function(E){function P(a){var c;if(c=E.call(this)||this,"boolean"!=typeof(a=C({},yr,a)).multi)throw new ht("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(a.multi,'".'));if(!Ei.has(a.type))throw new ht('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(a.type,'".'));if("boolean"!=typeof a.allowSelfLoops)throw new ht("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(a.allowSelfLoops,'".'));var M="mixed"===a.type?Yt:"directed"===a.type?qt:$t;f(v(c),"NodeDataClass",M);var Z="geid_"+pr()+"_",K=0;return f(v(c),"_attributes",{}),f(v(c),"_nodes",new Map),f(v(c),"_edges",new Map),f(v(c),"_directedSize",0),f(v(c),"_undirectedSize",0),f(v(c),"_directedSelfLoopCount",0),f(v(c),"_undirectedSelfLoopCount",0),f(v(c),"_edgeKeyGenerator",function(){var at;do{at=Z+K++}while(c._edges.has(at));return at}),f(v(c),"_options",a),vr.forEach(function(at){return f(v(c),at,c[at])}),d(v(c),"order",function(){return c._nodes.size}),d(v(c),"size",function(){return c._edges.size}),d(v(c),"directedSize",function(){return c._directedSize}),d(v(c),"undirectedSize",function(){return c._undirectedSize}),d(v(c),"selfLoopCount",function(){return c._directedSelfLoopCount+c._undirectedSelfLoopCount}),d(v(c),"directedSelfLoopCount",function(){return c._directedSelfLoopCount}),d(v(c),"undirectedSelfLoopCount",function(){return c._undirectedSelfLoopCount}),d(v(c),"multi",c._options.multi),d(v(c),"type",c._options.type),d(v(c),"allowSelfLoops",c._options.allowSelfLoops),d(v(c),"implementation",function(){return"graphology"}),c}N(P,E);var T=P.prototype;return T._resetInstanceCounters=function(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0},T.hasNode=function(a){return this._nodes.has(""+a)},T.hasDirectedEdge=function(a,c){if("undirected"===this.type)return!1;if(1===arguments.length){var Z=this._edges.get(""+a);return!!Z&&!Z.undirected}if(2===arguments.length){c=""+c;var K=this._nodes.get(a=""+a);return!!K&&K.out.hasOwnProperty(c)}throw new ht("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},T.hasUndirectedEdge=function(a,c){if("directed"===this.type)return!1;if(1===arguments.length){var Z=this._edges.get(""+a);return!!Z&&Z.undirected}if(2===arguments.length){c=""+c;var K=this._nodes.get(a=""+a);return!!K&&K.undirected.hasOwnProperty(c)}throw new ht("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},T.hasEdge=function(a,c){if(1===arguments.length)return this._edges.has(""+a);if(2===arguments.length){c=""+c;var Z=this._nodes.get(a=""+a);return!!Z&&(void 0!==Z.out&&Z.out.hasOwnProperty(c)||void 0!==Z.undirected&&Z.undirected.hasOwnProperty(c))}throw new ht("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},T.directedEdge=function(a,c){if("undirected"!==this.type){if(a=""+a,c=""+c,this.multi)throw new At("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var M=this._nodes.get(a);if(!M)throw new ft('Graph.directedEdge: could not find the "'.concat(a,'" source node in the graph.'));if(!this._nodes.has(c))throw new ft('Graph.directedEdge: could not find the "'.concat(c,'" target node in the graph.'));var Z=M.out&&M.out[c]||void 0;return Z?Z.key:void 0}},T.undirectedEdge=function(a,c){if("directed"!==this.type){if(a=""+a,c=""+c,this.multi)throw new At("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var M=this._nodes.get(a);if(!M)throw new ft('Graph.undirectedEdge: could not find the "'.concat(a,'" source node in the graph.'));if(!this._nodes.has(c))throw new ft('Graph.undirectedEdge: could not find the "'.concat(c,'" target node in the graph.'));var Z=M.undirected&&M.undirected[c]||void 0;return Z?Z.key:void 0}},T.edge=function(a,c){if(this.multi)throw new At("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");c=""+c;var M=this._nodes.get(a=""+a);if(!M)throw new ft('Graph.edge: could not find the "'.concat(a,'" source node in the graph.'));if(!this._nodes.has(c))throw new ft('Graph.edge: could not find the "'.concat(c,'" target node in the graph.'));var Z=M.out&&M.out[c]||M.undirected&&M.undirected[c]||void 0;if(Z)return Z.key},T.areDirectedNeighbors=function(a,c){c=""+c;var M=this._nodes.get(a=""+a);if(!M)throw new ft('Graph.areDirectedNeighbors: could not find the "'.concat(a,'" node in the graph.'));return"undirected"!==this.type&&(c in M.in||c in M.out)},T.areOutNeighbors=function(a,c){c=""+c;var M=this._nodes.get(a=""+a);if(!M)throw new ft('Graph.areOutNeighbors: could not find the "'.concat(a,'" node in the graph.'));return"undirected"!==this.type&&c in M.out},T.areInNeighbors=function(a,c){c=""+c;var M=this._nodes.get(a=""+a);if(!M)throw new ft('Graph.areInNeighbors: could not find the "'.concat(a,'" node in the graph.'));return"undirected"!==this.type&&c in M.in},T.areUndirectedNeighbors=function(a,c){c=""+c;var M=this._nodes.get(a=""+a);if(!M)throw new ft('Graph.areUndirectedNeighbors: could not find the "'.concat(a,'" node in the graph.'));return"directed"!==this.type&&c in M.undirected},T.areNeighbors=function(a,c){c=""+c;var M=this._nodes.get(a=""+a);if(!M)throw new ft('Graph.areNeighbors: could not find the "'.concat(a,'" node in the graph.'));return"undirected"!==this.type&&(c in M.in||c in M.out)||"directed"!==this.type&&c in M.undirected},T.areInboundNeighbors=function(a,c){c=""+c;var M=this._nodes.get(a=""+a);if(!M)throw new ft('Graph.areInboundNeighbors: could not find the "'.concat(a,'" node in the graph.'));return"undirected"!==this.type&&c in M.in||"directed"!==this.type&&c in M.undirected},T.areOutboundNeighbors=function(a,c){c=""+c;var M=this._nodes.get(a=""+a);if(!M)throw new ft('Graph.areOutboundNeighbors: could not find the "'.concat(a,'" node in the graph.'));return"undirected"!==this.type&&c in M.out||"directed"!==this.type&&c in M.undirected},T.inDegree=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new ft('Graph.inDegree: could not find the "'.concat(a,'" node in the graph.'));return"undirected"===this.type?0:c.inDegree},T.outDegree=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new ft('Graph.outDegree: could not find the "'.concat(a,'" node in the graph.'));return"undirected"===this.type?0:c.outDegree},T.directedDegree=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new ft('Graph.directedDegree: could not find the "'.concat(a,'" node in the graph.'));return"undirected"===this.type?0:c.inDegree+c.outDegree},T.undirectedDegree=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new ft('Graph.undirectedDegree: could not find the "'.concat(a,'" node in the graph.'));return"directed"===this.type?0:c.undirectedDegree},T.inboundDegree=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new ft('Graph.inboundDegree: could not find the "'.concat(a,'" node in the graph.'));var M=0;return"directed"!==this.type&&(M+=c.undirectedDegree),"undirected"!==this.type&&(M+=c.inDegree),M},T.outboundDegree=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new ft('Graph.outboundDegree: could not find the "'.concat(a,'" node in the graph.'));var M=0;return"directed"!==this.type&&(M+=c.undirectedDegree),"undirected"!==this.type&&(M+=c.outDegree),M},T.degree=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new ft('Graph.degree: could not find the "'.concat(a,'" node in the graph.'));var M=0;return"directed"!==this.type&&(M+=c.undirectedDegree),"undirected"!==this.type&&(M+=c.inDegree+c.outDegree),M},T.inDegreeWithoutSelfLoops=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new ft('Graph.inDegreeWithoutSelfLoops: could not find the "'.concat(a,'" node in the graph.'));return"undirected"===this.type?0:c.inDegree-c.directedLoops},T.outDegreeWithoutSelfLoops=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new ft('Graph.outDegreeWithoutSelfLoops: could not find the "'.concat(a,'" node in the graph.'));return"undirected"===this.type?0:c.outDegree-c.directedLoops},T.directedDegreeWithoutSelfLoops=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new ft('Graph.directedDegreeWithoutSelfLoops: could not find the "'.concat(a,'" node in the graph.'));return"undirected"===this.type?0:c.inDegree+c.outDegree-2*c.directedLoops},T.undirectedDegreeWithoutSelfLoops=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new ft('Graph.undirectedDegreeWithoutSelfLoops: could not find the "'.concat(a,'" node in the graph.'));return"directed"===this.type?0:c.undirectedDegree-2*c.undirectedLoops},T.inboundDegreeWithoutSelfLoops=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new ft('Graph.inboundDegreeWithoutSelfLoops: could not find the "'.concat(a,'" node in the graph.'));var M=0,Z=0;return"directed"!==this.type&&(M+=c.undirectedDegree,Z+=2*c.undirectedLoops),"undirected"!==this.type&&(M+=c.inDegree,Z+=c.directedLoops),M-Z},T.outboundDegreeWithoutSelfLoops=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new ft('Graph.outboundDegreeWithoutSelfLoops: could not find the "'.concat(a,'" node in the graph.'));var M=0,Z=0;return"directed"!==this.type&&(M+=c.undirectedDegree,Z+=2*c.undirectedLoops),"undirected"!==this.type&&(M+=c.outDegree,Z+=c.directedLoops),M-Z},T.degreeWithoutSelfLoops=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new ft('Graph.degreeWithoutSelfLoops: could not find the "'.concat(a,'" node in the graph.'));var M=0,Z=0;return"directed"!==this.type&&(M+=c.undirectedDegree,Z+=2*c.undirectedLoops),"undirected"!==this.type&&(M+=c.inDegree+c.outDegree,Z+=2*c.directedLoops),M-Z},T.source=function(a){var c=this._edges.get(a=""+a);if(!c)throw new ft('Graph.source: could not find the "'.concat(a,'" edge in the graph.'));return c.source.key},T.target=function(a){var c=this._edges.get(a=""+a);if(!c)throw new ft('Graph.target: could not find the "'.concat(a,'" edge in the graph.'));return c.target.key},T.extremities=function(a){var c=this._edges.get(a=""+a);if(!c)throw new ft('Graph.extremities: could not find the "'.concat(a,'" edge in the graph.'));return[c.source.key,c.target.key]},T.opposite=function(a,c){a=""+a;var M=this._edges.get(c=""+c);if(!M)throw new ft('Graph.opposite: could not find the "'.concat(c,'" edge in the graph.'));var Z=M.source.key,K=M.target.key;if(a===Z)return K;if(a===K)return Z;throw new ft('Graph.opposite: the "'.concat(a,'" node is not attached to the "').concat(c,'" edge (').concat(Z,", ").concat(K,")."))},T.hasExtremity=function(a,c){c=""+c;var M=this._edges.get(a=""+a);if(!M)throw new ft('Graph.hasExtremity: could not find the "'.concat(a,'" edge in the graph.'));return M.source.key===c||M.target.key===c},T.isUndirected=function(a){var c=this._edges.get(a=""+a);if(!c)throw new ft('Graph.isUndirected: could not find the "'.concat(a,'" edge in the graph.'));return c.undirected},T.isDirected=function(a){var c=this._edges.get(a=""+a);if(!c)throw new ft('Graph.isDirected: could not find the "'.concat(a,'" edge in the graph.'));return!c.undirected},T.isSelfLoop=function(a){var c=this._edges.get(a=""+a);if(!c)throw new ft('Graph.isSelfLoop: could not find the "'.concat(a,'" edge in the graph.'));return c.source===c.target},T.addNode=function(a,c){return function(Z,K,at){if(at&&!l(at))throw new ht('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(at,'"'));if(at=at||{},Z._nodes.has(K=""+K))throw new At('Graph.addNode: the "'.concat(K,'" node already exist in the graph.'));var xt=new Z.NodeDataClass(K,at);return Z._nodes.set(K,xt),Z.emit("nodeAdded",{key:K,attributes:at}),xt}(this,a,c).key},T.mergeNode=function(a,c){if(c&&!l(c))throw new ht('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(c,'"'));c=c||{};var M=this._nodes.get(a=""+a);return M?(c&&(C(M.attributes,c),this.emit("nodeAttributesUpdated",{type:"merge",key:a,attributes:M.attributes,data:c})),[a,!1]):(M=new this.NodeDataClass(a,c),this._nodes.set(a,M),this.emit("nodeAdded",{key:a,attributes:c}),[a,!0])},T.updateNode=function(a,c){if(c&&"function"!=typeof c)throw new ht('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(c,'"'));var M=this._nodes.get(a=""+a);if(M)return c&&(M.attributes=c(M.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:a,attributes:M.attributes})),[a,!1];var K=c?c({}):{};return M=new this.NodeDataClass(a,K),this._nodes.set(a,M),this.emit("nodeAdded",{key:a,attributes:K}),[a,!0]},T.dropNode=function(a){var c,M=this._nodes.get(a=""+a);if(!M)throw new ft('Graph.dropNode: could not find the "'.concat(a,'" node in the graph.'));if("undirected"!==this.type){for(var Z in M.out){c=M.out[Z];do{Ve(this,c),c=c.next}while(c)}for(var K in M.in){c=M.in[K];do{Ve(this,c),c=c.next}while(c)}}if("directed"!==this.type)for(var at in M.undirected){c=M.undirected[at];do{Ve(this,c),c=c.next}while(c)}this._nodes.delete(a),this.emit("nodeDropped",{key:a,attributes:M.attributes})},T.dropEdge=function(a){var c;if(arguments.length>1){var M=""+arguments[0],Z=""+arguments[1];if(!(c=u(this,M,Z,this.type)))throw new ft('Graph.dropEdge: could not find the "'.concat(M,'" -> "').concat(Z,'" edge in the graph.'))}else if(!(c=this._edges.get(a=""+a)))throw new ft('Graph.dropEdge: could not find the "'.concat(a,'" edge in the graph.'));return Ve(this,c),this},T.dropDirectedEdge=function(a,c){if(arguments.length<2)throw new At("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new At("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var M=u(this,a=""+a,c=""+c,"directed");if(!M)throw new ft('Graph.dropDirectedEdge: could not find a "'.concat(a,'" -> "').concat(c,'" edge in the graph.'));return Ve(this,M),this},T.dropUndirectedEdge=function(a,c){if(arguments.length<2)throw new At("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new At("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var M=u(this,a,c,"undirected");if(!M)throw new ft('Graph.dropUndirectedEdge: could not find a "'.concat(a,'" -> "').concat(c,'" edge in the graph.'));return Ve(this,M),this},T.clear=function(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")},T.clearEdges=function(){for(var a,c=this._nodes.values();!0!==(a=c.next()).done;)a.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")},T.getAttribute=function(a){return this._attributes[a]},T.getAttributes=function(){return this._attributes},T.hasAttribute=function(a){return this._attributes.hasOwnProperty(a)},T.setAttribute=function(a,c){return this._attributes[a]=c,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:a}),this},T.updateAttribute=function(a,c){if("function"!=typeof c)throw new ht("Graph.updateAttribute: updater should be a function.");return this._attributes[a]=c(this._attributes[a]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:a}),this},T.removeAttribute=function(a){return delete this._attributes[a],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:a}),this},T.replaceAttributes=function(a){if(!l(a))throw new ht("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=a,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},T.mergeAttributes=function(a){if(!l(a))throw new ht("Graph.mergeAttributes: provided attributes are not a plain object.");return C(this._attributes,a),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:a}),this},T.updateAttributes=function(a){if("function"!=typeof a)throw new ht("Graph.updateAttributes: provided updater is not a function.");return this._attributes=a(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this},T.updateEachNodeAttributes=function(a,c){if("function"!=typeof a)throw new ht("Graph.updateEachNodeAttributes: expecting an updater function.");if(c&&!h(c))throw new ht("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var M,Z,K=this._nodes.values();!0!==(M=K.next()).done;)(Z=M.value).attributes=a(Z.key,Z.attributes);this.emit("eachNodeAttributesUpdated",{hints:c||null})},T.updateEachEdgeAttributes=function(a,c){if("function"!=typeof a)throw new ht("Graph.updateEachEdgeAttributes: expecting an updater function.");if(c&&!h(c))throw new ht("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var M,Z,K,at,xt=this._edges.values();!0!==(M=xt.next()).done;)K=(Z=M.value).source,Z.attributes=a(Z.key,Z.attributes,K.key,(at=Z.target).key,K.attributes,at.attributes,Z.undirected);this.emit("eachEdgeAttributesUpdated",{hints:c||null})},T.forEachAdjacencyEntry=function(a){if("function"!=typeof a)throw new ht("Graph.forEachAdjacencyEntry: expecting a callback.");Ye(!1,!1,!1,this,a)},T.forEachAdjacencyEntryWithOrphans=function(a){if("function"!=typeof a)throw new ht("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Ye(!1,!1,!0,this,a)},T.forEachAssymetricAdjacencyEntry=function(a){if("function"!=typeof a)throw new ht("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Ye(!1,!0,!1,this,a)},T.forEachAssymetricAdjacencyEntryWithOrphans=function(a){if("function"!=typeof a)throw new ht("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Ye(!1,!0,!0,this,a)},T.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):Ot(this._nodes.keys(),this._nodes.size)},T.forEachNode=function(a){if("function"!=typeof a)throw new ht("Graph.forEachNode: expecting a callback.");for(var c,M,Z=this._nodes.values();!0!==(c=Z.next()).done;)a((M=c.value).key,M.attributes)},T.findNode=function(a){if("function"!=typeof a)throw new ht("Graph.findNode: expecting a callback.");for(var c,M,Z=this._nodes.values();!0!==(c=Z.next()).done;)if(a((M=c.value).key,M.attributes))return M.key},T.mapNodes=function(a){if("function"!=typeof a)throw new ht("Graph.mapNode: expecting a callback.");for(var c,M,Z=this._nodes.values(),K=new Array(this.order),at=0;!0!==(c=Z.next()).done;)K[at++]=a((M=c.value).key,M.attributes);return K},T.someNode=function(a){if("function"!=typeof a)throw new ht("Graph.someNode: expecting a callback.");for(var c,M,Z=this._nodes.values();!0!==(c=Z.next()).done;)if(a((M=c.value).key,M.attributes))return!0;return!1},T.everyNode=function(a){if("function"!=typeof a)throw new ht("Graph.everyNode: expecting a callback.");for(var c,M,Z=this._nodes.values();!0!==(c=Z.next()).done;)if(!a((M=c.value).key,M.attributes))return!1;return!0},T.filterNodes=function(a){if("function"!=typeof a)throw new ht("Graph.filterNodes: expecting a callback.");for(var c,M,Z=this._nodes.values(),K=[];!0!==(c=Z.next()).done;)a((M=c.value).key,M.attributes)&&K.push(M.key);return K},T.reduceNodes=function(a,c){if("function"!=typeof a)throw new ht("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new ht("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");for(var M,Z,K=c,at=this._nodes.values();!0!==(M=at.next()).done;)K=a(K,(Z=M.value).key,Z.attributes);return K},T.nodeEntries=function(){var a=this._nodes.values();return new tt(function(){var c=a.next();if(c.done)return c;var M=c.value;return{value:{node:M.key,attributes:M.attributes},done:!1}})},T.export=function(){var a=this,c=new Array(this._nodes.size),M=0;this._nodes.forEach(function(K,at){var _t,yt;c[M++]=(yt={key:at},p((_t=K).attributes)||(yt.attributes=C({},_t.attributes)),yt)});var Z=new Array(this._edges.size);return M=0,this._edges.forEach(function(K,at){var xt,yt,St;Z[M++]=(xt=a.type,St={key:at,source:(yt=K).source.key,target:yt.target.key},p(yt.attributes)||(St.attributes=C({},yt.attributes)),"mixed"===xt&&yt.undirected&&(St.undirected=!0),St)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:c,edges:Z}},T.import=function(a){var c,M,Z,K,at,xt=this,_t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(a instanceof P)return a.forEachNode(function(fe,de){_t?xt.mergeNode(fe,de):xt.addNode(fe,de)}),a.forEachEdge(function(fe,de,vn,yn,_o,xo,Er){_t?Er?xt.mergeUndirectedEdgeWithKey(fe,vn,yn,de):xt.mergeDirectedEdgeWithKey(fe,vn,yn,de):Er?xt.addUndirectedEdgeWithKey(fe,vn,yn,de):xt.addDirectedEdgeWithKey(fe,vn,yn,de)}),this;if(!l(a))throw new ht("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(a.attributes){if(!l(a.attributes))throw new ht("Graph.import: invalid attributes. Expecting a plain object.");_t?this.mergeAttributes(a.attributes):this.replaceAttributes(a.attributes)}if(a.nodes){if(Z=a.nodes,!Array.isArray(Z))throw new ht("Graph.import: invalid nodes. Expecting an array.");for(c=0,M=Z.length;c<M;c++){xi(K=Z[c]);var St=K.key,Tt=K.attributes;_t?this.mergeNode(St,Tt):this.addNode(St,Tt)}}if(a.edges){var Ut=!1;if("undirected"===this.type&&(Ut=!0),Z=a.edges,!Array.isArray(Z))throw new ht("Graph.import: invalid edges. Expecting an array.");for(c=0,M=Z.length;c<M;c++){Ai(at=Z[c]);var te=at.source,ae=at.target,oe=at.attributes,we=at.undirected,le=void 0===we?Ut:we;"key"in at?(_t?le?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:le?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,at.key,te,ae,oe):(_t?le?this.mergeUndirectedEdge:this.mergeDirectedEdge:le?this.addUndirectedEdge:this.addDirectedEdge).call(this,te,ae,oe)}}return this},T.nullCopy=function(a){var c=new P(C({},this._options,a));return c.replaceAttributes(C({},this.getAttributes())),c},T.emptyCopy=function(a){var c=this.nullCopy(a);return this._nodes.forEach(function(M,Z){var K=C({},M.attributes);M=new c.NodeDataClass(Z,K),c._nodes.set(Z,M)}),c},T.copy=function(a){if("string"==typeof(a=a||{}).type&&a.type!==this.type&&"mixed"!==a.type)throw new At('Graph.copy: cannot create an incompatible copy from "'.concat(this.type,'" type to "').concat(a.type,'" because this would mean losing information about the current graph.'));if("boolean"==typeof a.multi&&a.multi!==this.multi&&!0!==a.multi)throw new At("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if("boolean"==typeof a.allowSelfLoops&&a.allowSelfLoops!==this.allowSelfLoops&&!0!==a.allowSelfLoops)throw new At("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");for(var c,M,Z=this.emptyCopy(a),K=this._edges.values();!0!==(c=K.next()).done;)mr(Z,"copy",!1,(M=c.value).undirected,M.key,M.source.key,M.target.key,C({},M.attributes));return Z},T.toJSON=function(){return this.export()},T.toString=function(){return"[object Graph]"},T.inspect=function(){var a=this,c={};this._nodes.forEach(function(xt,_t){c[_t]=xt.attributes});var M={},Z={};this._edges.forEach(function(xt,_t){var yt,St=xt.undirected?"--":"->",Tt="",Ut=xt.source.key,Kt=xt.target.key;xt.undirected&&Ut>Kt&&(yt=Ut,Ut=Kt,Kt=yt);var te="(".concat(Ut,")").concat(St,"(").concat(Kt,")");_t.startsWith("geid_")?a.multi&&(void 0===Z[te]?Z[te]=0:Z[te]++,Tt+="".concat(Z[te],". ")):Tt+="[".concat(_t,"]: "),M[Tt+=te]=xt.attributes});var K={};for(var at in this)this.hasOwnProperty(at)&&!vr.has(at)&&"function"!=typeof this[at]&&"symbol"!==D(at)&&(K[at]=this[at]);return K.attributes=this._attributes,K.nodes=c,K.edges=M,f(K,"constructor",this.constructor),K},P}(R.exports.EventEmitter);"undefined"!=typeof Symbol&&(Jt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Jt.prototype.inspect),[{name:function(E){return"".concat(E,"Edge")},generateKey:!0},{name:function(E){return"".concat(E,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(E){return"".concat(E,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(E){return"".concat(E,"EdgeWithKey")}},{name:function(E){return"".concat(E,"DirectedEdgeWithKey")},type:"directed"},{name:function(E){return"".concat(E,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(E){["add","merge","update"].forEach(function(P){var T=E.name(P),a="add"===P?mr:Ci;Jt.prototype[T]=E.generateKey?function(c,M,Z){return a(this,T,!0,"undirected"===(E.type||this.type),null,c,M,Z,"update"===P)}:function(c,M,Z,K){return a(this,T,!1,"undirected"===(E.type||this.type),c,M,Z,K,"update"===P)}})}),E=Jt,ue.forEach(function(P){var T=P.name,a=P.attacher;a(E,T("Node"),0),a(E,T("Source"),1),a(E,T("Target"),2),a(E,T("Opposite"),3)}),function(E){me.forEach(function(P){var T=P.name,a=P.attacher;a(E,T("Edge"),"mixed"),a(E,T("DirectedEdge"),"directed"),a(E,T("UndirectedEdge"),"undirected")})}(Jt),function(E){fn.forEach(function(P){var a,c,M,Z;M=(a=P).type,Z=a.direction,E.prototype[c=a.name]=function(K,at){if("mixed"!==M&&"mixed"!==this.type&&M!==this.type)return[];if(!arguments.length)return pn(this,M);if(1===arguments.length){var xt=this._nodes.get(K=""+K);if(void 0===xt)throw new ft("Graph.".concat(c,': could not find the "').concat(K,'" node in the graph.'));return dr(this.multi,"mixed"===M?this.type:M,Z,xt)}if(2===arguments.length){at=""+at;var _t=this._nodes.get(K=""+K);if(!_t)throw new ft("Graph.".concat(c,':  could not find the "').concat(K,'" source node in the graph.'));if(!this._nodes.has(at))throw new ft("Graph.".concat(c,':  could not find the "').concat(at,'" target node in the graph.'));return mi(M,this.multi,Z,_t,at)}throw new ht("Graph.".concat(c,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(T,a){var c=a.name,M=a.type,Z=a.direction,K="forEach"+c[0].toUpperCase()+c.slice(1,-1);T.prototype[K]=function(yt,St,Tt){if("mixed"===M||"mixed"===this.type||M===this.type){if(1===arguments.length)return Je(!1,this,M,Tt=yt);if(2===arguments.length){Tt=St;var Ut=this._nodes.get(yt=""+yt);if(void 0===Ut)throw new ft("Graph.".concat(K,': could not find the "').concat(yt,'" node in the graph.'));return Oe(!1,this.multi,"mixed"===M?this.type:M,Z,Ut,Tt)}if(3===arguments.length){St=""+St;var Kt=this._nodes.get(yt=""+yt);if(!Kt)throw new ft("Graph.".concat(K,':  could not find the "').concat(yt,'" source node in the graph.'));if(!this._nodes.has(St))throw new ft("Graph.".concat(K,':  could not find the "').concat(St,'" target node in the graph.'));return Bn(!1,M,this.multi,Z,Kt,St,Tt)}throw new ht("Graph.".concat(K,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}};var at="map"+c[0].toUpperCase()+c.slice(1);T.prototype[at]=function(){var yt,St=Array.prototype.slice.call(arguments),Tt=St.pop();if(0===St.length){var Ut=0;"directed"!==M&&(Ut+=this.undirectedSize),"undirected"!==M&&(Ut+=this.directedSize),yt=new Array(Ut);var Kt=0;St.push(function(te,ae,oe,we,le,fe,de){yt[Kt++]=Tt(te,ae,oe,we,le,fe,de)})}else yt=[],St.push(function(te,ae,oe,we,le,fe,de){yt.push(Tt(te,ae,oe,we,le,fe,de))});return this[K].apply(this,St),yt};var xt="filter"+c[0].toUpperCase()+c.slice(1);T.prototype[xt]=function(){var yt=Array.prototype.slice.call(arguments),St=yt.pop(),Tt=[];return yt.push(function(Ut,Kt,te,ae,oe,we,le){St(Ut,Kt,te,ae,oe,we,le)&&Tt.push(Ut)}),this[K].apply(this,yt),Tt};var _t="reduce"+c[0].toUpperCase()+c.slice(1);T.prototype[_t]=function(){var yt,St,Tt=Array.prototype.slice.call(arguments);if(Tt.length<2||Tt.length>4)throw new ht("Graph.".concat(_t,": invalid number of arguments (expecting 2, 3 or 4 and got ").concat(Tt.length,")."));if("function"==typeof Tt[Tt.length-1]&&"function"!=typeof Tt[Tt.length-2])throw new ht("Graph.".concat(_t,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));2===Tt.length?(yt=Tt[0],St=Tt[1],Tt=[]):3===Tt.length?(yt=Tt[1],St=Tt[2],Tt=[Tt[0]]):4===Tt.length&&(yt=Tt[2],St=Tt[3],Tt=[Tt[0],Tt[1]]);var Ut=St;return Tt.push(function(Kt,te,ae,oe,we,le,fe){Ut=yt(Ut,Kt,te,ae,oe,we,le,fe)}),this[K].apply(this,Tt),Ut}}(E,P),function(T,a){var c=a.name,M=a.type,Z=a.direction,K="find"+c[0].toUpperCase()+c.slice(1,-1);T.prototype[K]=function(_t,yt,St){if("mixed"!==M&&"mixed"!==this.type&&M!==this.type)return!1;if(1===arguments.length)return Je(!0,this,M,St=_t);if(2===arguments.length){St=yt;var Tt=this._nodes.get(_t=""+_t);if(void 0===Tt)throw new ft("Graph.".concat(K,': could not find the "').concat(_t,'" node in the graph.'));return Oe(!0,this.multi,"mixed"===M?this.type:M,Z,Tt,St)}if(3===arguments.length){yt=""+yt;var Ut=this._nodes.get(_t=""+_t);if(!Ut)throw new ft("Graph.".concat(K,':  could not find the "').concat(_t,'" source node in the graph.'));if(!this._nodes.has(yt))throw new ft("Graph.".concat(K,':  could not find the "').concat(yt,'" target node in the graph.'));return Bn(!0,M,this.multi,Z,Ut,yt,St)}throw new ht("Graph.".concat(K,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))};var at="some"+c[0].toUpperCase()+c.slice(1,-1);T.prototype[at]=function(){var _t=Array.prototype.slice.call(arguments),yt=_t.pop();return _t.push(function(St,Tt,Ut,Kt,te,ae,oe){return yt(St,Tt,Ut,Kt,te,ae,oe)}),!!this[K].apply(this,_t)};var xt="every"+c[0].toUpperCase()+c.slice(1,-1);T.prototype[xt]=function(){var _t=Array.prototype.slice.call(arguments),yt=_t.pop();return _t.push(function(St,Tt,Ut,Kt,te,ae,oe){return!yt(St,Tt,Ut,Kt,te,ae,oe)}),!this[K].apply(this,_t)}}(E,P),function(T,a){var M=a.type,Z=a.direction,K=a.name.slice(0,-1)+"Entries";T.prototype[K]=function(at,xt){if("mixed"!==M&&"mixed"!==this.type&&M!==this.type)return tt.empty();if(!arguments.length)return Wn(this,M);if(1===arguments.length){var _t=this._nodes.get(at=""+at);if(!_t)throw new ft("Graph.".concat(K,': could not find the "').concat(at,'" node in the graph.'));return yi(M,Z,_t)}if(2===arguments.length){xt=""+xt;var yt=this._nodes.get(at=""+at);if(!yt)throw new ft("Graph.".concat(K,':  could not find the "').concat(at,'" source node in the graph.'));if(!this._nodes.has(xt))throw new ft("Graph.".concat(K,':  could not find the "').concat(xt,'" target node in the graph.'));return wi(M,Z,yt,xt)}throw new ht("Graph.".concat(K,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(E,P)})}(Jt),function(E){bi.forEach(function(P){var T,a,c,M,Z,K,at;(function Hn(E,P){var T=P.name,a=P.type,c=P.direction;E.prototype[T]=function(M){if("mixed"!==a&&"mixed"!==this.type&&a!==this.type)return[];var Z=this._nodes.get(M=""+M);if(void 0===Z)throw new ft("Graph.".concat(T,': could not find the "').concat(M,'" node in the graph.'));return function(K,at,xt){if("mixed"!==K){if("undirected"===K)return Object.keys(xt.undirected);if("string"==typeof at)return Object.keys(xt[at])}var _t=[];return Zn(!1,K,at,xt,function(yt){_t.push(yt)}),_t}("mixed"===a?this.type:a,c,Z)}})(E,P),function(T,a){var c=a.name,M=a.type,Z=a.direction,K="forEach"+c[0].toUpperCase()+c.slice(1,-1);T.prototype[K]=function(yt,St){if("mixed"===M||"mixed"===this.type||M===this.type){var Tt=this._nodes.get(yt=""+yt);if(void 0===Tt)throw new ft("Graph.".concat(K,': could not find the "').concat(yt,'" node in the graph.'));Zn(!1,"mixed"===M?this.type:M,Z,Tt,St)}};var at="map"+c[0].toUpperCase()+c.slice(1);T.prototype[at]=function(yt,St){var Tt=[];return this[K](yt,function(Ut,Kt){Tt.push(St(Ut,Kt))}),Tt};var xt="filter"+c[0].toUpperCase()+c.slice(1);T.prototype[xt]=function(yt,St){var Tt=[];return this[K](yt,function(Ut,Kt){St(Ut,Kt)&&Tt.push(Ut)}),Tt};var _t="reduce"+c[0].toUpperCase()+c.slice(1);T.prototype[_t]=function(yt,St,Tt){if(arguments.length<3)throw new ht("Graph.".concat(_t,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));var Ut=Tt;return this[K](yt,function(Kt,te){Ut=St(Ut,Kt,te)}),Ut}}(E,P),T=E,M=(a=P).type,Z=a.direction,K=(c=a.name)[0].toUpperCase()+c.slice(1,-1),T.prototype[at="find"+K]=function(yt,St){if("mixed"===M||"mixed"===this.type||M===this.type){var Tt=this._nodes.get(yt=""+yt);if(void 0===Tt)throw new ft("Graph.".concat(at,': could not find the "').concat(yt,'" node in the graph.'));return Zn(!0,"mixed"===M?this.type:M,Z,Tt,St)}},T.prototype["some"+K]=function(yt,St){return!!this[at](yt,St)},T.prototype["every"+K]=function(yt,St){return!this[at](yt,function(Tt,Ut){return!St(Tt,Ut)})},function _i(E,P){var a=P.type,c=P.direction,M=P.name.slice(0,-1)+"Entries";E.prototype[M]=function(Z){if("mixed"!==a&&"mixed"!==this.type&&a!==this.type)return tt.empty();var K=this._nodes.get(Z=""+Z);if(void 0===K)throw new ft("Graph.".concat(M,': could not find the "').concat(Z,'" node in the graph.'));return function(at,xt,_t){if("mixed"!==at){if("undirected"===at)return He(null,_t,_t.undirected);if("string"==typeof xt)return He(null,_t,_t[xt])}var yt=tt.empty(),St=new Pe;return"undirected"!==at&&("out"!==xt&&(yt=re(yt,He(St,_t,_t.in))),"in"!==xt&&(yt=re(yt,He(St,_t,_t.out)))),"directed"!==at&&(yt=re(yt,He(St,_t,_t.undirected))),yt}("mixed"===a?this.type:a,c,K)}}(E,P)})}(Jt);var wr=function(E){function P(T){var a=C({type:"directed"},T);if("multi"in a&&!1!==a.multi)throw new ht("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==a.type)throw new ht('DirectedGraph.from: inconsistent "'+a.type+'" type in given options!');return E.call(this,a)||this}return N(P,E),P}(Jt),br=function(E){function P(T){var a=C({type:"undirected"},T);if("multi"in a&&!1!==a.multi)throw new ht("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==a.type)throw new ht('UndirectedGraph.from: inconsistent "'+a.type+'" type in given options!');return E.call(this,a)||this}return N(P,E),P}(Jt),_r=function(E){function P(T){var a=C({multi:!0},T);if("multi"in a&&!0!==a.multi)throw new ht("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return E.call(this,a)||this}return N(P,E),P}(Jt),xr=function(E){function P(T){var a=C({type:"directed",multi:!0},T);if("multi"in a&&!0!==a.multi)throw new ht("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==a.type)throw new ht('MultiDirectedGraph.from: inconsistent "'+a.type+'" type in given options!');return E.call(this,a)||this}return N(P,E),P}(Jt),Ar=function(E){function P(T){var a=C({type:"undirected",multi:!0},T);if("multi"in a&&!0!==a.multi)throw new ht("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==a.type)throw new ht('MultiUndirectedGraph.from: inconsistent "'+a.type+'" type in given options!');return E.call(this,a)||this}return N(P,E),P}(Jt);function Ie(E){E.from=function(P,T){var a=C({},P.options,T),c=new E(a);return c.import(P),c}}return Ie(Jt),Ie(wr),Ie(br),Ie(_r),Ie(xr),Ie(Ar),Jt.Graph=Jt,Jt.DirectedGraph=wr,Jt.UndirectedGraph=br,Jt.MultiGraph=_r,Jt.MultiDirectedGraph=xr,Jt.MultiUndirectedGraph=Ar,Jt.InvalidArgumentsGraphError=ht,Jt.NotFoundGraphError=ft,Jt.UsageGraphError=At,Jt}()},8740:(ut,D,N)=>{var Y=N(6009),z=N(5701);function O(i,m){if(arguments.length<2)throw new Error("mnemonist/fixed-deque: expecting an Array class and a capacity.");if("number"!=typeof m||m<=0)throw new Error("mnemonist/fixed-deque: `capacity` should be a positive number.");this.ArrayClass=i,this.capacity=m,this.items=new i(this.capacity),this.clear()}O.prototype.clear=function(){this.start=0,this.size=0},O.prototype.push=function(i){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.push: deque capacity ("+this.capacity+") exceeded!");return this.items[(this.start+this.size)%this.capacity]=i,++this.size},O.prototype.unshift=function(i){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.unshift: deque capacity ("+this.capacity+") exceeded!");var m=this.start-1;return 0===this.start&&(m=this.capacity-1),this.items[m]=i,this.start=m,++this.size},O.prototype.pop=function(){if(0===this.size)return;const i=(this.start+this.size-1)%this.capacity;return this.size--,this.items[i]},O.prototype.shift=function(){if(0!==this.size){var i=this.start;return this.size--,this.start++,this.start===this.capacity&&(this.start=0),this.items[i]}},O.prototype.peekFirst=function(){if(0!==this.size)return this.items[this.start]},O.prototype.peekLast=function(){if(0!==this.size){var i=this.start+this.size-1;return i>this.capacity&&(i-=this.capacity),this.items[i]}},O.prototype.get=function(i){if(0!==this.size)return(i=this.start+i)>this.capacity&&(i-=this.capacity),this.items[i]},O.prototype.forEach=function(i,m){m=arguments.length>1?m:this;for(var v=this.capacity,C=this.size,u=this.start,l=0;l<C;)i.call(m,this.items[u],l,this),l++,++u===v&&(u=0)},O.prototype.toArray=function(){var i=this.start+this.size;if(i<this.capacity)return this.items.slice(this.start,i);for(var m=new this.ArrayClass(this.size),v=this.capacity,C=this.size,u=this.start,l=0;l<C;)m[l]=this.items[u],l++,++u===v&&(u=0);return m},O.prototype.values=function(){var i=this.items,m=this.capacity,v=this.size,C=this.start,u=0;return new z(function(){if(u>=v)return{done:!0};var l=i[C];return C++,u++,C===m&&(C=0),{value:l,done:!1}})},O.prototype.entries=function(){var i=this.items,m=this.capacity,v=this.size,C=this.start,u=0;return new z(function(){if(u>=v)return{done:!0};var l=i[C];return++C===m&&(C=0),{value:[u++,l],done:!1}})},"undefined"!=typeof Symbol&&(O.prototype[Symbol.iterator]=O.prototype.values),O.prototype.inspect=function(){var i=this.toArray();return i.type=this.ArrayClass.name,i.capacity=this.capacity,Object.defineProperty(i,"constructor",{value:O,enumerable:!1}),i},"undefined"!=typeof Symbol&&(O.prototype[Symbol.for("nodejs.util.inspect.custom")]=O.prototype.inspect),O.from=function(i,m,v){if(arguments.length<3&&"number"!=typeof(v=Y.guessLength(i)))throw new Error("mnemonist/fixed-deque.from: could not guess iterable length. Please provide desired capacity as last argument.");var C=new O(m,v);if(Y.isArrayLike(i)){var u,l;for(u=0,l=i.length;u<l;u++)C.items[u]=i[u];return C.size=l,C}return Y.forEach(i,function(p){C.push(p)}),C},ut.exports=O},7451:(ut,D,N)=>{var Y=N(5701),z=N(6009);function O(i,m){if(arguments.length<2)throw new Error("mnemonist/fixed-stack: expecting an Array class and a capacity.");if("number"!=typeof m||m<=0)throw new Error("mnemonist/fixed-stack: `capacity` should be a positive number.");this.capacity=m,this.ArrayClass=i,this.items=new this.ArrayClass(this.capacity),this.clear()}O.prototype.clear=function(){this.size=0},O.prototype.push=function(i){if(this.size===this.capacity)throw new Error("mnemonist/fixed-stack.push: stack capacity ("+this.capacity+") exceeded!");return this.items[this.size++]=i,this.size},O.prototype.pop=function(){if(0!==this.size)return this.items[--this.size]},O.prototype.peek=function(){return this.items[this.size-1]},O.prototype.forEach=function(i,m){m=arguments.length>1?m:this;for(var v=0,C=this.items.length;v<C;v++)i.call(m,this.items[C-v-1],v,this)},O.prototype.toArray=function(){for(var i=new this.ArrayClass(this.size),m=this.size-1,v=this.size;v--;)i[v]=this.items[m-v];return i},O.prototype.values=function(){var i=this.items,m=this.size,v=0;return new Y(function(){if(v>=m)return{done:!0};var C=i[m-v-1];return v++,{value:C,done:!1}})},O.prototype.entries=function(){var i=this.items,m=this.size,v=0;return new Y(function(){if(v>=m)return{done:!0};var C=i[m-v-1];return{value:[v++,C],done:!1}})},"undefined"!=typeof Symbol&&(O.prototype[Symbol.iterator]=O.prototype.values),O.prototype.toString=function(){return this.toArray().join(",")},O.prototype.toJSON=function(){return this.toArray()},O.prototype.inspect=function(){var i=this.toArray();return i.type=this.ArrayClass.name,i.capacity=this.capacity,Object.defineProperty(i,"constructor",{value:O,enumerable:!1}),i},"undefined"!=typeof Symbol&&(O.prototype[Symbol.for("nodejs.util.inspect.custom")]=O.prototype.inspect),O.from=function(i,m,v){if(arguments.length<3&&"number"!=typeof(v=z.guessLength(i)))throw new Error("mnemonist/fixed-stack.from: could not guess iterable length. Please provide desired capacity as last argument.");var C=new O(m,v);if(z.isArrayLike(i)){var u,l;for(u=0,l=i.length;u<l;u++)C.items[u]=i[u];return C.size=l,C}return z.forEach(i,function(p){C.push(p)}),C},ut.exports=O},4547:(ut,D,N)=>{var Y=N(4467),z=N(2062),O=N(6009),i=z.DEFAULT_COMPARATOR,m=z.reverseComparator;function v(k,L,A,_){for(var x,y,W=L[_];_>A&&k(W,y=L[x=_-1>>1])<0;)L[_]=y,_=x;L[_]=W}function C(k,L,A){for(var w,_=L.length,W=A,x=L[A],y=2*A+1;y<_;)(w=y+1)<_&&k(L[y],L[w])>=0&&(y=w),L[A]=L[y],y=2*(A=y)+1;L[A]=x,v(k,L,W,A)}function u(k,L,A){L.push(A),v(k,L,0,L.length-1)}function l(k,L){var A=L.pop();if(0!==L.length){var _=L[0];return L[0]=A,C(k,L,0),_}return A}function p(k,L,A){if(0===L.length)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var _=L[0];return L[0]=A,C(k,L,0),_}function f(k,L,A){var _;return 0!==L.length&&k(L[0],A)<0&&(_=L[0],L[0]=A,A=_,C(k,L,0)),A}function d(k,L){for(var W=L.length>>1;--W>=0;)C(k,L,W)}function h(k,L){for(var A=L.length,_=0,W=new Array(A);_<A;)W[_++]=l(k,L);return W}function j(k){if(this.clear(),this.comparator=k||i,"function"!=typeof this.comparator)throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}function H(k){if(this.clear(),this.comparator=k||i,"function"!=typeof this.comparator)throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=m(this.comparator)}j.prototype.clear=function(){this.items=[],this.size=0},j.prototype.push=function(k){return u(this.comparator,this.items,k),++this.size},j.prototype.peek=function(){return this.items[0]},j.prototype.pop=function(){return 0!==this.size&&this.size--,l(this.comparator,this.items)},j.prototype.replace=function(k){return p(this.comparator,this.items,k)},j.prototype.pushpop=function(k){return f(this.comparator,this.items,k)},j.prototype.consume=function(){return this.size=0,h(this.comparator,this.items)},j.prototype.toArray=function(){return h(this.comparator,this.items.slice())},j.prototype.inspect=function(){var k=this.toArray();return Object.defineProperty(k,"constructor",{value:j,enumerable:!1}),k},"undefined"!=typeof Symbol&&(j.prototype[Symbol.for("nodejs.util.inspect.custom")]=j.prototype.inspect),H.prototype=j.prototype,j.from=function(k,L){var _,A=new j(L);return _=O.isArrayLike(k)?k.slice():O.toArray(k),d(A.comparator,_),A.items=_,A.size=_.length,A},H.from=function(k,L){var _,A=new H(L);return _=O.isArrayLike(k)?k.slice():O.toArray(k),d(A.comparator,_),A.items=_,A.size=_.length,A},j.siftUp=C,j.siftDown=v,j.push=u,j.pop=l,j.replace=p,j.pushpop=f,j.heapify=d,j.consume=h,j.nsmallest=function F(k,L,A){2===arguments.length&&(A=L,L=k,k=i);var W,x,y,b,_=m(k),w=1/0;if(1===L){if(O.isArrayLike(A)){for(W=0,x=A.length;W<x;W++)y=A[W],(w===1/0||k(y,w)<0)&&(w=y);return(b=new A.constructor(1))[0]=w,b}return Y(A,function(B){(w===1/0||k(B,w)<0)&&(w=B)}),[w]}if(O.isArrayLike(A)){if(L>=A.length)return A.slice().sort(k);for(b=A.slice(0,L),d(_,b),W=L,x=A.length;W<x;W++)_(A[W],b[0])>0&&p(_,b,A[W]);return b.sort(k)}var U=O.guessLength(A);return null!==U&&U<L&&(L=U),b=new Array(L),W=0,Y(A,function(B){W<L?b[W]=B:(W===L&&d(_,b),_(B,b[0])>0&&p(_,b,B)),W++}),b.length>W&&(b.length=W),b.sort(k)},j.nlargest=function R(k,L,A){2===arguments.length&&(A=L,L=k,k=i);var W,x,y,b,_=m(k),w=-1/0;if(1===L){if(O.isArrayLike(A)){for(W=0,x=A.length;W<x;W++)y=A[W],(w===-1/0||k(y,w)>0)&&(w=y);return(b=new A.constructor(1))[0]=w,b}return Y(A,function(B){(w===-1/0||k(B,w)>0)&&(w=B)}),[w]}if(O.isArrayLike(A)){if(L>=A.length)return A.slice().sort(_);for(b=A.slice(0,L),d(k,b),W=L,x=A.length;W<x;W++)k(A[W],b[0])>0&&p(k,b,A[W]);return b.sort(_)}var U=O.guessLength(A);return null!==U&&U<L&&(L=U),b=new Array(L),W=0,Y(A,function(B){W<L?b[W]=B:(W===L&&d(k,b),k(B,b[0])>0&&p(k,b,B)),W++}),b.length>W&&(b.length=W),b.sort(_)},j.MinHeap=j,j.MaxHeap=H,ut.exports=j},7621:(ut,D,N)=>{var Y=N(5701),z=N(4467);function O(){this.clear()}O.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},O.prototype.enqueue=function(i){return this.items.push(i),++this.size},O.prototype.dequeue=function(){if(this.size){var i=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,i}},O.prototype.peek=function(){if(this.size)return this.items[this.offset]},O.prototype.forEach=function(i,m){m=arguments.length>1?m:this;for(var v=this.offset,C=0,u=this.items.length;v<u;v++,C++)i.call(m,this.items[v],C,this)},O.prototype.toArray=function(){return this.items.slice(this.offset)},O.prototype.values=function(){var i=this.items,m=this.offset;return new Y(function(){if(m>=i.length)return{done:!0};var v=i[m];return m++,{value:v,done:!1}})},O.prototype.entries=function(){var i=this.items,m=this.offset,v=0;return new Y(function(){if(m>=i.length)return{done:!0};var C=i[m];return m++,{value:[v++,C],done:!1}})},"undefined"!=typeof Symbol&&(O.prototype[Symbol.iterator]=O.prototype.values),O.prototype.toString=function(){return this.toArray().join(",")},O.prototype.toJSON=function(){return this.toArray()},O.prototype.inspect=function(){var i=this.toArray();return Object.defineProperty(i,"constructor",{value:O,enumerable:!1}),i},"undefined"!=typeof Symbol&&(O.prototype[Symbol.for("nodejs.util.inspect.custom")]=O.prototype.inspect),O.from=function(i){var m=new O;return z(i,function(v){m.enqueue(v)}),m},O.of=function(){return O.from(arguments)},ut.exports=O},8090:(ut,D,N)=>{var Y=N(5701),z=N(6116).getPointerArray;function O(i,m){arguments.length<2&&(m=i,i=Array);var v=z(m);this.size=0,this.length=m,this.dense=new v(m),this.sparse=new v(m),this.vals=new i(m)}O.prototype.clear=function(){this.size=0},O.prototype.has=function(i){var m=this.sparse[i];return m<this.size&&this.dense[m]===i},O.prototype.get=function(i){var m=this.sparse[i];if(m<this.size&&this.dense[m]===i)return this.vals[m]},O.prototype.set=function(i,m){var v=this.sparse[i];return v<this.size&&this.dense[v]===i?(this.vals[v]=m,this):(this.dense[this.size]=i,this.sparse[i]=this.size,this.vals[this.size]=m,this.size++,this)},O.prototype.delete=function(i){var m=this.sparse[i];return!(m>=this.size||this.dense[m]!==i||(this.dense[this.sparse[i]]=m=this.dense[this.size-1],this.sparse[m]=this.sparse[i],this.size--,0))},O.prototype.forEach=function(i,m){m=arguments.length>1?m:this;for(var v=0;v<this.size;v++)i.call(m,this.vals[v],this.dense[v])},O.prototype.keys=function(){var i=this.size,m=this.dense,v=0;return new Y(function(){if(v<i){var C=m[v];return v++,{value:C}}return{done:!0}})},O.prototype.values=function(){var i=this.size,m=this.vals,v=0;return new Y(function(){if(v<i){var C=m[v];return v++,{value:C}}return{done:!0}})},O.prototype.entries=function(){var i=this.size,m=this.dense,v=this.vals,C=0;return new Y(function(){if(C<i){var u=[m[C],v[C]];return C++,{value:u}}return{done:!0}})},"undefined"!=typeof Symbol&&(O.prototype[Symbol.iterator]=O.prototype.entries),O.prototype.inspect=function(){for(var i=new Map,m=0;m<this.size;m++)i.set(this.dense[m],this.vals[m]);return Object.defineProperty(i,"constructor",{value:O,enumerable:!1}),i.length=this.length,this.vals.constructor!==Array&&(i.type=this.vals.constructor.name),i},"undefined"!=typeof Symbol&&(O.prototype[Symbol.for("nodejs.util.inspect.custom")]=O.prototype.inspect),ut.exports=O},5766:(ut,D,N)=>{var Y=N(5701),z=N(6116).getPointerArray;function O(i){var m=z(i);this.start=0,this.size=0,this.capacity=i,this.dense=new m(i),this.sparse=new m(i)}O.prototype.clear=function(){this.start=0,this.size=0},O.prototype.has=function(i){if(0===this.size)return!1;var m=this.sparse[i];return(m<this.capacity&&m>=this.start&&m<this.start+this.size||m<(this.start+this.size)%this.capacity)&&this.dense[m]===i},O.prototype.enqueue=function(i){var m=this.sparse[i];return 0!==this.size&&(m<this.capacity&&m>=this.start&&m<this.start+this.size||m<(this.start+this.size)%this.capacity)&&this.dense[m]===i||(this.dense[m=(this.start+this.size)%this.capacity]=i,this.sparse[i]=m,this.size++),this},O.prototype.dequeue=function(){if(0!==this.size){var i=this.start;this.size--,this.start++,this.start===this.capacity&&(this.start=0);var m=this.dense[i];return this.sparse[m]=this.capacity,m}},O.prototype.forEach=function(i,m){m=arguments.length>1?m:this;for(var v=this.capacity,C=this.size,u=this.start,l=0;l<C;)i.call(m,this.dense[u],l,this),l++,++u===v&&(u=0)},O.prototype.values=function(){var i=this.dense,m=this.capacity,v=this.size,C=this.start,u=0;return new Y(function(){if(u>=v)return{done:!0};var l=i[C];return C++,u++,C===m&&(C=0),{value:l,done:!1}})},"undefined"!=typeof Symbol&&(O.prototype[Symbol.iterator]=O.prototype.values),O.prototype.inspect=function(){var i=[];return this.forEach(function(m){i.push(m)}),Object.defineProperty(i,"constructor",{value:O,enumerable:!1}),i.capacity=this.capacity,i},"undefined"!=typeof Symbol&&(O.prototype[Symbol.for("nodejs.util.inspect.custom")]=O.prototype.inspect),ut.exports=O},4268:(ut,D,N)=>{var Y=N(5701),z=N(6116).getPointerArray;function O(i){var m=z(i);this.size=0,this.length=i,this.dense=new m(i),this.sparse=new m(i)}O.prototype.clear=function(){this.size=0},O.prototype.has=function(i){var m=this.sparse[i];return m<this.size&&this.dense[m]===i},O.prototype.add=function(i){var m=this.sparse[i];return m<this.size&&this.dense[m]===i||(this.dense[this.size]=i,this.sparse[i]=this.size,this.size++),this},O.prototype.delete=function(i){var m=this.sparse[i];return!(m>=this.size||this.dense[m]!==i||(this.dense[this.sparse[i]]=m=this.dense[this.size-1],this.sparse[m]=this.sparse[i],this.size--,0))},O.prototype.forEach=function(i,m){m=arguments.length>1?m:this;for(var v,C=0;C<this.size;C++)i.call(m,v=this.dense[C],v)},O.prototype.values=function(){var i=this.size,m=this.dense,v=0;return new Y(function(){if(v<i){var C=m[v];return v++,{value:C}}return{done:!0}})},"undefined"!=typeof Symbol&&(O.prototype[Symbol.iterator]=O.prototype.values),O.prototype.inspect=function(){for(var i=new Set,m=0;m<this.size;m++)i.add(this.dense[m]);return Object.defineProperty(i,"constructor",{value:O,enumerable:!1}),i.length=this.length,i},"undefined"!=typeof Symbol&&(O.prototype[Symbol.for("nodejs.util.inspect.custom")]=O.prototype.inspect),ut.exports=O},2062:(ut,D)=>{D.DEFAULT_COMPARATOR=function(i,m){return i<m?-1:i>m?1:0},D.DEFAULT_REVERSE_COMPARATOR=function(i,m){return i<m?1:i>m?-1:0},D.reverseComparator=function z(i){return function(m,v){return i(v,m)}},D.createTupleComparator=function O(i){return 2===i?function(m,v){return m[0]<v[0]?-1:m[0]>v[0]?1:m[1]<v[1]?-1:m[1]>v[1]?1:0}:function(m,v){for(var C=0;C<i;){if(m[C]<v[C])return-1;if(m[C]>v[C])return 1;C++}return 0}}},6009:(ut,D,N)=>{var Y=N(4467),z=N(6116);function i(C){return"number"==typeof C.length?C.length:"number"==typeof C.size?C.size:void 0}D.isArrayLike=function O(C){return Array.isArray(C)||z.isTypedArray(C)},D.guessLength=i,D.toArray=function m(C){var u=i(C),l="number"==typeof u?new Array(u):[],p=0;return Y(C,function(f){l[p++]=f}),l},D.toArrayWithIndices=function v(C){var u=i(C),l="number"==typeof u?z.getPointerArray(u):Array,p="number"==typeof u?new Array(u):[],f="number"==typeof u?new l(u):[],d=0;return Y(C,function(h){p[d]=h,f[d]=d++}),[p,f]}},6116:(ut,D)=>{var N=Math.pow(2,8)-1,Y=Math.pow(2,16)-1,z=Math.pow(2,32)-1,O=Math.pow(2,7)-1,i=Math.pow(2,15)-1,m=Math.pow(2,31)-1;D.getPointerArray=function(C){var u=C-1;if(u<=N)return Uint8Array;if(u<=Y)return Uint16Array;if(u<=z)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},D.getSignedPointerArray=function(C){var u=C-1;return u<=O?Int8Array:u<=i?Int16Array:u<=m?Int32Array:Float64Array},D.getNumberType=function(C){return C===(0|C)?-1===Math.sign(C)?C<=127&&C>=-128?Int8Array:C<=32767&&C>=-32768?Int16Array:Int32Array:C<=255?Uint8Array:C<=65535?Uint16Array:Uint32Array:Float64Array};var v={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};D.getMinimalRepresentation=function(C,u){var f,d,h,F,R,l=null,p=0;for(F=0,R=C.length;F<R;F++)h=u?u(C[F]):C[F],d=D.getNumberType(h),(f=v[d.name])>p&&(p=f,l=d);return l},D.isTypedArray=function(C){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView(C)},D.concat=function(){var u,l,p,C=0;for(u=0,p=arguments.length;u<p;u++)C+=arguments[u].length;var f=new arguments[0].constructor(C);for(u=0,l=0;u<p;u++)f.set(arguments[u],l),l+=arguments[u].length;return f},D.indices=function(C){for(var l=new(D.getPointerArray(C))(C),p=0;p<C;p++)l[p]=p;return l}},4467:(ut,D,N)=>{var Y=N(8123),z=Y.ARRAY_BUFFER_SUPPORT,O=Y.SYMBOL_SUPPORT;ut.exports=function(m,v){var C,u,l,p,f;if(!m)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof v)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(m)||z&&ArrayBuffer.isView(m)||"string"==typeof m||"[object Arguments]"===m.toString())for(l=0,p=m.length;l<p;l++)v(m[l],l);else if("function"!=typeof m.forEach)if(O&&Symbol.iterator in m&&"function"!=typeof m.next&&(m=m[Symbol.iterator]()),"function"!=typeof m.next)for(u in m)m.hasOwnProperty(u)&&v(m[u],u);else for(C=m,l=0;!0!==(f=C.next()).done;)v(f.value,l),l++;else m.forEach(v)}},5701:ut=>{function D(N){if("function"!=typeof N)throw new Error("obliterator/iterator: expecting a function!");this.next=N}"undefined"!=typeof Symbol&&(D.prototype[Symbol.iterator]=function(){return this}),D.of=function(){var N=arguments,Y=N.length,z=0;return new D(function(){return z>=Y?{done:!0}:{done:!1,value:N[z++]}})},D.empty=function(){return new D(function(){return{done:!0}})},D.fromSequence=function(N){var Y=0,z=N.length;return new D(function(){return Y>=z?{done:!0}:{done:!1,value:N[Y++]}})},D.is=function(N){return N instanceof D||"object"==typeof N&&null!==N&&"function"==typeof N.next},ut.exports=D},8123:(ut,D)=>{D.ARRAY_BUFFER_SUPPORT="undefined"!=typeof ArrayBuffer,D.SYMBOL_SUPPORT="undefined"!=typeof Symbol},8859:ut=>{function D(Y){return function(z){return"number"!=typeof z&&(z=z.length),Math.floor(Y()*z)}}var N=D(Math.random);N.createRandomIndex=D,ut.exports=N},853:ut=>{function D(Y){return function(z,O){return z+Math.floor(Y()*(O-z+1))}}var N=D(Math.random);N.createRandom=D,ut.exports=N},909:(ut,D,N)=>{var Y=N(853).createRandom;function z(i){var m=Y(i);return function(v){for(var C=v.length,u=C-1,l=-1;++l<C;){var p=m(l,u),f=v[p];v[p]=v[l],v[l]=f}}}var O=z(Math.random);O.createShuffleInPlace=z,ut.exports=O},340:(ut,D,N)=>{var Y=N(9471),z=N(2992),O=N(7657),i=N(5583),m=N(1929),v=N(8083),C=N(3818);C.alea=Y,C.xor128=z,C.xorwow=O,C.xorshift7=i,C.xor4096=m,C.tychei=v,ut.exports=C},9471:function(ut,D,N){var Y;!function(z,O,i){function m(l){var p=this,f=function u(){var l=4022871197;return function(f){f=String(f);for(var d=0;d<f.length;d++){var h=.02519603282416938*(l+=f.charCodeAt(d));h-=l=h>>>0,l=(h*=l)>>>0,l+=4294967296*(h-=l)}return 2.3283064365386963e-10*(l>>>0)}}();p.next=function(){var d=2091639*p.s0+2.3283064365386963e-10*p.c;return p.s0=p.s1,p.s1=p.s2,p.s2=d-(p.c=0|d)},p.c=1,p.s0=f(" "),p.s1=f(" "),p.s2=f(" "),p.s0-=f(l),p.s0<0&&(p.s0+=1),p.s1-=f(l),p.s1<0&&(p.s1+=1),p.s2-=f(l),p.s2<0&&(p.s2+=1),f=null}function v(l,p){return p.c=l.c,p.s0=l.s0,p.s1=l.s1,p.s2=l.s2,p}function C(l,p){var f=new m(l),d=p&&p.state,h=f.next;return h.int32=function(){return 4294967296*f.next()|0},h.double=function(){return h()+11102230246251565e-32*(2097152*h()|0)},h.quick=h,d&&("object"==typeof d&&v(d,f),h.state=function(){return v(f,{})}),h}O&&O.exports?O.exports=C:N.amdD&&N.amdO?void 0!==(Y=function(){return C}.call(D,N,D,O))&&(O.exports=Y):this.alea=C}(0,ut=N.nmd(ut))},8083:function(ut,D,N){var Y;!function(z,O,i){function m(u){var l=this,p="";l.next=function(){var d=l.b,h=l.c,F=l.d,R=l.a;return d=d<<25^d>>>7^h,h=h-F|0,F=F<<24^F>>>8^R,R=R-d|0,l.b=d=d<<20^d>>>12^h,l.c=h=h-F|0,l.d=F<<16^h>>>16^R,l.a=R-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,u===Math.floor(u)?(l.a=u/4294967296|0,l.b=0|u):p+=u;for(var f=0;f<p.length+20;f++)l.b^=0|p.charCodeAt(f),l.next()}function v(u,l){return l.a=u.a,l.b=u.b,l.c=u.c,l.d=u.d,l}function C(u,l){var p=new m(u),f=l&&l.state,d=function(){return(p.next()>>>0)/4294967296};return d.double=function(){do{var R=((p.next()>>>11)+(p.next()>>>0)/4294967296)/(1<<21)}while(0===R);return R},d.int32=p.next,d.quick=d,f&&("object"==typeof f&&v(f,p),d.state=function(){return v(p,{})}),d}O&&O.exports?O.exports=C:N.amdD&&N.amdO?void 0!==(Y=function(){return C}.call(D,N,D,O))&&(O.exports=Y):this.tychei=C}(0,ut=N.nmd(ut))},2992:function(ut,D,N){var Y;!function(z,O,i){function m(u){var l=this,p="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},u===(0|u)?l.x=u:p+=u;for(var f=0;f<p.length+64;f++)l.x^=0|p.charCodeAt(f),l.next()}function v(u,l){return l.x=u.x,l.y=u.y,l.z=u.z,l.w=u.w,l}function C(u,l){var p=new m(u),f=l&&l.state,d=function(){return(p.next()>>>0)/4294967296};return d.double=function(){do{var R=((p.next()>>>11)+(p.next()>>>0)/4294967296)/(1<<21)}while(0===R);return R},d.int32=p.next,d.quick=d,f&&("object"==typeof f&&v(f,p),d.state=function(){return v(p,{})}),d}O&&O.exports?O.exports=C:N.amdD&&N.amdO?void 0!==(Y=function(){return C}.call(D,N,D,O))&&(O.exports=Y):this.xor128=C}(0,ut=N.nmd(ut))},1929:function(ut,D,N){var Y;!function(z,O,i){function m(u){var l=this;l.next=function(){var F,R,f=l.w,d=l.X,h=l.i;return l.w=f=f+1640531527|0,R=d[h+34&127],F=d[h=h+1&127],R^=R<<13,F^=F<<17,R=d[h]=(R^=R>>>15)^(F^=F>>>12),l.i=h,R+(f^f>>>16)|0},function p(f,d){var h,F,R,j,H,k=[],L=128;for(d===(0|d)?(F=d,d=null):(d+="\0",F=0,L=Math.max(L,d.length)),R=0,j=-32;j<L;++j)d&&(F^=d.charCodeAt((j+32)%d.length)),0===j&&(H=F),F^=F<<10,F^=F>>>15,F^=F<<4,F^=F>>>13,j>=0&&(R=0==(h=k[127&j]^=F+(H=H+1640531527|0))?R+1:0);for(R>=128&&(k[127&(d&&d.length||0)]=-1),R=127,j=512;j>0;--j)F=k[R+34&127],h=k[R=R+1&127],F^=F<<13,h^=h<<17,k[R]=(F^=F>>>15)^(h^=h>>>12);f.w=H,f.X=k,f.i=R}(l,u)}function v(u,l){return l.i=u.i,l.w=u.w,l.X=u.X.slice(),l}function C(u,l){null==u&&(u=+new Date);var p=new m(u),f=l&&l.state,d=function(){return(p.next()>>>0)/4294967296};return d.double=function(){do{var R=((p.next()>>>11)+(p.next()>>>0)/4294967296)/(1<<21)}while(0===R);return R},d.int32=p.next,d.quick=d,f&&(f.X&&v(f,p),d.state=function(){return v(p,{})}),d}O&&O.exports?O.exports=C:N.amdD&&N.amdO?void 0!==(Y=function(){return C}.call(D,N,D,O))&&(O.exports=Y):this.xor4096=C}(0,ut=N.nmd(ut))},5583:function(ut,D,N){var Y;!function(z,O,i){function m(u){var l=this;l.next=function(){var h,F,f=l.x,d=l.i;return h=f[d],F=(h^=h>>>7)^h<<24,F^=(h=f[d+1&7])^h>>>10,F^=(h=f[d+3&7])^h>>>3,F^=(h=f[d+4&7])^h<<7,h=f[d+7&7],f[d]=F^=(h^=h<<13)^h<<9,l.i=d+1&7,F},function p(f,d){var h,R=[];if(d===(0|d))R[0]=d;else for(d=""+d,h=0;h<d.length;++h)R[7&h]=R[7&h]<<15^d.charCodeAt(h)+R[h+1&7]<<13;for(;R.length<8;)R.push(0);for(h=0;h<8&&0===R[h];++h);for(8==h&&(R[7]=-1),f.x=R,f.i=0,h=256;h>0;--h)f.next()}(l,u)}function v(u,l){return l.x=u.x.slice(),l.i=u.i,l}function C(u,l){null==u&&(u=+new Date);var p=new m(u),f=l&&l.state,d=function(){return(p.next()>>>0)/4294967296};return d.double=function(){do{var R=((p.next()>>>11)+(p.next()>>>0)/4294967296)/(1<<21)}while(0===R);return R},d.int32=p.next,d.quick=d,f&&(f.x&&v(f,p),d.state=function(){return v(p,{})}),d}O&&O.exports?O.exports=C:N.amdD&&N.amdO?void 0!==(Y=function(){return C}.call(D,N,D,O))&&(O.exports=Y):this.xorshift7=C}(0,ut=N.nmd(ut))},7657:function(ut,D,N){var Y;!function(z,O,i){function m(u){var l=this,p="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^d^d<<1)|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,u===(0|u)?l.x=u:p+=u;for(var f=0;f<p.length+64;f++)l.x^=0|p.charCodeAt(f),f==p.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function v(u,l){return l.x=u.x,l.y=u.y,l.z=u.z,l.w=u.w,l.v=u.v,l.d=u.d,l}function C(u,l){var p=new m(u),f=l&&l.state,d=function(){return(p.next()>>>0)/4294967296};return d.double=function(){do{var R=((p.next()>>>11)+(p.next()>>>0)/4294967296)/(1<<21)}while(0===R);return R},d.int32=p.next,d.quick=d,f&&("object"==typeof f&&v(f,p),d.state=function(){return v(p,{})}),d}O&&O.exports?O.exports=C:N.amdD&&N.amdO?void 0!==(Y=function(){return C}.call(D,N,D,O))&&(O.exports=Y):this.xorwow=C}(0,ut=N.nmd(ut))},3818:function(ut,D,N){var Y;!function(z,O,i){var h,m=256,l=i.pow(m,6),p=i.pow(2,52),f=2*p,d=255;function F(_,W,x){var y=[],w=k(H((W=1==W?{entropy:!0}:W||{}).entropy?[_,A(O)]:null==_?function L(){try{var _;return h&&(_=h.randomBytes)?_=_(m):(_=new Uint8Array(m),(z.crypto||z.msCrypto).getRandomValues(_)),A(_)}catch(y){var W=z.navigator,x=W&&W.plugins;return[+new Date,z,x,z.screen,A(O)]}}():_,3),y),b=new R(y),U=function(){for(var B=b.g(6),X=l,$=0;B<p;)B=(B+$)*m,X*=m,$=b.g(1);for(;B>=f;)B/=2,X/=2,$>>>=1;return(B+$)/X};return U.int32=function(){return 0|b.g(4)},U.quick=function(){return b.g(4)/4294967296},U.double=U,k(A(b.S),O),(W.pass||x||function(B,X,$,tt){return tt&&(tt.S&&j(tt,b),B.state=function(){return j(b,{})}),$?(i.random=B,X):B})(U,w,"global"in W?W.global:this==i,W.state)}function R(_){var W,x=_.length,y=this,w=0,b=y.i=y.j=0,U=y.S=[];for(x||(_=[x++]);w<m;)U[w]=w++;for(w=0;w<m;w++)U[w]=U[b=d&b+_[w%x]+(W=U[w])],U[b]=W;(y.g=function(B){for(var X,$=0,tt=y.i,rt=y.j,it=y.S;B--;)X=it[tt=d&tt+1],$=$*m+it[d&(it[tt]=it[rt=d&rt+X])+(it[rt]=X)];return y.i=tt,y.j=rt,$})(m)}function j(_,W){return W.i=_.i,W.j=_.j,W.S=_.S.slice(),W}function H(_,W){var w,x=[],y=typeof _;if(W&&"object"==y)for(w in _)try{x.push(H(_[w],W-1))}catch(b){}return x.length?x:"string"==y?_:_+"\0"}function k(_,W){for(var y,x=_+"",w=0;w<x.length;)W[d&w]=d&(y^=19*W[d&w])+x.charCodeAt(w++);return A(W)}function A(_){return String.fromCharCode.apply(0,_)}if(k(i.random(),O),ut.exports){ut.exports=F;try{h=N(5042)}catch(_){}}else void 0!==(Y=function(){return F}.call(D,N,D,ut))&&(ut.exports=Y)}("undefined"!=typeof self?self:this,[],Math)},2002:function(ut,D,N){"use strict";var l,Y=this&&this.__extends||(l=function(p,f){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var F in h)Object.prototype.hasOwnProperty.call(h,F)&&(d[F]=h[F])})(p,f)},function(p,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function d(){this.constructor=p}l(p,f),p.prototype=null===f?Object.create(f):(d.prototype=f.prototype,new d)}),z=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(D,"__esModule",{value:!0});var O=N(2630),i=z(N(4539)),m=N(1699),v=N(57),C=1.5,u=function(l){function p(){var f=l.call(this)||this;return f.x=.5,f.y=.5,f.angle=0,f.ratio=1,f.minRatio=null,f.maxRatio=null,f.nextFrame=null,f.previousState=null,f.enabled=!0,f.previousState=f.getState(),f}return Y(p,l),p.from=function(f){return(new p).setState(f)},p.prototype.enable=function(){return this.enabled=!0,this},p.prototype.disable=function(){return this.enabled=!1,this},p.prototype.getState=function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}},p.prototype.hasState=function(f){return this.x===f.x&&this.y===f.y&&this.ratio===f.ratio&&this.angle===f.angle},p.prototype.getPreviousState=function(){var f=this.previousState;return f?{x:f.x,y:f.y,angle:f.angle,ratio:f.ratio}:null},p.prototype.getBoundedRatio=function(f){var d=f;return"number"==typeof this.minRatio&&(d=Math.max(d,this.minRatio)),"number"==typeof this.maxRatio&&(d=Math.min(d,this.maxRatio)),d},p.prototype.validateState=function(f){var d={};return"number"==typeof f.x&&(d.x=f.x),"number"==typeof f.y&&(d.y=f.y),"number"==typeof f.angle&&(d.angle=f.angle),"number"==typeof f.ratio&&(d.ratio=this.getBoundedRatio(f.ratio)),d},p.prototype.isAnimated=function(){return!!this.nextFrame},p.prototype.setState=function(f){if(!this.enabled)return this;this.previousState=this.getState();var d=this.validateState(f);return"number"==typeof d.x&&(this.x=d.x),"number"==typeof d.y&&(this.y=d.y),"number"==typeof d.angle&&(this.angle=d.angle),"number"==typeof d.ratio&&(this.ratio=d.ratio),this.hasState(this.previousState)||this.emit("updated",this.getState()),this},p.prototype.updateState=function(f){return this.setState(f(this.getState())),this},p.prototype.animate=function(f,d,h){var F=this;if(this.enabled){var R=Object.assign({},O.ANIMATE_DEFAULTS,d),j=this.validateState(f),H="function"==typeof R.easing?R.easing:i.default[R.easing],k=Date.now(),L=this.getState(),A=function(){var _=(Date.now()-k)/R.duration;if(_>=1)return F.nextFrame=null,F.setState(j),void(F.animationCallback&&(F.animationCallback.call(null),F.animationCallback=void 0));var W=H(_),x={};"number"==typeof j.x&&(x.x=L.x+(j.x-L.x)*W),"number"==typeof j.y&&(x.y=L.y+(j.y-L.y)*W),"number"==typeof j.angle&&(x.angle=L.angle+(j.angle-L.angle)*W),"number"==typeof j.ratio&&(x.ratio=L.ratio+(j.ratio-L.ratio)*W),F.setState(x),F.nextFrame=(0,m.requestFrame)(A)};this.nextFrame?((0,m.cancelFrame)(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=(0,m.requestFrame)(A)):A(),this.animationCallback=h}},p.prototype.animatedZoom=function(f){if(f){if("number"==typeof f)return this.animate({ratio:this.ratio/f});this.animate({ratio:this.ratio/(f.factor||C)},f)}else this.animate({ratio:this.ratio/C})},p.prototype.animatedUnzoom=function(f){if(f){if("number"==typeof f)return this.animate({ratio:this.ratio*f});this.animate({ratio:this.ratio*(f.factor||C)},f)}else this.animate({ratio:this.ratio*C})},p.prototype.animatedReset=function(f){this.animate({x:.5,y:.5,ratio:1,angle:0},f)},p.prototype.copy=function(){return p.from(this.getState())},p}(v.TypedEventEmitter);D.default=u},5473:function(ut,D,N){"use strict";var d,Y=this&&this.__extends||(d=function(h,F){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,j){R.__proto__=j}||function(R,j){for(var H in j)Object.prototype.hasOwnProperty.call(j,H)&&(R[H]=j[H])})(h,F)},function(h,F){if("function"!=typeof F&&null!==F)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");function R(){this.constructor=h}d(h,F),h.prototype=null===F?Object.create(F):(R.prototype=F.prototype,new R)}),z=this&&this.__assign||function(){return z=Object.assign||function(d){for(var h,F=1,R=arguments.length;F<R;F++)for(var j in h=arguments[F])Object.prototype.hasOwnProperty.call(h,j)&&(d[j]=h[j]);return d},z.apply(this,arguments)};Object.defineProperty(D,"__esModule",{value:!0}),D.getWheelDelta=D.getTouchCoords=D.getTouchesArray=D.getWheelCoords=D.getMouseCoords=D.getPosition=void 0;var O=N(57);function i(d,h){var F=h.getBoundingClientRect();return{x:d.clientX-F.left,y:d.clientY-F.top}}function m(d,h){var F=z(z({},i(d,h)),{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){F.sigmaDefaultPrevented=!0},original:d});return F}function u(d){for(var h=[],F=0,R=Math.min(d.length,2);F<R;F++)h.push(d[F]);return h}function p(d){if(void 0!==d.deltaY)return-3*d.deltaY/360;if(void 0!==d.detail)return d.detail/-9;throw new Error("Captor: could not extract delta from event.")}D.getPosition=i,D.getMouseCoords=m,D.getWheelCoords=function v(d,h){return z(z({},m(d,h)),{delta:p(d)})},D.getTouchesArray=u,D.getTouchCoords=function l(d,h){return{touches:u(d.touches).map(function(F){return i(F,h)}),original:d}},D.getWheelDelta=p;var f=function(d){function h(F,R){var j=d.call(this)||this;return j.container=F,j.renderer=R,j}return Y(h,d),h}(O.TypedEventEmitter);D.default=f},2465:function(ut,D,N){"use strict";var j,Y=this&&this.__extends||(j=function(H,k){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,A){L.__proto__=A}||function(L,A){for(var _ in A)Object.prototype.hasOwnProperty.call(A,_)&&(L[_]=A[_])})(H,k)},function(H,k){if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function L(){this.constructor=H}j(H,k),H.prototype=null===k?Object.create(k):(L.prototype=k.prototype,new L)}),z=this&&this.__createBinding||(Object.create?function(j,H,k,L){void 0===L&&(L=k),Object.defineProperty(j,L,{enumerable:!0,get:function(){return H[k]}})}:function(j,H,k,L){void 0===L&&(L=k),j[L]=H[k]}),O=this&&this.__setModuleDefault||(Object.create?function(j,H){Object.defineProperty(j,"default",{enumerable:!0,value:H})}:function(j,H){j.default=H}),i=this&&this.__importStar||function(j){if(j&&j.__esModule)return j;var H={};if(null!=j)for(var k in j)"default"!==k&&Object.prototype.hasOwnProperty.call(j,k)&&z(H,j,k);return O(H,j),H};Object.defineProperty(D,"__esModule",{value:!0});var m=i(N(5473)),R=function(j){function H(k,L){var A=j.call(this,k,L)||this;return A.enabled=!0,A.draggedEvents=0,A.downStartTime=null,A.lastMouseX=null,A.lastMouseY=null,A.isMouseDown=!1,A.isMoving=!1,A.movingTimeout=null,A.startCameraState=null,A.clicks=0,A.doubleClickTimeout=null,A.currentWheelDirection=0,A.handleClick=A.handleClick.bind(A),A.handleRightClick=A.handleRightClick.bind(A),A.handleDown=A.handleDown.bind(A),A.handleUp=A.handleUp.bind(A),A.handleMove=A.handleMove.bind(A),A.handleWheel=A.handleWheel.bind(A),A.handleOut=A.handleOut.bind(A),k.addEventListener("click",A.handleClick,!1),k.addEventListener("contextmenu",A.handleRightClick,!1),k.addEventListener("mousedown",A.handleDown,!1),k.addEventListener("wheel",A.handleWheel,!1),k.addEventListener("mouseout",A.handleOut,!1),document.addEventListener("mousemove",A.handleMove,!1),document.addEventListener("mouseup",A.handleUp,!1),A}return Y(H,j),H.prototype.kill=function(){var k=this.container;k.removeEventListener("click",this.handleClick),k.removeEventListener("contextmenu",this.handleRightClick),k.removeEventListener("mousedown",this.handleDown),k.removeEventListener("wheel",this.handleWheel),k.removeEventListener("mouseout",this.handleOut),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)},H.prototype.handleClick=function(k){var L=this;if(this.enabled){if(this.clicks++,2===this.clicks)return this.clicks=0,"number"==typeof this.doubleClickTimeout&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(k);setTimeout(function(){L.clicks=0,L.doubleClickTimeout=null},300),this.draggedEvents<3&&this.emit("click",(0,m.getMouseCoords)(k,this.container))}},H.prototype.handleRightClick=function(k){!this.enabled||this.emit("rightClick",(0,m.getMouseCoords)(k,this.container))},H.prototype.handleDoubleClick=function(k){if(this.enabled){k.preventDefault(),k.stopPropagation();var L=(0,m.getMouseCoords)(k,this.container);if(this.emit("doubleClick",L),!L.sigmaDefaultPrevented){var A=this.renderer.getCamera(),_=A.getBoundedRatio(A.getState().ratio/2.2);A.animate(this.renderer.getViewportZoomedState((0,m.getPosition)(k,this.container),_),{easing:"quadraticInOut",duration:200})}}},H.prototype.handleDown=function(k){if(this.enabled){if(0===k.button){this.startCameraState=this.renderer.getCamera().getState();var L=(0,m.getPosition)(k,this.container),_=L.y;this.lastMouseX=L.x,this.lastMouseY=_,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",(0,m.getMouseCoords)(k,this.container))}},H.prototype.handleUp=function(k){var L=this;if(this.enabled&&this.isMouseDown){var A=this.renderer.getCamera();this.isMouseDown=!1,"number"==typeof this.movingTimeout&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var _=(0,m.getPosition)(k,this.container),W=_.x,x=_.y,y=A.getState(),w=A.getPreviousState()||{x:0,y:0};this.isMoving?A.animate({x:y.x+3*(y.x-w.x),y:y.y+3*(y.y-w.y)},{duration:200,easing:"quadraticOut"}):(this.lastMouseX!==W||this.lastMouseY!==x)&&A.setState({x:y.x,y:y.y}),this.isMoving=!1,setTimeout(function(){L.draggedEvents=0,L.renderer.refresh()},0),this.emit("mouseup",(0,m.getMouseCoords)(k,this.container))}},H.prototype.handleMove=function(k){var L=this;if(this.enabled){var A=(0,m.getMouseCoords)(k,this.container);if(this.emit("mousemovebody",A),k.target===this.container&&this.emit("mousemove",A),!A.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,"number"==typeof this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){L.movingTimeout=null,L.isMoving=!1},100);var _=this.renderer.getCamera(),W=(0,m.getPosition)(k,this.container),x=W.x,y=W.y,w=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),b=this.renderer.viewportToFramedGraph({x,y}),U=w.x-b.x,B=w.y-b.y,X=_.getState();_.setState({x:X.x+U,y:X.y+B}),this.lastMouseX=x,this.lastMouseY=y,k.preventDefault(),k.stopPropagation()}}},H.prototype.handleWheel=function(k){var L=this;if(this.enabled){k.preventDefault(),k.stopPropagation();var A=(0,m.getWheelDelta)(k);if(A){var _=(0,m.getWheelCoords)(k,this.container);if(this.emit("wheel",_),!_.sigmaDefaultPrevented){var W=A>0?1/1.7:1.7,x=this.renderer.getCamera(),y=x.getBoundedRatio(x.getState().ratio*W),w=A>0?1:-1,b=Date.now();this.currentWheelDirection===w&&this.lastWheelTriggerTime&&b-this.lastWheelTriggerTime<50||(x.animate(this.renderer.getViewportZoomedState((0,m.getPosition)(k,this.container),y),{easing:"quadraticOut",duration:250},function(){L.currentWheelDirection=0}),this.currentWheelDirection=w,this.lastWheelTriggerTime=b)}}}},H.prototype.handleOut=function(){},H}(m.default);D.default=R},1565:function(ut,D,N){"use strict";var f,Y=this&&this.__extends||(f=function(d,h){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,R){F.__proto__=R}||function(F,R){for(var j in R)Object.prototype.hasOwnProperty.call(R,j)&&(F[j]=R[j])})(d,h)},function(d,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function F(){this.constructor=d}f(d,h),d.prototype=null===h?Object.create(h):(F.prototype=h.prototype,new F)}),z=this&&this.__createBinding||(Object.create?function(f,d,h,F){void 0===F&&(F=h),Object.defineProperty(f,F,{enumerable:!0,get:function(){return d[h]}})}:function(f,d,h,F){void 0===F&&(F=h),f[F]=d[h]}),O=this&&this.__setModuleDefault||(Object.create?function(f,d){Object.defineProperty(f,"default",{enumerable:!0,value:d})}:function(f,d){f.default=d}),i=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var d={};if(null!=f)for(var h in f)"default"!==h&&Object.prototype.hasOwnProperty.call(f,h)&&z(d,f,h);return O(d,f),d},m=this&&this.__read||function(f,d){var h="function"==typeof Symbol&&f[Symbol.iterator];if(!h)return f;var R,H,F=h.call(f),j=[];try{for(;(void 0===d||d-- >0)&&!(R=F.next()).done;)j.push(R.value)}catch(k){H={error:k}}finally{try{R&&!R.done&&(h=F.return)&&h.call(F)}finally{if(H)throw H.error}}return j};Object.defineProperty(D,"__esModule",{value:!0});var v=i(N(5473)),p=function(f){function d(h,F){var R=f.call(this,h,F)||this;return R.enabled=!0,R.isMoving=!1,R.hasMoved=!1,R.touchMode=0,R.startTouchesPositions=[],R.handleStart=R.handleStart.bind(R),R.handleLeave=R.handleLeave.bind(R),R.handleMove=R.handleMove.bind(R),h.addEventListener("touchstart",R.handleStart,!1),h.addEventListener("touchend",R.handleLeave,!1),h.addEventListener("touchcancel",R.handleLeave,!1),h.addEventListener("touchmove",R.handleMove,!1),R}return Y(d,f),d.prototype.kill=function(){var h=this.container;h.removeEventListener("touchstart",this.handleStart),h.removeEventListener("touchend",this.handleLeave),h.removeEventListener("touchcancel",this.handleLeave),h.removeEventListener("touchmove",this.handleMove)},d.prototype.getDimensions=function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}},d.prototype.dispatchRelatedMouseEvent=function(h,F,R,j){var H=R||F.touches[0],k=new MouseEvent(h,{clientX:H.clientX,clientY:H.clientY,altKey:F.altKey,ctrlKey:F.ctrlKey});k.isFakeSigmaMouseEvent=!0,(j||this.container).dispatchEvent(k)},d.prototype.handleStart=function(h){var F=this;if(this.enabled){h.preventDefault(),1===h.touches.length&&this.dispatchRelatedMouseEvent("mousedown",h);var R=(0,v.getTouchesArray)(h.touches);if(this.touchMode=R.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=R.map(function(x){return(0,v.getPosition)(x,F.container)}),this.lastTouches=R,this.lastTouchesPositions=this.startTouchesPositions,2===this.touchMode){var j=m(this.startTouchesPositions,2),H=j[0],k=H.x,L=H.y,A=j[1],_=A.x,W=A.y;this.startTouchesAngle=Math.atan2(W-L,_-k),this.startTouchesDistance=Math.sqrt(Math.pow(_-k,2)+Math.pow(W-L,2))}this.emit("touchdown",(0,v.getTouchCoords)(h,this.container))}},d.prototype.handleLeave=function(h){if(this.enabled){switch(h.preventDefault(),0===h.touches.length&&this.lastTouches&&this.lastTouches.length&&(this.dispatchRelatedMouseEvent("mouseup",h,this.lastTouches[0],document),this.hasMoved||this.dispatchRelatedMouseEvent("click",h,this.lastTouches[0])),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(1===h.touches.length){this.handleStart(h),h.preventDefault();break}case 1:if(this.isMoving){var F=this.renderer.getCamera(),R=F.getState(),j=F.getPreviousState()||{x:0,y:0};F.animate({x:R.x+3*(R.x-j.x),y:R.y+3*(R.y-j.y)},{duration:200,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0}this.emit("touchup",(0,v.getTouchCoords)(h,this.container))}},d.prototype.handleMove=function(h){var F,R=this;if(this.enabled){h.preventDefault(),1===h.touches.length&&this.dispatchRelatedMouseEvent("mousemove",h);var j=(0,v.getTouchesArray)(h.touches),H=j.map(function(ft){return(0,v.getPosition)(ft,R.container)});if(this.lastTouches=j,this.lastTouchesPositions=H,this.hasMoved||(this.hasMoved=H.some(function(ft,At){var Yt=R.startTouchesPositions[At];return ft.x!==Yt.x||ft.y!==Yt.y})),this.hasMoved){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){R.isMoving=!1},200);var k=this.renderer.getCamera(),L=this.startCameraState;switch(this.touchMode){case 1:var A=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),_=A.x,W=A.y,x=this.renderer.viewportToFramedGraph(H[0]);k.setState({x:L.x+_-(y=x.x),y:L.y+W-(w=x.y)});break;case 2:var b={},U=H[0],B=U.x,X=U.y,$=H[1],tt=$.x,rt=$.y,it=Math.atan2(rt-X,tt-B)-this.startTouchesAngle,vt=Math.hypot(rt-X,tt-B)/this.startTouchesDistance,gt=k.getBoundedRatio(L.ratio/vt);b.ratio=gt,b.angle=L.angle+it;var y,Ct=this.getDimensions(),lt=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:L}),Et=Math.min(Ct.width,Ct.height),ht=gt/Et,w=X-Et/2/(Et/Ct.height);w=(F=m([(y=B-Et/2/(Et/Ct.width))*Math.cos(-b.angle)-w*Math.sin(-b.angle),w*Math.cos(-b.angle)+y*Math.sin(-b.angle)],2))[1],b.x=lt.x-(y=F[0])*ht,b.y=lt.y+w*ht,k.setState(b)}this.emit("touchmove",(0,v.getTouchCoords)(h,this.container))}}},d}(v.default);D.default=p},4942:(ut,D)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.edgeLabelsToDisplayFromNodes=D.LabelGrid=void 0;var N=function(){function O(i,m){this.key=i,this.size=m}return O.compare=function(i,m){return i.size>m.size?-1:i.size<m.size||i.key>m.key?1:-1},O}(),Y=function(){function O(){this.width=0,this.height=0,this.cellSize=0,this.columns=0,this.rows=0,this.cells={}}return O.prototype.resizeAndClear=function(i,m){this.width=i.width,this.height=i.height,this.cellSize=m,this.columns=Math.ceil(i.width/m),this.rows=Math.ceil(i.height/m),this.cells={}},O.prototype.getIndex=function(i){var m=Math.floor(i.x/this.cellSize);return Math.floor(i.y/this.cellSize)*this.columns+m},O.prototype.add=function(i,m,v){var C=new N(i,m),u=this.getIndex(v),l=this.cells[u];l||(this.cells[u]=l=[]),l.push(C)},O.prototype.organize=function(){for(var i in this.cells)this.cells[i].sort(N.compare)},O.prototype.getLabelsToDisplay=function(i,m){var v=this.cellSize*this.cellSize,l=Math.ceil(v/i/i*m/v),p=[];for(var f in this.cells)for(var d=this.cells[f],h=0;h<Math.min(l,d.length);h++)p.push(d[h].key);return p},O}();D.LabelGrid=Y,D.edgeLabelsToDisplayFromNodes=function z(O){var m=O.hoveredNode,v=O.highlightedNodes,C=O.displayedNodeLabels,u=[];return O.graph.forEachEdge(function(l,p,f,d){(f===m||d===m||v.has(f)||v.has(d)||C.has(f)&&C.has(d))&&u.push(l)}),u}},3650:function(ut,D,N){"use strict";var Y=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(D,"__esModule",{value:!0}),D.rectangleCollidesWithQuad=D.squareCollidesWithQuad=D.getCircumscribedAlignedRectangle=D.isRectangleAligned=void 0;var z=Y(N(3333)),m=5460,F=!1;function R(y){return y.x1===y.x2||y.y1===y.y2}function j(y){var w=Math.sqrt(Math.pow(y.x2-y.x1,2)+Math.pow(y.y2-y.y1,2)),b_x=(y.y1-y.y2)*y.height/w,b_y=(y.x2-y.x1)*y.height/w,U={x:y.x1,y:y.y1},B={x:y.x2,y:y.y2},X={x:y.x1+b_x,y:y.y1+b_y},$={x:y.x2+b_x,y:y.y2+b_y},tt=Math.min(U.x,B.x,X.x,$.x),rt=Math.max(U.x,B.x,X.x,$.x),it=Math.min(U.y,B.y,X.y,$.y);return{x1:tt,y1:it,x2:rt,y2:it,height:Math.max(U.y,B.y,X.y,$.y)-it}}function H(y,w,b,U,B,X,$){return y<U+X&&y+b>U&&w<B+$&&w+b>B}function k(y,w,b,U,B,X,$,tt){return y<B+$&&y+b>B&&w<X+tt&&w+U>X}function L(y,w,b,U,B,X){var it=y<b+B/2;return w<U+X/2?it?1:2:it?3:4}D.isRectangleAligned=R,D.getCircumscribedAlignedRectangle=j,D.squareCollidesWithQuad=H,D.rectangleCollidesWithQuad=k;var x=function(){function y(w){var b;void 0===w&&(w={}),this.containers=((b={})[m]=[],b),this.cache=null,this.lastRectangle=null;var U=Math.pow(4,5);this.data=new Float32Array((4*U-1)/3*4),this.resize(w.boundaries?w.boundaries:{x:0,y:0,width:1,height:1})}return y.prototype.add=function(w,b,U,B){return function _(y,w,b,U,B,X,$){for(var tt=B-$,rt=X-$,it=2*$,vt=0,gt=0;;){if(vt>=y)return b[gt]=b[gt]||[],void b[gt].push(U);var Ct=4*gt+4,lt=4*gt+8,Et=4*gt+12,Ot=4*gt+16,Pt=H(tt,rt,it,w[Ct+0],w[Ct+1],w[Ct+2],w[Ct+3]),ht=H(tt,rt,it,w[lt+0],w[lt+1],w[lt+2],w[lt+3]),ft=H(tt,rt,it,w[Et+0],w[Et+1],w[Et+2],w[Et+3]),At=H(tt,rt,it,w[Ot+0],w[Ot+1],w[Ot+2],w[Ot+3]),Yt=[Pt,ht,ft,At].reduce(function(qt,$t){return $t?qt+1:qt},0);if(0===Yt&&0===vt)return b[m].push(U),void(!F&&b[m].length>=5&&(F=!0,console.warn("sigma/quadtree.insertNode: At least 5 nodes are outside the global quadtree zone. You might have a problem with the normalization function or the custom bounding box.")));if(0===Yt)throw new Error("sigma/quadtree.insertNode: no collision (level: ".concat(vt,", key: ").concat(U,", x: ").concat(B,", y: ").concat(X,", size: ").concat($,")."));if(3===Yt)throw new Error("sigma/quadtree.insertNode: 3 impossible collisions (level: ".concat(vt,", key: ").concat(U,", x: ").concat(B,", y: ").concat(X,", size: ").concat($,")."));if(Yt>1)return b[gt]=b[gt]||[],void b[gt].push(U);vt++,Pt&&(gt=Ct),ht&&(gt=lt),ft&&(gt=Et),At&&(gt=Ot)}}(5,this.data,this.containers,w,b,U,B),this},y.prototype.resize=function(w){this.clear(),this.data[0]=w.x,this.data[1]=w.y,this.data[2]=w.width,this.data[3]=w.height,function A(y,w){for(var b=[0,0];b.length;){var U=b.pop(),B=b.pop(),X=4*B+4,$=4*B+8,tt=4*B+12,rt=4*B+16,it=w[B+0],vt=w[B+1],lt=w[B+2]/2,Et=w[B+3]/2;w[X+0]=it,w[X+1]=vt,w[X+2]=lt,w[X+3]=Et,w[$+0]=it+lt,w[$+1]=vt,w[$+2]=lt,w[$+3]=Et,w[tt+0]=it,w[tt+1]=vt+Et,w[tt+2]=lt,w[tt+3]=Et,w[rt+0]=it+lt,w[rt+1]=vt+Et,w[rt+2]=lt,w[rt+3]=Et,U<y-1&&(b.push(rt,U+1),b.push(tt,U+1),b.push($,U+1),b.push(X,U+1))}}(5,this.data)},y.prototype.clear=function(){var w;return this.containers=((w={})[m]=[],w),this},y.prototype.point=function(w,b){var U=this.containers[m].slice(),B=0,X=0;do{this.containers[B]&&(0,z.default)(U,this.containers[B]),B=4*B+4*L(w,b,this.data[B+0],this.data[B+1],this.data[B+2],this.data[B+3]),X++}while(X<=5);return U},y.prototype.rectangle=function(w,b,U,B,X){var $=this.lastRectangle;return $&&w===$.x1&&U===$.x2&&b===$.y1&&B===$.y2&&X===$.height||(this.lastRectangle={x1:w,y1:b,x2:U,y2:B,height:X},R(this.lastRectangle)||(this.lastRectangle=j(this.lastRectangle)),this.cache=function W(y,w,b,U,B,X,$){for(var it,tt=[0,0],rt=[];tt.length;){var vt=tt.pop(),gt=tt.pop();if((it=b[gt])&&(0,z.default)(rt,it),!(vt>=y)){var Ct=4*gt+4,lt=4*gt+8,Et=4*gt+12,Ot=4*gt+16,Pt=k(U,B,X,$,w[Ct+0],w[Ct+1],w[Ct+2],w[Ct+3]),ht=k(U,B,X,$,w[lt+0],w[lt+1],w[lt+2],w[lt+3]),ft=k(U,B,X,$,w[Et+0],w[Et+1],w[Et+2],w[Et+3]),At=k(U,B,X,$,w[Ot+0],w[Ot+1],w[Ot+2],w[Ot+3]);Pt&&tt.push(Ct,vt+1),ht&&tt.push(lt,vt+1),ft&&tt.push(Et,vt+1),At&&tt.push(Ot,vt+1)}}return rt}(5,this.data,this.containers,w,b,Math.abs(w-U)||Math.abs(b-B),X),(0,z.default)(this.cache,this.containers[m])),this.cache},y}();D.default=x},756:function(ut,D,N){"use strict";var Y=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(D,"__esModule",{value:!0}),D.Sigma=D.MouseCaptor=D.QuadTree=D.Camera=void 0;var z=Y(N(4870));D.Sigma=z.default;var O=Y(N(2002));D.Camera=O.default;var i=Y(N(3650));D.QuadTree=i.default;var m=Y(N(2465));D.MouseCaptor=m.default,D.default=z.default},1285:(ut,D)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function N(Y,z,O,i,m){var v=m.edgeLabelSize,C=m.edgeLabelFont,u=m.edgeLabelWeight,p=z.label;if(p){Y.fillStyle=m.edgeLabelColor.attribute?z[m.edgeLabelColor.attribute]||m.edgeLabelColor.color||"#000":m.edgeLabelColor.color,Y.font="".concat(u," ").concat(v,"px ").concat(C);var f=O.size,d=i.size,h=O.x,F=O.y,R=i.x,j=i.y,H=(h+R)/2,k=(F+j)/2,L=R-h,A=j-F,_=Math.sqrt(L*L+A*A);if(!(_<f+d)){H=((h+=L*f/_)+(R-=L*d/_))/2,k=((F+=A*f/_)+(j-=A*d/_))/2,L=R-h,A=j-F,_=Math.sqrt(L*L+A*A);var y,W=Y.measureText(p).width;if(W>_){for(W=Y.measureText(p+="\u2026").width;W>_&&p.length>1;)p=p.slice(0,-2)+"\u2026",W=Y.measureText(p).width;if(p.length<4)return}y=L>0?A>0?Math.acos(L/_):Math.asin(A/_):A>0?Math.acos(L/_)+Math.PI:Math.asin(L/_)+Math.PI/2,Y.save(),Y.translate(H,k),Y.rotate(y),Y.fillText(p,-W/2,z.size/2+v),Y.restore()}}}},4997:function(ut,D,N){"use strict";var Y=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(D,"__esModule",{value:!0});var z=Y(N(9597));D.default=function O(i,m,v){var C=v.labelSize,u=v.labelFont;if(i.font="".concat(v.labelWeight," ").concat(C,"px ").concat(u),i.fillStyle="#FFF",i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=8,i.shadowColor="#000","string"==typeof m.label){var f=i.measureText(m.label).width,d=Math.round(f+5),h=Math.round(C+4),F=Math.max(m.size,C/2)+2,R=Math.asin(h/2/F),j=Math.sqrt(Math.abs(Math.pow(F,2)-Math.pow(h/2,2)));i.beginPath(),i.moveTo(m.x+j,m.y+h/2),i.lineTo(m.x+F+d,m.y+h/2),i.lineTo(m.x+F+d,m.y-h/2),i.lineTo(m.x+j,m.y-h/2),i.arc(m.x,m.y,F,R,-R),i.closePath(),i.fill()}else i.beginPath(),i.arc(m.x,m.y,m.size+2,0,2*Math.PI),i.closePath(),i.fill();i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=0,(0,z.default)(i,m,v)}},9597:(ut,D)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function N(Y,z,O){if(z.label){var i=O.labelSize,m=O.labelFont,v=O.labelWeight;Y.fillStyle=O.labelColor.attribute?z[O.labelColor.attribute]||O.labelColor.color||"#000":O.labelColor.color,Y.font="".concat(v," ").concat(i,"px ").concat(m),Y.fillText(z.label,z.x+z.size+3,z.y+i/3)}}},6160:function(ut,D,N){"use strict";var v,Y=this&&this.__extends||(v=function(C,u){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var f in p)Object.prototype.hasOwnProperty.call(p,f)&&(l[f]=p[f])})(C,u)},function(C,u){if("function"!=typeof u&&null!==u)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function l(){this.constructor=C}v(C,u),C.prototype=null===u?Object.create(u):(l.prototype=u.prototype,new l)});Object.defineProperty(D,"__esModule",{value:!0}),D.createEdgeCompoundProgram=D.EdgeProgram=D.AbstractEdgeProgram=void 0;var z=N(9693),O=function(v){function C(){return null!==v&&v.apply(this,arguments)||this}return Y(C,v),C}(z.AbstractProgram);D.AbstractEdgeProgram=O;var i=function(v){function C(){return null!==v&&v.apply(this,arguments)||this}return Y(C,v),C.prototype.process=function(u,l,p,f){var d=u*this.STRIDE;if(!(f.hidden||l.hidden||p.hidden))return this.processVisibleItem(d,l,p,f);for(var h=d+this.STRIDE;d<h;d++)this.array[d]=0},C}(z.Program);D.EdgeProgram=i,D.createEdgeCompoundProgram=function m(v){return function(){function C(u,l){this.programs=v.map(function(p){return new p(u,l)})}return C.prototype.reallocate=function(u){this.programs.forEach(function(l){return l.reallocate(u)})},C.prototype.process=function(u,l,p,f){this.programs.forEach(function(d){return d.process(u,l,p,f)})},C.prototype.render=function(u){this.programs.forEach(function(l){return l.render(u)})},C}()}},4588:function(ut,D,N){"use strict";var v,Y=this&&this.__extends||(v=function(C,u){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var f in p)Object.prototype.hasOwnProperty.call(p,f)&&(l[f]=p[f])})(C,u)},function(C,u){if("function"!=typeof u&&null!==u)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function l(){this.constructor=C}v(C,u),C.prototype=null===u?Object.create(u):(l.prototype=u.prototype,new l)});Object.defineProperty(D,"__esModule",{value:!0}),D.createNodeCompoundProgram=D.NodeProgram=D.AbstractNodeProgram=void 0;var z=N(9693),O=function(v){function C(){return null!==v&&v.apply(this,arguments)||this}return Y(C,v),C}(z.AbstractProgram);D.AbstractNodeProgram=O;var i=function(v){function C(){return null!==v&&v.apply(this,arguments)||this}return Y(C,v),C.prototype.process=function(u,l){var p=u*this.STRIDE;if(!l.hidden)return this.processVisibleItem(p,l);for(var f=p+this.STRIDE;p<f;p++)this.array[p]=0},C}(z.Program);D.NodeProgram=i,D.createNodeCompoundProgram=function m(v){return function(){function C(u,l){this.programs=v.map(function(p){return new p(u,l)})}return C.prototype.reallocate=function(u){this.programs.forEach(function(l){return l.reallocate(u)})},C.prototype.process=function(u,l){this.programs.forEach(function(p){return p.process(u,l)})},C.prototype.render=function(u){this.programs.forEach(function(l){return l.render(u)})},C}()}},9693:(ut,D,N)=>{"use strict";var Y;Object.defineProperty(D,"__esModule",{value:!0}),D.Program=D.AbstractProgram=void 0;var z=N(1699),O=N(5166),i=((Y={})[WebGL2RenderingContext.BOOL]=1,Y[WebGL2RenderingContext.BYTE]=1,Y[WebGL2RenderingContext.UNSIGNED_BYTE]=1,Y[WebGL2RenderingContext.SHORT]=2,Y[WebGL2RenderingContext.UNSIGNED_SHORT]=2,Y[WebGL2RenderingContext.INT]=4,Y[WebGL2RenderingContext.UNSIGNED_INT]=4,Y[WebGL2RenderingContext.FLOAT]=4,Y);D.AbstractProgram=function C(u,l){};var v=function(){function C(u,l){var p=this;this.array=new Float32Array,this.indicesArray=null,this.uniformLocations={},this.attributeLocations={},this.capacity=0,this.verticesCount=0;var f=this.getDefinition();this.VERTICES=f.VERTICES,this.ARRAY_ITEMS_PER_VERTEX=f.ARRAY_ITEMS_PER_VERTEX,this.VERTEX_SHADER_SOURCE=f.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=f.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=f.UNIFORMS,this.ATTRIBUTES=f.ATTRIBUTES,this.STRIDE=this.VERTICES*this.ARRAY_ITEMS_PER_VERTEX,this.gl=u,this.renderer=l;var d=u.createBuffer();if(null===d)throw new Error("Program: error while creating the webgl buffer.");this.buffer=d;var h=u.createBuffer();if(null===h)throw new Error("Program: error while creating the webgl indices buffer.");this.indicesBuffer=h,this.vertexShader=(0,O.loadVertexShader)(this.gl,this.VERTEX_SHADER_SOURCE),this.fragmentShader=(0,O.loadFragmentShader)(this.gl,this.FRAGMENT_SHADER_SOURCE),this.program=(0,O.loadProgram)(this.gl,[this.vertexShader,this.fragmentShader]),this.canUse32BitsIndices=(0,z.canUse32BitsIndices)(this.gl),this.indicesType=this.canUse32BitsIndices?u.UNSIGNED_INT:u.UNSIGNED_SHORT,this.IndicesArray=this.canUse32BitsIndices?Uint32Array:Uint16Array,this.UNIFORMS.forEach(function(F){var R=p.gl.getUniformLocation(p.program,F);if(null===R)throw new Error('Program: error while getting location for uniform "'.concat(F,'".'));p.uniformLocations[F]=R}),this.ATTRIBUTES.forEach(function(F){var R=p.gl.getAttribLocation(p.program,F.name);if(-1===R)throw new Error('Program: error while getting location for attribute "'.concat(F.name,'".'));p.attributeLocations[F.name]=R})}return C.prototype.bind=function(){var u=this,l=this.gl;for(var p in l.bindBuffer(l.ARRAY_BUFFER,this.buffer),this.indicesArray&&l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),this.attributeLocations)l.enableVertexAttribArray(this.attributeLocations[p]);var f=0;this.ATTRIBUTES.forEach(function(d){l.vertexAttribPointer(u.attributeLocations[d.name],d.size,d.type,d.normalized||!1,u.ARRAY_ITEMS_PER_VERTEX*Float32Array.BYTES_PER_ELEMENT,f);var F=i[d.type];if("number"!=typeof F)throw new Error('Program.bind: yet unsupported attribute type "'.concat(d.type,'"!'));f+=d.size*F})},C.prototype.bufferData=function(){var u=this.gl;this.gl.bufferData(u.ARRAY_BUFFER,this.array,u.DYNAMIC_DRAW),this.indicesArray&&this.gl.bufferData(u.ELEMENT_ARRAY_BUFFER,this.indicesArray,u.STATIC_DRAW)},C.prototype.reallocateIndices=function(){},C.prototype.reallocate=function(u){u!==this.capacity&&(this.capacity=u,this.verticesCount=this.VERTICES*u,this.array=new Float32Array(this.verticesCount*this.ARRAY_ITEMS_PER_VERTEX),"function"==typeof this.reallocateIndices&&this.reallocateIndices())},C.prototype.hasNothingToRender=function(){return 0===this.verticesCount},C.prototype.render=function(u){this.hasNothingToRender()||(this.bind(),this.bufferData(),this.gl.useProgram(this.program),this.draw(u))},C}();D.Program=v},1391:function(ut,D,N){"use strict";var Y=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(D,"__esModule",{value:!0});var z=N(6160),O=Y(N(1034)),i=Y(N(2542)),m=(0,z.createEdgeCompoundProgram)([i.default,O.default]);D.default=m},1034:function(ut,D,N){"use strict";var f,Y=this&&this.__extends||(f=function(d,h){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,R){F.__proto__=R}||function(F,R){for(var j in R)Object.prototype.hasOwnProperty.call(R,j)&&(F[j]=R[j])})(d,h)},function(d,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function F(){this.constructor=d}f(d,h),d.prototype=null===h?Object.create(h):(F.prototype=h.prototype,new F)}),z=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(D,"__esModule",{value:!0});var O=N(1699),i=N(6160),m=z(N(4647)),v=z(N(2018)),C=WebGLRenderingContext.UNSIGNED_BYTE,u=WebGLRenderingContext.FLOAT,l=["u_matrix","u_sizeRatio","u_correctionRatio"],p=function(f){function d(){return null!==f&&f.apply(this,arguments)||this}return Y(d,f),d.prototype.getDefinition=function(){return{VERTICES:3,ARRAY_ITEMS_PER_VERTEX:9,VERTEX_SHADER_SOURCE:m.default,FRAGMENT_SHADER_SOURCE:v.default,UNIFORMS:l,ATTRIBUTES:[{name:"a_position",size:2,type:u},{name:"a_normal",size:2,type:u},{name:"a_radius",size:1,type:u},{name:"a_color",size:4,type:C,normalized:!0},{name:"a_barycentric",size:3,type:u}]}},d.prototype.processVisibleItem=function(h,F,R,j){var H=j.size||1,k=R.size||1,L=F.x,A=F.y,_=R.x,W=R.y,x=(0,O.floatColor)(j.color),y=_-L,w=W-A,b=y*y+w*w,U=0,B=0;b&&(U=-w*(b=1/Math.sqrt(b))*H,B=y*b*H);var X=this.array;X[h++]=_,X[h++]=W,X[h++]=-U,X[h++]=-B,X[h++]=k,X[h++]=x,X[h++]=1,X[h++]=0,X[h++]=0,X[h++]=_,X[h++]=W,X[h++]=-U,X[h++]=-B,X[h++]=k,X[h++]=x,X[h++]=0,X[h++]=1,X[h++]=0,X[h++]=_,X[h++]=W,X[h++]=-U,X[h++]=-B,X[h++]=k,X[h++]=x,X[h++]=0,X[h++]=0,X[h]=1},d.prototype.draw=function(h){var F=this.gl,R=this.uniformLocations,H=R.u_sizeRatio,k=R.u_correctionRatio;F.uniformMatrix3fv(R.u_matrix,!1,h.matrix),F.uniform1f(H,h.sizeRatio),F.uniform1f(k,h.correctionRatio),F.drawArrays(F.TRIANGLES,0,this.verticesCount)},d}(i.EdgeProgram);D.default=p},2542:function(ut,D,N){"use strict";var p,Y=this&&this.__extends||(p=function(f,d){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,F){h.__proto__=F}||function(h,F){for(var R in F)Object.prototype.hasOwnProperty.call(F,R)&&(h[R]=F[R])})(f,d)},function(f,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function h(){this.constructor=f}p(f,d),f.prototype=null===d?Object.create(d):(h.prototype=d.prototype,new h)}),z=this&&this.__assign||function(){return z=Object.assign||function(p){for(var f,d=1,h=arguments.length;d<h;d++)for(var F in f=arguments[d])Object.prototype.hasOwnProperty.call(f,F)&&(p[F]=f[F]);return p},z.apply(this,arguments)},O=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(D,"__esModule",{value:!0});var i=O(N(5803)),m=O(N(2529)),v=N(1699),C=WebGLRenderingContext.UNSIGNED_BYTE,u=WebGLRenderingContext.FLOAT,l=function(p){function f(){return null!==p&&p.apply(this,arguments)||this}return Y(f,p),f.prototype.getDefinition=function(){return z(z({},p.prototype.getDefinition.call(this)),{ARRAY_ITEMS_PER_VERTEX:6,VERTEX_SHADER_SOURCE:m.default,ATTRIBUTES:[{name:"a_position",size:2,type:u},{name:"a_normal",size:2,type:u},{name:"a_color",size:4,type:C,normalized:!0},{name:"a_radius",size:1,type:u}]})},f.prototype.processVisibleItem=function(d,h,F,R){var j=R.size||1,H=h.x,k=h.y,L=F.x,A=F.y,_=(0,v.floatColor)(R.color),W=L-H,x=A-k,y=F.size||1,w=W*W+x*x,b=0,U=0;w&&(b=-x*(w=1/Math.sqrt(w))*j,U=W*w*j);var B=this.array;B[d++]=H,B[d++]=k,B[d++]=b,B[d++]=U,B[d++]=_,B[d++]=0,B[d++]=H,B[d++]=k,B[d++]=-b,B[d++]=-U,B[d++]=_,B[d++]=0,B[d++]=L,B[d++]=A,B[d++]=b,B[d++]=U,B[d++]=_,B[d++]=y,B[d++]=L,B[d++]=A,B[d++]=-b,B[d++]=-U,B[d++]=_,B[d]=-y},f}(i.default);D.default=l},5803:function(ut,D,N){"use strict";var f,Y=this&&this.__extends||(f=function(d,h){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,R){F.__proto__=R}||function(F,R){for(var j in R)Object.prototype.hasOwnProperty.call(R,j)&&(F[j]=R[j])})(d,h)},function(d,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function F(){this.constructor=d}f(d,h),d.prototype=null===h?Object.create(h):(F.prototype=h.prototype,new F)}),z=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(D,"__esModule",{value:!0});var O=N(1699),i=N(6160),m=z(N(4464)),v=z(N(5179)),C=WebGLRenderingContext.UNSIGNED_BYTE,u=WebGLRenderingContext.FLOAT,l=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio"],p=function(f){function d(){return null!==f&&f.apply(this,arguments)||this}return Y(d,f),d.prototype.getDefinition=function(){return{VERTICES:4,ARRAY_ITEMS_PER_VERTEX:5,VERTEX_SHADER_SOURCE:m.default,FRAGMENT_SHADER_SOURCE:v.default,UNIFORMS:l,ATTRIBUTES:[{name:"a_position",size:2,type:u},{name:"a_normal",size:2,type:u},{name:"a_color",size:4,type:C,normalized:!0}]}},d.prototype.reallocateIndices=function(){for(var h=this.verticesCount,R=new this.IndicesArray(h+h/2),j=0,H=0;j<h;j+=4)R[H++]=j,R[H++]=j+1,R[H++]=j+2,R[H++]=j+2,R[H++]=j+1,R[H++]=j+3;this.indicesArray=R},d.prototype.processVisibleItem=function(h,F,R,j){var H=j.size||1,k=F.x,L=F.y,A=R.x,_=R.y,W=(0,O.floatColor)(j.color),x=A-k,y=_-L,w=x*x+y*y,b=0,U=0;w&&(b=-y*(w=1/Math.sqrt(w))*H,U=x*w*H);var B=this.array;B[h++]=k,B[h++]=L,B[h++]=b,B[h++]=U,B[h++]=W,B[h++]=k,B[h++]=L,B[h++]=-b,B[h++]=-U,B[h++]=W,B[h++]=A,B[h++]=_,B[h++]=b,B[h++]=U,B[h++]=W,B[h++]=A,B[h++]=_,B[h++]=-b,B[h++]=-U,B[h]=W},d.prototype.draw=function(h){var F=this.gl,R=this.uniformLocations,H=R.u_zoomRatio,k=R.u_correctionRatio,L=R.u_sizeRatio;if(F.uniformMatrix3fv(R.u_matrix,!1,h.matrix),F.uniform1f(H,h.zoomRatio),F.uniform1f(L,h.sizeRatio),F.uniform1f(k,h.correctionRatio),!this.indicesArray)throw new Error("EdgeRectangleProgram: indicesArray should be allocated when drawing!");F.drawElements(F.TRIANGLES,this.indicesArray.length,this.indicesType,0)},d}(i.EdgeProgram);D.default=p},780:function(ut,D,N){"use strict";var f,Y=this&&this.__extends||(f=function(d,h){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,R){F.__proto__=R}||function(F,R){for(var j in R)Object.prototype.hasOwnProperty.call(R,j)&&(F[j]=R[j])})(d,h)},function(d,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function F(){this.constructor=d}f(d,h),d.prototype=null===h?Object.create(h):(F.prototype=h.prototype,new F)}),z=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(D,"__esModule",{value:!0});var O=N(1699),i=N(4588),m=z(N(7165)),v=z(N(517)),C=WebGLRenderingContext.UNSIGNED_BYTE,u=WebGLRenderingContext.FLOAT,l=["u_sizeRatio","u_pixelRatio","u_matrix"],p=function(f){function d(){return null!==f&&f.apply(this,arguments)||this}return Y(d,f),d.prototype.getDefinition=function(){return{VERTICES:1,ARRAY_ITEMS_PER_VERTEX:4,VERTEX_SHADER_SOURCE:m.default,FRAGMENT_SHADER_SOURCE:v.default,UNIFORMS:l,ATTRIBUTES:[{name:"a_position",size:2,type:u},{name:"a_size",size:1,type:u},{name:"a_color",size:4,type:C,normalized:!0}]}},d.prototype.processVisibleItem=function(h,F){var R=this.array;R[h++]=F.x,R[h++]=F.y,R[h++]=F.size,R[h]=(0,O.floatColor)(F.color)},d.prototype.draw=function(h){var F=this.gl,R=this.uniformLocations,H=R.u_pixelRatio,k=R.u_matrix;F.uniform1f(R.u_sizeRatio,h.sizeRatio),F.uniform1f(H,h.pixelRatio),F.uniformMatrix3fv(k,!1,h.matrix),F.drawArrays(F.POINTS,0,this.verticesCount)},d}(i.NodeProgram);D.default=p},2018:ut=>{(()=>{"use strict";var D={d:(z,O)=>{for(var i in O)D.o(O,i)&&!D.o(z,i)&&Object.defineProperty(z,i,{enumerable:!0,get:O[i]})},o:(z,O)=>Object.prototype.hasOwnProperty.call(z,O),r:z=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})}},N={};D.r(N),D.d(N,{default:()=>Y});const Y="precision mediump float;\n\nvarying vec4 v_color;\n\nvoid main(void) {\n  gl_FragColor = v_color;\n}\n";ut.exports=N})()},4647:ut=>{(()=>{"use strict";var D={d:(z,O)=>{for(var i in O)D.o(O,i)&&!D.o(z,i)&&Object.defineProperty(z,i,{enumerable:!0,get:O[i]})},o:(z,O)=>Object.prototype.hasOwnProperty.call(z,O),r:z=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})}},N={};D.r(N),D.d(N,{default:()=>Y});const Y="attribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_radius;\nattribute vec4 a_color;\nattribute vec3 a_barycentric;\n\nuniform mat3 u_matrix;\nuniform float u_sizeRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\nconst float arrowHeadWidthLengthRatio = 0.66;\nconst float arrowHeadLengthThicknessRatio = 2.5;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl and\n  // edge.clamped.vert.glsl. Please read it to get better comments on what's\n  // happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;\n  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;\n  float webGLArrowHeadLength = webGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\n  float webGLArrowHeadHalfWidth = webGLArrowHeadLength * arrowHeadWidthLengthRatio / 2.0;\n\n  float da = a_barycentric.x;\n  float db = a_barycentric.y;\n  float dc = a_barycentric.z;\n\n  vec2 delta = vec2(\n      da * (webGLNodeRadius * unitNormal.y)\n    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadHalfWidth * unitNormal.x)\n    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadHalfWidth * unitNormal.x),\n\n      da * (-webGLNodeRadius * unitNormal.x)\n    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadHalfWidth * unitNormal.y)\n    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadHalfWidth * unitNormal.y)\n  );\n\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\n\n  gl_Position = vec4(position, 0, 1);\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";ut.exports=N})()},2529:ut=>{(()=>{"use strict";var D={d:(z,O)=>{for(var i in O)D.o(O,i)&&!D.o(z,i)&&Object.defineProperty(z,i,{enumerable:!0,get:O[i]})},o:(z,O)=>Object.prototype.hasOwnProperty.call(z,O),r:z=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})}},N={};D.r(N),D.d(N,{default:()=>Y});const Y="attribute vec4 a_color;\nattribute vec2 a_normal;\nattribute vec2 a_position;\nattribute float a_radius;\n\nuniform mat3 u_matrix;\nuniform float u_zoomRatio;\nuniform float u_sizeRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\nconst float arrowHeadLengthThicknessRatio = 2.5;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl. Please read it to\n  // get better comments on what's happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;\n\n  // Here, we move the point to leave space for the arrow head:\n  float direction = sign(a_radius);\n  float webGLNodeRadius = direction * a_radius * 2.0 * u_correctionRatio / u_sizeRatio;\n  float webGLArrowHeadLength = webGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\n\n  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);\n\n  v_thickness = webGLThickness / u_zoomRatio;\n\n  v_normal = unitNormal;\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";ut.exports=N})()},5179:ut=>{(()=>{"use strict";var D={d:(z,O)=>{for(var i in O)D.o(O,i)&&!D.o(z,i)&&Object.defineProperty(z,i,{enumerable:!0,get:O[i]})},o:(z,O)=>Object.prototype.hasOwnProperty.call(z,O),r:z=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})}},N={};D.r(N),D.d(N,{default:()=>Y});const Y="precision mediump float;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float feather = 0.001;\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  float dist = length(v_normal) * v_thickness;\n\n  float t = smoothstep(\n    v_thickness - feather,\n    v_thickness,\n    dist\n  );\n\n  gl_FragColor = mix(v_color, transparent, t);\n}\n";ut.exports=N})()},4464:ut=>{(()=>{"use strict";var D={d:(z,O)=>{for(var i in O)D.o(O,i)&&!D.o(z,i)&&Object.defineProperty(z,i,{enumerable:!0,get:O[i]})},o:(z,O)=>Object.prototype.hasOwnProperty.call(z,O),r:z=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})}},N={};D.r(N),D.d(N,{default:()=>Y});const Y='attribute vec4 a_color;\nattribute vec2 a_normal;\nattribute vec2 a_position;\n\nuniform mat3 u_matrix;\nuniform float u_sizeRatio;\nuniform float u_zoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // We require edges to be at least `minThickness` pixels thick *on screen*\n  // (so we need to compensate the size ratio):\n  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);\n\n  // Then, we need to retrieve the normalized thickness of the edge in the WebGL\n  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction\n  // ratio:\n  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * webGLThickness, 1)).xy, 0, 1);\n\n  // For the fragment shader though, we need a thickness that takes the "magic"\n  // correction ratio into account (as in webGLThickness), but so that the\n  // antialiasing effect does not depend on the zoom level. So here\'s yet\n  // another thickness version:\n  v_thickness = webGLThickness / u_zoomRatio;\n\n  v_normal = unitNormal;\n  v_color = a_color;\n  v_color.a *= bias;\n}\n';ut.exports=N})()},517:ut=>{(()=>{"use strict";var D={d:(z,O)=>{for(var i in O)D.o(O,i)&&!D.o(z,i)&&Object.defineProperty(z,i,{enumerable:!0,get:O[i]})},o:(z,O)=>Object.prototype.hasOwnProperty.call(z,O),r:z=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})}},N={};D.r(N),D.d(N,{default:()=>Y});const Y="precision mediump float;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float radius = 0.5;\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  vec2 m = gl_PointCoord - vec2(0.5, 0.5);\n  float dist = radius - length(m);\n\n  float t = 0.0;\n  if (dist > v_border)\n    t = 1.0;\n  else if (dist > 0.0)\n    t = dist / v_border;\n\n  gl_FragColor = mix(transparent, v_color, t);\n}\n";ut.exports=N})()},7165:ut=>{(()=>{"use strict";var D={d:(z,O)=>{for(var i in O)D.o(O,i)&&!D.o(z,i)&&Object.defineProperty(z,i,{enumerable:!0,get:O[i]})},o:(z,O)=>Object.prototype.hasOwnProperty.call(z,O),r:z=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})}},N={};D.r(N),D.d(N,{default:()=>Y});const Y="attribute vec2 a_position;\nattribute float a_size;\nattribute vec4 a_color;\n\nuniform float u_sizeRatio;\nuniform float u_pixelRatio;\nuniform mat3 u_matrix;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  gl_Position = vec4(\n    (u_matrix * vec3(a_position, 1)).xy,\n    0,\n    1\n  );\n\n  // Multiply the point size twice:\n  //  - x SCALING_RATIO to correct the canvas scaling\n  //  - x 2 to correct the formulae\n  gl_PointSize = a_size / u_sizeRatio * u_pixelRatio * 2.0;\n\n  v_border = (0.5 / a_size) * u_sizeRatio;\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";ut.exports=N})()},5166:(ut,D)=>{"use strict";function N(i,m,v){var u=m.createShader("VERTEX"===i?m.VERTEX_SHADER:m.FRAGMENT_SHADER);if(null===u)throw new Error("loadShader: error while creating the shader");if(m.shaderSource(u,v),m.compileShader(u),!m.getShaderParameter(u,m.COMPILE_STATUS)){var p=m.getShaderInfoLog(u);throw m.deleteShader(u),new Error("loadShader: error while compiling the shader:\n".concat(p,"\n").concat(v))}return u}Object.defineProperty(D,"__esModule",{value:!0}),D.loadProgram=D.loadFragmentShader=D.loadVertexShader=void 0,D.loadVertexShader=function Y(i,m){return N("VERTEX",i,m)},D.loadFragmentShader=function z(i,m){return N("FRAGMENT",i,m)},D.loadProgram=function O(i,m){var C,u,v=i.createProgram();if(null===v)throw new Error("loadProgram: error while creating the program.");for(C=0,u=m.length;C<u;C++)i.attachShader(v,m[C]);if(i.linkProgram(v),!i.getProgramParameter(v,i.LINK_STATUS))throw i.deleteProgram(v),new Error("loadProgram: error while linking the program.");return v}},2621:function(ut,D,N){"use strict";var Y=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(D,"__esModule",{value:!0}),D.resolveSettings=D.validateSettings=D.DEFAULT_EDGE_PROGRAM_CLASSES=D.DEFAULT_NODE_PROGRAM_CLASSES=D.DEFAULT_SETTINGS=void 0;var z=N(1699),O=Y(N(9597)),i=Y(N(4997)),m=Y(N(1285)),v=Y(N(780)),C=Y(N(5803)),u=Y(N(1391));D.DEFAULT_SETTINGS={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeClickEvents:!1,enableEdgeWheelEvents:!1,enableEdgeHoverEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,labelRenderer:O.default,hoverRenderer:i.default,edgeLabelRenderer:m.default,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},D.DEFAULT_NODE_PROGRAM_CLASSES={circle:v.default},D.DEFAULT_EDGE_PROGRAM_CLASSES={arrow:u.default,line:C.default},D.validateSettings=function l(f){if("number"!=typeof f.labelDensity||f.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var d=f.minCameraRatio,h=f.maxCameraRatio;if("number"==typeof d&&"number"==typeof h&&h<d)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")},D.resolveSettings=function p(f){var d=(0,z.assign)({},D.DEFAULT_SETTINGS,f);return d.nodeProgramClasses=(0,z.assign)({},D.DEFAULT_NODE_PROGRAM_CLASSES,d.nodeProgramClasses),d.edgeProgramClasses=(0,z.assign)({},D.DEFAULT_EDGE_PROGRAM_CLASSES,d.edgeProgramClasses),d}},4870:function(ut,D,N){"use strict";var _,Y=this&&this.__extends||(_=function(W,x){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,w){y.__proto__=w}||function(y,w){for(var b in w)Object.prototype.hasOwnProperty.call(w,b)&&(y[b]=w[b])})(W,x)},function(W,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function y(){this.constructor=W}_(W,x),W.prototype=null===x?Object.create(x):(y.prototype=x.prototype,new y)}),z=this&&this.__assign||function(){return z=Object.assign||function(_){for(var W,x=1,y=arguments.length;x<y;x++)for(var w in W=arguments[x])Object.prototype.hasOwnProperty.call(W,w)&&(_[w]=W[w]);return _},z.apply(this,arguments)},O=this&&this.__values||function(_){var W="function"==typeof Symbol&&Symbol.iterator,x=W&&_[W],y=0;if(x)return x.call(_);if(_&&"number"==typeof _.length)return{next:function(){return _&&y>=_.length&&(_=void 0),{value:_&&_[y++],done:!_}}};throw new TypeError(W?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(D,"__esModule",{value:!0});var m=i(N(3333)),v=i(N(2002)),C=i(N(2465)),u=i(N(3650)),l=N(57),p=N(1699),f=N(4942),d=N(2621),h=i(N(1565)),F=N(7611),R=N(3180);function k(_,W,x){if(!x.hasOwnProperty("x")||!x.hasOwnProperty("y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(W,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return x.color||(x.color=_.defaultNodeColor),!x.label&&""!==x.label&&(x.label=null),x.label=null!=x.label?""+x.label:null,x.size||(x.size=2),x.hasOwnProperty("hidden")||(x.hidden=!1),x.hasOwnProperty("highlighted")||(x.highlighted=!1),x.hasOwnProperty("forceLabel")||(x.forceLabel=!1),(!x.type||""===x.type)&&(x.type=_.defaultNodeType),x.zIndex||(x.zIndex=0),x}function L(_,W,x){return x.color||(x.color=_.defaultEdgeColor),x.label||(x.label=""),x.size||(x.size=.5),x.hasOwnProperty("hidden")||(x.hidden=!1),x.hasOwnProperty("forceLabel")||(x.forceLabel=!1),(!x.type||""===x.type)&&(x.type=_.defaultEdgeType),x.zIndex||(x.zIndex=0),x}var A=function(_){function W(x,y,w){void 0===w&&(w={});var b=_.call(this)||this;if(b.elements={},b.canvasContexts={},b.webGLContexts={},b.activeListeners={},b.quadtree=new u.default,b.labelGrid=new f.LabelGrid,b.nodeDataCache={},b.edgeDataCache={},b.nodesWithForcedLabels=[],b.edgesWithForcedLabels=[],b.nodeExtent={x:[0,1],y:[0,1]},b.matrix=(0,F.identity)(),b.invMatrix=(0,F.identity)(),b.correctionRatio=1,b.customBBox=null,b.normalizationFunction=(0,p.createNormalizationFunction)({x:[0,1],y:[0,1]}),b.graphToViewportRatio=1,b.width=0,b.height=0,b.pixelRatio=(0,p.getPixelRatio)(),b.displayedNodeLabels=new Set,b.displayedEdgeLabels=new Set,b.highlightedNodes=new Set,b.hoveredNode=null,b.hoveredEdge=null,b.renderFrame=null,b.renderHighlightedNodesFrame=null,b.needToProcess=!1,b.checkEdgesEventsFrame=null,b.nodePrograms={},b.nodeHoverPrograms={},b.edgePrograms={},b.settings=(0,d.resolveSettings)(w),(0,d.validateSettings)(b.settings),(0,p.validateGraph)(x),!(y instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");for(var U in b.graph=x,b.container=y,b.createWebGLContext("edges",{preserveDrawingBuffer:!0}),b.createCanvasContext("edgeLabels"),b.createWebGLContext("nodes"),b.createCanvasContext("labels"),b.createCanvasContext("hovers"),b.createWebGLContext("hoverNodes"),b.createCanvasContext("mouse"),b.webGLContexts){var B=b.webGLContexts[U];B.blendFunc(B.ONE,B.ONE_MINUS_SRC_ALPHA),B.enable(B.BLEND)}for(var X in b.settings.nodeProgramClasses){var $=b.settings.nodeProgramClasses[X];b.nodePrograms[X]=new $(b.webGLContexts.nodes,b);var tt=$;X in b.settings.nodeHoverProgramClasses&&(tt=b.settings.nodeHoverProgramClasses[X]),b.nodeHoverPrograms[X]=new tt(b.webGLContexts.hoverNodes,b)}for(var X in b.settings.edgeProgramClasses)b.edgePrograms[X]=new(0,b.settings.edgeProgramClasses[X])(b.webGLContexts.edges,b);return b.resize(),b.camera=new v.default,b.bindCameraHandlers(),b.mouseCaptor=new C.default(b.elements.mouse,b),b.touchCaptor=new h.default(b.elements.mouse,b),b.bindEventHandlers(),b.bindGraphHandlers(),b.handleSettingsUpdate(),b.refresh(),b}return Y(W,_),W.prototype.createCanvas=function(x){var y=(0,p.createElement)("canvas",{position:"absolute"},{class:"sigma-".concat(x)});return this.elements[x]=y,this.container.appendChild(y),y},W.prototype.createCanvasContext=function(x){var y=this.createCanvas(x);return this.canvasContexts[x]=y.getContext("2d",{preserveDrawingBuffer:!1,antialias:!1}),this},W.prototype.createWebGLContext=function(x,y){var U,w=this.createCanvas(x),b=z({preserveDrawingBuffer:!1,antialias:!1},y||{});return(U=w.getContext("webgl2",b))||(U=w.getContext("webgl",b)),U||(U=w.getContext("experimental-webgl",b)),this.webGLContexts[x]=U,this},W.prototype.bindCameraHandlers=function(){var x=this;return this.activeListeners.camera=function(){x.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this},W.prototype.unbindCameraHandlers=function(){return this.camera.removeListener("updated",this.activeListeners.camera),this},W.prototype.mouseIsOnNode=function(x,y,w){var b=x.x,U=x.y,B=y.x,X=y.y;return b>B-w&&b<B+w&&U>X-w&&U<X+w&&Math.sqrt(Math.pow(b-B,2)+Math.pow(U-X,2))<w},W.prototype.getQuadNodes=function(x){var y=this.viewportToFramedGraph(x);return this.quadtree.point(y.x,1-y.y)},W.prototype.getNodeAtPosition=function(x){for(var y=x.x,w=x.y,b=this.getQuadNodes(x),U=1/0,B=null,X=0,$=b.length;X<$;X++){var tt=b[X],rt=this.nodeDataCache[tt],it=this.framedGraphToViewport(rt),vt=this.scaleSize(rt.size);if(!rt.hidden&&this.mouseIsOnNode(x,it,vt)){var gt=Math.sqrt(Math.pow(y-it.x,2)+Math.pow(w-it.y,2));gt<U&&(U=gt,B=tt)}}return B},W.prototype.bindEventHandlers=function(){var x=this;this.activeListeners.handleResize=function(){x.scheduleRender()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(w){var b={event:w,preventSigmaDefault:function(){w.preventSigmaDefault()}},U=x.getNodeAtPosition(w);if(U&&x.hoveredNode!==U&&!x.nodeDataCache[U].hidden)return x.hoveredNode&&x.emit("leaveNode",z(z({},b),{node:x.hoveredNode})),x.hoveredNode=U,x.emit("enterNode",z(z({},b),{node:U})),void x.scheduleHighlightedNodesRender();if(x.hoveredNode){var B=x.nodeDataCache[x.hoveredNode],X=x.framedGraphToViewport(B),$=x.scaleSize(B.size);if(!x.mouseIsOnNode(w,X,$)){var tt=x.hoveredNode;return x.hoveredNode=null,x.emit("leaveNode",z(z({},b),{node:tt})),void x.scheduleHighlightedNodesRender()}}!0===x.settings.enableEdgeHoverEvents?x.checkEdgeHoverEvents(b):"debounce"===x.settings.enableEdgeHoverEvents&&(x.checkEdgesEventsFrame||(x.checkEdgesEventsFrame=(0,p.requestFrame)(function(){x.checkEdgeHoverEvents(b),x.checkEdgesEventsFrame=null})))};var y=function(w){return function(b){var U={event:b,preventSigmaDefault:function(){b.preventSigmaDefault()}},X=b.original.isFakeSigmaMouseEvent?x.getNodeAtPosition(b):x.hoveredNode;if(X)return x.emit("".concat(w,"Node"),z(z({},U),{node:X}));if("wheel"===w?x.settings.enableEdgeWheelEvents:x.settings.enableEdgeClickEvents){var $=x.getEdgeAtPoint(b.x,b.y);if($)return x.emit("".concat(w,"Edge"),z(z({},U),{edge:$}))}return x.emit("".concat(w,"Stage"),U)}};return this.activeListeners.handleClick=y("click"),this.activeListeners.handleRightClick=y("rightClick"),this.activeListeners.handleDoubleClick=y("doubleClick"),this.activeListeners.handleWheel=y("wheel"),this.activeListeners.handleDown=y("down"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this},W.prototype.bindGraphHandlers=function(){var x=this,y=this.graph;return this.activeListeners.graphUpdate=function(){x.scheduleRefresh()},this.activeListeners.dropNodeGraphUpdate=function(w){delete x.nodeDataCache[w.key],x.hoveredNode===w.key&&(x.hoveredNode=null),x.activeListeners.graphUpdate()},this.activeListeners.dropEdgeGraphUpdate=function(w){delete x.edgeDataCache[w.key],x.hoveredEdge===w.key&&(x.hoveredEdge=null),x.activeListeners.graphUpdate()},this.activeListeners.clearEdgesGraphUpdate=function(){x.edgeDataCache={},x.hoveredEdge=null,x.activeListeners.graphUpdate()},this.activeListeners.clearGraphUpdate=function(){x.nodeDataCache={},x.hoveredNode=null,x.activeListeners.clearEdgesGraphUpdate()},y.on("nodeAdded",this.activeListeners.graphUpdate),y.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),y.on("nodeAttributesUpdated",this.activeListeners.graphUpdate),y.on("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),y.on("edgeAdded",this.activeListeners.graphUpdate),y.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),y.on("edgeAttributesUpdated",this.activeListeners.graphUpdate),y.on("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),y.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),y.on("cleared",this.activeListeners.clearGraphUpdate),this},W.prototype.unbindGraphHandlers=function(){var x=this.graph;x.removeListener("nodeAdded",this.activeListeners.graphUpdate),x.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),x.removeListener("nodeAttributesUpdated",this.activeListeners.graphUpdate),x.removeListener("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),x.removeListener("edgeAdded",this.activeListeners.graphUpdate),x.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),x.removeListener("edgeAttributesUpdated",this.activeListeners.graphUpdate),x.removeListener("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),x.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),x.removeListener("cleared",this.activeListeners.clearGraphUpdate)},W.prototype.checkEdgeHoverEvents=function(x){var y=this.hoveredNode?null:this.getEdgeAtPoint(x.event.x,x.event.y);return y!==this.hoveredEdge&&(this.hoveredEdge&&this.emit("leaveEdge",z(z({},x),{edge:this.hoveredEdge})),y&&this.emit("enterEdge",z(z({},x),{edge:y})),this.hoveredEdge=y),this},W.prototype.getEdgeAtPoint=function(x,y){var w,b,U=this,X=this.edgeDataCache,$=this.nodeDataCache;if(!(0,R.isPixelColored)(this.webGLContexts.edges,x*this.pixelRatio,y*this.pixelRatio))return null;var tt=this.viewportToGraph({x,y}),rt=tt.x,it=tt.y,vt=0;if(this.graph.someEdge(function(ft,At,Yt,qt,$t,Xt){var Qt=$t.x,ue=$t.y,me=Xt.x,ce=Xt.y;if(X[ft].hidden||$[Yt].hidden||$[qt].hidden)return!1;if(Qt!==me||ue!==ce){var Re=Math.sqrt(Math.pow(me-Qt,2)+Math.pow(ce-ue,2)),re=U.graphToViewport({x:Qt,y:ue}),fn=re.x,Un=re.y,Be=U.graphToViewport({x:me,y:ce}),dn=Be.y,gn=Math.sqrt(Math.pow(Be.x-fn,2)+Math.pow(dn-Un,2));return vt=Re/gn,!0}}),!vt)return null;var gt=this.graph.filterEdges(function(ft,At,Yt,qt,$t,Xt){return!(X[ft].hidden||$[Yt].hidden||$[qt].hidden)&&(!!(0,R.doEdgeCollideWithPoint)(rt,it,$t.x,$t.y,Xt.x,Xt.y,U.scaleSize(X[ft].size*vt))||void 0)});if(0===gt.length)return null;var Ct=gt[gt.length-1],lt=-1/0;try{for(var Et=O(gt),Ot=Et.next();!Ot.done;Ot=Et.next()){var Pt=Ot.value,ht=this.graph.getEdgeAttribute(Pt,"zIndex");ht>=lt&&(Ct=Pt,lt=ht)}}catch(ft){w={error:ft}}finally{try{Ot&&!Ot.done&&(b=Et.return)&&b.call(Et)}finally{if(w)throw w.error}}return Ct},W.prototype.process=function(){var x=this,y=this.graph,w=this.settings,b=this.getDimensions(),U=[1/0,-1/0],B=[1/0,-1/0];this.quadtree.clear(),this.labelGrid.resizeAndClear(b,w.labelGridCellSize),this.highlightedNodes=new Set,this.nodeExtent=(0,p.graphExtent)(y),this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[];var X=new v.default,$=(0,p.matrixFromCamera)(X.getState(),this.getDimensions(),this.getGraphDimensions(),this.getSetting("stagePadding")||0);this.normalizationFunction=(0,p.createNormalizationFunction)(this.customBBox||this.nodeExtent);for(var tt={},rt=y.nodes(),it=0,vt=rt.length;it<vt;it++){var gt=rt[it],Ct=Object.assign({},y.getNodeAttributes(gt));w.nodeReducer&&(Ct=w.nodeReducer(gt,Ct)),tt[(lt=k(this.settings,gt,Ct)).type]=(tt[lt.type]||0)+1,this.nodeDataCache[gt]=lt,this.normalizationFunction.applyTo(lt),lt.forceLabel&&this.nodesWithForcedLabels.push(gt),this.settings.zIndex&&(lt.zIndex<U[0]&&(U[0]=lt.zIndex),lt.zIndex>U[1]&&(U[1]=lt.zIndex))}for(var Et in this.nodePrograms){if(!this.nodePrograms.hasOwnProperty(Et))throw new Error('Sigma: could not find a suitable program for node type "'.concat(Et,'"!'));this.nodePrograms[Et].reallocate(tt[Et]||0),tt[Et]=0}this.settings.zIndex&&U[0]!==U[1]&&(rt=(0,p.zIndexOrdering)(U,function(Xt){return x.nodeDataCache[Xt].zIndex},rt));var Ot=this.normalizationFunction.ratio;for(it=0,vt=rt.length;it<vt;it++){this.quadtree.add(gt=rt[it],(lt=this.nodeDataCache[gt]).x,1-lt.y,this.scaleSize(lt.size,1)/Ot),"string"==typeof lt.label&&!lt.hidden&&this.labelGrid.add(gt,lt.size,this.framedGraphToViewport(lt,{matrix:$}));var Pt=this.nodePrograms[lt.type];if(!Pt)throw new Error('Sigma: could not find a suitable program for node type "'.concat(lt.type,'"!'));Pt.process(tt[lt.type]++,lt),lt.highlighted&&!lt.hidden&&this.highlightedNodes.add(gt)}this.labelGrid.organize();var ht={},ft=y.edges();for(it=0,vt=ft.length;it<vt;it++){var At=ft[it];Ct=Object.assign({},y.getEdgeAttributes(At)),w.edgeReducer&&(Ct=w.edgeReducer(At,Ct)),ht[(lt=L(this.settings,0,Ct)).type]=(ht[lt.type]||0)+1,this.edgeDataCache[At]=lt,lt.forceLabel&&!lt.hidden&&this.edgesWithForcedLabels.push(At),this.settings.zIndex&&(lt.zIndex<B[0]&&(B[0]=lt.zIndex),lt.zIndex>B[1]&&(B[1]=lt.zIndex))}for(var Et in this.edgePrograms){if(!this.edgePrograms.hasOwnProperty(Et))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(Et,'"!'));this.edgePrograms[Et].reallocate(ht[Et]||0),ht[Et]=0}for(this.settings.zIndex&&B[0]!==B[1]&&(ft=(0,p.zIndexOrdering)(B,function(Xt){return x.edgeDataCache[Xt].zIndex},ft)),it=0,vt=ft.length;it<vt;it++){var lt=this.edgeDataCache[At=ft[it]],Yt=y.extremities(At),qt=this.nodeDataCache[Yt[0]],$t=this.nodeDataCache[Yt[1]];this.edgePrograms[lt.type].process(ht[lt.type]++,qt,$t,lt)}return this},W.prototype.handleSettingsUpdate=function(){return this.camera.minRatio=this.settings.minCameraRatio,this.camera.maxRatio=this.settings.maxCameraRatio,this.camera.setState(this.camera.validateState(this.camera.getState())),this},W.prototype.renderLabels=function(){if(!this.settings.renderLabels)return this;var x=this.camera.getState(),y=this.labelGrid.getLabelsToDisplay(x.ratio,this.settings.labelDensity);(0,m.default)(y,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var w=this.canvasContexts.labels,b=0,U=y.length;b<U;b++){var B=y[b],X=this.nodeDataCache[B];if(!this.displayedNodeLabels.has(B)&&!X.hidden){var $=this.framedGraphToViewport(X),tt=$.x,rt=$.y,it=this.scaleSize(X.size);!X.forceLabel&&it<this.settings.labelRenderedSizeThreshold||tt<-150||tt>this.width+150||rt<-50||rt>this.height+50||(this.displayedNodeLabels.add(B),this.settings.labelRenderer(w,z(z({key:B},X),{size:it,x:tt,y:rt}),this.settings))}}return this},W.prototype.renderEdgeLabels=function(){if(!this.settings.renderEdgeLabels)return this;var x=this.canvasContexts.edgeLabels;x.clearRect(0,0,this.width,this.height);for(var y=(0,f.edgeLabelsToDisplayFromNodes)({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes}).concat(this.edgesWithForcedLabels),w=new Set,b=0,U=y.length;b<U;b++){var B=y[b],X=this.graph.extremities(B),$=this.nodeDataCache[X[0]],tt=this.nodeDataCache[X[1]],rt=this.edgeDataCache[B];w.has(B)||rt.hidden||$.hidden||tt.hidden||(this.settings.edgeLabelRenderer(x,z(z({key:B},rt),{size:this.scaleSize(rt.size)}),z(z(z({key:X[0]},$),this.framedGraphToViewport($)),{size:this.scaleSize($.size)}),z(z(z({key:X[1]},tt),this.framedGraphToViewport(tt)),{size:this.scaleSize(tt.size)}),this.settings),w.add(B))}return this.displayedEdgeLabels=w,this},W.prototype.renderHighlightedNodes=function(){var x=this,y=this.canvasContexts.hovers;y.clearRect(0,0,this.width,this.height);var b=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&b.push(this.hoveredNode),this.highlightedNodes.forEach(function($){$!==x.hoveredNode&&b.push($)}),b.forEach(function($){return function($){var tt=x.nodeDataCache[$],rt=x.framedGraphToViewport(tt),it=rt.x,vt=rt.y,gt=x.scaleSize(tt.size);x.settings.hoverRenderer(y,z(z({key:$},tt),{size:gt,x:it,y:vt}),x.settings)}($)});var U={};for(var B in b.forEach(function($){var tt=x.nodeDataCache[$].type;U[tt]=(U[tt]||0)+1}),this.nodeHoverPrograms)this.nodeHoverPrograms[B].reallocate(U[B]||0),U[B]=0;for(var B in b.forEach(function($){var tt=x.nodeDataCache[$];x.nodeHoverPrograms[tt.type].process(U[tt.type]++,tt)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT),this.nodeHoverPrograms)this.nodeHoverPrograms[B].render({matrix:this.matrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio})},W.prototype.scheduleHighlightedNodesRender=function(){var x=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=(0,p.requestFrame)(function(){x.renderHighlightedNodesFrame=null,x.renderHighlightedNodes(),x.renderEdgeLabels()}))},W.prototype.render=function(){var x=this;this.emit("beforeRender");var y=function(){return x.emit("afterRender"),x};if(this.renderFrame&&((0,p.cancelFrame)(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),!this.graph.order)return y();var w=this.mouseCaptor,b=this.camera.isAnimated()||w.isMoving||w.draggedEvents||w.currentWheelDirection,U=this.camera.getState(),B=this.getDimensions(),X=this.getGraphDimensions(),$=this.getSetting("stagePadding")||0;this.matrix=(0,p.matrixFromCamera)(U,B,X,$),this.invMatrix=(0,p.matrixFromCamera)(U,B,X,$,!0),this.correctionRatio=(0,p.getMatrixImpact)(this.matrix,U,B),this.graphToViewportRatio=this.getGraphToViewportRatio();var tt={matrix:this.matrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio};for(var rt in this.nodePrograms)this.nodePrograms[rt].render(tt);if(!this.settings.hideEdgesOnMove||!b)for(var rt in this.edgePrograms)this.edgePrograms[rt].render(tt);return this.settings.hideLabelsOnMove&&b||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),y()},W.prototype.getCamera=function(){return this.camera},W.prototype.setCamera=function(x){this.unbindCameraHandlers(),this.camera=x,this.bindCameraHandlers()},W.prototype.getContainer=function(){return this.container},W.prototype.getGraph=function(){return this.graph},W.prototype.setGraph=function(x){x!==this.graph&&(this.unbindGraphHandlers(),this.nodeDataCache={},this.edgeDataCache={},this.displayedNodeLabels.clear(),this.displayedEdgeLabels.clear(),this.highlightedNodes.clear(),this.hoveredNode=null,this.hoveredEdge=null,this.nodesWithForcedLabels.length=0,this.edgesWithForcedLabels.length=0,null!==this.checkEdgesEventsFrame&&((0,p.cancelFrame)(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=x,this.bindGraphHandlers(),this.refresh())},W.prototype.getMouseCaptor=function(){return this.mouseCaptor},W.prototype.getTouchCaptor=function(){return this.touchCaptor},W.prototype.getDimensions=function(){return{width:this.width,height:this.height}},W.prototype.getGraphDimensions=function(){var x=this.customBBox||this.nodeExtent;return{width:x.x[1]-x.x[0]||1,height:x.y[1]-x.y[0]||1}},W.prototype.getNodeDisplayData=function(x){var y=this.nodeDataCache[x];return y?Object.assign({},y):void 0},W.prototype.getEdgeDisplayData=function(x){var y=this.edgeDataCache[x];return y?Object.assign({},y):void 0},W.prototype.getNodeDisplayedLabels=function(){return new Set(this.displayedNodeLabels)},W.prototype.getEdgeDisplayedLabels=function(){return new Set(this.displayedEdgeLabels)},W.prototype.getSettings=function(){return z({},this.settings)},W.prototype.getSetting=function(x){return this.settings[x]},W.prototype.setSetting=function(x,y){return this.settings[x]=y,(0,d.validateSettings)(this.settings),this.handleSettingsUpdate(),this.scheduleRefresh(),this},W.prototype.updateSetting=function(x,y){return this.settings[x]=y(this.settings[x]),(0,d.validateSettings)(this.settings),this.handleSettingsUpdate(),this.scheduleRefresh(),this},W.prototype.resize=function(){var x=this.width,y=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=(0,p.getPixelRatio)(),0===this.width){if(!this.settings.allowInvalidContainer)throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");this.width=1}if(0===this.height){if(!this.settings.allowInvalidContainer)throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");this.height=1}if(x===this.width&&y===this.height)return this;for(var w in this.emit("resize"),this.elements){var b=this.elements[w];b.style.width=this.width+"px",b.style.height=this.height+"px"}for(var w in this.canvasContexts)this.elements[w].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[w].setAttribute("height",this.height*this.pixelRatio+"px"),1!==this.pixelRatio&&this.canvasContexts[w].scale(this.pixelRatio,this.pixelRatio);for(var w in this.webGLContexts)this.elements[w].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[w].setAttribute("height",this.height*this.pixelRatio+"px"),this.webGLContexts[w].viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio);return this},W.prototype.clear=function(){return this.webGLContexts.nodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT),this.webGLContexts.edges.clear(this.webGLContexts.edges.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this},W.prototype.refresh=function(){return this.needToProcess=!0,this.render(),this},W.prototype.scheduleRender=function(){var x=this;return this.renderFrame||(this.renderFrame=(0,p.requestFrame)(function(){x.render()})),this},W.prototype.scheduleRefresh=function(){return this.needToProcess=!0,this.scheduleRender(),this},W.prototype.getViewportZoomedState=function(x,y){var w=this.camera.getState(),U=w.angle,B=w.x,X=w.y,$=y/w.ratio,tt={x:this.width/2,y:this.height/2},rt=this.viewportToFramedGraph(x),it=this.viewportToFramedGraph(tt);return{angle:U,x:(rt.x-it.x)*(1-$)+B,y:(rt.y-it.y)*(1-$)+X,ratio:y}},W.prototype.viewRectangle=function(){var x=0*this.width/8,y=0*this.height/8,w=this.viewportToFramedGraph({x:0-x,y:0-y}),b=this.viewportToFramedGraph({x:this.width+x,y:0-y}),U=this.viewportToFramedGraph({x:0,y:this.height+y});return{x1:w.x,y1:w.y,x2:b.x,y2:b.y,height:b.y-U.y}},W.prototype.framedGraphToViewport=function(x,y){void 0===y&&(y={});var b=y.matrix?y.matrix:y.cameraState||y.viewportDimensions||y.graphDimensions?(0,p.matrixFromCamera)(y.cameraState||this.camera.getState(),y.viewportDimensions||this.getDimensions(),y.graphDimensions||this.getGraphDimensions(),y.padding||this.getSetting("stagePadding")||0):this.matrix,U=(0,F.multiplyVec2)(b,x);return{x:(1+U.x)*this.width/2,y:(1-U.y)*this.height/2}},W.prototype.viewportToFramedGraph=function(x,y){void 0===y&&(y={});var b=y.matrix?y.matrix:y.cameraState||y.viewportDimensions||!y.graphDimensions?(0,p.matrixFromCamera)(y.cameraState||this.camera.getState(),y.viewportDimensions||this.getDimensions(),y.graphDimensions||this.getGraphDimensions(),y.padding||this.getSetting("stagePadding")||0,!0):this.invMatrix,U=(0,F.multiplyVec2)(b,{x:x.x/this.width*2-1,y:1-x.y/this.height*2});return isNaN(U.x)&&(U.x=0),isNaN(U.y)&&(U.y=0),U},W.prototype.viewportToGraph=function(x,y){return void 0===y&&(y={}),this.normalizationFunction.inverse(this.viewportToFramedGraph(x,y))},W.prototype.graphToViewport=function(x,y){return void 0===y&&(y={}),this.framedGraphToViewport(this.normalizationFunction(x),y)},W.prototype.getGraphToViewportRatio=function(){var x={x:0,y:0},y={x:1,y:1},w=Math.sqrt(Math.pow(x.x-y.x,2)+Math.pow(x.y-y.y,2)),b=this.graphToViewport(x),U=this.graphToViewport(y);return Math.sqrt(Math.pow(b.x-U.x,2)+Math.pow(b.y-U.y,2))/w},W.prototype.getBBox=function(){return(0,p.graphExtent)(this.graph)},W.prototype.getCustomBBox=function(){return this.customBBox},W.prototype.setCustomBBox=function(x){return this.customBBox=x,this.scheduleRender(),this},W.prototype.kill=function(){this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.quadtree=new u.default,this.nodeDataCache={},this.edgeDataCache={},this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[],this.highlightedNodes.clear(),this.renderFrame&&((0,p.cancelFrame)(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&((0,p.cancelFrame)(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var x=this.container;x.firstChild;)x.removeChild(x.firstChild)},W.prototype.scaleSize=function(x,y){return void 0===x&&(x=1),void 0===y&&(y=this.camera.ratio),x/this.settings.zoomToSizeRatioFunction(y)*("positions"===this.getSetting("itemSizesReference")?y*this.graphToViewportRatio:1)},W.prototype.getCanvases=function(){return z({},this.elements)},W}(l.TypedEventEmitter);D.default=A},57:function(ut,D,N){"use strict";var i,Y=this&&this.__extends||(i=function(m,v){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,u){C.__proto__=u}||function(C,u){for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(C[l]=u[l])})(m,v)},function(m,v){if("function"!=typeof v&&null!==v)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function C(){this.constructor=m}i(m,v),m.prototype=null===v?Object.create(v):(C.prototype=v.prototype,new C)});Object.defineProperty(D,"__esModule",{value:!0}),D.TypedEventEmitter=void 0;var O=function(i){function m(){var v=i.call(this)||this;return v.rawEmitter=v,v}return Y(m,i),m}(N(9069).EventEmitter);D.TypedEventEmitter=O},2630:function(ut,D,N){"use strict";var Y=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(D,"__esModule",{value:!0}),D.animateNodes=D.ANIMATE_DEFAULTS=void 0;var z=N(1699),O=Y(N(4539));D.ANIMATE_DEFAULTS={easing:"quadraticInOut",duration:150},D.animateNodes=function i(m,v,C,u){var l=Object.assign({},D.ANIMATE_DEFAULTS,C),p="function"==typeof l.easing?l.easing:O.default[l.easing],f=Date.now(),d={};for(var h in v){var F=v[h];for(var R in d[h]={},F)d[h][R]=m.getNodeAttribute(h,R)}var j=null,H=function(){j=null;var k=(Date.now()-f)/l.duration;if(k>=1){for(var L in v){var A=v[L];for(var _ in A)m.setNodeAttribute(L,_,A[_])}"function"==typeof u&&u()}else{for(var L in k=p(k),v){A=v[L];var W=d[L];for(var _ in A)m.setNodeAttribute(L,_,A[_]*k+W[_]*(1-k))}j=(0,z.requestFrame)(H)}};return H(),function(){j&&(0,z.cancelFrame)(j)}}},5147:(ut,D)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.HTML_COLORS=void 0,D.HTML_COLORS={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"}},4539:(ut,D)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.cubicInOut=D.cubicOut=D.cubicIn=D.quadraticInOut=D.quadraticOut=D.quadraticIn=D.linear=void 0,D.linear=function(u){return u},D.quadraticIn=function(u){return u*u},D.quadraticOut=function(u){return u*(2-u)},D.quadraticInOut=function(u){return(u*=2)<1?.5*u*u:-.5*(--u*(u-2)-1)},D.cubicIn=function(u){return u*u*u},D.cubicOut=function(u){return--u*u*u+1},D.cubicInOut=function(u){return(u*=2)<1?.5*u*u*u:.5*((u-=2)*u*u+2)},D.default={linear:D.linear,quadraticIn:D.quadraticIn,quadraticOut:D.quadraticOut,quadraticInOut:D.quadraticInOut,cubicIn:D.cubicIn,cubicOut:D.cubicOut,cubicInOut:D.cubicInOut}},3180:(ut,D)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.doEdgeCollideWithPoint=D.isPixelColored=void 0,D.isPixelColored=function N(z,O,i){var m=new Uint8Array(4);return z.readPixels(O,z.drawingBufferHeight-i,1,1,z.RGBA,z.UNSIGNED_BYTE,m),m[3]>0},D.doEdgeCollideWithPoint=function Y(z,O,i,m,v,C,u){return!(z<i-u&&z<v-u||O<m-u&&O<C-u||z>i+u&&z>v+u||O>m+u&&O>C+u)&&Math.abs((v-i)*(m-O)-(i-z)*(C-m))/Math.sqrt(Math.pow(v-i,2)+Math.pow(C-m,2))<u/2}},1699:function(ut,D,N){"use strict";var Y=this&&this.__read||function($,tt){var rt="function"==typeof Symbol&&$[Symbol.iterator];if(!rt)return $;var vt,Ct,it=rt.call($),gt=[];try{for(;(void 0===tt||tt-- >0)&&!(vt=it.next()).done;)gt.push(vt.value)}catch(lt){Ct={error:lt}}finally{try{vt&&!vt.done&&(rt=it.return)&&rt.call(it)}finally{if(Ct)throw Ct.error}}return gt},z=this&&this.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(D,"__esModule",{value:!0}),D.validateGraph=D.canUse32BitsIndices=D.extractPixel=D.getMatrixImpact=D.matrixFromCamera=D.getCorrectionRatio=D.floatColor=D.floatArrayColor=D.parseColor=D.zIndexOrdering=D.createNormalizationFunction=D.graphExtent=D.getPixelRatio=D.createElement=D.cancelFrame=D.requestFrame=D.assignDeep=D.assign=D.isPlainObject=void 0;var O=z(N(6714)),i=N(7611),m=N(5147);function v($){return"object"==typeof $&&null!==$&&$.constructor===Object}D.isPlainObject=v,D.assign=function C($){for(var tt=[],rt=1;rt<arguments.length;rt++)tt[rt-1]=arguments[rt];$=$||{};for(var it=0,vt=tt.length;it<vt;it++){var gt=tt[it];!gt||Object.assign($,gt)}return $},D.assignDeep=function u($){for(var tt=[],rt=1;rt<arguments.length;rt++)tt[rt-1]=arguments[rt];$=$||{};for(var it=0,vt=tt.length;it<vt;it++){var gt=tt[it];if(gt)for(var Ct in gt)$[Ct]=v(gt[Ct])?u($[Ct],gt[Ct]):gt[Ct]}return $},D.requestFrame="undefined"!=typeof requestAnimationFrame?function($){return requestAnimationFrame($)}:function($){return setTimeout($,0)},D.cancelFrame="undefined"!=typeof cancelAnimationFrame?function($){return cancelAnimationFrame($)}:function($){return clearTimeout($)},D.createElement=function l($,tt,rt){var it=document.createElement($);if(tt)for(var vt in tt)it.style[vt]=tt[vt];if(rt)for(var vt in rt)it.setAttribute(vt,rt[vt]);return it},D.getPixelRatio=function p(){return void 0!==window.devicePixelRatio?window.devicePixelRatio:1},D.graphExtent=function f($){if(!$.order)return{x:[0,1],y:[0,1]};var tt=1/0,rt=-1/0,it=1/0,vt=-1/0;return $.forEachNode(function(gt,Ct){var lt=Ct.x,Et=Ct.y;lt<tt&&(tt=lt),lt>rt&&(rt=lt),Et<it&&(it=Et),Et>vt&&(vt=Et)}),{x:[tt,rt],y:[it,vt]}},D.createNormalizationFunction=function d($){var tt=Y($.x,2),rt=tt[0],it=tt[1],vt=Y($.y,2),gt=vt[0],Ct=vt[1],lt=Math.max(it-rt,Ct-gt),Et=(it+rt)/2,Ot=(Ct+gt)/2;(0===lt||Math.abs(lt)===1/0||isNaN(lt))&&(lt=1),isNaN(Et)&&(Et=0),isNaN(Ot)&&(Ot=0);var Pt=function(ht){return{x:.5+(ht.x-Et)/lt,y:.5+(ht.y-Ot)/lt}};return Pt.applyTo=function(ht){ht.x=.5+(ht.x-Et)/lt,ht.y=.5+(ht.y-Ot)/lt},Pt.inverse=function(ht){return{x:Et+lt*(ht.x-.5),y:Ot+lt*(ht.y-.5)}},Pt.ratio=lt,Pt},D.zIndexOrdering=function h($,tt,rt){return rt.sort(function(it,vt){var gt=tt(it)||0,Ct=tt(vt)||0;return gt<Ct?-1:gt>Ct?1:0})};var F=new Int8Array(4),R=new Int32Array(F.buffer,0,1),j=new Float32Array(F.buffer,0,1),H=/^\s*rgba?\s*\(/,k=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function L($){var tt=0,rt=0,it=0,vt=1;if("#"===$[0])4===$.length?(tt=parseInt($.charAt(1)+$.charAt(1),16),rt=parseInt($.charAt(2)+$.charAt(2),16),it=parseInt($.charAt(3)+$.charAt(3),16)):(tt=parseInt($.charAt(1)+$.charAt(2),16),rt=parseInt($.charAt(3)+$.charAt(4),16),it=parseInt($.charAt(5)+$.charAt(6),16)),9===$.length&&(vt=parseInt($.charAt(7)+$.charAt(8),16)/255);else if(H.test($)){var gt=$.match(k);gt&&(tt=+gt[1],rt=+gt[2],it=+gt[3],gt[4]&&(vt=+gt[4]))}return{r:tt,g:rt,b:it,a:vt}}D.parseColor=L;var A={};for(var _ in m.HTML_COLORS)A[_]=x(m.HTML_COLORS[_]),A[m.HTML_COLORS[_]]=A[_];function x($){if(void 0!==A[$])return A[$];var tt=L($),gt=tt.a;R[0]=4278190079&((gt=255*gt|0)<<24|tt.b<<16|tt.g<<8|tt.r);var Ct=j[0];return A[$]=Ct,Ct}function y($,tt){var rt=$.height/$.width,it=tt.height/tt.width;return rt<1&&it>1||rt>1&&it<1?1:Math.min(Math.max(it,1/it),Math.max(1/rt,rt))}D.floatArrayColor=function W($){var tt=L($=m.HTML_COLORS[$]||$);return new Float32Array([tt.r/255,tt.g/255,tt.b/255,tt.a])},D.floatColor=x,D.getCorrectionRatio=y,D.matrixFromCamera=function w($,tt,rt,it,vt){var gt=$.angle,Ct=$.ratio,lt=$.x,Et=$.y,Ot=tt.width,Pt=tt.height,ht=(0,i.identity)(),ft=Math.min(Ot,Pt)-2*it,At=y(tt,rt);return vt?((0,i.multiply)(ht,(0,i.translate)((0,i.identity)(),lt,Et)),(0,i.multiply)(ht,(0,i.scale)((0,i.identity)(),Ct)),(0,i.multiply)(ht,(0,i.rotate)((0,i.identity)(),gt)),(0,i.multiply)(ht,(0,i.scale)((0,i.identity)(),Ot/ft/2/At,Pt/ft/2/At))):((0,i.multiply)(ht,(0,i.scale)((0,i.identity)(),ft/Ot*2*At,ft/Pt*2*At)),(0,i.multiply)(ht,(0,i.rotate)((0,i.identity)(),-gt)),(0,i.multiply)(ht,(0,i.scale)((0,i.identity)(),1/Ct)),(0,i.multiply)(ht,(0,i.translate)((0,i.identity)(),-lt,-Et))),ht},D.getMatrixImpact=function b($,tt,rt){var it=(0,i.multiplyVec2)($,{x:Math.cos(tt.angle),y:Math.sin(tt.angle)},0),gt=it.y;return 1/Math.sqrt(Math.pow(it.x,2)+Math.pow(gt,2))/rt.width},D.extractPixel=function U($,tt,rt,it){var vt=it||new Uint8Array(4);return $.readPixels(tt,rt,1,1,$.RGBA,$.UNSIGNED_BYTE,vt),vt},D.canUse32BitsIndices=function B($){return"undefined"!=typeof WebGL2RenderingContext&&$ instanceof WebGL2RenderingContext||!!$.getExtension("OES_element_index_uint")},D.validateGraph=function X($){if(!(0,O.default)($))throw new Error("Sigma: invalid graph instance.");$.forEachNode(function(tt,rt){if(!Number.isFinite(rt.x)||!Number.isFinite(rt.y))throw new Error("Sigma: Coordinates of node ".concat(tt," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}},7611:(ut,D)=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.multiplyVec2=D.multiply=D.translate=D.rotate=D.scale=D.identity=void 0,D.identity=function N(){return Float32Array.of(1,0,0,0,1,0,0,0,1)},D.scale=function Y(v,C,u){return v[0]=C,v[4]="number"==typeof u?u:C,v},D.rotate=function z(v,C){var u=Math.sin(C),l=Math.cos(C);return v[0]=l,v[1]=u,v[3]=-u,v[4]=l,v},D.translate=function O(v,C,u){return v[6]=C,v[7]=u,v},D.multiply=function i(v,C){var u=v[0],l=v[1],p=v[2],f=v[3],d=v[4],h=v[5],F=v[6],R=v[7],j=v[8],H=C[0],k=C[1],L=C[2],A=C[3],_=C[4],W=C[5],x=C[6],y=C[7],w=C[8];return v[0]=H*u+k*f+L*F,v[1]=H*l+k*d+L*R,v[2]=H*p+k*h+L*j,v[3]=A*u+_*f+W*F,v[4]=A*l+_*d+W*R,v[5]=A*p+_*h+W*j,v[6]=x*u+y*f+w*F,v[7]=x*l+y*d+w*R,v[8]=x*p+y*h+w*j,v},D.multiplyVec2=function m(v,C,u){void 0===u&&(u=1);var R=C.x,j=C.y;return{x:R*v[0]+j*v[3]+v[6]*u,y:R*v[1]+j*v[4]+v[7]*u}}},5042:()=>{}}]);