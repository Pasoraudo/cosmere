(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8005],{8005:(st,R,N)=>{"use strict";N.r(R),N.d(R,{WikiModule:()=>Qy});var V=N(4521),z=N(5861),k=N(9268),i=N(5e3);let b=(()=>{class t{constructor(){this.subscriptionsData=[]}ngOnDestroy(){this.allSubscriptions().forEach(n=>{n.unsubscribe()})}subscribe(n,r,o,u){const p=(0,k.V)();return this.subscriptionsData.push({id:p,subscription:n.subscribe(r,o,u)}),p}unsubscribe(n){const r=this.subscriptionById(n);!r||r.closed||r.unsubscribe()}unsubscribeAll(){this.subscriptionsData.forEach(n=>n.subscription.unsubscribe())}allSubscriptions(){return this.subscriptionsData.map(n=>n.subscription)}subscriptionById(n){const r=this.subscriptionsData.find(o=>o.id===n);return null==r?void 0:r.subscription}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(n,r){},encapsulation:2}),t})();const s=(t,e)=>{if(0===t.length)return[];if(0===e.length)return[];const n=f(t,e);return t.map(r=>({id:r.id,label:r.name,group:r.planet,score:n[r.id]}))},h=t=>{const e={};for(const r of t){const o=`${r.characterId1}-${r.characterId2}`;e[o]?e[o]+=1:e[o]=1}let n=[];for(const r in e){const[o,u]=r.split("-");n.push({source:o,target:u,weight:e[r],group:"undefined"})}return n},g=t=>{const e=new Set;return t.forEach(n=>{e.add(n.characterId1),e.add(n.characterId2)}),Array.from(e)},f=(t,e)=>{const o={};e.forEach(H=>{var K,Q,J,ft;null!==(K=o[J=H.characterId1])&&void 0!==K||(o[J]=0),null!==(Q=o[ft=H.characterId2])&&void 0!==Q||(o[ft]=0),o[H.characterId1]+=1,o[H.characterId2]+=1});const u=Object.values(o);let p=Math.min(...u);const F=Math.max(...u)-p,O={};for(const[H,K]of Object.entries(o))O[H]=(K-p)/F*28+2;return O};var l=N(7489),G=N(5595),P=N.n(G),Z=N(7749),Y=N.n(Z),I=N(4004),L=N(520),S=N(3905),x=N(2843),W=N(262),A=N(2340);let y=(()=>{class t{generate(n){let r=n;return r.startsWith("/")||(r="/"+r),"assets/db"+r+".json"}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),m=(()=>{class t{constructor(n,r){this.http=n,this.router=r,this.requestCache={},setInterval(()=>{this.clearCache()},300)}get(n){var r=this;const o=this.router.generate(n);return new Promise(function(){var u=(0,z.Z)(function*(p,M){try{p(yield(0,S.z)(r.http.get(o).pipe((0,W.K)(O=>(0,x._)(O)))))}catch(F){M(F)}});return function(p,M){return u.apply(this,arguments)}}())}headers(){return{headers:(new L.WM).set("app-version",A.N.appVersion).set("Access-Control-Allow-Origin","*")}}clearCache(){const n=(0,l.keys)(this.requestCache),r=(new Date).getTime();for(const o of n){const u=this.requestCache[o];if(!u)continue;const p=r-u.timestamp;!u.response&&p<2e4||u.response&&p<200||(this.requestCache[o]=null,delete this.requestCache[o])}}}return t.\u0275fac=function(n){return new(n||t)(i.LFG(L.eN),i.LFG(y))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var w=N(9175);const U=(t,e)=>e.find(n=>n.id===t),j=(t,e)=>{t||(t=[]);let n=[...t];return e.forEach(r=>{n=$(n,r)}),n},$=(t,e)=>{const n=e;let r=[...t];return(0,l.some)(r,o=>o.id===n.id)?r=r.map(o=>o.id===n.id?e:o):r.push(e),r};let rt=(()=>{class t extends w.m1{constructor(){super({characters:[]}),this.characters$=this.select(n=>n.characters)}saveAllCharacters(n){(0,l.isEqual)(this.get().characters,n)||this.patchState(r=>({characters:j(r.characters,n)}))}syncState(){return this.get()}syncCharacter(n){return U(n,this.get().characters)}reset(){this.patchState({characters:[]})}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),it=(()=>{class t{constructor(n,r){this.api=n,this.store=r}fetchAllCharacter(){var n=this;return(0,z.Z)(function*(){const r=yield n.api.get("characters");n.store.saveAllCharacters(r)})()}fetchAllCosmereCharacter(){var n=this;return(0,z.Z)(function*(){const o=(yield n.api.get("characters")).filter(u=>"Cosmere"===u.universe);n.store.saveAllCharacters(o)})()}syncAllCharacters(){return this.store.syncState().characters}allCharacters(){return this.store.characters$}cosmereCharacters(){return this.store.characters$.pipe((0,I.U)(n=>n.filter(r=>"Cosmere"===r.universe)))}}return t.\u0275fac=function(n){return new(n||t)(i.LFG(m),i.LFG(rt))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Et=(()=>{class t extends w.m1{constructor(){super({relationships:[]}),this.relationships$=this.select(n=>n.relationships)}saveAllRelationship(n){(0,l.isEqual)(this.get().relationships,n)||this.patchState(r=>({relationships:j(r.relationships,n)}))}syncState(){return this.get()}reset(){this.patchState({relationships:[]})}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ht=(()=>{class t{constructor(n,r){this.api=n,this.store=r}fetchAllRelationship(){var n=this;return(0,z.Z)(function*(){const r=yield n.api.get("relationships");n.store.saveAllRelationship(r)})()}fetchAllRelationshipByBookId(n){var r=this;return(0,z.Z)(function*(){const o=yield r.api.get("relationships-"+n);r.store.saveAllRelationship(o)})()}fetchAllCosmereRelationship(){var n=this;return(0,z.Z)(function*(){const r=[];for(const p of["warbreaker","mistborn1","mistborn2","mistborn3","mistborn4","mistborn5","mistborn6","stormlight1","stormlight2","stormlight3","stormlight4"])r.push(n.api.get("relationships-"+p).then(M=>M).catch(M=>{}));const o=yield Promise.all(r);let u=[];o.forEach(p=>u=j(u,p)),n.store.saveAllRelationship(u)})()}syncAllRelationship(){return this.store.syncState().relationships}allRelationship(){return this.store.relationships$}cosmereRelationships(){return this.store.relationships$.pipe((0,I.U)(n=>n.filter(r=>["warbreaker","mistborn1","mistborn2","mistborn3","mistborn4","mistborn5","mistborn6","stormlight1","stormlight2","stormlight3","stormlight4"].includes(r.bookId))))}relationshipsByBook(n){return this.store.relationships$.pipe((0,I.U)(r=>r.filter(o=>(null==o?void 0:o.bookId)===n)))}}return t.\u0275fac=function(n){return new(n||t)(i.LFG(m),i.LFG(Et))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var At=N(5598),Dt=N(9976);const xt=function dt(t,e){return t===e||t!=t&&e!=e},Vt=function Zt(t,e){for(var n=t.length;n--;)if(xt(t[n][0],e))return n;return-1};var Kt=Array.prototype.splice;function Ce(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ce.prototype.clear=function Pt(){this.__data__=[],this.size=0},Ce.prototype.delete=function Qt(t){var e=this.__data__,n=Vt(e,t);return!(n<0||(n==e.length-1?e.pop():Kt.call(e,n,1),--this.size,0))},Ce.prototype.get=function ge(t){var e=this.__data__,n=Vt(e,t);return n<0?void 0:e[n][1]},Ce.prototype.has=function Le(t){return Vt(this.__data__,t)>-1},Ce.prototype.set=function Rn(t,e){var n=this.__data__,r=Vt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};const De=Ce;var je=N(7079);const Ke=function kn(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},We=function zn(t){if(!Ke(t))return!1;var e=(0,je.Z)(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};var t,Re=N(5946),di=Re.Z["__core-js_shared__"],ir=(t=/[^.]+$/.exec(di&&di.keys&&di.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"";var vi=Function.prototype.toString;const Ie=function ar(t){if(null!=t){try{return vi.call(t)}catch(e){}try{return t+""}catch(e){}}return""};var ur=/^\[object .+?Constructor\]$/,hr=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const fr=function lr(t){return!(!Ke(t)||function pi(t){return!!ir&&ir in t}(t))&&(We(t)?hr:ur).test(Ie(t))},D=function _(t,e){var n=function dr(t,e){return null==t?void 0:t[e]}(t,e);return fr(n)?n:void 0},a=D(Re.Z,"Map"),T=D(Object,"create");var Ct=Object.prototype.hasOwnProperty;var te=Object.prototype.hasOwnProperty;function he(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}he.prototype.clear=function B(){this.__data__=T?T(null):{},this.size=0},he.prototype.delete=function ot(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},he.prototype.get=function St(t){var e=this.__data__;if(T){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Ct.call(e,t)?e[t]:void 0},he.prototype.has=function ae(t){var e=this.__data__;return T?void 0!==e[t]:te.call(e,t)},he.prototype.set=function _e(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=T&&void 0===e?"__lodash_hash_undefined__":e,this};const Je=he,gr=function Vs(t,e){var n=t.__data__;return function vo(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map};function fn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}fn.prototype.clear=function ln(){this.size=0,this.__data__={hash:new Je,map:new(a||De),string:new Je}},fn.prototype.delete=function Xs(t){var e=gr(this,t).delete(t);return this.size-=e?1:0,e},fn.prototype.get=function qs(t){return gr(this,t).get(t)},fn.prototype.has=function Qs(t){return gr(this,t).has(t)},fn.prototype.set=function tu(t,e){var n=gr(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};const vr=fn;function dn(t){var e=this.__data__=new De(t);this.size=e.size}dn.prototype.clear=function On(){this.__data__=new De,this.size=0},dn.prototype.delete=function Fn(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},dn.prototype.get=function rr(t){return this.__data__.get(t)},dn.prototype.has=function Gn(t){return this.__data__.has(t)},dn.prototype.set=function ru(t,e){var n=this.__data__;if(n instanceof De){var r=n.__data__;if(!a||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new vr(r)}return n.set(t,e),this.size=n.size,this};const yr=dn;function mr(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new vr;++e<n;)this.add(t[e])}mr.prototype.add=mr.prototype.push=function au(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},mr.prototype.has=function uu(t){return this.__data__.has(t)};const yo=mr,lu=function hu(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},mo=function fu(t,e){return t.has(e)},wo=function gu(t,e,n,r,o,u){var p=1&n,M=t.length,F=e.length;if(M!=F&&!(p&&F>M))return!1;var O=u.get(t),H=u.get(e);if(O&&H)return O==e&&H==t;var K=-1,Q=!0,J=2&n?new yo:void 0;for(u.set(t,e),u.set(e,t);++K<M;){var ft=t[K],ct=e[K];if(r)var et=p?r(ct,ft,K,e,t,u):r(ft,ct,K,t,e,u);if(void 0!==et){if(et)continue;Q=!1;break}if(J){if(!lu(e,function(nt,pt){if(!mo(J,pt)&&(ft===nt||o(ft,nt,n,r,u)))return J.push(pt)})){Q=!1;break}}else if(ft!==ct&&!o(ft,ct,n,r,u)){Q=!1;break}}return u.delete(t),u.delete(e),Q};var wr=N(8492);const bo=Re.Z.Uint8Array,mu=function yu(t){var e=-1,n=Array(t.size);return t.forEach(function(r,o){n[++e]=[o,r]}),n},mi=function wu(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n};var _o=wr.Z?wr.Z.prototype:void 0,wi=_o?_o.valueOf:void 0;var Fe=N(4177);var Zu=Object.prototype.propertyIsEnumerable,xo=Object.getOwnPropertySymbols,Hu=xo?function(t){return null==t?[]:(t=Object(t),function zu(t,e){for(var n=-1,r=null==t?0:t.length,o=0,u=[];++n<r;){var p=t[n];e(p,n,t)&&(u[o++]=p)}return u}(xo(t),function(e){return Zu.call(t,e)}))}:function ju(){return[]};const Yu=Hu;var pn=N(214);const Ao=function qu(t){return(0,pn.Z)(t)&&"[object Arguments]"==(0,je.Z)(t)};var Eo=Object.prototype,Ku=Eo.hasOwnProperty,Qu=Eo.propertyIsEnumerable,Ju=Ao(function(){return arguments}())?Ao:function(t){return(0,pn.Z)(t)&&Ku.call(t,"callee")&&!Qu.call(t,"callee")};const Co=Ju;var So="object"==typeof exports&&exports&&!exports.nodeType&&exports,To=So&&"object"==typeof module&&module&&!module.nodeType&&module,Mo=To&&To.exports===So?Re.Z.Buffer:void 0;const bi=(Mo?Mo.isBuffer:void 0)||function tc(){return!1};var ac=/^(?:0|[1-9]\d*)$/;const No=function sc(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&ac.test(t))&&t>-1&&t%1==0&&t<e},_i=function cc(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var ne={};ne["[object Float32Array]"]=ne["[object Float64Array]"]=ne["[object Int8Array]"]=ne["[object Int16Array]"]=ne["[object Int32Array]"]=ne["[object Uint8Array]"]=ne["[object Uint8ClampedArray]"]=ne["[object Uint16Array]"]=ne["[object Uint32Array]"]=!0,ne["[object Arguments]"]=ne["[object Array]"]=ne["[object ArrayBuffer]"]=ne["[object Boolean]"]=ne["[object DataView]"]=ne["[object Date]"]=ne["[object Error]"]=ne["[object Function]"]=ne["[object Map]"]=ne["[object Number]"]=ne["[object Object]"]=ne["[object RegExp]"]=ne["[object Set]"]=ne["[object String]"]=ne["[object WeakMap]"]=!1;var kc=N(8346),Lo="object"==typeof exports&&exports&&!exports.nodeType&&exports,Un=Lo&&"object"==typeof module&&module&&!module.nodeType&&module,xi=Un&&Un.exports===Lo&&kc.Z.process,Uc=function(){try{return Un&&Un.require&&Un.require("util").types||xi&&xi.binding&&xi.binding("util")}catch(e){}}(),Ro=Uc&&Uc.isTypedArray;const Po=Ro?function Fc(t){return function(e){return t(e)}}(Ro):function Oc(t){return(0,pn.Z)(t)&&_i(t.length)&&!!ne[(0,je.Z)(t)]};var Bc=Object.prototype.hasOwnProperty;const Hc=function Zc(t,e){var n=(0,Fe.Z)(t),r=!n&&Co(t),o=!n&&!r&&bi(t),u=!n&&!r&&!o&&Po(t),p=n||r||o||u,M=p?function Vu(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],F=M.length;for(var O in t)(e||Bc.call(t,O))&&(!p||!("length"==O||o&&("offset"==O||"parent"==O)||u&&("buffer"==O||"byteLength"==O||"byteOffset"==O)||No(O,F)))&&M.push(O);return M};var Yc=Object.prototype;var qc=function $c(t,e){return function(n){return t(e(n))}}(Object.keys,Object);const Kc=qc;var Jc=Object.prototype.hasOwnProperty;const eh=function th(t){if(!function Vc(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Yc)}(t))return Kc(t);var e=[];for(var n in Object(t))Jc.call(t,n)&&"constructor"!=n&&e.push(n);return e},Oo=function ih(t){return function nh(t){return null!=t&&_i(t.length)&&!We(t)}(t)?Hc(t):eh(t)},Io=function oh(t){return function Gu(t,e,n){var r=e(t);return(0,Fe.Z)(t)?r:function Iu(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}(r,n(t))}(t,Oo,Yu)};var uh=Object.prototype.hasOwnProperty;const Ai=D(Re.Z,"DataView"),Ei=D(Re.Z,"Promise"),gn=D(Re.Z,"Set"),Ci=D(Re.Z,"WeakMap");var Fo="[object Map]",Go="[object Promise]",ko="[object Set]",zo="[object WeakMap]",Uo="[object DataView]",vh=Ie(Ai),yh=Ie(a),mh=Ie(Ei),wh=Ie(gn),bh=Ie(Ci),tn=je.Z;(Ai&&tn(new Ai(new ArrayBuffer(1)))!=Uo||a&&tn(new a)!=Fo||Ei&&tn(Ei.resolve())!=Go||gn&&tn(new gn)!=ko||Ci&&tn(new Ci)!=zo)&&(tn=function(t){var e=(0,je.Z)(t),n="[object Object]"==e?t.constructor:void 0,r=n?Ie(n):"";if(r)switch(r){case vh:return Uo;case yh:return Fo;case mh:return Go;case wh:return ko;case bh:return zo}return e});const jo=tn;var Wo="[object Arguments]",Bo="[object Array]",br="[object Object]",Zo=Object.prototype.hasOwnProperty;const Eh=function Ah(t,e,n,r,o,u){var p=(0,Fe.Z)(t),M=(0,Fe.Z)(e),F=p?Bo:jo(t),O=M?Bo:jo(e),H=(F=F==Wo?br:F)==br,K=(O=O==Wo?br:O)==br,Q=F==O;if(Q&&bi(t)){if(!bi(e))return!1;p=!0,H=!1}if(Q&&!H)return u||(u=new yr),p||Po(t)?wo(t,e,n,r,o,u):function Pu(t,e,n,r,o,u,p){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!u(new bo(t),new bo(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return xt(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var M=mu;case"[object Set]":if(M||(M=mi),t.size!=e.size&&!(1&r))return!1;var O=p.get(t);if(O)return O==e;r|=2,p.set(t,e);var H=wo(M(t),M(e),r,o,u,p);return p.delete(t),H;case"[object Symbol]":if(wi)return wi.call(t)==wi.call(e)}return!1}(t,e,F,n,r,o,u);if(!(1&n)){var J=H&&Zo.call(t,"__wrapped__"),ft=K&&Zo.call(e,"__wrapped__");if(J||ft){var ct=J?t.value():t,et=ft?e.value():e;return u||(u=new yr),o(ct,et,n,r,u)}}return!!Q&&(u||(u=new yr),function ch(t,e,n,r,o,u){var p=1&n,M=Io(t),F=M.length;if(F!=Io(e).length&&!p)return!1;for(var K=F;K--;){var Q=M[K];if(!(p?Q in e:uh.call(e,Q)))return!1}var J=u.get(t),ft=u.get(e);if(J&&ft)return J==e&&ft==t;var ct=!0;u.set(t,e),u.set(e,t);for(var et=p;++K<F;){var nt=t[Q=M[K]],pt=e[Q];if(r)var mt=p?r(pt,nt,Q,e,t,u):r(nt,pt,Q,t,e,u);if(!(void 0===mt?nt===pt||o(nt,pt,n,r,u):mt)){ct=!1;break}et||(et="constructor"==Q)}if(ct&&!et){var _t=t.constructor,Tt=e.constructor;_t!=Tt&&"constructor"in t&&"constructor"in e&&!("function"==typeof _t&&_t instanceof _t&&"function"==typeof Tt&&Tt instanceof Tt)&&(ct=!1)}return u.delete(t),u.delete(e),ct}(t,e,n,r,o,u))},Yo=function Ho(t,e,n,r,o){return t===e||(null==t||null==e||!(0,pn.Z)(t)&&!(0,pn.Z)(e)?t!=t&&e!=e:Eh(t,e,n,r,Ho,o))},Vo=function Nh(t){return t==t&&!Ke(t)},Xo=function Rh(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}},Oh=function Ph(t){var e=function Lh(t){for(var e=Oo(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,Vo(o)]}return e}(t);return 1==e.length&&e[0][2]?Xo(e[0][0],e[0][1]):function(n){return n===t||function Th(t,e,n,r){var o=n.length,u=o,p=!r;if(null==t)return!u;for(t=Object(t);o--;){var M=n[o];if(p&&M[2]?M[1]!==t[M[0]]:!(M[0]in t))return!1}for(;++o<u;){var F=(M=n[o])[0],O=t[F],H=M[1];if(p&&M[2]){if(void 0===O&&!(F in t))return!1}else{var K=new yr;if(r)var Q=r(O,H,F,t,e,K);if(!(void 0===Q?Yo(H,O,3,r,K):Q))return!1}}return!0}(n,t,e)}},Si=function Fh(t){return"symbol"==typeof t||(0,pn.Z)(t)&&"[object Symbol]"==(0,je.Z)(t)};var Gh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kh=/^\w*$/;const Ti=function zh(t,e){if((0,Fe.Z)(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Si(t))||kh.test(t)||!Gh.test(t)||null!=e&&t in Object(e)};function Mi(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],u=n.cache;if(u.has(o))return u.get(o);var p=t.apply(this,r);return n.cache=u.set(o,p)||u,p};return n.cache=new(Mi.Cache||vr),n}Mi.Cache=vr;const jh=Mi;var Hh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Yh=/\\(\\)?/g,Vh=function Bh(t){var e=jh(t,function(r){return 500===n.size&&n.clear(),r}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Hh,function(n,r,o,u){e.push(o?u.replace(Yh,"$1"):r||n)}),e});const Xh=Vh;var $o=wr.Z?wr.Z.prototype:void 0,qo=$o?$o.toString:void 0;const Qh=function Ko(t){if("string"==typeof t)return t;if((0,Fe.Z)(t))return function $h(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}(t,Ko)+"";if(Si(t))return qo?qo.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},Qo=function el(t,e){return(0,Fe.Z)(t)?t:Ti(t,e)?[t]:Xh(function Jh(t){return null==t?"":Qh(t)}(t))},_r=function rl(t){if("string"==typeof t||Si(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},Jo=function il(t,e){for(var n=0,r=(e=Qo(e,t)).length;null!=t&&n<r;)t=t[_r(e[n++])];return n&&n==r?t:void 0},ul=function sl(t,e){return null!=t&&e in Object(t)},fl=function ll(t,e){return null!=t&&function cl(t,e,n){for(var r=-1,o=(e=Qo(e,t)).length,u=!1;++r<o;){var p=_r(e[r]);if(!(u=null!=t&&n(t,p)))break;t=t[p]}return u||++r!=o?u:!!(o=null==t?0:t.length)&&_i(o)&&No(p,o)&&((0,Fe.Z)(t)||Co(t))}(t,e,ul)},vl=function gl(t,e){return Ti(t)&&Vo(e)?Xo(_r(t),e):function(n){var r=function ol(t,e,n){var r=null==t?void 0:Jo(t,e);return void 0===r?n:r}(n,t);return void 0===r&&r===e?fl(n,t):Yo(e,r,3)}},ml=function yl(t){return t},El=function Al(t){return Ti(t)?function wl(t){return function(e){return null==e?void 0:e[t]}}(_r(t)):function _l(t){return function(e){return Jo(e,t)}}(t)},Ll=function Nl(t){return t!=t},Fl=function Il(t,e){return!(null==t||!t.length)&&function Pl(t,e,n){return e==e?function Dl(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}(t,e,n):function Tl(t,e,n,r){for(var o=t.length,u=n+(r?1:-1);r?u--:++u<o;)if(e(t[u],u,t))return u;return-1}(t,Ll,n)}(t,e,0)>-1},kl=function Gl(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1};var Wl=gn&&1/mi(new gn([,-0]))[1]==1/0?function(t){return new gn(t)}:function zl(){};const Bl=Wl,ta=function Hl(t,e,n){var r=-1,o=Fl,u=t.length,p=!0,M=[],F=M;if(n)p=!1,o=kl;else if(u>=200){var O=e?null:Bl(t);if(O)return mi(O);p=!1,o=mo,F=new yo}else F=e?[]:M;t:for(;++r<u;){var H=t[r],K=e?e(H):H;if(H=n||0!==H?H:0,p&&K==K){for(var Q=F.length;Q--;)if(F[Q]===K)continue t;e&&F.push(K),M.push(H)}else o(F,K,n)||(F!==M&&F.push(K),M.push(H))}return M},Vl=function Yl(t,e){return t&&t.length?ta(t,function Cl(t){return"function"==typeof t?t:null==t?ml:"object"==typeof t?(0,Fe.Z)(t)?vl(t[0],t[1]):Oh(t):El(t)}(e)):[]};function xr(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(n<o||void 0===n&&o>=o)&&(n=o)}return n}function Ni(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(n>o||void 0===n&&o>=o)&&(n=o)}return n}function vn(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ar(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}function na(t,e,n=0,r=1/0,o){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(o=void 0===o?Ar:function ea(t=vn){if(t===vn)return Ar;if("function"!=typeof t)throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||0===r?r:(0===t(n,n))-(0===t(e,e))}}(o);r>n;){if(r-n>600){const F=r-n+1,O=e-n+1,H=Math.log(F),K=.5*Math.exp(2*H/3),Q=.5*Math.sqrt(H*K*(F-K)/F)*(O-F/2<0?-1:1);na(t,e,Math.max(n,Math.floor(e-O*K/F+Q)),Math.min(r,Math.floor(e+(F-O)*K/F+Q)),o)}const u=t[e];let p=n,M=r;for(jn(t,n,e),o(t[r],u)>0&&jn(t,n,r);p<M;){for(jn(t,p,M),++p,--M;o(t[p],u)<0;)++p;for(;o(t[M],u)>0;)--M}0===o(t[n],u)?jn(t,n,M):(++M,jn(t,M,r)),M<=e&&(n=M+1),e<=M&&(r=M-1)}return t}function jn(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function yn(t,e,n){t=+t,e=+e,n=(o=arguments.length)<2?(e=t,t=0,1):o<3?1:+n;for(var r=-1,o=0|Math.max(0,Math.ceil((e-t)/n)),u=new Array(o);++r<o;)u[r]=t+r*n;return u}class ra extends Map{constructor(e,n=aa){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=e)for(const[r,o]of e)this.set(r,o)}get(e){return super.get(Li(this,e))}has(e){return super.has(Li(this,e))}set(e,n){return super.set(ia(this,e),n)}delete(e){return super.delete(oa(this,e))}}class Jl extends Set{constructor(e,n=aa){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=e)for(const r of e)this.add(r)}has(e){return super.has(Li(this,e))}add(e){return super.add(ia(this,e))}delete(e){return super.delete(oa(this,e))}}function Li({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function ia({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function oa({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function aa(t){return null!==t&&"object"==typeof t?t.valueOf():t}function tf(t){return t}function ef(t){return"translate("+t+",0)"}function nf(t){return"translate(0,"+t+")"}function rf(t){return e=>+t(e)}function of(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function af(){return!this.__axis}function Sr(t,e){var n=[],r=null,o=null,u=6,p=6,M=3,F="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,O=1===t||4===t?-1:1,H=4===t||2===t?"x":"y",K=1===t||3===t?ef:nf;function Q(J){var ft=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,ct=null==o?e.tickFormat?e.tickFormat.apply(e,n):tf:o,et=Math.max(u,0)+M,nt=e.range(),pt=+nt[0]+F,mt=+nt[nt.length-1]+F,_t=(e.bandwidth?of:rf)(e.copy(),F),Tt=J.selection?J.selection():J,Gt=Tt.selectAll(".domain").data([null]),Ht=Tt.selectAll(".tick").data(ft,e).order(),zt=Ht.exit(),qt=Ht.enter().append("g").attr("class","tick"),kt=Ht.select("line"),Lt=Ht.select("text");Gt=Gt.merge(Gt.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Ht=Ht.merge(qt),kt=kt.merge(qt.append("line").attr("stroke","currentColor").attr(H+"2",O*u)),Lt=Lt.merge(qt.append("text").attr("fill","currentColor").attr(H,O*et).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),J!==Tt&&(Gt=Gt.transition(J),Ht=Ht.transition(J),kt=kt.transition(J),Lt=Lt.transition(J),zt=zt.transition(J).attr("opacity",1e-6).attr("transform",function(Yt){return isFinite(Yt=_t(Yt))?K(Yt+F):this.getAttribute("transform")}),qt.attr("opacity",1e-6).attr("transform",function(Yt){var Ut=this.parentNode.__axis;return K((Ut&&isFinite(Ut=Ut(Yt))?Ut:_t(Yt))+F)})),zt.remove(),Gt.attr("d",4===t||2===t?p?"M"+O*p+","+pt+"H"+F+"V"+mt+"H"+O*p:"M"+F+","+pt+"V"+mt:p?"M"+pt+","+O*p+"V"+F+"H"+mt+"V"+O*p:"M"+pt+","+F+"H"+mt),Ht.attr("opacity",1).attr("transform",function(Yt){return K(_t(Yt)+F)}),kt.attr(H+"2",O*u),Lt.attr(H,O*et).text(ct),Tt.filter(af).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),Tt.each(function(){this.__axis=_t})}return Q.scale=function(J){return arguments.length?(e=J,Q):e},Q.ticks=function(){return n=Array.from(arguments),Q},Q.tickArguments=function(J){return arguments.length?(n=null==J?[]:Array.from(J),Q):n.slice()},Q.tickValues=function(J){return arguments.length?(r=null==J?null:Array.from(J),Q):r&&r.slice()},Q.tickFormat=function(J){return arguments.length?(o=J,Q):o},Q.tickSize=function(J){return arguments.length?(u=p=+J,Q):u},Q.tickSizeInner=function(J){return arguments.length?(u=+J,Q):u},Q.tickSizeOuter=function(J){return arguments.length?(p=+J,Q):p},Q.tickPadding=function(J){return arguments.length?(M=+J,Q):M},Q.offset=function(J){return arguments.length?(F=+J,Q):F},Q}function ua(t){return Sr(3,t)}function Ri(t){return Sr(4,t)}function cf(){}function Pi(t){return null==t?cf:function(){return this.querySelector(t)}}function lf(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function ff(){return[]}function ca(t){return null==t?ff:function(){return this.querySelectorAll(t)}}function ha(t){return function(){return this.matches(t)}}function la(t){return function(e){return e.matches(t)}}var gf=Array.prototype.find;function yf(){return this.firstElementChild}var wf=Array.prototype.filter;function bf(){return Array.from(this.children)}function fa(t){return new Array(t.length)}function Tr(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Cf(t){return function(){return t}}function Sf(t,e,n,r,o,u){for(var M,p=0,F=e.length,O=u.length;p<O;++p)(M=e[p])?(M.__data__=u[p],r[p]=M):n[p]=new Tr(t,u[p]);for(;p<F;++p)(M=e[p])&&(o[p]=M)}function Tf(t,e,n,r,o,u,p){var M,F,J,O=new Map,H=e.length,K=u.length,Q=new Array(H);for(M=0;M<H;++M)(F=e[M])&&(Q[M]=J=p.call(F,F.__data__,M,e)+"",O.has(J)?o[M]=F:O.set(J,F));for(M=0;M<K;++M)J=p.call(t,u[M],M,u)+"",(F=O.get(J))?(r[M]=F,F.__data__=u[M],O.delete(J)):n[M]=new Tr(t,u[M]);for(M=0;M<H;++M)(F=e[M])&&O.get(Q[M])===F&&(o[M]=F)}function Mf(t){return t.__data__}function Lf(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Ff(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Tr.prototype={constructor:Tr,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Oi="http://www.w3.org/1999/xhtml";const da={svg:"http://www.w3.org/2000/svg",xhtml:Oi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Mr(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),da.hasOwnProperty(e)?{space:da[e],local:t}:t}function Bf(t){return function(){this.removeAttribute(t)}}function Zf(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Hf(t,e){return function(){this.setAttribute(t,e)}}function Yf(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Vf(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Xf(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function pa(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function qf(t){return function(){this.style.removeProperty(t)}}function Kf(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Qf(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function mn(t,e){return t.style.getPropertyValue(e)||pa(t).getComputedStyle(t,null).getPropertyValue(e)}function td(t){return function(){delete this[t]}}function ed(t,e){return function(){this[t]=e}}function nd(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function ga(t){return t.trim().split(/^|\s+/)}function Ii(t){return t.classList||new va(t)}function va(t){this._node=t,this._names=ga(t.getAttribute("class")||"")}function ya(t,e){for(var n=Ii(t),r=-1,o=e.length;++r<o;)n.add(e[r])}function ma(t,e){for(var n=Ii(t),r=-1,o=e.length;++r<o;)n.remove(e[r])}function id(t){return function(){ya(this,t)}}function od(t){return function(){ma(this,t)}}function ad(t,e){return function(){(e.apply(this,arguments)?ya:ma)(this,t)}}function ud(){this.textContent=""}function cd(t){return function(){this.textContent=t}}function hd(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function fd(){this.innerHTML=""}function dd(t){return function(){this.innerHTML=t}}function pd(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function vd(){this.nextSibling&&this.parentNode.appendChild(this)}function md(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function bd(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Oi&&e.documentElement.namespaceURI===Oi?e.createElement(t):e.createElementNS(n,t)}}function _d(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Fi(t){var e=Mr(t);return(e.local?_d:bd)(e)}function Ad(){return null}function Cd(){var t=this.parentNode;t&&t.removeChild(this)}function Td(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Md(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Rd(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Pd(t){return function(){var e=this.__on;if(e){for(var u,n=0,r=-1,o=e.length;n<o;++n)u=e[n],t.type&&u.type!==t.type||u.name!==t.name?e[++r]=u:this.removeEventListener(u.type,u.listener,u.options);++r?e.length=r:delete this.__on}}}function Od(t,e,n){return function(){var o,r=this.__on,u=function Dd(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var p=0,M=r.length;p<M;++p)if((o=r[p]).type===t.type&&o.name===t.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=u,o.options=n),void(o.value=e);this.addEventListener(t.type,u,n),o={type:t.type,name:t.name,value:e,listener:u,options:n},r?r.push(o):this.__on=[o]}}function wa(t,e,n){var r=pa(t),o=r.CustomEvent;"function"==typeof o?o=new o(e,n):(o=r.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function Fd(t,e){return function(){return wa(this,t,e)}}function Gd(t,e){return function(){return wa(this,t,e.apply(this,arguments))}}va.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ba=[null];function Ee(t,e){this._groups=t,this._parents=e}function _a(){return new Ee([[document.documentElement]],ba)}Ee.prototype=_a.prototype={constructor:Ee,select:function hf(t){"function"!=typeof t&&(t=Pi(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var F,O,u=e[o],p=u.length,M=r[o]=new Array(p),H=0;H<p;++H)(F=u[H])&&(O=t.call(F,F.__data__,H,u))&&("__data__"in F&&(O.__data__=F.__data__),M[H]=O);return new Ee(r,this._parents)},selectAll:function pf(t){t="function"==typeof t?function df(t){return function(){return lf(t.apply(this,arguments))}}(t):ca(t);for(var e=this._groups,n=e.length,r=[],o=[],u=0;u<n;++u)for(var F,p=e[u],M=p.length,O=0;O<M;++O)(F=p[O])&&(r.push(t.call(F,F.__data__,O,p)),o.push(F));return new Ee(r,o)},selectChild:function mf(t){return this.select(null==t?yf:function vf(t){return function(){return gf.call(this.children,t)}}("function"==typeof t?t:la(t)))},selectChildren:function xf(t){return this.selectAll(null==t?bf:function _f(t){return function(){return wf.call(this.children,t)}}("function"==typeof t?t:la(t)))},filter:function Af(t){"function"!=typeof t&&(t=ha(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var F,u=e[o],p=u.length,M=r[o]=[],O=0;O<p;++O)(F=u[O])&&t.call(F,F.__data__,O,u)&&M.push(F);return new Ee(r,this._parents)},data:function Nf(t,e){if(!arguments.length)return Array.from(this,Mf);var n=e?Tf:Sf,r=this._parents,o=this._groups;"function"!=typeof t&&(t=Cf(t));for(var u=o.length,p=new Array(u),M=new Array(u),F=new Array(u),O=0;O<u;++O){var H=r[O],K=o[O],Q=K.length,J=Lf(t.call(H,H&&H.__data__,O,r)),ft=J.length,ct=M[O]=new Array(ft),et=p[O]=new Array(ft),nt=F[O]=new Array(Q);n(H,K,ct,et,nt,J,e);for(var _t,Tt,pt=0,mt=0;pt<ft;++pt)if(_t=ct[pt]){for(pt>=mt&&(mt=pt+1);!(Tt=et[mt])&&++mt<ft;);_t._next=Tt||null}}return(p=new Ee(p,r))._enter=M,p._exit=F,p},enter:function Ef(){return new Ee(this._enter||this._groups.map(fa),this._parents)},exit:function Df(){return new Ee(this._exit||this._groups.map(fa),this._parents)},join:function Rf(t,e,n){var r=this.enter(),o=this,u=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(o=e(o))&&(o=o.selection()),null==n?u.remove():n(u),r&&o?r.merge(o).order():o},merge:function Pf(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,o=n.length,p=Math.min(o,r.length),M=new Array(o),F=0;F<p;++F)for(var J,O=n[F],H=r[F],K=O.length,Q=M[F]=new Array(K),ft=0;ft<K;++ft)(J=O[ft]||H[ft])&&(Q[ft]=J);for(;F<o;++F)M[F]=n[F];return new Ee(M,this._parents)},selection:function Ud(){return this},order:function Of(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var p,r=t[e],o=r.length-1,u=r[o];--o>=0;)(p=r[o])&&(u&&4^p.compareDocumentPosition(u)&&u.parentNode.insertBefore(p,u),u=p);return this},sort:function If(t){function e(K,Q){return K&&Q?t(K.__data__,Q.__data__):!K-!Q}t||(t=Ff);for(var n=this._groups,r=n.length,o=new Array(r),u=0;u<r;++u){for(var O,p=n[u],M=p.length,F=o[u]=new Array(M),H=0;H<M;++H)(O=p[H])&&(F[H]=O);F.sort(e)}return new Ee(o,this._parents).order()},call:function Gf(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function kf(){return Array.from(this)},node:function zf(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],o=0,u=r.length;o<u;++o){var p=r[o];if(p)return p}return null},size:function Uf(){let t=0;for(const e of this)++t;return t},empty:function jf(){return!this.node()},each:function Wf(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var M,o=e[n],u=0,p=o.length;u<p;++u)(M=o[u])&&t.call(M,M.__data__,u,o);return this},attr:function $f(t,e){var n=Mr(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?Zf:Bf:"function"==typeof e?n.local?Xf:Vf:n.local?Yf:Hf)(n,e))},style:function Jf(t,e,n){return arguments.length>1?this.each((null==e?qf:"function"==typeof e?Qf:Kf)(t,e,null==n?"":n)):mn(this.node(),t)},property:function rd(t,e){return arguments.length>1?this.each((null==e?td:"function"==typeof e?nd:ed)(t,e)):this.node()[t]},classed:function sd(t,e){var n=ga(t+"");if(arguments.length<2){for(var r=Ii(this.node()),o=-1,u=n.length;++o<u;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof e?ad:e?id:od)(n,e))},text:function ld(t){return arguments.length?this.each(null==t?ud:("function"==typeof t?hd:cd)(t)):this.node().textContent},html:function gd(t){return arguments.length?this.each(null==t?fd:("function"==typeof t?pd:dd)(t)):this.node().innerHTML},raise:function yd(){return this.each(vd)},lower:function wd(){return this.each(md)},append:function xd(t){var e="function"==typeof t?t:Fi(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function Ed(t,e){var n="function"==typeof t?t:Fi(t),r=null==e?Ad:"function"==typeof e?e:Pi(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function Sd(){return this.each(Cd)},clone:function Nd(t){return this.select(t?Md:Td)},datum:function Ld(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function Id(t,e,n){var o,p,r=Rd(t+""),u=r.length;if(!(arguments.length<2)){for(M=e?Od:Pd,o=0;o<u;++o)this.each(M(r[o],e,n));return this}var M=this.node().__on;if(M)for(var H,F=0,O=M.length;F<O;++F)for(o=0,H=M[F];o<u;++o)if((p=r[o]).type===H.type&&p.name===H.name)return H.value},dispatch:function kd(t,e){return this.each(("function"==typeof e?Gd:Fd)(t,e))},[Symbol.iterator]:function*zd(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var p,r=t[e],o=0,u=r.length;o<u;++o)(p=r[o])&&(yield p)}};const Bn=_a;var jd={value:()=>{}};function xa(){for(var r,t=0,e=arguments.length,n={};t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Nr(n)}function Nr(t){this._=t}function Wd(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}function Bd(t,e){for(var o,n=0,r=t.length;n<r;++n)if((o=t[n]).name===e)return o.value}function Aa(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=jd,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Nr.prototype=xa.prototype={constructor:Nr,on:function(t,e){var o,n=this._,r=Wd(t+"",n),u=-1,p=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++u<p;)if(o=(t=r[u]).type)n[o]=Aa(n[o],t.name,e);else if(null==e)for(o in n)n[o]=Aa(n[o],t.name,null);return this}for(;++u<p;)if((o=(t=r[u]).type)&&(o=Bd(n[o],t.name)))return o},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Nr(t)},call:function(t,e){if((o=arguments.length-2)>0)for(var o,u,n=new Array(o),r=0;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=0,o=(u=this._[t]).length;r<o;++r)u[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,u=r.length;o<u;++o)r[o].value.apply(e,n)}};const Ea=xa;var Lr,Yn,wn=0,Zn=0,Hn=0,Dr=0,en=0,Rr=0,Vn="object"==typeof performance&&performance.now?performance:Date,Sa="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Gi(){return en||(Sa(Zd),en=Vn.now()+Rr)}function Zd(){en=0}function Pr(){this._call=this._time=this._next=null}function ki(t,e,n){var r=new Pr;return r.restart(t,e,n),r}function Ta(){en=(Dr=Vn.now())+Rr,wn=Zn=0;try{!function Hd(){Gi(),++wn;for(var e,t=Lr;t;)(e=en-t._time)>=0&&t._call.call(void 0,e),t=t._next;--wn}()}finally{wn=0,function Vd(){for(var t,n,e=Lr,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Lr=n);Yn=t,zi(r)}(),en=0}}function Yd(){var t=Vn.now(),e=t-Dr;e>1e3&&(Rr-=e,Dr=t)}function zi(t){wn||(Zn&&(Zn=clearTimeout(Zn)),t-en>24?(t<1/0&&(Zn=setTimeout(Ta,t-Vn.now()-Rr)),Hn&&(Hn=clearInterval(Hn))):(Hn||(Dr=Vn.now(),Hn=setInterval(Yd,1e3)),wn=1,Sa(Ta)))}function Ma(t,e,n){var r=new Pr;return r.restart(o=>{r.stop(),t(o+e)},e=null==e?0:+e,n),r}Pr.prototype=ki.prototype={constructor:Pr,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Gi():+n)+(null==e?0:+e),!this._next&&Yn!==this&&(Yn?Yn._next=this:Lr=this,Yn=this),this._call=t,this._time=n,zi()},stop:function(){this._call&&(this._call=null,this._time=1/0,zi())}};var Xd=Ea("start","end","cancel","interrupt"),$d=[];function Fr(t,e,n,r,o,u){var p=t.__transition;if(p){if(n in p)return}else t.__transition={};!function qd(t,e,n){var o,r=t.__transition;function p(O){var H,K,Q,J;if(1!==n.state)return F();for(H in r)if((J=r[H]).name===n.name){if(3===J.state)return Ma(p);4===J.state?(J.state=6,J.timer.stop(),J.on.call("interrupt",t,t.__data__,J.index,J.group),delete r[H]):+H<e&&(J.state=6,J.timer.stop(),J.on.call("cancel",t,t.__data__,J.index,J.group),delete r[H])}if(Ma(function(){3===n.state&&(n.state=4,n.timer.restart(M,n.delay,n.time),M(O))}),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,o=new Array(Q=n.tween.length),H=0,K=-1;H<Q;++H)(J=n.tween[H].value.call(t,t.__data__,n.index,n.group))&&(o[++K]=J);o.length=K+1}}function M(O){for(var H=O<n.duration?n.ease.call(null,O/n.duration):(n.timer.restart(F),n.state=5,1),K=-1,Q=o.length;++K<Q;)o[K].call(t,H);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),F())}function F(){for(var O in n.state=6,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=ki(function u(O){n.state=1,n.timer.restart(p,n.delay,n.time),n.delay<=O&&p(O-n.delay)},0,n.time)}(t,n,{name:e,index:r,group:o,on:Xd,tween:$d,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:0})}function Wi(t,e){var n=Se(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Pe(t,e){var n=Se(t,e);if(n.state>3)throw new Error("too late; already running");return n}function Se(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Te(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Gr,Ra=180/Math.PI,Bi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Pa(t,e,n,r,o,u){var p,M,F;return(p=Math.sqrt(t*t+e*e))&&(t/=p,e/=p),(F=t*n+e*r)&&(n-=t*F,r-=e*F),(M=Math.sqrt(n*n+r*r))&&(n/=M,r/=M,F/=M),t*r<e*n&&(t=-t,e=-e,F=-F,p=-p),{translateX:o,translateY:u,rotate:Math.atan2(e,t)*Ra,skewX:Math.atan(F)*Ra,scaleX:p,scaleY:M}}function Oa(t,e,n,r){function o(O){return O.length?O.pop()+" ":""}return function(O,H){var K=[],Q=[];return O=t(O),H=t(H),function u(O,H,K,Q,J,ft){if(O!==K||H!==Q){var ct=J.push("translate(",null,e,null,n);ft.push({i:ct-4,x:Te(O,K)},{i:ct-2,x:Te(H,Q)})}else(K||Q)&&J.push("translate("+K+e+Q+n)}(O.translateX,O.translateY,H.translateX,H.translateY,K,Q),function p(O,H,K,Q){O!==H?(O-H>180?H+=360:H-O>180&&(O+=360),Q.push({i:K.push(o(K)+"rotate(",null,r)-2,x:Te(O,H)})):H&&K.push(o(K)+"rotate("+H+r)}(O.rotate,H.rotate,K,Q),function M(O,H,K,Q){O!==H?Q.push({i:K.push(o(K)+"skewX(",null,r)-2,x:Te(O,H)}):H&&K.push(o(K)+"skewX("+H+r)}(O.skewX,H.skewX,K,Q),function F(O,H,K,Q,J,ft){if(O!==K||H!==Q){var ct=J.push(o(J)+"scale(",null,",",null,")");ft.push({i:ct-4,x:Te(O,K)},{i:ct-2,x:Te(H,Q)})}else(1!==K||1!==Q)&&J.push(o(J)+"scale("+K+","+Q+")")}(O.scaleX,O.scaleY,H.scaleX,H.scaleY,K,Q),O=H=null,function(J){for(var et,ft=-1,ct=Q.length;++ft<ct;)K[(et=Q[ft]).i]=et.x(J);return K.join("")}}}var ep=Oa(function Jd(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Bi:Pa(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),np=Oa(function tp(t){return null!=t&&(Gr||(Gr=document.createElementNS("http://www.w3.org/2000/svg","g")),Gr.setAttribute("transform",t),t=Gr.transform.baseVal.consolidate())?Pa((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Bi},", ",")",")");function rp(t,e){var n,r;return function(){var o=Pe(this,t),u=o.tween;if(u!==n)for(var p=0,M=(r=n=u).length;p<M;++p)if(r[p].name===e){(r=r.slice()).splice(p,1);break}o.tween=r}}function ip(t,e,n){var r,o;if("function"!=typeof n)throw new Error;return function(){var u=Pe(this,t),p=u.tween;if(p!==r){o=(r=p).slice();for(var M={name:e,value:n},F=0,O=o.length;F<O;++F)if(o[F].name===e){o[F]=M;break}F===O&&o.push(M)}u.tween=o}}function Zi(t,e,n){var r=t._id;return t.each(function(){var o=Pe(this,r);(o.value||(o.value={}))[e]=n.apply(this,arguments)}),function(o){return Se(o,r).value[e]}}function kr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Hi(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function bn(){}var _n=1/.7,xn="\\s*([+-]?\\d+)\\s*",Xn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Oe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ap=/^#([0-9a-f]{3,8})$/,sp=new RegExp(`^rgb\\(${xn},${xn},${xn}\\)$`),up=new RegExp(`^rgb\\(${Oe},${Oe},${Oe}\\)$`),cp=new RegExp(`^rgba\\(${xn},${xn},${xn},${Xn}\\)$`),hp=new RegExp(`^rgba\\(${Oe},${Oe},${Oe},${Xn}\\)$`),lp=new RegExp(`^hsl\\(${Xn},${Oe},${Oe}\\)$`),fp=new RegExp(`^hsla\\(${Xn},${Oe},${Oe},${Xn}\\)$`),Ia={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Fa(){return this.rgb().formatHex()}function Ga(){return this.rgb().formatRgb()}function rn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ap.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?ka(e):3===n?new le(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?zr(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?zr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=sp.exec(t))?new le(e[1],e[2],e[3],1):(e=up.exec(t))?new le(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=cp.exec(t))?zr(e[1],e[2],e[3],e[4]):(e=hp.exec(t))?zr(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=lp.exec(t))?Wa(e[1],e[2]/100,e[3]/100,1):(e=fp.exec(t))?Wa(e[1],e[2]/100,e[3]/100,e[4]):Ia.hasOwnProperty(t)?ka(Ia[t]):"transparent"===t?new le(NaN,NaN,NaN,0):null}function ka(t){return new le(t>>16&255,t>>8&255,255&t,1)}function zr(t,e,n,r){return r<=0&&(t=e=n=NaN),new le(t,e,n,r)}function za(t){return t instanceof bn||(t=rn(t)),t?new le((t=t.rgb()).r,t.g,t.b,t.opacity):new le}function Ur(t,e,n,r){return 1===arguments.length?za(t):new le(t,e,n,null==r?1:r)}function le(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Ua(){return`#${an(this.r)}${an(this.g)}${an(this.b)}`}function ja(){const t=jr(this.opacity);return`${1===t?"rgb(":"rgba("}${on(this.r)}, ${on(this.g)}, ${on(this.b)}${1===t?")":`, ${t})`}`}function jr(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function on(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function an(t){return((t=on(t))<16?"0":"")+t.toString(16)}function Wa(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Me(t,e,n,r)}function Ba(t){if(t instanceof Me)return new Me(t.h,t.s,t.l,t.opacity);if(t instanceof bn||(t=rn(t)),!t)return new Me;if(t instanceof Me)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),u=Math.max(e,n,r),p=NaN,M=u-o,F=(u+o)/2;return M?(p=e===u?(n-r)/M+6*(n<r):n===u?(r-e)/M+2:(e-n)/M+4,M/=F<.5?u+o:2-u-o,p*=60):M=F>0&&F<1?0:p,new Me(p,M,F,t.opacity)}function Me(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Za(t){return(t=(t||0)%360)<0?t+360:t}function Wr(t){return Math.max(0,Math.min(1,t||0))}function Yi(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Ha(t,e,n,r,o){var u=t*t,p=u*t;return((1-3*t+3*u-p)*e+(4-6*u+3*p)*n+(1+3*t+3*u-3*p)*r+p*o)/6}kr(bn,rn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Fa,formatHex:Fa,formatHex8:function dp(){return this.rgb().formatHex8()},formatHsl:function pp(){return Ba(this).formatHsl()},formatRgb:Ga,toString:Ga}),kr(le,Ur,Hi(bn,{brighter(t){return t=null==t?_n:Math.pow(_n,t),new le(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new le(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new le(on(this.r),on(this.g),on(this.b),jr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ua,formatHex:Ua,formatHex8:function gp(){return`#${an(this.r)}${an(this.g)}${an(this.b)}${an(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:ja,toString:ja})),kr(Me,function vp(t,e,n,r){return 1===arguments.length?Ba(t):new Me(t,e,n,null==r?1:r)},Hi(bn,{brighter(t){return t=null==t?_n:Math.pow(_n,t),new Me(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Me(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,o=2*n-r;return new le(Yi(t>=240?t-240:t+120,o,r),Yi(t,o,r),Yi(t<120?t+240:t-120,o,r),this.opacity)},clamp(){return new Me(Za(this.h),Wr(this.s),Wr(this.l),jr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=jr(this.opacity);return`${1===t?"hsl(":"hsla("}${Za(this.h)}, ${100*Wr(this.s)}%, ${100*Wr(this.l)}%${1===t?")":`, ${t})`}`}}));const Br=t=>()=>t;function Ya(t,e){return function(n){return t+n*e}}function An(t,e){var n=e-t;return n?Ya(t,n):Br(isNaN(t)?e:t)}const Zr=function t(e){var n=function _p(t){return 1==(t=+t)?An:function(e,n){return n-e?function wp(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Br(isNaN(e)?n:e)}}(e);function r(o,u){var p=n((o=Ur(o)).r,(u=Ur(u)).r),M=n(o.g,u.g),F=n(o.b,u.b),O=An(o.opacity,u.opacity);return function(H){return o.r=p(H),o.g=M(H),o.b=F(H),o.opacity=O(H),o+""}}return r.gamma=t,r}(1);function Va(t){return function(e){var p,M,n=e.length,r=new Array(n),o=new Array(n),u=new Array(n);for(p=0;p<n;++p)M=Ur(e[p]),r[p]=M.r||0,o[p]=M.g||0,u[p]=M.b||0;return r=t(r),o=t(o),u=t(u),M.opacity=1,function(F){return M.r=r(F),M.g=o(F),M.b=u(F),M+""}}}Va(function yp(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),o=t[r],u=t[r+1];return Ha((n-r/e)*e,r>0?t[r-1]:2*o-u,o,u,r<e-1?t[r+2]:2*u-o)}}),Va(function mp(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e);return Ha((n-r/e)*e,t[(r+e-1)%e],t[r%e],t[(r+1)%e],t[(r+2)%e])}});var Vi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Xi=new RegExp(Vi.source,"g");function Xa(t,e){var r,o,u,n=Vi.lastIndex=Xi.lastIndex=0,p=-1,M=[],F=[];for(t+="",e+="";(r=Vi.exec(t))&&(o=Xi.exec(e));)(u=o.index)>n&&(u=e.slice(n,u),M[p]?M[p]+=u:M[++p]=u),(r=r[0])===(o=o[0])?M[p]?M[p]+=o:M[++p]=o:(M[++p]=null,F.push({i:p,x:Te(r,o)})),n=Xi.lastIndex;return n<e.length&&(u=e.slice(n),M[p]?M[p]+=u:M[++p]=u),M.length<2?F[0]?function Ap(t){return function(e){return t(e)+""}}(F[0].x):function xp(t){return function(){return t}}(e):(e=F.length,function(O){for(var K,H=0;H<e;++H)M[(K=F[H]).i]=K.x(O);return M.join("")})}function $a(t,e){var n;return("number"==typeof e?Te:e instanceof rn?Zr:(n=rn(e))?(e=n,Zr):Xa)(t,e)}function Ep(t){return function(){this.removeAttribute(t)}}function Cp(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Sp(t,e,n){var r,u,o=n+"";return function(){var p=this.getAttribute(t);return p===o?null:p===r?u:u=e(r=p,n)}}function Tp(t,e,n){var r,u,o=n+"";return function(){var p=this.getAttributeNS(t.space,t.local);return p===o?null:p===r?u:u=e(r=p,n)}}function Mp(t,e,n){var r,o,u;return function(){var p,F,M=n(this);return null==M?void this.removeAttribute(t):(p=this.getAttribute(t))===(F=M+"")?null:p===r&&F===o?u:(o=F,u=e(r=p,M))}}function Np(t,e,n){var r,o,u;return function(){var p,F,M=n(this);return null==M?void this.removeAttributeNS(t.space,t.local):(p=this.getAttributeNS(t.space,t.local))===(F=M+"")?null:p===r&&F===o?u:(o=F,u=e(r=p,M))}}function Dp(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Rp(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Pp(t,e){var n,r;function o(){var u=e.apply(this,arguments);return u!==r&&(n=(r=u)&&Rp(t,u)),n}return o._value=e,o}function Op(t,e){var n,r;function o(){var u=e.apply(this,arguments);return u!==r&&(n=(r=u)&&Dp(t,u)),n}return o._value=e,o}function Fp(t,e){return function(){Wi(this,t).delay=+e.apply(this,arguments)}}function Gp(t,e){return e=+e,function(){Wi(this,t).delay=e}}function zp(t,e){return function(){Pe(this,t).duration=+e.apply(this,arguments)}}function Up(t,e){return e=+e,function(){Pe(this,t).duration=e}}function Wp(t,e){if("function"!=typeof e)throw new Error;return function(){Pe(this,t).ease=e}}function $p(t,e,n){var r,o,u=function Xp(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||"start"===e})}(e)?Wi:Pe;return function(){var p=u(this,t),M=p.on;M!==r&&(o=(r=M).copy()).on(e,n),p.on=o}}var eg=Bn.prototype.constructor;function qa(t){return function(){this.style.removeProperty(t)}}function ug(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function cg(t,e,n){var r,o;function u(){var p=e.apply(this,arguments);return p!==o&&(r=(o=p)&&ug(t,p,n)),r}return u._value=e,u}function pg(t){return function(e){this.textContent=t.call(this,e)}}function gg(t){var e,n;function r(){var o=t.apply(this,arguments);return o!==n&&(e=(n=o)&&pg(o)),e}return r._value=t,r}var wg=0;function Ge(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Ka(){return++wg}var ke=Bn.prototype;Ge.prototype=function bg(t){return Bn().transition(t)}.prototype={constructor:Ge,select:function Jp(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Pi(t));for(var r=this._groups,o=r.length,u=new Array(o),p=0;p<o;++p)for(var H,K,M=r[p],F=M.length,O=u[p]=new Array(F),Q=0;Q<F;++Q)(H=M[Q])&&(K=t.call(H,H.__data__,Q,M))&&("__data__"in H&&(K.__data__=H.__data__),O[Q]=K,Fr(O[Q],e,n,Q,O,Se(H,n)));return new Ge(u,this._parents,e,n)},selectAll:function tg(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=ca(t));for(var r=this._groups,o=r.length,u=[],p=[],M=0;M<o;++M)for(var H,F=r[M],O=F.length,K=0;K<O;++K)if(H=F[K]){for(var J,Q=t.call(H,H.__data__,K,F),ft=Se(H,n),ct=0,et=Q.length;ct<et;++ct)(J=Q[ct])&&Fr(J,e,n,ct,Q,ft);u.push(Q),p.push(H)}return new Ge(u,p,e,n)},selectChild:ke.selectChild,selectChildren:ke.selectChildren,filter:function Yp(t){"function"!=typeof t&&(t=ha(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var F,u=e[o],p=u.length,M=r[o]=[],O=0;O<p;++O)(F=u[O])&&t.call(F,F.__data__,O,u)&&M.push(F);return new Ge(r,this._parents,this._name,this._id)},merge:function Vp(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,u=Math.min(r,n.length),p=new Array(r),M=0;M<u;++M)for(var Q,F=e[M],O=n[M],H=F.length,K=p[M]=new Array(H),J=0;J<H;++J)(Q=F[J]||O[J])&&(K[J]=Q);for(;M<r;++M)p[M]=e[M];return new Ge(p,this._parents,this._name,this._id)},selection:function ng(){return new eg(this._groups,this._parents)},transition:function yg(){for(var t=this._name,e=this._id,n=Ka(),r=this._groups,o=r.length,u=0;u<o;++u)for(var F,p=r[u],M=p.length,O=0;O<M;++O)if(F=p[O]){var H=Se(F,e);Fr(F,t,n,O,p,{time:H.time+H.delay+H.duration,delay:0,duration:H.duration,ease:H.ease})}return new Ge(r,this._parents,t,n)},call:ke.call,nodes:ke.nodes,node:ke.node,size:ke.size,empty:ke.empty,each:ke.each,on:function qp(t,e){var n=this._id;return arguments.length<2?Se(this.node(),n).on.on(t):this.each($p(n,t,e))},attr:function Lp(t,e){var n=Mr(t),r="transform"===n?np:$a;return this.attrTween(t,"function"==typeof e?(n.local?Np:Mp)(n,r,Zi(this,"attr."+t,e)):null==e?(n.local?Cp:Ep)(n):(n.local?Tp:Sp)(n,r,e))},attrTween:function Ip(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Mr(t);return this.tween(n,(r.local?Pp:Op)(r,e))},style:function sg(t,e,n){var r="transform"==(t+="")?ep:$a;return null==e?this.styleTween(t,function rg(t,e){var n,r,o;return function(){var u=mn(this,t),p=(this.style.removeProperty(t),mn(this,t));return u===p?null:u===n&&p===r?o:o=e(n=u,r=p)}}(t,r)).on("end.style."+t,qa(t)):"function"==typeof e?this.styleTween(t,function og(t,e,n){var r,o,u;return function(){var p=mn(this,t),M=n(this),F=M+"";return null==M&&(this.style.removeProperty(t),F=M=mn(this,t)),p===F?null:p===r&&F===o?u:(o=F,u=e(r=p,M))}}(t,r,Zi(this,"style."+t,e))).each(function ag(t,e){var n,r,o,M,u="style."+e,p="end."+u;return function(){var F=Pe(this,t),O=F.on,H=null==F.value[u]?M||(M=qa(e)):void 0;(O!==n||o!==H)&&(r=(n=O).copy()).on(p,o=H),F.on=r}}(this._id,t)):this.styleTween(t,function ig(t,e,n){var r,u,o=n+"";return function(){var p=mn(this,t);return p===o?null:p===r?u:u=e(r=p,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function hg(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,cg(t,e,null==n?"":n))},text:function dg(t){return this.tween("text","function"==typeof t?function fg(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Zi(this,"text",t)):function lg(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function vg(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,gg(t))},remove:function Qp(){return this.on("end.remove",function Kp(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function op(t,e){var n=this._id;if(t+="",arguments.length<2){for(var p,r=Se(this.node(),n).tween,o=0,u=r.length;o<u;++o)if((p=r[o]).name===t)return p.value;return null}return this.each((null==e?rp:ip)(n,t,e))},delay:function kp(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Fp:Gp)(e,t)):Se(this.node(),e).delay},duration:function jp(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?zp:Up)(e,t)):Se(this.node(),e).duration},ease:function Bp(t){var e=this._id;return arguments.length?this.each(Wp(e,t)):Se(this.node(),e).ease},easeVarying:function Hp(t){if("function"!=typeof t)throw new Error;return this.each(function Zp(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Pe(this,t).ease=n}}(this._id,t))},end:function mg(){var t,e,n=this,r=n._id,o=n.size();return new Promise(function(u,p){var M={value:p},F={value:function(){0==--o&&u()}};n.each(function(){var O=Pe(this,r),H=O.on;H!==t&&((e=(t=H).copy())._.cancel.push(M),e._.interrupt.push(M),e._.end.push(F)),O.on=e}),0===o&&u()})},[Symbol.iterator]:ke[Symbol.iterator]};var xg={time:null,delay:0,duration:250,ease:function _g(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ag(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}Bn.prototype.interrupt=function Qd(t){return this.each(function(){!function Kd(t,e){var r,o,p,n=t.__transition,u=!0;if(n){for(p in e=null==e?null:e+"",n)(r=n[p]).name===e?(o=r.state>2&&r.state<5,r.state=6,r.timer.stop(),r.on.call(o?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[p]):u=!1;u&&delete t.__transition}}(this,t)})},Bn.prototype.transition=function Eg(t){var e,n;t instanceof Ge?(e=t._id,t=t._name):(e=Ka(),(n=xg).time=Gi(),t=null==t?null:t+"");for(var r=this._groups,o=r.length,u=0;u<o;++u)for(var F,p=r[u],M=p.length,O=0;O<M;++O)(F=p[O])&&Fr(F,t,e,O,p,n||Ag(F,e));return new Ge(r,this._parents,t,e)};Math;function $n(t){return{type:t}}function rs(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var o,K,Q,J,ft,ct,et,nt,pt,u=t._root,p={data:r},M=t._x0,F=t._y0,O=t._x1,H=t._y1;if(!u)return t._root=p,t;for(;u.length;)if((ct=e>=(K=(M+O)/2))?M=K:O=K,(et=n>=(Q=(F+H)/2))?F=Q:H=Q,o=u,!(u=u[nt=et<<1|ct]))return o[nt]=p,t;if(J=+t._x.call(null,u.data),ft=+t._y.call(null,u.data),e===J&&n===ft)return p.next=u,o?o[nt]=p:t._root=p,t;do{o=o?o[nt]=new Array(4):t._root=new Array(4),(ct=e>=(K=(M+O)/2))?M=K:O=K,(et=n>=(Q=(F+H)/2))?F=Q:H=Q}while((nt=et<<1|ct)==(pt=(ft>=Q)<<1|J>=K));return o[pt]=u,o[nt]=p,t}function me(t,e,n,r,o){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=o}function Hg(t){return t[0]}function Vg(t){return t[1]}function Ji(t,e,n){var r=new to(null==e?Hg:e,null==n?Vg:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function to(t,e,n,r,o,u){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=o,this._y1=u,this._root=void 0}function is(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}["w","e"].map($n),["n","s"].map($n),["n","w","e","s","nw","ne","sw","se"].map($n);var we=Ji.prototype=to.prototype;function sn(t){return function(){return t}}function Ye(t){return 1e-6*(t()-.5)}function $g(t){return t.x+t.vx}function qg(t){return t.y+t.vy}function Qg(t){return t.index}function os(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}we.copy=function(){var n,r,t=new to(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root;if(!e)return t;if(!e.length)return t._root=is(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var o=0;o<4;++o)(r=e.source[o])&&(r.length?n.push({source:r,target:e.target[o]=new Array(4)}):e.target[o]=is(r));return t},we.add=function Pg(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return rs(this.cover(e,n),e,n,t)},we.addAll=function Og(t){var e,n,o,u,r=t.length,p=new Array(r),M=new Array(r),F=1/0,O=1/0,H=-1/0,K=-1/0;for(n=0;n<r;++n)isNaN(o=+this._x.call(null,e=t[n]))||isNaN(u=+this._y.call(null,e))||(p[n]=o,M[n]=u,o<F&&(F=o),o>H&&(H=o),u<O&&(O=u),u>K&&(K=u));if(F>H||O>K)return this;for(this.cover(F,O).cover(H,K),n=0;n<r;++n)rs(this,p[n],M[n],t[n]);return this},we.cover=function Ig(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,o=this._x1,u=this._y1;if(isNaN(n))o=(n=Math.floor(t))+1,u=(r=Math.floor(e))+1;else{for(var F,O,p=o-n||1,M=this._root;n>t||t>=o||r>e||e>=u;)switch(O=(e<r)<<1|t<n,F=new Array(4),F[O]=M,M=F,p*=2,O){case 0:o=n+p,u=r+p;break;case 1:n=o-p,u=r+p;break;case 2:o=n+p,r=u-p;break;case 3:n=o-p,r=u-p}this._root&&this._root.length&&(this._root=M)}return this._x0=n,this._y0=r,this._x1=o,this._y1=u,this},we.data=function Fg(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},we.extent=function Gg(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},we.find=function kg(t,e,n){var r,p,M,F,O,ft,ct,o=this._x0,u=this._y0,H=this._x1,K=this._y1,Q=[],J=this._root;for(J&&Q.push(new me(J,o,u,H,K)),null==n?n=1/0:(o=t-n,u=e-n,H=t+n,K=e+n,n*=n);ft=Q.pop();)if(!(!(J=ft.node)||(p=ft.x0)>H||(M=ft.y0)>K||(F=ft.x1)<o||(O=ft.y1)<u))if(J.length){var et=(p+F)/2,nt=(M+O)/2;Q.push(new me(J[3],et,nt,F,O),new me(J[2],p,nt,et,O),new me(J[1],et,M,F,nt),new me(J[0],p,M,et,nt)),(ct=(e>=nt)<<1|t>=et)&&(ft=Q[Q.length-1],Q[Q.length-1]=Q[Q.length-1-ct],Q[Q.length-1-ct]=ft)}else{var pt=t-+this._x.call(null,J.data),mt=e-+this._y.call(null,J.data),_t=pt*pt+mt*mt;if(_t<n){var Tt=Math.sqrt(n=_t);o=t-Tt,u=e-Tt,H=t+Tt,K=e+Tt,r=J.data}}return r},we.remove=function zg(t){if(isNaN(H=+this._x.call(null,t))||isNaN(K=+this._y.call(null,t)))return this;var e,r,o,u,H,K,Q,J,ft,ct,et,nt,n=this._root,p=this._x0,M=this._y0,F=this._x1,O=this._y1;if(!n)return this;if(n.length)for(;;){if((ft=H>=(Q=(p+F)/2))?p=Q:F=Q,(ct=K>=(J=(M+O)/2))?M=J:O=J,e=n,!(n=n[et=ct<<1|ft]))return this;if(!n.length)break;(e[et+1&3]||e[et+2&3]||e[et+3&3])&&(r=e,nt=et)}for(;n.data!==t;)if(o=n,!(n=n.next))return this;return(u=n.next)&&delete n.next,o?(u?o.next=u:delete o.next,this):e?(u?e[et]=u:delete e[et],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[nt]=n:this._root=n),this):(this._root=u,this)},we.removeAll=function Ug(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},we.root=function jg(){return this._root},we.size=function Wg(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},we.visit=function Bg(t){var n,o,u,p,M,F,e=[],r=this._root;for(r&&e.push(new me(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,u=n.x0,p=n.y0,M=n.x1,F=n.y1)&&r.length){var O=(u+M)/2,H=(p+F)/2;(o=r[3])&&e.push(new me(o,O,H,M,F)),(o=r[2])&&e.push(new me(o,u,H,O,F)),(o=r[1])&&e.push(new me(o,O,p,M,H)),(o=r[0])&&e.push(new me(o,u,p,O,H))}return this},we.visitAfter=function Zg(t){var r,e=[],n=[];for(this._root&&e.push(new me(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var o=r.node;if(o.length){var u,p=r.x0,M=r.y0,F=r.x1,O=r.y1,H=(p+F)/2,K=(M+O)/2;(u=o[0])&&e.push(new me(u,p,M,H,K)),(u=o[1])&&e.push(new me(u,H,M,F,K)),(u=o[2])&&e.push(new me(u,p,K,H,O)),(u=o[3])&&e.push(new me(u,H,K,F,O))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this},we.x=function Yg(t){return arguments.length?(this._x=t,this):this._x},we.y=function Xg(t){return arguments.length?(this._y=t,this):this._y};const as=4294967296;function rv(t){return t.x}function iv(t){return t.y}var av=Math.PI*(3-Math.sqrt(5));function Vr(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Sn(t){return(t=Vr(Math.abs(t)))?t[1]:NaN}var ss,fv=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xr(t){if(!(e=fv.exec(t)))throw new Error("invalid format: "+t);var e;return new eo({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function eo(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function us(t,e){var n=Vr(t,e);if(!n)return t+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}Xr.prototype=eo.prototype,eo.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const cs={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function cv(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>us(100*t,e),r:us,s:function pv(t,e){var n=Vr(t,e);if(!n)return t+"";var r=n[0],o=n[1],u=o-(ss=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,p=r.length;return u===p?r:u>p?r+new Array(u-p+1).join("0"):u>0?r.slice(0,u)+"."+r.slice(u):"0."+new Array(1-u).join("0")+Vr(t,Math.max(0,e+u-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function hs(t){return t}var $r,qr,ds,ls=Array.prototype.map,fs=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function ps(t,e){var p,n=e?e.length:0,r=t?Math.min(n,t.length):0,o=new Array(r),u=new Array(n);for(p=0;p<r;++p)o[p]=Tn(t[p],e[p]);for(;p<n;++p)u[p]=e[p];return function(M){for(p=0;p<r;++p)u[p]=o[p](M);return u}}function yv(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function mv(t,e){var o,n={},r={};for(o in(null===t||"object"!=typeof t)&&(t={}),(null===e||"object"!=typeof e)&&(e={}),e)o in t?n[o]=Tn(t[o],e[o]):r[o]=e[o];return function(u){for(o in n)r[o]=n[o](u);return r}}function wv(t,e){e||(e=[]);var o,n=t?Math.min(e.length,t.length):0,r=e.slice();return function(u){for(o=0;o<n;++o)r[o]=t[o]*(1-u)+e[o]*u;return r}}function Tn(t,e){var r,n=typeof e;return null==e||"boolean"===n?Br(e):("number"===n?Te:"string"===n?(r=rn(e))?(e=r,Zr):Xa:e instanceof rn?Zr:e instanceof Date?yv:function bv(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?wv:Array.isArray(e)?ps:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?mv:Te)(t,e)}function no(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function gs(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}function ro(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function _v(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}!function vv(t){$r=function gv(t){var e=void 0===t.grouping||void 0===t.thousands?hs:function hv(t,e){return function(n,r){for(var o=n.length,u=[],p=0,M=t[0],F=0;o>0&&M>0&&(F+M+1>r&&(M=Math.max(1,r-F)),u.push(n.substring(o-=M,o+M)),!((F+=M+1)>r));)M=t[p=(p+1)%t.length];return u.reverse().join(e)}}(ls.call(t.grouping,Number),t.thousands+""),n=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",u=void 0===t.numerals?hs:function lv(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}(ls.call(t.numerals,String)),p=void 0===t.percent?"%":t.percent+"",M=void 0===t.minus?"\u2212":t.minus+"",F=void 0===t.nan?"NaN":t.nan+"";function O(K){var Q=(K=Xr(K)).fill,J=K.align,ft=K.sign,ct=K.symbol,et=K.zero,nt=K.width,pt=K.comma,mt=K.precision,_t=K.trim,Tt=K.type;"n"===Tt?(pt=!0,Tt="g"):cs[Tt]||(void 0===mt&&(mt=12),_t=!0,Tt="g"),(et||"0"===Q&&"="===J)&&(et=!0,Q="0",J="=");var Gt="$"===ct?n:"#"===ct&&/[boxX]/.test(Tt)?"0"+Tt.toLowerCase():"",Ht="$"===ct?r:/[%p]/.test(Tt)?p:"",zt=cs[Tt],qt=/[defgprs%]/.test(Tt);function kt(Lt){var at,Nt,yt,Yt=Gt,Ut=Ht;if("c"===Tt)Ut=zt(Lt)+Ut,Lt="";else{var Mt=(Lt=+Lt)<0||1/Lt<0;if(Lt=isNaN(Lt)?F:zt(Math.abs(Lt),mt),_t&&(Lt=function dv(t){t:for(var o,e=t.length,n=1,r=-1;n<e;++n)switch(t[n]){case".":r=o=n;break;case"0":0===r&&(r=n),o=n;break;default:if(!+t[n])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(o+1):t}(Lt)),Mt&&0==+Lt&&"+"!==ft&&(Mt=!1),Yt=(Mt?"("===ft?ft:M:"-"===ft||"("===ft?"":ft)+Yt,Ut=("s"===Tt?fs[8+ss/3]:"")+Ut+(Mt&&"("===ft?")":""),qt)for(at=-1,Nt=Lt.length;++at<Nt;)if(48>(yt=Lt.charCodeAt(at))||yt>57){Ut=(46===yt?o+Lt.slice(at+1):Lt.slice(at))+Ut,Lt=Lt.slice(0,at);break}}pt&&!et&&(Lt=e(Lt,1/0));var Ot=Yt.length+Lt.length+Ut.length,Rt=Ot<nt?new Array(nt-Ot+1).join(Q):"";switch(pt&&et&&(Lt=e(Rt+Lt,Rt.length?nt-Ut.length:1/0),Rt=""),J){case"<":Lt=Yt+Lt+Ut+Rt;break;case"=":Lt=Yt+Rt+Lt+Ut;break;case"^":Lt=Rt.slice(0,Ot=Rt.length>>1)+Yt+Lt+Ut+Rt.slice(Ot);break;default:Lt=Rt+Yt+Lt+Ut}return u(Lt)}return mt=void 0===mt?6:/[gprs]/.test(Tt)?Math.max(1,Math.min(21,mt)):Math.max(0,Math.min(20,mt)),kt.toString=function(){return K+""},kt}return{format:O,formatPrefix:function H(K,Q){var J=O(((K=Xr(K)).type="f",K)),ft=3*Math.max(-8,Math.min(8,Math.floor(Sn(Q)/3))),ct=Math.pow(10,-ft),et=fs[8+ft/3];return function(nt){return J(ct*nt)+et}}}}(t),qr=$r.format,ds=$r.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});const vs=Symbol("implicit");function qn(){var t=new ra,e=[],n=[],r=vs;function o(u){let p=t.get(u);if(void 0===p){if(r!==vs)return r;t.set(u,p=e.push(u)-1)}return n[p%n.length]}return o.domain=function(u){if(!arguments.length)return e.slice();e=[],t=new ra;for(const p of u)t.has(p)||t.set(p,e.push(p)-1);return o},o.range=function(u){return arguments.length?(n=Array.from(u),o):n.slice()},o.unknown=function(u){return arguments.length?(r=u,o):r},o.copy=function(){return qn(e,n).unknown(r)},ro.apply(o,arguments),o}function Kn(){var u,p,t=qn().unknown(void 0),e=t.domain,n=t.range,r=0,o=1,M=!1,F=0,O=0,H=.5;function K(){var Q=e().length,J=o<r,ft=J?o:r,ct=J?r:o;u=(ct-ft)/Math.max(1,Q-F+2*O),M&&(u=Math.floor(u)),ft+=(ct-ft-u*(Q-F))*H,p=u*(1-F),M&&(ft=Math.round(ft),p=Math.round(p));var et=yn(Q).map(function(nt){return ft+u*nt});return n(J?et.reverse():et)}return delete t.unknown,t.domain=function(Q){return arguments.length?(e(Q),K()):e()},t.range=function(Q){return arguments.length?([r,o]=Q,r=+r,o=+o,K()):[r,o]},t.rangeRound=function(Q){return[r,o]=Q,r=+r,o=+o,M=!0,K()},t.bandwidth=function(){return p},t.step=function(){return u},t.round=function(Q){return arguments.length?(M=!!Q,K()):M},t.padding=function(Q){return arguments.length?(F=Math.min(1,O=+Q),K()):F},t.paddingInner=function(Q){return arguments.length?(F=Math.min(1,Q),K()):F},t.paddingOuter=function(Q){return arguments.length?(O=+Q,K()):O},t.align=function(Q){return arguments.length?(H=Math.max(0,Math.min(1,Q)),K()):H},t.copy=function(){return Kn(e(),[r,o]).round(M).paddingInner(F).paddingOuter(O).align(H)},ro.apply(K(),arguments)}const xv=Math.sqrt(50),Av=Math.sqrt(10),Ev=Math.sqrt(2);function Kr(t,e,n){const r=(e-t)/Math.max(0,n),o=Math.floor(Math.log10(r)),u=r/Math.pow(10,o),p=u>=xv?10:u>=Av?5:u>=Ev?2:1;let M,F,O;return o<0?(O=Math.pow(10,-o)/p,M=Math.round(t*O),F=Math.round(e*O),M/O<t&&++M,F/O>e&&--F,O=-O):(O=Math.pow(10,o)*p,M=Math.round(t/O),F=Math.round(e/O),M*O<t&&++M,F*O>e&&--F),F<M&&.5<=n&&n<2?Kr(t,e,2*n):[M,F,O]}function io(t,e,n){return Kr(t=+t,e=+e,n=+n)[2]}function Tv(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ms(t){let e,n,r;function o(M,F,O=0,H=M.length){if(O<H){if(0!==e(F,F))return H;do{const K=O+H>>>1;n(M[K],F)<0?O=K+1:H=K}while(O<H)}return O}return 2!==t.length?(e=vn,n=(M,F)=>vn(t(M),F),r=(M,F)=>t(M)-F):(e=t===vn||t===Tv?t:Mv,n=t,r=t),{left:o,center:function p(M,F,O=0,H=M.length){const K=o(M,F,O,H-1);return K>O&&r(M[K-1],F)>-r(M[K],F)?K-1:K},right:function u(M,F,O=0,H=M.length){if(O<H){if(0!==e(F,F))return H;do{const K=O+H>>>1;n(M[K],F)<=0?O=K+1:H=K}while(O<H)}return O}}}function Mv(){return 0}const Nv=ms(vn).right,Lv=(ms(function ql(t){return null===t?NaN:+t}),Nv);function Rv(t){return+t}var bs=[0,1];function Ve(t){return t}function oo(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function Dv(t){return function(){return t}}(isNaN(e)?NaN:.5)}function Ov(t,e,n){var r=t[0],o=t[1],u=e[0],p=e[1];return o<r?(r=oo(o,r),u=n(p,u)):(r=oo(r,o),u=n(u,p)),function(M){return u(r(M))}}function Iv(t,e,n){var r=Math.min(t.length,e.length)-1,o=new Array(r),u=new Array(r),p=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++p<r;)o[p]=oo(t[p],t[p+1]),u[p]=n(e[p],e[p+1]);return function(M){var F=Lv(t,M,1,r)-1;return u[F](o[F](M))}}function Fv(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function kv(){return function Gv(){var r,o,u,M,F,O,t=bs,e=bs,n=Tn,p=Ve;function H(){var Q=Math.min(t.length,e.length);return p!==Ve&&(p=function Pv(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}(t[0],t[Q-1])),M=Q>2?Iv:Ov,F=O=null,K}function K(Q){return null==Q||isNaN(Q=+Q)?u:(F||(F=M(t.map(r),e,n)))(r(p(Q)))}return K.invert=function(Q){return p(o((O||(O=M(e,t.map(r),Te)))(Q)))},K.domain=function(Q){return arguments.length?(t=Array.from(Q,Rv),H()):t.slice()},K.range=function(Q){return arguments.length?(e=Array.from(Q),H()):e.slice()},K.rangeRound=function(Q){return e=Array.from(Q),n=no,H()},K.clamp=function(Q){return arguments.length?(p=!!Q||Ve,H()):p!==Ve},K.interpolate=function(Q){return arguments.length?(n=Q,H()):n},K.unknown=function(Q){return arguments.length?(u=Q,K):u},function(Q,J){return r=Q,o=J,H()}}()(Ve,Ve)}function _s(t){var e=t.domain;return t.ticks=function(n){var r=e();return function Cv(t,e,n){if(!((n=+n)>0))return[];if((t=+t)==(e=+e))return[t];const r=e<t,[o,u,p]=r?Kr(e,t,n):Kr(t,e,n);if(!(u>=o))return[];const M=u-o+1,F=new Array(M);if(r)if(p<0)for(let O=0;O<M;++O)F[O]=(u-O)/-p;else for(let O=0;O<M;++O)F[O]=(u-O)*p;else if(p<0)for(let O=0;O<M;++O)F[O]=(o+O)/-p;else for(let O=0;O<M;++O)F[O]=(o+O)*p;return F}(r[0],r[r.length-1],null==n?10:n)},t.tickFormat=function(n,r){var o=e();return function Wv(t,e,n,r){var u,o=function Sv(t,e,n){n=+n;const r=(e=+e)<(t=+t),o=r?io(e,t,n):io(t,e,n);return(r?-1:1)*(o<0?1/-o:o)}(t,e,n);switch((r=Xr(null==r?",f":r)).type){case"s":var p=Math.max(Math.abs(t),Math.abs(e));return null==r.precision&&!isNaN(u=function zv(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Sn(e)/3)))-Sn(Math.abs(t)))}(o,p))&&(r.precision=u),ds(r,p);case"":case"e":case"g":case"p":case"r":null==r.precision&&!isNaN(u=function Uv(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Sn(e)-Sn(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=u-("e"===r.type));break;case"f":case"%":null==r.precision&&!isNaN(u=function jv(t){return Math.max(0,-Sn(Math.abs(t)))}(o))&&(r.precision=u-2*("%"===r.type))}return qr(r)}(o[0],o[o.length-1],null==n?10:n,r)},t.nice=function(n){null==n&&(n=10);var F,O,r=e(),o=0,u=r.length-1,p=r[o],M=r[u],H=10;for(M<p&&(O=p,p=M,M=O,O=o,o=u,u=O);H-- >0;){if((O=io(p,M,n))===F)return r[o]=p,r[u]=M,e(r);if(O>0)p=Math.floor(p/O)*O,M=Math.ceil(M/O)*O;else{if(!(O<0))break;p=Math.ceil(p*O)/O,M=Math.floor(M*O)/O}F=O}return t},t}function Mn(){var t=kv();return t.copy=function(){return Fv(t,Mn())},ro.apply(t,arguments),_s(t)}function Qr(){var n,r,o,u,F,t=0,e=1,p=Ve,M=!1;function O(K){return null==K||isNaN(K=+K)?F:p(0===o?.5:(K=(u(K)-n)*o,M?Math.max(0,Math.min(1,K)):K))}function H(K){return function(Q){var J,ft;return arguments.length?([J,ft]=Q,p=K(J,ft),O):[p(0),p(1)]}}return O.domain=function(K){return arguments.length?([t,e]=K,n=u(t=+t),r=u(e=+e),o=n===r?0:1/(r-n),O):[t,e]},O.clamp=function(K){return arguments.length?(M=!!K,O):M},O.interpolator=function(K){return arguments.length?(p=K,O):p},O.range=H(Tn),O.rangeRound=H(no),O.unknown=function(K){return arguments.length?(F=K,O):F},function(K){return u=K,n=K(t),r=K(e),o=n===r?0:1/(r-n),O}}function Jr(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function xs(){var t=_s(Qr()(Ve));return t.copy=function(){return Jr(t,xs())},_v.apply(t,arguments)}const Es=function Hv(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Yv=Math.PI/180,Vv=180/Math.PI;var ao=1.78277,so=-.29227,ti=-.90649,Qn=1.97294,Ss=Qn*ti,Ts=Qn*ao,Ms=ao*so- -.14861*ti;function Xv(t){if(t instanceof un)return new un(t.h,t.s,t.l,t.opacity);t instanceof le||(t=za(t));var n=t.g/255,r=t.b/255,o=(Ms*r+Ss*(t.r/255)-Ts*n)/(Ms+Ss-Ts),u=r-o,p=(Qn*(n-o)-so*u)/ti,M=Math.sqrt(p*p+u*u)/(Qn*o*(1-o)),F=M?Math.atan2(p,u)*Vv-120:NaN;return new un(F<0?F+360:F,M,o,t.opacity)}function Xe(t,e,n,r){return 1===arguments.length?Xv(t):new un(t,e,n,null==r?1:r)}function un(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Ns(t){return function e(n){function r(o,u){var p=t((o=Xe(o)).h,(u=Xe(u)).h),M=An(o.s,u.s),F=An(o.l,u.l),O=An(o.opacity,u.opacity);return function(H){return o.h=p(H),o.s=M(H),o.l=F(Math.pow(H,n)),o.opacity=O(H),o+""}}return n=+n,r.gamma=e,r}(1)}kr(un,Xe,Hi(bn,{brighter(t){return t=null==t?_n:Math.pow(_n,t),new un(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new un(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*Yv,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),o=Math.sin(t);return new le(255*(e+n*(-.14861*r+ao*o)),255*(e+n*(so*r+ti*o)),255*(e+n*(Qn*r)),this.opacity)}})),Ns(function bp(t,e){var n=e-t;return n?Ya(t,n>180||n<-180?n-360*Math.round(n/360):n):Br(isNaN(t)?e:t)});var Ls=Ns(An),$v=(Ls(Xe(-100,.75,.35),Xe(80,1.5,.8)),Ls(Xe(260,.75,.35),Xe(80,1.5,.8)));function $e(t){return"string"==typeof t?new Ee([[document.querySelector(t)]],[document.documentElement]):new Ee([[t]],ba)}function Nn(t,e,n){this.k=t,this.x=e,this.y=n}Xe(),Nn.prototype={constructor:Nn,scale:function(t){return 1===t?this:new Nn(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Nn(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new Nn(1,0,0);var iy=N(756),oy=N.n(iy),ay=N(2568);const sy=["network"];let uy=(()=>{class t extends Dt.H{constructor(){super(),this.state={searchQuery:""}}ngOnChanges(){!this.el||this.renderGraph()}ngAfterViewInit(){!this.el||this.renderGraph()}ngOnDestroy(){this.destroyGraph()}destroyGraph(){this.sigma&&this.sigma.kill(),this.simulation&&this.simulation.stop()}renderGraph(){this.destroyGraph(),this.createGraph(),this.sigma=new(oy())(this.graph,this.el.nativeElement,{renderLabels:!0,labelColor:{color:"#FFFFFF"}}),this.options.hover&&this.hoverNeighbors(),this.startSimulation()}createGraph(){this.graph=new(P()),this.nodes.forEach(r=>this.graph.addNode(r.id,{label:r.label,size:r.score,color:this.colors.node(r.group)}));const n=this.options.directed?"arrow":"line";this.edges.forEach(r=>{console.log(r.group),console.log(this.colors.edge(r.group)),this.graph.addEdge(r.source,r.target,{size:this.options.edgeWidth,type:n,color:this.colors.edge(r.group)})}),this.nodes.forEach((r,o)=>{const u=2*o*Math.PI/this.graph.order;r.x=100*Math.cos(u),r.y=100*Math.cos(u)}),ay.circular.assign(this.graph)}startSimulation(){const n=this;this.simulation=function sv(t){var e,n=1,r=.001,o=1-Math.pow(r,1/300),u=0,p=.6,M=new Map,F=ki(K),O=Ea("tick","end"),H=function nv(){let t=1;return()=>(t=(1664525*t+1013904223)%as)/as}();function K(){Q(),O.call("tick",e),n<r&&(F.stop(),O.call("end",e))}function Q(ct){var et,pt,nt=t.length;void 0===ct&&(ct=1);for(var mt=0;mt<ct;++mt)for(n+=(u-n)*o,M.forEach(function(_t){_t(n)}),et=0;et<nt;++et)null==(pt=t[et]).fx?pt.x+=pt.vx*=p:(pt.x=pt.fx,pt.vx=0),null==pt.fy?pt.y+=pt.vy*=p:(pt.y=pt.fy,pt.vy=0);return e}function J(){for(var nt,ct=0,et=t.length;ct<et;++ct){if((nt=t[ct]).index=ct,null!=nt.fx&&(nt.x=nt.fx),null!=nt.fy&&(nt.y=nt.fy),isNaN(nt.x)||isNaN(nt.y)){var pt=10*Math.sqrt(.5+ct),mt=ct*av;nt.x=pt*Math.cos(mt),nt.y=pt*Math.sin(mt)}(isNaN(nt.vx)||isNaN(nt.vy))&&(nt.vx=nt.vy=0)}}function ft(ct){return ct.initialize&&ct.initialize(t,H),ct}return null==t&&(t=[]),J(),e={tick:Q,restart:function(){return F.restart(K),e},stop:function(){return F.stop(),e},nodes:function(ct){return arguments.length?(t=ct,J(),M.forEach(ft),e):t},alpha:function(ct){return arguments.length?(n=+ct,e):n},alphaMin:function(ct){return arguments.length?(r=+ct,e):r},alphaDecay:function(ct){return arguments.length?(o=+ct,e):+o},alphaTarget:function(ct){return arguments.length?(u=+ct,e):u},velocityDecay:function(ct){return arguments.length?(p=1-ct,e):1-p},randomSource:function(ct){return arguments.length?(H=ct,M.forEach(ft),e):H},force:function(ct,et){return arguments.length>1?(null==et?M.delete(ct):M.set(ct,ft(et)),e):M.get(ct)},find:function(ct,et,nt){var _t,Tt,Gt,Ht,zt,pt=0,mt=t.length;for(null==nt?nt=1/0:nt*=nt,pt=0;pt<mt;++pt)(Gt=(_t=ct-(Ht=t[pt]).x)*_t+(Tt=et-Ht.y)*Tt)<nt&&(zt=Ht,nt=Gt);return zt},on:function(ct,et){return arguments.length>1?(O.on(ct,et),e):O.on(ct)}}}(this.nodes).force("center",function Rg(t,e){var n,r=1;function o(){var u,M,p=n.length,F=0,O=0;for(u=0;u<p;++u)F+=(M=n[u]).x,O+=M.y;for(F=(F/p-t)*r,O=(O/p-e)*r,u=0;u<p;++u)(M=n[u]).x-=F,M.y-=O}return null==t&&(t=0),null==e&&(e=0),o.initialize=function(u){n=u},o.x=function(u){return arguments.length?(t=+u,o):t},o.y=function(u){return arguments.length?(e=+u,o):e},o.strength=function(u){return arguments.length?(r=+u,o):r},o}(0,0).strength(.1)).force("charge",function uv(){var t,e,n,r,u,o=sn(-30),p=1,M=1/0,F=.81;function O(J){var ft,ct=t.length,et=Ji(t,rv,iv).visitAfter(K);for(r=J,ft=0;ft<ct;++ft)e=t[ft],et.visit(Q)}function H(){if(t){var J,ct,ft=t.length;for(u=new Array(ft),J=0;J<ft;++J)u[(ct=t[J]).index]=+o(ct,J,t)}}function K(J){var ct,et,pt,mt,_t,ft=0,nt=0;if(J.length){for(pt=mt=_t=0;_t<4;++_t)(ct=J[_t])&&(et=Math.abs(ct.value))&&(ft+=ct.value,nt+=et,pt+=et*ct.x,mt+=et*ct.y);J.x=pt/nt,J.y=mt/nt}else{(ct=J).x=ct.data.x,ct.y=ct.data.y;do{ft+=u[ct.data.index]}while(ct=ct.next)}J.value=ft}function Q(J,ft,ct,et){if(!J.value)return!0;var nt=J.x-e.x,pt=J.y-e.y,mt=et-ft,_t=nt*nt+pt*pt;if(mt*mt/F<_t)return _t<M&&(0===nt&&(_t+=(nt=Ye(n))*nt),0===pt&&(_t+=(pt=Ye(n))*pt),_t<p&&(_t=Math.sqrt(p*_t)),e.vx+=nt*J.value*r/_t,e.vy+=pt*J.value*r/_t),!0;if(!(J.length||_t>=M)){(J.data!==e||J.next)&&(0===nt&&(_t+=(nt=Ye(n))*nt),0===pt&&(_t+=(pt=Ye(n))*pt),_t<p&&(_t=Math.sqrt(p*_t)));do{J.data!==e&&(e.vx+=nt*(mt=u[J.data.index]*r/_t),e.vy+=pt*mt)}while(J=J.next)}}return O.initialize=function(J,ft){t=J,n=ft,H()},O.strength=function(J){return arguments.length?(o="function"==typeof J?J:sn(+J),H(),O):o},O.distanceMin=function(J){return arguments.length?(p=J*J,O):Math.sqrt(p)},O.distanceMax=function(J){return arguments.length?(M=J*J,O):Math.sqrt(M)},O.theta=function(J){return arguments.length?(F=J*J,O):Math.sqrt(F)},O}().strength(o=>-100*o.score)).force("link",function Jg(t){var r,u,p,M,F,O,e=Qg,n=function K(et){return 1/Math.min(M[et.source.index],M[et.target.index])},o=sn(30),H=1;function Q(et){for(var nt=0,pt=t.length;nt<H;++nt)for(var _t,Tt,Gt,Ht,zt,qt,kt,mt=0;mt<pt;++mt)Ht=(Gt=(_t=t[mt]).target).x+Gt.vx-(Tt=_t.source).x-Tt.vx||Ye(O),zt=Gt.y+Gt.vy-Tt.y-Tt.vy||Ye(O),zt*=qt=((qt=Math.sqrt(Ht*Ht+zt*zt))-u[mt])/qt*et*r[mt],Gt.vx-=(Ht*=qt)*(kt=F[mt]),Gt.vy-=zt*kt,Tt.vx+=Ht*(kt=1-kt),Tt.vy+=zt*kt}function J(){if(p){var et,_t,nt=p.length,pt=t.length,mt=new Map(p.map((Tt,Gt)=>[e(Tt,Gt,p),Tt]));for(et=0,M=new Array(nt);et<pt;++et)(_t=t[et]).index=et,"object"!=typeof _t.source&&(_t.source=os(mt,_t.source)),"object"!=typeof _t.target&&(_t.target=os(mt,_t.target)),M[_t.source.index]=(M[_t.source.index]||0)+1,M[_t.target.index]=(M[_t.target.index]||0)+1;for(et=0,F=new Array(pt);et<pt;++et)F[et]=M[(_t=t[et]).source.index]/(M[_t.source.index]+M[_t.target.index]);r=new Array(pt),ft(),u=new Array(pt),ct()}}function ft(){if(p)for(var et=0,nt=t.length;et<nt;++et)r[et]=+n(t[et],et,t)}function ct(){if(p)for(var et=0,nt=t.length;et<nt;++et)u[et]=+o(t[et],et,t)}return null==t&&(t=[]),Q.initialize=function(et,nt){p=et,O=nt,J()},Q.links=function(et){return arguments.length?(t=et,J(),Q):t},Q.id=function(et){return arguments.length?(e=et,Q):e},Q.iterations=function(et){return arguments.length?(H=+et,Q):H},Q.strength=function(et){return arguments.length?(n="function"==typeof et?et:sn(+et),ft(),Q):n},Q.distance=function(et){return arguments.length?(o="function"==typeof et?et:sn(+et),ct(),Q):o},Q}(this.edges).id(this.getId)).force("cluster",this.cluster()).force("radius",function Kg(t){var e,n,r,o=1,u=1;function p(){for(var O,K,Q,J,ft,ct,et,H=e.length,nt=0;nt<u;++nt)for(K=Ji(e,$g,qg).visitAfter(M),O=0;O<H;++O)et=(ct=n[(Q=e[O]).index])*ct,J=Q.x+Q.vx,ft=Q.y+Q.vy,K.visit(pt);function pt(mt,_t,Tt,Gt,Ht){var zt=mt.data,qt=mt.r,kt=ct+qt;if(!zt)return _t>J+kt||Gt<J-kt||Tt>ft+kt||Ht<ft-kt;if(zt.index>Q.index){var Lt=J-zt.x-zt.vx,Yt=ft-zt.y-zt.vy,Ut=Lt*Lt+Yt*Yt;Ut<kt*kt&&(0===Lt&&(Ut+=(Lt=Ye(r))*Lt),0===Yt&&(Ut+=(Yt=Ye(r))*Yt),Ut=(kt-(Ut=Math.sqrt(Ut)))/Ut*o,Q.vx+=(Lt*=Ut)*(kt=(qt*=qt)/(et+qt)),Q.vy+=(Yt*=Ut)*kt,zt.vx-=Lt*(kt=1-kt),zt.vy-=Yt*kt)}}}function M(O){if(O.data)return O.r=n[O.data.index];for(var H=O.r=0;H<4;++H)O[H]&&O[H].r>O.r&&(O.r=O[H].r)}function F(){if(e){var O,K,H=e.length;for(n=new Array(H),O=0;O<H;++O)n[(K=e[O]).index]=+t(K,O,e)}}return"function"!=typeof t&&(t=sn(null==t?1:+t)),p.initialize=function(O,H){e=O,r=H,F()},p.iterations=function(O){return arguments.length?(u=+O,p):u},p.strength=function(O){return arguments.length?(o=+O,p):o},p.radius=function(O){return arguments.length?(t="function"==typeof O?O:sn(+O),F(),p):t},p}(o=>30*o.score)).on("tick",()=>{n.graph.nodes().forEach((o,u)=>{const p=n.nodes[u];n.graph.setNodeAttribute(o,"x",p.x),n.graph.setNodeAttribute(o,"y",p.y)})}).on("end",()=>n.simulation.restart()),this.simulation.restart()}hoverNeighbors(){this.sigma.on("enterNode",({node:n})=>{this.setHoveredNode(n)}),this.sigma.on("leaveNode",()=>{this.setHoveredNode(void 0)}),this.sigma.setSetting("nodeReducer",(n,r)=>{const o=Object.assign({},r);return this.state.hoveredNeighbors&&!this.state.hoveredNeighbors.has(n)&&this.state.hoveredNode!==n&&(o.label="",o.size=0,o.color="none"),this.state.selectedNode===n?o.highlighted=!0:this.state.suggestions&&!this.state.suggestions.has(n)&&(o.label="",o.size=0,o.color="none"),o}),this.sigma.setSetting("edgeReducer",(n,r)=>{const o=Object.assign({},r);return this.state.hoveredNode&&!this.graph.hasExtremity(n,this.state.hoveredNode)&&(o.hidden=!0),this.state.suggestions&&(!this.state.suggestions.has(this.graph.source(n))||!this.state.suggestions.has(this.graph.target(n)))&&(o.hidden=!0),o})}cluster(){const r=this.options.clusterRepulsion?1:0,o=this;return function u(p){const M={};o.nodes.forEach(F=>{M[F.group]||(M[F.group]={x:0,y:0,count:0}),M[F.group].x+=F.x,M[F.group].y+=F.y,M[F.group].count+=1}),o.nodes.forEach(F=>{const O=M[F.group];if(O){const ft=O.y/O.count;F.vx+=(O.x/O.count-F.x)*p*r,F.vy+=(ft-F.y)*p*r}const H=o.nodes.filter(J=>J.group===F.group),K=H.reduce((J,ft)=>J+ft.x,0)/H.length,Q=H.reduce((J,ft)=>J+ft.y,0)/H.length;F.vx+=(K-F.x)*p*.7,F.vy+=(Q-F.y)*p*.7})}}getId(n){return n.id}setHoveredNode(n){n?(this.state.hoveredNode=n,this.state.hoveredNeighbors=new Set(this.graph.neighbors(n))):(this.state.hoveredNode=void 0,this.state.hoveredNeighbors=void 0),this.sigma.refresh()}clamp(n,r,o){return Math.min(Math.max(n,r),o)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["sigma-network"]],viewQuery:function(n,r){if(1&n&&i.Gf(sy,5),2&n){let o;i.iGM(o=i.CRH())&&(r.el=o.first)}},inputs:{nodes:"nodes",edges:"edges",options:"options",colors:"colors"},features:[i.qOj,i.TTD],decls:2,vars:0,consts:[[1,"w-full","h-full","flex"],["network",""]],template:function(n,r){1&n&&i._UZ(0,"div",0,1)},encapsulation:2}),t})(),uo=(()=>{class t extends Dt.H{constructor(){super(),this.defaultOptions={zoom:!0,directed:!1,drag:!1,curveEdges:!1,hover:!0,clusterRepulsion:!0,edgeWidth:1}}ngAfterViewInit(){this.setParameters()}ngOnChanges(){this.setParameters()}setParameters(){this.options=Object.assign(Object.assign({},this.defaultOptions),this.options),this.filterParameters(),this.initializeColor()}filterParameters(){this.filteredNodes=Vl(this.nodes,n=>n.id),this.filteredEdges=function Xl(t,e){return e="function"==typeof e?e:void 0,t&&t.length?ta(t,void 0,e):[]}(this.edges.filter(n=>{const r=this.nodes.map(o=>o.id);return r.includes(n.source)&&r.includes(n.target)}),(n,r)=>n.source===r.source&&n.target===r.target||n.source===r.target&&n.target===r.source)}initializeColor(){var n;const r=Array.from(new Set(this.nodes.map(M=>M.group)));let o=qn(r,Es.slice(0,r.length));(null===(n=this.options)||void 0===n?void 0:n.nodeColors)&&Object.entries(this.options.nodeColors).forEach(([M,F])=>{const O=this.colors.node.domain().findIndex(K=>K===M);if(O<0)return;const H=this.colors.node.range();H[O]=this.options.nodeColors[M],o.range(H)});let p=qn(Array.from(new Set(this.edges.map(M=>M.group))),Es.slice(0,r.length));this.options.edgeColors&&(p=qn(Object.keys(this.options.edgeColors),Object.values(this.options.edgeColors))),this.colors={node:o,edge:p}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-network"]],inputs:{nodes:"nodes",edges:"edges",options:"options"},features:[i.qOj,i.TTD],decls:1,vars:4,consts:[[1,"w-full","relative",3,"nodes","edges","options","colors"]],template:function(n,r){1&n&&i._UZ(0,"sigma-network",0),2&n&&i.Q6J("nodes",r.filteredNodes)("edges",r.filteredEdges)("options",r.options)("colors",r.colors)},directives:[uy],encapsulation:2}),t})();var ni=N(7423),ri=N(9118);const cy=function(){return["/wiki/network"]},hy=function(){return["/wiki/analysis"]},ly=[{path:"",component:(()=>{class t extends b{constructor(n,r,o){super(),this.characterApi=n,this.relationshipApi=r,this.authApi=o,this.nodes=[],this.edges=[],this.characters=[],this.relationships=[],this.networkOptions={zoom:!1,hover:!1}}ngOnInit(){var n=this;this.subscribe(this.characterApi.cosmereCharacters(),r=>this.onCharactersChanges(r)),this.subscribe(this.relationshipApi.relationshipsByBook("mistborn1"),r=>this.onRelationshipsChanges(r)),(0,l.defer)((0,z.Z)(function*(){yield n.characterApi.fetchAllCosmereCharacter(),yield n.relationshipApi.fetchAllCosmereRelationship()}))}generateNetworkParameters(){this.edges=h(this.relationships);const n=new G.UndirectedGraph;g(this.relationships).forEach(u=>n.addNode(u)),this.relationships.forEach(u=>n.addEdge(u.characterId1,u.characterId2));const o=Y()(n);this.nodes=s(this.characters,this.relationships).filter(u=>this.edges.map(p=>p.source).includes(u.id)||this.edges.map(p=>p.target).includes(u.id)),this.nodes=this.nodes.map(u=>Object.assign(Object.assign({},u),{group:o[u.id]}))}onCharactersChanges(n){this.characters=n,this.generateNetworkParameters()}onRelationshipsChanges(n){this.relationships=n,this.generateNetworkParameters()}}return t.\u0275fac=function(n){return new(n||t)(i.Y36(it),i.Y36(ht),i.Y36(At.z))},t.\u0275cmp=i.Xpm({type:t,selectors:[["home"]],features:[i.qOj],decls:26,vars:25,consts:[[1,"inset-0","flex","flex-col","min-w-0","w-full","overflow-x-hidden"],[1,"flex","flex-col","mx-100","text-center","p-6","gap-5"],[1,"font-black","mt-3","text-7xl","text-center","mb-7"],[2,"height","600px",3,"nodes","edges","options"],[1,"flex","flex-col"],[1,"font-bold","mt-3","text-2xl","text-center","mb-3"],["mat-button","",1,"bg-primary","text-lg",3,"routerLink"],[1,"font-bold","mt-3","text-2xl","text-center","mb-7"]],template:function(n,r){1&n&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.TgZ(2,"div",2),i._uU(3),i.ALo(4,"trans"),i.qZA(),i._UZ(5,"app-network",3),i.TgZ(6,"div",4),i.TgZ(7,"div",5),i._uU(8),i.ALo(9,"trans"),i.qZA(),i.TgZ(10,"div"),i.TgZ(11,"button",6),i._uU(12),i.ALo(13,"trans"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(14,"div",4),i.TgZ(15,"div",5),i._uU(16),i.ALo(17,"trans"),i.qZA(),i.TgZ(18,"div"),i.TgZ(19,"button",6),i._uU(20),i.ALo(21,"trans"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(22,"div",4),i.TgZ(23,"div",7),i._uU(24),i.ALo(25,"trans"),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&n&&(i.xp6(3),i.hij(" ",i.lcZ(4,11,"home.title")," "),i.xp6(2),i.Q6J("nodes",r.nodes)("edges",r.edges)("options",r.networkOptions),i.xp6(3),i.hij(" ",i.lcZ(9,13,"home.network.1")," "),i.xp6(3),i.Q6J("routerLink",i.DdM(23,cy)),i.xp6(1),i.hij(" ",i.lcZ(13,15,"home.connections")," "),i.xp6(4),i.hij(" ",i.lcZ(17,17,"home.analysis.1")," "),i.xp6(3),i.Q6J("routerLink",i.DdM(24,hy)),i.xp6(1),i.hij(" ",i.lcZ(21,19,"home.analysis")," "),i.xp6(4),i.hij(" ",i.lcZ(25,21,"home.me.1")," "))},directives:[uo,ni.lW,V.rH],pipes:[ri.u],encapsulation:2}),t})()}];var fy=N(5245),Jn=N(7791),ii=N(6767),oi=N(393),ai=N(9373);let dy=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[V.Bz.forChild(ly),ni.ot,fy.Ps,Jn.m,ii.d,oi.ZD,oi.Cl,ai.T]]}),t})();const Rs=()=>({id:(0,k.V)(),books:[]}),Ps=()=>({configuration:Rs()});let py=(()=>{class t extends w.m1{constructor(){super(Ps()),this.configuration$=this.select(n=>n.configuration)}saveConfiguration(n){(0,l.isEqual)(this.get().configuration,n)||this.patchState(r=>({configuration:n}))}syncState(){return this.get()}syncConfiguration(){return this.get().configuration}reset(){this.patchState(Ps())}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),co=(()=>{class t{constructor(n){this.store=n}syncConfiguration(){return this.store.syncState().configuration}configuration(){return this.store.configuration$}saveConfiguration(n){this.store.saveConfiguration(n)}}return t.\u0275fac=function(n){return new(n||t)(i.LFG(py))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Ne=N(3075);let Os=(()=>{class t{constructor(n){this.formBuilder=n}build(n,r=[],o=[]){const u={};return Object.keys(n).forEach(p=>{const M=n[p],F=this.getValidator(p,r);if(u[p]=[M,F],o.includes(p)&&(0,l.isArray)(M)){const O=[];M.forEach(H=>{O.push(Ke(H)?this.build(H,r):H)}),u[p]=this.formBuilder.array(O)}if(!o.includes(p)&&!(0,l.isArray)(M)&&Ke(M)){const O=this.extractSubValidator(p,r);u[p]=this.build(M,O)}}),this.formBuilder.group(u)}extractSubValidator(n,r){return r.filter(o=>o.key.startsWith(n)).map(o=>({key:o.key.replace(n+".",""),validators:o.validators}))}getValidator(n,r){const o=r.find(u=>u.key===n);return o?o.validators:[]}}return t.\u0275fac=function(n){return new(n||t)(i.LFG(Ne.qu))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),gy=(()=>{class t extends w.m1{constructor(){super({books:[]}),this.books$=this.select(n=>n.books)}saveAllBooks(n){(0,l.isEqual)(this.get().books,n)||this.patchState(r=>({books:j(r.books,n)}))}syncState(){return this.get()}syncBook(n){return U(n,this.get().books)}reset(){this.patchState({books:[]})}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ho=(()=>{class t{constructor(n,r){this.api=n,this.store=r}fetchAllBooks(){var n=this;return(0,z.Z)(function*(){const r=yield n.api.get("books");n.store.saveAllBooks(r)})()}syncAllBooks(){return this.store.syncState().books}allBooks(){return this.store.books$}}return t.\u0275fac=function(n){return new(n||t)(i.LFG(m),i.LFG(gy))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Fs=N(678),Ue=N(9808),lo=N(9895),Ln=N(7322),si=N(4107),fo=N(508);function vy(t,e){if(1&t&&(i.TgZ(0,"mat-option",12),i._uU(1),i.ALo(2,"uppercase"),i.ALo(3,"trans"),i.qZA()),2&t){const n=e.$implicit;i.Q6J("value",n.id),i.xp6(1),i.hij(" ",i.lcZ(2,2,i.lcZ(3,4,n.title))," ")}}function yy(t,e){if(1&t&&(i.TgZ(0,"div",5),i.TgZ(1,"app-card",6),i.TgZ(2,"form",7),i.TgZ(3,"mat-form-field",8),i.TgZ(4,"mat-label",9),i._uU(5),i.ALo(6,"titlecase"),i.ALo(7,"trans"),i.qZA(),i.TgZ(8,"mat-select",10),i.ALo(9,"trans"),i.YNc(10,vy,4,6,"mat-option",11),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&t){const n=i.oxw();i.xp6(2),i.Q6J("formGroup",n.configurationForm),i.xp6(3),i.Oqu(i.lcZ(6,4,i.lcZ(7,6,"books"))),i.xp6(3),i.s9C("placeholder",i.lcZ(9,8,"all.books")),i.xp6(2),i.Q6J("ngForOf",n.data.books)}}let Gs=(()=>{class t extends Dt.H{constructor(n,r,o){super(),this.configurationApi=n,this.formBuilder=r,this.bookApi=o,this.configurationChanges=new i.vpe,this.showCard=!1,this.data={books:[]}}ngOnInit(){var n=this;this.subscribe(this.bookApi.allBooks(),r=>this.data.books=r),this.subscribe(this.configurationApi.configuration(),r=>this.setConfiguration(r)),(0,l.defer)((0,z.Z)(function*(){yield n.bookApi.fetchAllBooks()})),this.buildForm()}buildForm(){this.configurationForm=this.formBuilder.build(this.configuration),this.configurationForm.get("books").valueChanges.subscribe(n=>{this.configuration.books=n,this.saveConfiguration()})}toggle(){this.showCard=!this.showCard}setConfiguration(n){this.configuration=Object.assign({},n),this.configurationForm&&this.configurationForm.patchValue(n)}saveConfiguration(){this.configurationApi.saveConfiguration(this.configuration)}}return t.\u0275fac=function(n){return new(n||t)(i.Y36(co),i.Y36(Os),i.Y36(ho))},t.\u0275cmp=i.Xpm({type:t,selectors:[["configuration"]],outputs:{configurationChanges:"configurationChanges"},features:[i.qOj],decls:5,vars:1,consts:[[1,"absolute","top-0","right-0","z-50"],[1,"flex","flex-col","items-end","pr-6"],["mat-icon-button","",3,"click"],["icon","settings"],["class","z-50",4,"ngIf"],[1,"z-50"],[1,"flex","flex-col","h-full","p-6","gap-5","w-100"],[1,"w-full",3,"formGroup"],["floatLabel","always",1,"w-full"],[1,"text-white"],["multiple","","formControlName","books",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(n,r){1&n&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.TgZ(2,"button",2),i.NdJ("click",function(){return r.toggle()}),i._UZ(3,"app-icon",3),i.qZA(),i.YNc(4,yy,11,10,"div",4),i.qZA(),i.qZA()),2&n&&(i.xp6(4),i.Q6J("ngIf",r.showCard))},directives:[ni.lW,Fs.o,Ue.O5,lo.A,Ne._Y,Ne.JL,Ne.sg,Ln.KE,Ln.hX,si.gD,Ne.JJ,Ne.u,Ue.sg,fo.ey],pipes:[Ue.rS,ri.u,Ue.gd],encapsulation:2,changeDetection:0}),t})();var my=N(340);let wy=(()=>{class t extends w.m1{constructor(){super({planets:[]}),this.planets$=this.select(n=>n.planets)}saveAllPlanets(n){(0,l.isEqual)(this.get().planets,n)||this.patchState(r=>({planets:j(r.planets,n)}))}syncState(){return this.get()}syncPlanet(n){return U(n,this.get().planets)}reset(){this.patchState({planets:[]})}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),by=(()=>{class t{constructor(n,r){this.api=n,this.store=r}fetchAllPlanets(){var n=this;return(0,z.Z)(function*(){const r=yield n.api.get("planets");n.store.saveAllPlanets(r)})()}syncAllPlanets(){return this.store.syncState().planets}allPlanets(){return this.store.planets$}}return t.\u0275fac=function(n){return new(n||t)(i.LFG(m),i.LFG(wy))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var _y=N(335);let xy=(()=>{class t extends Dt.H{constructor(n,r,o,u,p,M,F){super(),this.characterApi=n,this.relationshipApi=r,this.formBuilder=o,this.bookApi=u,this.planetApi=p,this.modal=M,this.configurationApi=F,this.nodes=[],this.edges=[],this.characters=[],this.relationships=[]}ngOnInit(){var n=this;return(0,z.Z)(function*(){n.subscribe(n.characterApi.cosmereCharacters(),r=>{n.onCharactersChanges(r)}),n.subscribe(n.relationshipApi.cosmereRelationships(),r=>{n.onRelationshipsChanges(r)}),n.subscribe(n.configurationApi.configuration(),r=>n.onConfigurationChanges(r)),(0,l.defer)((0,z.Z)(function*(){yield n.characterApi.fetchAllCosmereCharacter(),yield n.relationshipApi.fetchAllCosmereRelationship()}))})()}regenerateNetworkParameters(){this.edges=h(this.filterRelationships(this.relationships));const n=new G.UndirectedGraph;g(this.relationships).forEach(u=>n.addNode(u)),this.filterRelationships(this.relationships).forEach(u=>{n.hasEdge(u.characterId1,u.characterId2)||n.addEdge(u.characterId1,u.characterId2)});const o=Y()(n,{rng:my("1231312"),resolution:2});this.nodes=s(this.filterCharacters(this.characters),this.filterRelationships(this.relationships)).filter(u=>this.edges.map(p=>p.source).includes(u.id)||this.edges.map(p=>p.target).includes(u.id)),this.nodes=this.nodes.map(u=>Object.assign(Object.assign({},u),{group:o[u.id]})),this.edges=this.edges.filter(u=>this.nodes.map(p=>p.id).includes(u.target)&&this.nodes.map(p=>p.id).includes(u.source)),this.edges=this.edges.map(u=>{const p=this.nodes.find(O=>O.id===u.target),M=this.nodes.find(O=>O.id===u.source);if(void 0===p||void 0===M)return u;const F=p.score>M.score?o[p.id]:o[M.id];return Object.assign(Object.assign({},u),{group:F})})}filterCharacters(n){return n}filterRelationships(n){if(!this.configuration)return n;let r=n;return this.configuration.books.length>0&&(r=r.filter(o=>this.configuration.books.includes(o.bookId))),r}onCharactersChanges(n){this.characters=n,this.regenerateNetworkParameters()}onRelationshipsChanges(n){this.relationships=n,this.regenerateNetworkParameters()}onConfigurationChanges(n){this.configuration=n,this.regenerateNetworkParameters()}}return t.\u0275fac=function(n){return new(n||t)(i.Y36(it),i.Y36(ht),i.Y36(Os),i.Y36(ho),i.Y36(by),i.Y36(_y.u),i.Y36(co))},t.\u0275cmp=i.Xpm({type:t,selectors:[["characters-relationships-graph"]],features:[i.qOj],decls:2,vars:2,consts:[[1,"relative","w-full","h-full","justify-center"],[3,"nodes","edges"]],template:function(n,r){1&n&&(i.TgZ(0,"div",0),i._UZ(1,"app-network",1),i.qZA()),2&n&&(i.xp6(1),i.Q6J("nodes",r.nodes)("edges",r.edges))},directives:[uo],encapsulation:2}),t})();const Ay=[{path:"",component:(()=>{class t extends b{constructor(){super()}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["network"]],features:[i.qOj],decls:4,vars:0,consts:[[1,"inset-0","flex","flex-col","min-w-0","w-full","overflow-hidden"],[1,"flex","flex-row","h-full","grow","justify-center"],[1,"w-full"]],template:function(n,r){1&n&&(i.TgZ(0,"div",0),i._UZ(1,"configuration"),i.TgZ(2,"div",1),i._UZ(3,"characters-relationships-graph",2),i.qZA(),i.qZA())},directives:[Gs,xy],encapsulation:2}),t})()}];let zs=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[]]}),t})(),Ey=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[Ln.lN,si.LD,Ue.ez,ii.d,Ne.UX,Jn.m,zs,ai.T]]}),t})(),Cy=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[V.Bz.forChild(Ay),Ey,oi.ZD,Jn.m]]}),t})();var Sy=N(5547),Ty=N(3378),My=N.n(Ty),Ny=N(5894),Ly=N.n(Ny),Dy=N(1063),Ry=N.n(Dy);const tr=t=>(t=>t.map(([e,n])=>({label:e,value:n})))(l.map((t=>(0,l.fromPairs)((0,l.sortBy)((0,l.toPairs)(t),1).reverse()))(t),(e,n)=>[n,e])),po=t=>{const e=Math.min(...t.map(r=>r.value)),n=Math.max(...t.map(r=>r.value));return t.map(r=>Object.assign(Object.assign({},r),{value:(r.value-e)/(n-e)}))};var Oy=N(5408),Iy=N(5149);let Fy=(()=>{class t extends Dt.H{constructor(){super(),this.config={colors:{highlight:"#b11adc",highlightLight:"#d975f6",text:"#777",xAxis:"#eee",yAxis:"#999"},height:500,width:640,margin:{top:30,left:150,right:5,bottom:0},gap:.4,xFormat:"",animationDuration:300,ticksInterval:10,type:Mn,titleColor:"white",title:""},this.id=(0,k.V)()}ngOnChanges(n){this.create()}ngAfterViewInit(){this.create()}create(){!this.data||0===this.data.length||(this.data=this.data.splice(0,10),this.element=document.getElementById(this.id+"-vertical-bar-chart"),this.initValues(),this.initScales(),this.createSvg())}initValues(){this.X=this.data.map(n=>n.value),this.Y=this.data.map(n=>n.label)}initScales(){const n=[this.config.margin.left,this.config.width-this.config.margin.right],r=[this.config.margin.top,this.config.height-this.config.margin.bottom];this.xDomain=[0,xr(this.X)],this.yDomain=new Jl(this.Y),this.xScale=this.config.type(this.xDomain,n),this.yScale=Kn(this.yDomain,r).padding(this.config.gap),this.xAxis=function sf(t){return Sr(1,t)}(this.xScale).ticks(this.config.width/80,this.config.xFormat),this.yAxis=Ri(this.yScale).tickSizeOuter(0)}createSvg(){const n=yn(this.X.length).filter(o=>this.yDomain.has(this.Y[o]));$e(this.element).select("svg").remove(),this.svg=this.svg=$e(this.element).append("svg").attr("width",this.config.width).attr("height",this.config.height).attr("viewBox",[0,0,this.config.width,this.config.height]).attr("style","max-width: 100%; height: auto; height: intrinsic;"),this.svg.append("g").attr("transform",`translate(0,${this.config.margin.top})`).call(this.xAxis).call(o=>o.select(".domain").remove()).call(o=>o.selectAll(".tick line").clone().attr("y2",this.config.height-this.config.margin.top-this.config.margin.bottom).attr("stroke-opacity",.1)).call(o=>o.append("text").attr("x",this.config.width-this.config.margin.right).attr("y",-22).attr("fill","none").attr("text-anchor","end"));const r=this.svg.append("g").selectAll("rect").data(n).join("rect").attr("x",this.xScale(0)).attr("y",o=>this.yScale(this.Y[o])).attr("width",0).attr("height",this.yScale.bandwidth());this.svg.append("g").attr("fill",this.config.titleColor).attr("text-anchor","end").attr("font-family","sans-serif").attr("font-size",10).selectAll("text").data(n).join("text").attr("x",o=>this.xScale(this.X[o])).attr("y",o=>this.yScale(this.Y[o])+this.yScale.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(this.config.title).call(o=>o.filter(u=>this.xScale(this.X[u])-this.xScale(0)<20).attr("dx",4).attr("fill",this.config.titleAltColor).attr("text-anchor","start")),this.svg.append("g").attr("transform",`translate(${this.config.margin.left},0)`).call(this.yAxis),r.transition().style("fill",(o,u)=>this.getBarColor(u)).duration(this.config.animationDuration).delay((o,u)=>u*this.config.animationDuration/3).attr("height",this.yScale.bandwidth()).attr("width",(o,u)=>this.xScale(this.X[u])-this.config.margin.left)}getBarColor(n,r=0){return`rgb(${(210+r).toString()}, ${(10+20*n+r).toString()}, ${(220-20*n+r).toString()})`}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["vertical-bar-chart"]],inputs:{data:"data",config:"config"},features:[i.qOj,i.TTD],decls:1,vars:1,consts:[[1,"flex","flex-1",3,"id"]],template:function(n,r){1&n&&i._UZ(0,"div",0),2&n&&i.MGl("id","",r.id,"-vertical-bar-chart")},encapsulation:2}),t})();const Gy=({color:t,title:e,tickSize:n=6,width:r=36+n,height:o=320,marginTop:u=20,marginRight:p=10+n,marginBottom:M=20,marginLeft:F=5,ticks:O=o/64,tickFormat:H,tickValues:K}={})=>{const Q=function qv(t){return $e(Fi(t).call(document.documentElement))}("svg").attr("width",r).attr("height",o).attr("viewBox",[0,0,r,o]).style("overflow","visible").style("display","block");let ft,J=ct=>ct.selectAll(".tick line").attr("x1",F-r+p);if(t.interpolate){const ct=Math.min(t.domain().length,t.range().length);ft=t.copy().rangeRound(gs(Tn(o-M,u),ct)),Q.append("image").attr("x",F).attr("y",u).attr("width",r-F-p).attr("height",o-u-M).attr("preserveAspectRatio","none").attr("xlink:href",Us(t.copy().domain(gs(Tn(0,1),ct))).toDataURL())}else if(t.interpolator){if(ft=Object.assign(t.copy().interpolator(no(o-M,u)),{range:()=>[o-M,u]}),Q.append("image").attr("x",F).attr("y",u).attr("width",r-F-p).attr("height",o-u-M).attr("preserveAspectRatio","none").attr("xlink:href",Us(t.interpolator()).toDataURL()),!ft.ticks){if(void 0===K){const ct=Math.round(O+1);K=yn(ct).map(et=>function Ql(t,e,n){if(t=Float64Array.from(function*Kl(t,e){if(void 0===e)for(let n of t)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}(t,n)),(r=t.length)&&!isNaN(e=+e)){if(e<=0||r<2)return Ni(t);if(e>=1)return xr(t);var r,o=(r-1)*e,u=Math.floor(o),p=xr(na(t,u).subarray(0,u+1));return p+(Ni(t.subarray(u+1))-p)*(o-u)}}(t.domain(),et/(ct-1)))}"function"!=typeof H&&(H=qr(void 0===H?",f":H))}}else if(t.invertExtent){const ct=t.thresholds?t.thresholds():t.quantiles?t.quantiles():t.domain(),et=void 0===H?nt=>nt:"string"==typeof H?qr(H):H;ft=Mn().domain([-1,t.range().length-1]).rangeRound([o-M,u]),Q.append("g").selectAll("rect").data(t.range()).join("rect").attr("y",(nt,pt)=>ft(pt)).attr("x",F).attr("height",(nt,pt)=>ft(pt-1)-ft(pt)).attr("width",r-p-F).attr("fill",nt=>nt),K=yn(ct.length),H=nt=>et(ct[nt],nt)}else ft=Kn().domain(t.domain()).rangeRound([o-M,u]),Q.append("g").selectAll("rect").data(t.domain()).join("rect").attr("y",ft).attr("x",F).attr("height",Math.max(0,ft.bandwidth()-1)).attr("width",r-F-p).attr("fill",t),J=()=>{};return Q.append("g").attr("transform",`translate(${r-p},0)`).call(function uf(t){return Sr(2,t)}(ft).ticks(O,"string"==typeof H?H:void 0).tickFormat("function"==typeof H?H:void 0).tickSize(n).tickValues(K)).call(J).call(ct=>ct.select(".domain").remove()).call(ct=>ct.append("text").attr("x",F-r+p).attr("y",0).attr("fill","currentColor").attr("text-anchor","start").attr("font-weight","bold").attr("class","title").text(e)),Q.node()};function Us(t,e=256){const n=document.createElement("canvas");n.width=1,n.height=e;const r=n.getContext("2d");for(let o=0;o<e;++o)r.fillStyle=t(o/(e-1)),r.fillRect(0,e-o,1,1);return n}let ky=(()=>{class t extends Dt.H{constructor(){super(),this.xLabel="",this.yLabel="",this.config={height:500,width:500,margin:{top:20,left:40,right:50,bottom:30},inset:{top:6,right:6,bottom:6,left:6},dot:{radius:20,strokeWidth:0,strokeColor:"white"},domain:{x:[.3,1],y:[.3,1]},padding:10,animationDuration:300,ticksInterval:10,color:$v},this.id=(0,k.V)()}ngOnChanges(n){this.create()}ngAfterViewInit(){this.create()}create(){!this.data||0===this.data.length||(this.element=document.getElementById(this.id+"-chart-3d"),this.initValues(),this.createColorBar(),this.initScales(),this.createAxis(),this.createSvg())}createColorBar(){const n=Gy({color:xs([0,1],this.color),title:"Degree"});this.legendElement=document.getElementById(this.id+"-legend-bar"),this.legendElement&&($e(this.legendElement).select("svg").remove(),this.legendElement.append(n))}initValues(){this.color=this.config.color,this.X=this.data.map(n=>n.x),this.Y=this.data.map(n=>n.y),this.Z=this.data.map(n=>n.z),this.labels=this.data.map(n=>n.label)}initScales(){const r=[this.config.height-this.config.margin.bottom-this.config.inset.bottom,this.config.margin.top+this.config.inset.top];this.xScale=Mn(this.config.domain.x,[this.config.margin.left+this.config.inset.left,this.config.width-this.config.margin.right-this.config.inset.right]),this.yScale=Mn(this.config.domain.y,r)}createAxis(){this.xAxis=ua(this.xScale).ticks(this.config.width/80),this.yAxis=Ri(this.yScale).ticks(this.config.height/50)}createSvg(){$e(this.element).select("svg").remove(),this.svg=$e(this.element).append("svg").attr("width",this.config.width).attr("height",this.config.height).attr("viewBox",[0,0,this.config.width,this.config.height]).attr("style","max-width: 100%; this.options.height: auto; height: intrinsic;"),this.svg.append("g").attr("transform",`translate(0,${this.config.height-this.config.margin.bottom})`).call(this.xAxis).call(o=>o.select(".domain").remove()).call(o=>o.selectAll(".tick line").clone().attr("y2",this.config.margin.top+this.config.margin.bottom-this.config.height).attr("stroke-opacity",.1)).call(o=>o.append("text").attr("x",this.config.width).attr("y",this.config.margin.bottom-4).attr("fill","currentColor").attr("text-anchor","end").text(this.xLabel)),this.svg.append("g").attr("transform",`translate(${this.config.margin.left},0)`).call(this.yAxis).call(o=>o.select(".domain").remove()).call(o=>o.selectAll(".tick line").clone().attr("x2",this.config.width-this.config.margin.left-this.config.margin.right).attr("stroke-opacity",.1)).call(o=>o.append("text").attr("x",-this.config.margin.left).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text(this.yLabel));const r=yn(this.X.length).filter(o=>!isNaN(this.X[o])&&!isNaN(this.Y[o]));this.svg.append("g").attr("stroke",this.config.dot.strokeColor).attr("stroke-width",this.config.dot.strokeWidth).selectAll("circle").data(r).join("circle").attr("cx",o=>this.xScale(this.X[o])).attr("cy",o=>this.yScale(this.Y[o])).attr("fill",o=>this.color(this.Z[o])).attr("r",this.config.dot.radius).attr("opacity",.5),this.svg.append("g").attr("font-family","sans-serif").attr("font-size",15).attr("stroke-linejoin","round").attr("stroke-linecap","round").selectAll("text").data(r).join("text").attr("x",o=>this.xScale(this.X[o])).attr("y",o=>this.yScale(this.Y[o])).text(o=>this.labels[o]).style("fill","white").style("text-anchor","middle").style("dominant-baseline","central")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["chart-3d"]],inputs:{data:"data",xLabel:"xLabel",yLabel:"yLabel",config:"config"},features:[i.qOj,i.TTD],decls:3,vars:2,consts:[[1,"flex","flex-row"],[3,"id"],[1,"flex","flex-1","items-end","pb-10",3,"id"]],template:function(n,r){1&n&&(i.TgZ(0,"div",0),i._UZ(1,"div",1),i._UZ(2,"div",2),i.qZA()),2&n&&(i.xp6(1),i.MGl("id","",r.id,"-chart-3d"),i.xp6(1),i.MGl("id","",r.id,"-legend-bar"))},encapsulation:2}),t})(),zy=(()=>{class t extends Dt.H{constructor(){super(),this.options={colors:{highlight:"#b11adc",highlightLight:"#d975f6",text:"#777",xAxis:"#eee",yAxis:"#999"},height:200,width:600,margin:{top:10,left:70,right:10,bottom:20},animationDuration:300,ticksInterval:10},this.id=(0,k.V)()}ngOnChanges(n){this.create()}ngAfterViewInit(){this.create()}create(){!this.data||0===this.data.length||(this.data=this.data.splice(0,10),this.element=document.getElementById(this.id+"-barchart"),this.initValues(),this.initScales(),this.initChart(),this.createAxis(),this.createBars())}initChart(){$e(this.element).select("svg").remove(),this.svg=$e(this.element).append("svg").attr("viewBox",`0 0 ${this.options.width} ${this.options.height+100}`)}initValues(){const n=Number(Ni(this.data.map(o=>o.value))),r=Number(xr(this.data.map(o=>o.value)));this.minValue=n<0?n-this.options.ticksInterval:0,this.maxValue=r}initScales(){this.yScale=Mn().domain([this.minValue,this.maxValue]).range([this.options.height-this.options.margin.bottom,this.options.margin.top]),this.xScale=Kn().domain(yn(this.data.length)).range([this.options.margin.left+this.options.margin.right,this.options.width-this.options.margin.right]).paddingInner(this.calculatePadding(this.data.length))}getBarMaxWidth(){const n=window.innerWidth;return n<=768?n<=480?10:15:20}getBarColor(n,r=0){return`rgb(${(210+r).toString()}, ${(10+20*n+r).toString()}, ${(220-20*n+r).toString()})`}createBars(){this.svg.selectAll(".bar").data(this.data).enter().append("rect").classed("bar",!0).style("fill","transparent").style("display",r=>"number"==typeof r.value?"initial":"none").attr("x",(r,o)=>this.xScale(o)).attr("y",this.yScale(0)).attr("width",this.xScale.bandwidth()).attr("height",0).transition().style("fill",(r,o)=>this.getBarColor(o)).duration(this.options.animationDuration).delay((r,o)=>o*this.options.animationDuration/3).attr("x",(r,o)=>this.xScale(o)).attr("y",(r,o)=>this.yScale(r.value<0?0:r.value)).attr("width",this.xScale.bandwidth()).attr("height",(r,o)=>r.value<0?this.yScale(r.value)-this.yScale(0):this.yScale(0)-this.yScale(r.value))}createAxis(){const n=ua(this.xScale).tickSize(-this.options.width).tickFormat((o,u)=>this.data[u].label.toUpperCase()),r=Ri(this.yScale).tickSize(-this.options.width).tickFormat(o=>`${o}`).ticks(this.options.ticksInterval);this.svg.append("g").attr("class","axis x-axis").attr("transform",`translate(0, ${this.options.height-15})`).call(n).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end"),this.svg.append("g").attr("class","axis y-axis").attr("transform",`translate(${+this.options.margin.left}, 0)`).call(r),this.svg.selectAll(".axis .domain").remove(),this.svg.selectAll(".axis .tick text").style("fill",this.options.colors.text),this.svg.selectAll(".y-axis .tick line").style("stroke",this.options.colors.yAxis),this.svg.selectAll(".x-axis .tick line").style("stroke",this.options.colors.xAxis)}calculatePadding(n){return 1-n*this.getBarMaxWidth()/this.options.width}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["bar-chart"]],inputs:{data:"data",options:"options"},features:[i.qOj,i.TTD],decls:1,vars:1,consts:[[1,"flex","flex-1",3,"id"]],template:function(n,r){1&n&&i._UZ(0,"div",0),2&n&&i.MGl("id","",r.id,"-barchart")},encapsulation:2}),t})();const Uy=[{path:"",component:(()=>{class t extends b{constructor(n,r,o){super(),this.relationshipApi=n,this.characterApi=r,this.configurationApi=o,this.pagerankEigenvectorAndDegreeCentrality=[],this.configuration=Rs()}ngOnInit(){var n=this;return(0,z.Z)(function*(){n.subscribe(n.relationshipApi.cosmereRelationships(),r=>n.onRelationshipsChanges(r)),n.subscribe(n.characterApi.cosmereCharacters(),r=>n.onCharactersChanges(r)),n.subscribe(n.configurationApi.configuration(),r=>n.onConfigurationChanges(r)),yield n.relationshipApi.fetchAllCosmereRelationship(),yield n.characterApi.fetchAllCosmereCharacter()})()}analyseNetwork(n){var r=this;return(0,z.Z)(function*(){const o=(0,Iy.dQ)(n),u=o.nodes(),p=(0,Sy.pagerank)(o,{getEdgeWeight:void 0,maxIterations:300});r.pagerankCosmere=tr(p);const M=Ry()(o);r.betweennessCosmere=tr(M);const F=My()(o);r.closenessCosmere=tr(F),r.closenessCosmere=(0,l.reject)(r.closenessCosmere,J=>1===J.value);const O=Ly()(o,{maxIterations:200});r.eigenvectorCosmere=tr(O);const H=(0,Oy.degreeCentrality)(o);r.degreeCentralityCosmere=tr(H),r.pageRankNormalized=po(r.pagerankCosmere);const K=po(r.eigenvectorCosmere),Q=po(r.degreeCentralityCosmere);r.pagerankEigenvectorAndDegreeCentrality=u.map(J=>({label:J,x:r.pageRankNormalized.find(ft=>ft.label===J).value,y:K.find(ft=>ft.label===J).value,z:Q.find(ft=>ft.label===J).value})).filter(J=>J.x>.3&&J.y>.3)})()}onRelationshipsChanges(n){var r=this;return(0,z.Z)(function*(){r.relationships=n,yield r.analyseNetwork(r.graph())})()}onCharactersChanges(n){var r=this;return(0,z.Z)(function*(){r.characters=n,yield r.analyseNetwork(r.graph())})()}onConfigurationChanges(n){var r=this;return(0,z.Z)(function*(){r.configuration=n,yield r.analyseNetwork(r.graph())})()}filterRelationships(n){if(!this.configuration)return n;let r=n;return this.configuration.books.length>0&&(r=r.filter(o=>this.configuration.books.includes(o.bookId))),r}graph(){const n=this.filterRelationships(this.relationships),r=new G.UndirectedGraph;return g(n).forEach(u=>r.addNode(this.getCharacterName(u))),n.forEach(u=>{r.hasEdge(this.getCharacterName(u.characterId1),this.getCharacterName(u.characterId2))||r.addEdge(this.getCharacterName(u.characterId1),this.getCharacterName(u.characterId2))}),r}getCharacterName(n){if(0===this.characters.length)return n;const r=U(n,this.characters);return r&&r.name&&""!==r.name?r.name:n}}return t.\u0275fac=function(n){return new(n||t)(i.Y36(ht),i.Y36(it),i.Y36(co))},t.\u0275cmp=i.Xpm({type:t,selectors:[["network"]],features:[i.qOj],decls:49,vars:22,consts:[[1,"inset-0","flex","flex-col","min-w-0","w-full","h-screen"],[1,"mr-6"],[1,"flex","flex-col","p-10"],[1,"flex","flex-row","mt-5","gap-5"],[1,"flex","flex-col","p-10","basis-1/2"],[1,"flex","flex-row","text-xl","mb-5","justify-between"],["href","https://en.wikipedia.org/wiki/PageRank","target","_blank"],["icon","info",3,"tooltip"],[1,"w-full",3,"data"],[1,"flex","flex-col","p-6","basis-1/2"],[1,"text-xl","mb-5"],["href","https://networkofthrones.wordpress.com/fractal-protagonists/#:~:text=Recently%2C%20writer%20Mike%20Carey%20used,scale%20you%20consider%20the%20storyline.","target","_blank"],[1,"flex","flex-auto","w-full",3,"data","xLabel","yLabel"],[1,"flex","flex-auto","grow","p-6"],[1,"flex","flex-col","grow"],["href","https://en.wikipedia.org/wiki/Eigenvalues_and_eigenvectors","target","_blank"],["href","https://en.wikipedia.org/wiki/Betweenness_centrality","target","_blank"],["href","https://en.wikipedia.org/wiki/Closeness","target","_blank"]],template:function(n,r){1&n&&(i.TgZ(0,"div",0),i._UZ(1,"configuration",1),i.TgZ(2,"div",2),i.TgZ(3,"div",3),i.TgZ(4,"app-card",4),i.TgZ(5,"div",5),i.TgZ(6,"a",6),i.TgZ(7,"span"),i._uU(8,"PageRank"),i.qZA(),i.qZA(),i._UZ(9,"app-icon",7),i.ALo(10,"trans"),i.qZA(),i._UZ(11,"vertical-bar-chart",8),i.qZA(),i.TgZ(12,"app-card",9),i._UZ(13,"div",10),i.TgZ(14,"div",5),i.TgZ(15,"a",11),i.TgZ(16,"span"),i._uU(17,"Fractal protagonism"),i.qZA(),i.qZA(),i._UZ(18,"app-icon",7),i.ALo(19,"trans"),i.qZA(),i._UZ(20,"chart-3d",12),i.qZA(),i.qZA(),i.TgZ(21,"div",3),i.TgZ(22,"app-card",13),i.TgZ(23,"div",14),i.TgZ(24,"div",5),i.TgZ(25,"a",15),i.TgZ(26,"span"),i._uU(27,"Eigenvector"),i.qZA(),i.qZA(),i._UZ(28,"app-icon",7),i.ALo(29,"trans"),i.qZA(),i._UZ(30,"bar-chart",8),i.qZA(),i.qZA(),i.TgZ(31,"app-card",13),i.TgZ(32,"div",14),i.TgZ(33,"div",5),i.TgZ(34,"a",16),i.TgZ(35,"span"),i._uU(36,"Betweenness"),i.qZA(),i.qZA(),i._UZ(37,"app-icon",7),i.ALo(38,"trans"),i.qZA(),i._UZ(39,"bar-chart",8),i.qZA(),i.qZA(),i.TgZ(40,"app-card",13),i.TgZ(41,"div",14),i.TgZ(42,"div",5),i.TgZ(43,"a",17),i.TgZ(44,"span"),i._uU(45,"Closeness"),i.qZA(),i.qZA(),i._UZ(46,"app-icon",7),i.ALo(47,"trans"),i.qZA(),i._UZ(48,"bar-chart",8),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&n&&(i.xp6(9),i.Q6J("tooltip",i.lcZ(10,12,"info.pagerank")),i.xp6(2),i.Q6J("data",r.pageRankNormalized),i.xp6(7),i.Q6J("tooltip",i.lcZ(19,14,"info.fractal_protagonism")),i.xp6(2),i.Q6J("data",r.pagerankEigenvectorAndDegreeCentrality)("xLabel","pagerank")("yLabel","eigenvector"),i.xp6(8),i.Q6J("tooltip",i.lcZ(29,16,"info.eigenvector")),i.xp6(2),i.Q6J("data",r.eigenvectorCosmere),i.xp6(7),i.Q6J("tooltip",i.lcZ(38,18,"info.betweenness")),i.xp6(2),i.Q6J("data",r.betweennessCosmere),i.xp6(7),i.Q6J("tooltip",i.lcZ(47,20,"info.closeness")),i.xp6(2),i.Q6J("data",r.closenessCosmere))},directives:[Gs,lo.A,Fs.o,Fy,ky,zy],pipes:[ri.u],encapsulation:2}),t})()}];let jy=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[V.Bz.forChild(Uy),oi.ZD,ai.T,Ue.ez,Jn.m,ii.d]]}),t})();var js=N(4524);let By=(()=>{class t extends w.m1{constructor(){super({guides:[]}),this.guides$=this.select(n=>n.guides)}saveAllGuides(n){(0,l.isEqual)(this.get().guides,n)||this.patchState(r=>({guides:j(r.guides,n)}))}syncState(){return this.get()}syncGuide(n){return U(n,this.get().guides)}reset(){this.patchState({guides:[]})}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Zy=(()=>{class t{constructor(n,r){this.api=n,this.store=r}fetchAllGuides(){var n=this;return(0,z.Z)(function*(){const r=yield n.api.get("guides");n.store.saveAllGuides(r)})()}syncAllGuides(){return this.store.syncState().guides}allGuides(){return this.store.guides$}}return t.\u0275fac=function(n){return new(n||t)(i.LFG(m),i.LFG(By))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Hy=(()=>{class t extends w.m1{constructor(){super({sagas:[]}),this.sagas$=this.select(n=>n.sagas)}saveAllSagas(n){(0,l.isEqual)(this.get().sagas,n)||this.patchState(r=>({sagas:j(r.sagas,n)}))}syncState(){return this.get()}syncSaga(n){return U(n,this.get().sagas)}reset(){this.patchState({sagas:[]})}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Yy=(()=>{class t{constructor(n,r){this.api=n,this.store=r}fetchAllSagas(){var n=this;return(0,z.Z)(function*(){const r=yield n.api.get("sagas");n.store.saveAllSagas(r)})()}syncAllSagas(){return this.store.syncState().sagas}allSagas(){return this.store.sagas$}}return t.\u0275fac=function(n){return new(n||t)(i.LFG(m),i.LFG(Hy))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Vy(t,e){if(1&t&&(i.TgZ(0,"mat-option",12),i._uU(1),i.qZA()),2&t){const n=e.$implicit;i.Q6J("value",n.id),i.xp6(1),i.hij(" ",n.name," ")}}function Xy(t,e){if(1&t&&(i.TgZ(0,"div",13),i._UZ(1,"div",14),i.TgZ(2,"div"),i._uU(3),i.ALo(4,"trans"),i.qZA(),i.qZA()),2&t){const n=e.$implicit,r=i.oxw();i.xp6(1),i.Udp("background-color",r.edgeColors()[n]),i.xp6(2),i.Oqu(i.lcZ(4,3,"guide."+n))}}const $y=[{path:"",component:(()=>{class t extends b{constructor(n,r,o){super(),this.bookApi=n,this.guideApi=r,this.sagaApi=o,this.nodes=[],this.edges=[],this.books=[],this.guides=[],this.sagas=[],this.guideRelationshipTypes=["highly_recommended","recommended","not_recommended","optional"],this.options={directed:!0,drag:!0,nodeColors:this.nodeColors(),edgeColors:this.edgeColors(),curveEdges:!0,hover:!1,edgeWidth:3},this.guideControl=new Ne.NI}ngOnInit(){var n=this;return(0,z.Z)(function*(){n.subscribe(n.bookApi.allBooks(),r=>{n.onBooksChanged(r)}),n.subscribe(n.guideApi.allGuides(),r=>{n.onGuidesChanged(r)}),n.subscribe(n.sagaApi.allSagas(),r=>{n.onSagasChanged(r)}),n.subscribe(n.guideControl.valueChanges,r=>n.regenerateNetworkParameters()),(0,l.defer)((0,z.Z)(function*(){yield n.bookApi.fetchAllBooks(),yield n.guideApi.fetchAllGuides(),yield n.sagaApi.fetchAllSagas()}))})()}regenerateNetworkParameters(){if(0===this.guides.length||0===this.books.length)return;const n=this.guides.find(r=>r.id===this.guideControl.value);this.nodes=this.books.map(r=>({id:r.id,label:(0,js.d)(r.title),group:this.getSagaFromBook(r),score:20})),n.order.find(r=>"start"===r.type)&&this.nodes.push({id:"start",label:(0,js.d)("Start"),group:"start",score:20}),this.edges=n.order.map(r=>({source:r.sourceId,target:r.targetId,weight:1,group:r.type}))}onBooksChanged(n){this.books=n,this.regenerateNetworkParameters()}onGuidesChanged(n){this.guides=n,this.guideControl.setValue(n[1].id),this.regenerateNetworkParameters()}onSagasChanged(n){this.sagas=n,this.regenerateNetworkParameters()}getSagaFromBook(n){var r,o,u;return null!==(u=null===(o=null===(r=this.sagas)||void 0===r?void 0:r.find(p=>p.bookIds.includes(n.id)))||void 0===o?void 0:o.title)&&void 0!==u?u:n.title}edgeColors(){return{highly_recommended:"#00A78E",recommended:"#FFC107",not_recommended:"#E53935",optional:"#9E9E9E",start:"#FFFFFF"}}nodeColors(){return{start:"#FFFFFF"}}}return t.\u0275fac=function(n){return new(n||t)(i.Y36(ho),i.Y36(Zy),i.Y36(Yy))},t.\u0275cmp=i.Xpm({type:t,selectors:[["network"]],features:[i.qOj],decls:17,vars:14,consts:[[1,"inset-0","flex","flex-col","min-w-0","w-full","overflow-hidden"],[1,"flex","flex-row","h-full","w-full","grow","justify-center"],[1,"h-full","w-full",3,"nodes","edges","options"],[1,"absolute","bottom-0","right-0","z-50"],[1,"z-50"],[1,"flex","flex-col","p-6","gap-5","rounded-none"],["floatLabel","always",1,"w-full"],[1,"text-white"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[1,"text-xl"],["class","flex flex-row",4,"ngFor","ngForOf"],[3,"value"],[1,"flex","flex-row"],[1,"square","mr-3"]],template:function(n,r){1&n&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i._UZ(2,"app-network",2),i.qZA(),i.TgZ(3,"div",3),i.TgZ(4,"div",4),i.TgZ(5,"app-card",5),i.TgZ(6,"mat-form-field",6),i.TgZ(7,"mat-label",7),i._uU(8),i.ALo(9,"titlecase"),i.ALo(10,"trans"),i.qZA(),i.TgZ(11,"mat-select",8),i.YNc(12,Vy,2,2,"mat-option",9),i.qZA(),i.qZA(),i.TgZ(13,"div",10),i._uU(14),i.ALo(15,"trans"),i.qZA(),i.YNc(16,Xy,5,5,"div",11),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&n&&(i.xp6(2),i.Q6J("nodes",r.nodes)("edges",r.edges)("options",r.options),i.xp6(6),i.Oqu(i.lcZ(9,8,i.lcZ(10,10,"guide"))),i.xp6(3),i.Q6J("formControl",r.guideControl),i.xp6(1),i.Q6J("ngForOf",r.guides),i.xp6(2),i.Oqu(i.lcZ(15,12,"guide.legend.title")),i.xp6(2),i.Q6J("ngForOf",r.guideRelationshipTypes))},directives:[uo,lo.A,Ln.KE,Ln.hX,si.gD,Ne.JJ,Ne.oH,Ue.sg,fo.ey],pipes:[Ue.rS,ri.u],styles:[".square{width:20px;height:20px;border:black;border-radius:6px}\n"],encapsulation:2}),t})()}];let qy=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[V.Bz.forChild($y),Jn.m,ai.T,Ue.ez,ni.ot,Ln.lN,fo.Ng,si.LD,ii.d,Ne.UX,zs]]}),t})();const Ky=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",loadChildren:()=>dy},{path:"network",loadChildren:()=>Cy},{path:"analysis",loadChildren:()=>jy},{path:"guide",loadChildren:()=>qy}];let Qy=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[V.Bz.forChild(Ky)]]}),t})()},3333:st=>{st.exports=function(N,V){var z=V.length;if(0!==z){var k=N.length;N.length+=z;for(var i=0;i<z;i++)N[k+i]=V[i]}}},9069:st=>{"use strict";var V,R="object"==typeof Reflect?Reflect:null,N=R&&"function"==typeof R.apply?R.apply:function(S,x,W){return Function.prototype.apply.call(S,x,W)};V=R&&"function"==typeof R.ownKeys?R.ownKeys:Object.getOwnPropertySymbols?function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:function(S){return Object.getOwnPropertyNames(S)};var k=Number.isNaN||function(S){return S!=S};function i(){i.init.call(this)}st.exports=i,st.exports.once=function Z(L,S){return new Promise(function(x,W){function A(m){L.removeListener(S,y),W(m)}function y(){"function"==typeof L.removeListener&&L.removeListener("error",A),x([].slice.call(arguments))}I(L,S,y,{once:!0}),"error"!==S&&function Y(L,S,x){"function"==typeof L.on&&I(L,"error",S,x)}(L,A,{once:!0})})},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var b=10;function v(L){if("function"!=typeof L)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof L)}function E(L){return void 0===L._maxListeners?i.defaultMaxListeners:L._maxListeners}function s(L,S,x,W){var A,y,m;if(v(x),void 0===(y=L._events)?(y=L._events=Object.create(null),L._eventsCount=0):(void 0!==y.newListener&&(L.emit("newListener",S,x.listener?x.listener:x),y=L._events),m=y[S]),void 0===m)m=y[S]=x,++L._eventsCount;else if("function"==typeof m?m=y[S]=W?[x,m]:[m,x]:W?m.unshift(x):m.push(x),(A=E(L))>0&&m.length>A&&!m.warned){m.warned=!0;var w=new Error("Possible EventEmitter memory leak detected. "+m.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");w.name="MaxListenersExceededWarning",w.emitter=L,w.type=S,w.count=m.length,function z(L){console&&console.warn&&console.warn(L)}(w)}return L}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(L,S,x){var W={fired:!1,wrapFn:void 0,target:L,type:S,listener:x},A=h.bind(W);return A.listener=x,W.wrapFn=A,A}function f(L,S,x){var W=L._events;if(void 0===W)return[];var A=W[S];return void 0===A?[]:"function"==typeof A?x?[A.listener||A]:[A]:x?function P(L){for(var S=new Array(L.length),x=0;x<S.length;++x)S[x]=L[x].listener||L[x];return S}(A):l(A,A.length)}function d(L){var S=this._events;if(void 0!==S){var x=S[L];if("function"==typeof x)return 1;if(void 0!==x)return x.length}return 0}function l(L,S){for(var x=new Array(S),W=0;W<S;++W)x[W]=L[W];return x}function I(L,S,x,W){if("function"==typeof L.on)W.once?L.once(S,x):L.on(S,x);else{if("function"!=typeof L.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof L);L.addEventListener(S,function A(y){W.once&&L.removeEventListener(S,A),x(y)})}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return b},set:function(L){if("number"!=typeof L||L<0||k(L))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+L+".");b=L}}),i.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(S){if("number"!=typeof S||S<0||k(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this},i.prototype.getMaxListeners=function(){return E(this)},i.prototype.emit=function(S){for(var x=[],W=1;W<arguments.length;W++)x.push(arguments[W]);var A="error"===S,y=this._events;if(void 0!==y)A=A&&void 0===y.error;else if(!A)return!1;if(A){var m;if(x.length>0&&(m=x[0]),m instanceof Error)throw m;var w=new Error("Unhandled error."+(m?" ("+m.message+")":""));throw w.context=m,w}var U=y[S];if(void 0===U)return!1;if("function"==typeof U)N(U,this,x);else{var j=U.length,$=l(U,j);for(W=0;W<j;++W)N($[W],this,x)}return!0},i.prototype.on=i.prototype.addListener=function(S,x){return s(this,S,x,!1)},i.prototype.prependListener=function(S,x){return s(this,S,x,!0)},i.prototype.once=function(S,x){return v(x),this.on(S,g(this,S,x)),this},i.prototype.prependOnceListener=function(S,x){return v(x),this.prependListener(S,g(this,S,x)),this},i.prototype.off=i.prototype.removeListener=function(S,x){var W,A,y,m,w;if(v(x),void 0===(A=this._events))return this;if(void 0===(W=A[S]))return this;if(W===x||W.listener===x)0==--this._eventsCount?this._events=Object.create(null):(delete A[S],A.removeListener&&this.emit("removeListener",S,W.listener||x));else if("function"!=typeof W){for(y=-1,m=W.length-1;m>=0;m--)if(W[m]===x||W[m].listener===x){w=W[m].listener,y=m;break}if(y<0)return this;0===y?W.shift():function G(L,S){for(;S+1<L.length;S++)L[S]=L[S+1];L.pop()}(W,y),1===W.length&&(A[S]=W[0]),void 0!==A.removeListener&&this.emit("removeListener",S,w||x)}return this},i.prototype.removeAllListeners=function(S){var x,W,A;if(void 0===(W=this._events))return this;if(void 0===W.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==W[S]&&(0==--this._eventsCount?this._events=Object.create(null):delete W[S]),this;if(0===arguments.length){var m,y=Object.keys(W);for(A=0;A<y.length;++A)"removeListener"!==(m=y[A])&&this.removeAllListeners(m);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(x=W[S]))this.removeListener(S,x);else if(void 0!==x)for(A=x.length-1;A>=0;A--)this.removeListener(S,x[A]);return this},i.prototype.listeners=function(S){return f(this,S,!0)},i.prototype.rawListeners=function(S){return f(this,S,!1)},i.listenerCount=function(L,S){return"function"==typeof L.listenerCount?L.listenerCount(S):d.call(L,S)},i.prototype.listenerCount=d,i.prototype.eventNames=function(){return this._eventsCount>0?V(this._events):[]}},7749:(st,R,N)=>{var V=N(8487),z=N(6714),k=N(5568),i=N(8090),b=N(5766),v=N(8859).createRandomIndex,E=N(6956),s=E.UndirectedLouvainIndex,h=E.DirectedLouvainIndex,g={nodeCommunityAttribute:"community",getEdgeWeight:"weight",fastLocalMoves:!0,randomWalk:!0,resolution:1,rng:Math.random};function f(I,L,S){var x=I.get(L);void 0===x&&(x=0),I.set(L,x+=S)}function l(I,L,S,x,W){return Math.abs(x-W)<1e-10?I!==L&&S>I:x>W}function G(I,L,S){var m,w,j,$,X,tt,rt,it,gt,lt,Et,ht,At,Pt,ut,xt,Kt,Qt,x=new s(L,{getEdgeWeight:S.getEdgeWeight,keepDendrogram:I,resolution:S.resolution}),W=v(S.rng),A=!0,y=!0,U=new i(Float64Array,x.C),Zt=0,Vt=0,Xt=[];for(S.fastLocalMoves&&(j=new b(x.C));A;){if(ht=x.C,A=!1,y=!0,S.fastLocalMoves){for(Qt=0,it=S.randomWalk?W(ht):0,gt=0;gt<ht;gt++,it++)j.enqueue(lt=it%ht);for(;0!==j.size;){for(lt=j.dequeue(),Vt++,At=0,U.clear(),m=x.belongings[lt],$=x.starts[lt],X=x.starts[lt+1];$<X;$++)At+=tt=x.weights[$],f(U,w=x.belongings[Et=x.neighborhood[$]],tt);for(ut=x.fastDeltaWithOwnCommunity(lt,At,U.get(m)||0,m),Pt=m,rt=0;rt<U.size;rt++)(w=U.dense[rt])!==m&&(Zt++,l(Pt,m,w,xt=x.fastDelta(lt,At,U.vals[rt],w),ut)&&(ut=xt,Pt=w));if(ut<0){if((Pt=x.isolate(lt,At))===m)continue}else{if(Pt===m)continue;x.move(lt,At,Pt)}for(A=!0,Qt++,$=x.starts[lt],X=x.starts[lt+1];$<X;$++)(w=x.belongings[Et=x.neighborhood[$]])!==Pt&&j.enqueue(Et)}Xt.push(Qt)}else for(Xt.push(Kt=[]);y;){for(y=!1,Qt=0,it=S.randomWalk?W(ht):0,gt=0;gt<ht;gt++,it++){for(lt=it%ht,Vt++,At=0,U.clear(),m=x.belongings[lt],$=x.starts[lt],X=x.starts[lt+1];$<X;$++)At+=tt=x.weights[$],f(U,w=x.belongings[Et=x.neighborhood[$]],tt);for(ut=x.fastDeltaWithOwnCommunity(lt,At,U.get(m)||0,m),Pt=m,rt=0;rt<U.size;rt++)(w=U.dense[rt])!==m&&(Zt++,l(Pt,m,w,xt=x.fastDelta(lt,At,U.vals[rt],w),ut)&&(ut=xt,Pt=w));if(ut<0){if((Pt=x.isolate(lt,At))===m)continue}else{if(Pt===m)continue;x.move(lt,At,Pt)}y=!0,Qt++}Kt.push(Qt),A=y||A}A&&x.zoomOut()}return{index:x,deltaComputations:Zt,nodesVisited:Vt,moves:Xt}}function P(I,L,S){var m,w,j,$,X,tt,it,gt,lt,Et,ht,At,Dt,Pt,ut,xt,Zt,Xt,ge,oe,x=new h(L,{getEdgeWeight:S.getEdgeWeight,keepDendrogram:I,resolution:S.resolution}),W=v(S.rng),A=!0,y=!0,U=new i(Float64Array,x.C),Kt=0,Qt=0,ue=[];for(S.fastLocalMoves&&(j=new b(x.C));A;){if(Dt=x.C,A=!1,y=!0,S.fastLocalMoves){for(oe=0,lt=S.randomWalk?W(Dt):0,Et=0;Et<Dt;Et++,lt++)j.enqueue(ht=lt%Dt);for(;0!==j.size;){for(ht=j.dequeue(),Qt++,Pt=0,ut=0,U.clear(),m=x.belongings[ht],$=x.starts[ht],X=x.starts[ht+1],tt=x.offsets[ht];$<X;$++)it=x.weights[$],$<tt?ut+=it:Pt+=it,f(U,w=x.belongings[At=x.neighborhood[$]],it);for(Zt=x.deltaWithOwnCommunity(ht,Pt,ut,U.get(m)||0,m),xt=m,gt=0;gt<U.size;gt++)(w=U.dense[gt])!==m&&(Kt++,l(xt,m,w,Xt=x.delta(ht,Pt,ut,U.vals[gt],w),Zt)&&(Zt=Xt,xt=w));if(Zt<0){if((xt=x.isolate(ht,Pt,ut))===m)continue}else{if(xt===m)continue;x.move(ht,Pt,ut,xt)}for(A=!0,oe++,$=x.starts[ht],X=x.starts[ht+1];$<X;$++)(w=x.belongings[At=x.neighborhood[$]])!==xt&&j.enqueue(At)}ue.push(oe)}else for(ue.push(ge=[]);y;){for(y=!1,oe=0,lt=S.randomWalk?W(Dt):0,Et=0;Et<Dt;Et++,lt++){for(ht=lt%Dt,Qt++,Pt=0,ut=0,U.clear(),m=x.belongings[ht],$=x.starts[ht],X=x.starts[ht+1],tt=x.offsets[ht];$<X;$++)it=x.weights[$],$<tt?ut+=it:Pt+=it,f(U,w=x.belongings[At=x.neighborhood[$]],it);for(Zt=x.deltaWithOwnCommunity(ht,Pt,ut,U.get(m)||0,m),xt=m,gt=0;gt<U.size;gt++)(w=U.dense[gt])!==m&&(Kt++,l(xt,m,w,Xt=x.delta(ht,Pt,ut,U.vals[gt],w),Zt)&&(Zt=Xt,xt=w));if(Zt<0){if((xt=x.isolate(ht,Pt,ut))===m)continue}else{if(xt===m)continue;x.move(ht,Pt,ut,xt)}y=!0,oe++}ge.push(oe),A=y||A}A&&x.zoomOut()}return{index:x,deltaComputations:Kt,nodesVisited:Qt,moves:ue}}function Z(I,L,S,x){if(!z(S))throw new Error("graphology-communities-louvain: the given graph is not a valid graphology instance.");var W=k(S);if("mixed"===W)throw new Error("graphology-communities-louvain: cannot run the algorithm on a true mixed graph.");x=V(x,g);var A=0;if(0===S.size){if(I)return void S.forEachNode(function($){S.setNodeAttribute($,x.nodeCommunityAttribute,A++)});var y={};return S.forEachNode(function($){y[$]=A++}),L?{communities:y,count:S.order,deltaComputations:0,dendrogram:null,level:0,modularity:NaN,moves:null,nodesVisited:0,resolution:x.resolution}:y}var w=("undirected"===W?G:P)(L,S,x),U=w.index;if(!L)return I?void U.assign(x.nodeCommunityAttribute):U.collect();var j={count:U.C,deltaComputations:w.deltaComputations,dendrogram:U.dendrogram,level:U.level,modularity:U.modularity(),moves:w.moves,nodesVisited:w.nodesVisited,resolution:x.resolution};return I?(U.assign(x.nodeCommunityAttribute),j):(j.communities=U.collect(),j)}var Y=Z.bind(null,!1,!1);Y.assign=Z.bind(null,!0,!1),Y.detailed=Z.bind(null,!1,!0),Y.defaults=g,st.exports=Y},5149:(st,R,N)=>{var z=N(6714),k=N(6262).B,i=N(778).De,b=N(3882);R.dQ=function d(P){var Z=function f(P){if(!z(P))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(!P.order)return[];var L,Z=new b(P),Y=Z.push.bind(Z),I=[];return Z.forEachNodeYetUnseen(function(S){L=[],Z.push(S);for(var x;0!==Z.size;)x=Z.pop(),L.push(x),P.forEachNeighbor(x,Y);return L.length>I.length&&(I=L),I.length>Z.countUnseenNodes()}),I}(P),Y=P.nullCopy();return Z.forEach(function(I){k(Y,I,P.getNodeAttributes(I))}),P.forEachEdge(function(I,L,S,x,W,A,y){Y.hasNode(S)&&i(Y,y,I,S,x,L)}),Y}},3882:st=>{function R(N){this.graph=N,this.stack=new Array(N.order),this.seen=new Set,this.size=0}R.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order},R.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size},R.prototype.forEachNodeYetUnseen=function(N){var V=this.seen,z=this.graph;z.someNode(function(k,i){return V.size===z.order||!V.has(k)&&!!N(k,i)})},R.prototype.has=function(N){return this.seen.has(N)},R.prototype.push=function(N){var V=this.seen.size;return this.seen.add(N),V!==this.seen.size&&(this.stack[this.size++]=N,!0)},R.prototype.pushWith=function(N,V){var z=this.seen.size;return this.seen.add(N),z!==this.seen.size&&(this.stack[this.size++]=V,!0)},R.prototype.pop=function(){if(0!==this.size)return this.stack[--this.size]},st.exports=R},6956:(st,R,N)=>{var V=N(6116),z=N(8487),k=N(2954).Q6,i=Symbol.for("nodejs.util.inspect.custom"),b={getEdgeWeight:"weight",keepDendrogram:!1,resolution:1};function v(s,h){var g=(h=z(h,b)).resolution,f=k(h.getEdgeWeight).fromEntry,d=2*(s.size-s.selfLoopCount),l=V.getPointerArray(d),G=V.getPointerArray(s.order+1),P=h.getEdgeWeight?Float64Array:V.getPointerArray(2*s.size);this.C=s.order,this.M=0,this.E=d,this.U=0,this.resolution=g,this.level=0,this.graph=s,this.nodes=new Array(s.order),this.keepDendrogram=h.keepDendrogram,this.neighborhood=new G(d),this.weights=new P(d),this.loops=new P(s.order),this.starts=new l(s.order+1),this.belongings=new G(s.order),this.dendrogram=[],this.mapping=null,this.counts=new G(s.order),this.unused=new G(s.order),this.totalWeights=new P(s.order);var Y,Z={},I=0,L=0,S=this;s.forEachNode(function(x){S.nodes[I]=x,Z[x]=I,L+=s.undirectedDegreeWithoutSelfLoops(x),S.starts[I]=L,S.belongings[I]=I,S.counts[I]=1,I++}),s.forEachEdge(function(x,W,A,y,m,w,U){if(Y=f(x,W,A,y,m,w,U),A=Z[A],y=Z[y],S.M+=Y,A===y)S.totalWeights[A]+=2*Y,S.loops[A]=2*Y;else{S.totalWeights[A]+=Y,S.totalWeights[y]+=Y;var j=--S.starts[A],$=--S.starts[y];S.neighborhood[j]=y,S.neighborhood[$]=A,S.weights[j]=Y,S.weights[$]=Y}}),this.starts[I]=this.E,this.keepDendrogram?this.dendrogram.push(this.belongings.slice()):this.mapping=this.belongings.slice()}function E(s,h){var g=(h=z(h,b)).resolution,f=k(h.getEdgeWeight).fromEntry,d=2*(s.size-s.selfLoopCount),l=V.getPointerArray(d),G=V.getPointerArray(s.order+1),P=h.getEdgeWeight?Float64Array:V.getPointerArray(2*s.size);this.C=s.order,this.M=0,this.E=d,this.U=0,this.resolution=g,this.level=0,this.graph=s,this.nodes=new Array(s.order),this.keepDendrogram=h.keepDendrogram,this.neighborhood=new G(d),this.weights=new P(d),this.loops=new P(s.order),this.starts=new l(s.order+1),this.offsets=new l(s.order),this.belongings=new G(s.order),this.dendrogram=[],this.counts=new G(s.order),this.unused=new G(s.order),this.totalInWeights=new P(s.order),this.totalOutWeights=new P(s.order);var Y,Z={},I=0,L=0,S=this;s.forEachNode(function(x){S.nodes[I]=x,Z[x]=I,L+=s.outDegreeWithoutSelfLoops(x),S.starts[I]=L,L+=s.inDegreeWithoutSelfLoops(x),S.offsets[I]=L,S.belongings[I]=I,S.counts[I]=1,I++}),s.forEachEdge(function(x,W,A,y,m,w,U){if(Y=f(x,W,A,y,m,w,U),A=Z[A],y=Z[y],S.M+=Y,A===y)S.loops[A]+=Y,S.totalInWeights[A]+=Y,S.totalOutWeights[A]+=Y;else{S.totalOutWeights[A]+=Y,S.totalInWeights[y]+=Y;var j=--S.starts[A],$=--S.offsets[y];S.neighborhood[j]=y,S.neighborhood[$]=A,S.weights[j]=Y,S.weights[$]=Y}}),this.starts[I]=this.E,this.keepDendrogram?this.dendrogram.push(this.belongings.slice()):this.mapping=this.belongings.slice()}v.prototype.isolate=function(s,h){var g=this.belongings[s];if(1===this.counts[g])return g;var f=this.unused[--this.U],d=this.loops[s];return this.totalWeights[g]-=h+d,this.totalWeights[f]+=h+d,this.belongings[s]=f,this.counts[g]--,this.counts[f]++,f},v.prototype.move=function(s,h,g){var f=this.belongings[s],d=this.loops[s];this.totalWeights[f]-=h+d,this.totalWeights[g]+=h+d,this.belongings[s]=g;var l=1==this.counts[f]--;this.counts[g]++,l&&(this.unused[this.U++]=f)},v.prototype.computeNodeDegree=function(s){var h,g,d=0;for(h=this.starts[s],g=this.starts[s+1];h<g;h++)d+=this.weights[h];return d},v.prototype.expensiveIsolate=function(s){var h=this.computeNodeDegree(s);return this.isolate(s,h)},v.prototype.expensiveMove=function(s,h){var g=this.computeNodeDegree(s);this.move(s,g,h)},v.prototype.zoomOut=function(){var l,G,P,Z,Y,I,L,S,x,W,A,s=new Array(this.C-this.U),h={},g=this.nodes.length,f=0,d=0;for(l=0,P=this.C;l<P;l++)(I=this.belongings[l])in h||(h[I]=f,s[f]={adj:{},totalWeights:this.totalWeights[I],internalWeights:0},f++),this.belongings[l]=h[I];if(this.keepDendrogram){for(W=this.dendrogram[this.level],A=new(V.getPointerArray(f))(g),l=0;l<g;l++)A[l]=this.belongings[W[l]];this.dendrogram.push(A)}else for(l=0;l<g;l++)this.mapping[l]=this.belongings[this.mapping[l]];for(l=0,P=this.C;l<P;l++)for(x=(S=s[I=this.belongings[l]]).adj,S.internalWeights+=this.loops[l],G=this.starts[l],Z=this.starts[l+1];G<Z;G++)I!==(L=this.belongings[Y=this.neighborhood[G]])?(L in x||(x[L]=0),x[L]+=this.weights[G]):S.internalWeights+=this.weights[G];for(this.C=f,Y=0,I=0;I<f;I++)for(L in x=(S=s[I]).adj,this.totalWeights[I=+I]=S.totalWeights,this.loops[I]=S.internalWeights,this.counts[I]=1,this.starts[I]=Y,this.belongings[I]=I,x)this.neighborhood[Y]=+L,this.weights[Y]=x[L],d++,Y++;return this.starts[f]=d,this.E=d,this.U=0,this.level++,h},v.prototype.modularity=function(){var s,g,f,d,l=0,G=2*this.M,P=new Float64Array(this.C);for(g=0;g<this.C;g++)for(P[s=this.belongings[g]]+=this.loops[g],f=this.starts[g],d=this.starts[g+1];f<d;f++)s===this.belongings[this.neighborhood[f]]&&(P[s]+=this.weights[f]);for(g=0;g<this.C;g++)l+=P[g]/G-Math.pow(this.totalWeights[g]/G,2)*this.resolution;return l},v.prototype.delta=function(s,h,g,f){var d=this.M;return g/d-this.totalWeights[f]*(h+=this.loops[s])*this.resolution/(2*d*d)},v.prototype.deltaWithOwnCommunity=function(s,h,g,f){var d=this.M;return g/d-(this.totalWeights[f]-(h+=this.loops[s]))*h*this.resolution/(2*d*d)},v.prototype.fastDelta=function(s,h,g,f){return g-(h+=this.loops[s])*this.totalWeights[f]*this.resolution/(2*this.M)},v.prototype.fastDeltaWithOwnCommunity=function(s,h,g,f){return g-(h+=this.loops[s])*(this.totalWeights[f]-h)*this.resolution/(2*this.M)},v.prototype.bounds=function(s){return[this.starts[s],this.starts[s+1]]},v.prototype.project=function(){var s=this,h={};return s.nodes.slice(0,this.C).forEach(function(g,f){h[g]=Array.from(s.neighborhood.slice(s.starts[f],s.starts[f+1])).map(function(d){return s.nodes[d]})}),h},v.prototype.collect=function(s){arguments.length<1&&(s=this.level);var f,d,h={},g=this.keepDendrogram?this.dendrogram[s]:this.mapping;for(f=0,d=g.length;f<d;f++)h[this.nodes[f]]=g[f];return h},v.prototype.assign=function(s,h){arguments.length<2&&(h=this.level);var f,d,g=this.keepDendrogram?this.dendrogram[h]:this.mapping;for(f=0,d=g.length;f<d;f++)this.graph.setNodeAttribute(this.nodes[f],s,g[f])},v.prototype[i]=function(){var s={};Object.defineProperty(s,"constructor",{value:v,enumerable:!1}),s.C=this.C,s.M=this.M,s.E=this.E,s.U=this.U,s.resolution=this.resolution,s.level=this.level,s.nodes=this.nodes,s.starts=this.starts.slice(0,s.C+1);var f=this;return["neighborhood","weights"].forEach(function(d){s[d]=f[d].slice(0,s.E)}),["counts","loops","belongings","totalWeights"].forEach(function(d){s[d]=f[d].slice(0,s.C)}),s.unused=this.unused.slice(0,this.U),this.keepDendrogram?s.dendrogram=this.dendrogram:s.mapping=this.mapping,s},E.prototype.bounds=v.prototype.bounds,E.prototype.inBounds=function(s){return[this.offsets[s],this.starts[s+1]]},E.prototype.outBounds=function(s){return[this.starts[s],this.offsets[s]]},E.prototype.project=v.prototype.project,E.prototype.projectIn=function(){var s=this,h={};return s.nodes.slice(0,this.C).forEach(function(g,f){h[g]=Array.from(s.neighborhood.slice(s.offsets[f],s.starts[f+1])).map(function(d){return s.nodes[d]})}),h},E.prototype.projectOut=function(){var s=this,h={};return s.nodes.slice(0,this.C).forEach(function(g,f){h[g]=Array.from(s.neighborhood.slice(s.starts[f],s.offsets[f])).map(function(d){return s.nodes[d]})}),h},E.prototype.isolate=function(s,h,g){var f=this.belongings[s];if(1===this.counts[f])return f;var d=this.unused[--this.U],l=this.loops[s];return this.totalInWeights[f]-=h+l,this.totalInWeights[d]+=h+l,this.totalOutWeights[f]-=g+l,this.totalOutWeights[d]+=g+l,this.belongings[s]=d,this.counts[f]--,this.counts[d]++,d},E.prototype.move=function(s,h,g,f){var d=this.belongings[s],l=this.loops[s];this.totalInWeights[d]-=h+l,this.totalInWeights[f]+=h+l,this.totalOutWeights[d]-=g+l,this.totalOutWeights[f]+=g+l,this.belongings[s]=f;var G=1==this.counts[d]--;this.counts[f]++,G&&(this.unused[this.U++]=d)},E.prototype.computeNodeInDegree=function(s){var h,g,d=0;for(h=this.offsets[s],g=this.starts[s+1];h<g;h++)d+=this.weights[h];return d},E.prototype.computeNodeOutDegree=function(s){var h,g,d=0;for(h=this.starts[s],g=this.offsets[s];h<g;h++)d+=this.weights[h];return d},E.prototype.expensiveMove=function(s,h){var g=this.computeNodeInDegree(s),f=this.computeNodeOutDegree(s);this.move(s,g,f,h)},E.prototype.zoomOut=function(){var l,G,P,Z,Y,I,L,S,x,W,A,y,m,w,U,s=new Array(this.C-this.U),h={},g=this.nodes.length,f=0,d=0;for(l=0,P=this.C;l<P;l++)(I=this.belongings[l])in h||(h[I]=f,s[f]={inAdj:{},outAdj:{},totalInWeights:this.totalInWeights[I],totalOutWeights:this.totalOutWeights[I],internalWeights:0},f++),this.belongings[l]=h[I];if(this.keepDendrogram){for(w=this.dendrogram[this.level],U=new(V.getPointerArray(f))(g),l=0;l<g;l++)U[l]=this.belongings[w[l]];this.dendrogram.push(U)}else for(l=0;l<g;l++)this.mapping[l]=this.belongings[this.mapping[l]];for(l=0,P=this.C;l<P;l++)for(x=this.offsets[l],y=(S=s[I=this.belongings[l]]).inAdj,m=S.outAdj,S.internalWeights+=this.loops[l],G=this.starts[l],Z=this.starts[l+1];G<Z;G++)A=(W=G<x)?m:y,I!==(L=this.belongings[Y=this.neighborhood[G]])?(L in A||(A[L]=0),A[L]+=this.weights[G]):W&&(S.internalWeights+=this.weights[G]);for(this.C=f,Y=0,I=0;I<f;I++){for(L in y=(S=s[I]).inAdj,m=S.outAdj,this.totalInWeights[I=+I]=S.totalInWeights,this.totalOutWeights[I]=S.totalOutWeights,this.loops[I]=S.internalWeights,this.counts[I]=1,this.starts[I]=Y,this.belongings[I]=I,m)this.neighborhood[Y]=+L,this.weights[Y]=m[L],d++,Y++;for(L in this.offsets[I]=Y,y)this.neighborhood[Y]=+L,this.weights[Y]=y[L],d++,Y++}return this.starts[f]=d,this.E=d,this.U=0,this.level++,h},E.prototype.modularity=function(){var s,g,f,d,l=0,G=this.M,P=new Float64Array(this.C);for(g=0;g<this.C;g++)for(P[s=this.belongings[g]]+=this.loops[g],f=this.starts[g],d=this.offsets[g];f<d;f++)s===this.belongings[this.neighborhood[f]]&&(P[s]+=this.weights[f]);for(g=0;g<this.C;g++)l+=P[g]/G-this.totalInWeights[g]*this.totalOutWeights[g]/Math.pow(G,2)*this.resolution;return l},E.prototype.delta=function(s,h,g,f,d){var l=this.M,Z=this.loops[s];return f/l-((g+=Z)*this.totalInWeights[d]+(h+=Z)*this.totalOutWeights[d])*this.resolution/(l*l)},E.prototype.deltaWithOwnCommunity=function(s,h,g,f,d){var l=this.M,Z=this.loops[s];return f/l-((g+=Z)*(this.totalInWeights[d]-(h+=Z))+h*(this.totalOutWeights[d]-g))*this.resolution/(l*l)},E.prototype.collect=v.prototype.collect,E.prototype.assign=v.prototype.assign,E.prototype[i]=function(){var s={};Object.defineProperty(s,"constructor",{value:E,enumerable:!1}),s.C=this.C,s.M=this.M,s.E=this.E,s.U=this.U,s.resolution=this.resolution,s.level=this.level,s.nodes=this.nodes,s.starts=this.starts.slice(0,s.C+1);var f=this;return["neighborhood","weights"].forEach(function(d){s[d]=f[d].slice(0,s.E)}),["counts","offsets","loops","belongings","totalInWeights","totalOutWeights"].forEach(function(d){s[d]=f[d].slice(0,s.C)}),s.unused=this.unused.slice(0,this.U),this.keepDendrogram?s.dendrogram=this.dendrogram:s.mapping=this.mapping,s},R.UndirectedLouvainIndex=v,R.DirectedLouvainIndex=E},6078:(st,R,N)=>{var V=N(6116),z=N(2954).Q6;function k(v,E){return"outbound"===v||"inbound"===v?E.directedSize+2*E.undirectedSize:"in"===v||"out"===v||"directed"===v?E.directedSize:2*E.undirectedSize}function i(v,E){var s=v[(E=E||"outbound")+"Neighbors"].bind(v),h=k(E,v),g=V.getPointerArray(h),f=V.getPointerArray(v.order);this.graph=v,this.neighborhood=new f(h),this.starts=new g(v.order+1),this.nodes=v.nodes();var l,G,P,Z,I,d={},L=0;for(l=0,G=v.order;l<G;l++)d[this.nodes[l]]=l;for(l=0,G=v.order;l<G;l++)for(I=s(this.nodes[l]),this.starts[l]=L,P=0,Z=I.length;P<Z;P++)this.neighborhood[L++]=d[I[P]];this.starts[l]=h}function b(v,E,s){var h=v[(s=s||"outbound")+"Edges"].bind(v),g=k(s,v),f=V.getPointerArray(g),d=V.getPointerArray(v.order),l=z(E).fromMinimalEntry;this.graph=v,this.neighborhood=new d(g),this.weights=new Float64Array(g),this.outDegrees=new Float64Array(v.order),this.starts=new f(v.order+1),this.nodes=v.nodes();var P,Z,Y,I,L,S,x,W,A,G={},y=0;for(P=0,Z=v.order;P<Z;P++)G[this.nodes[P]]=P;for(P=0,Z=v.order;P<Z;P++)for(x=h(L=this.nodes[P]),this.starts[P]=y,Y=0,I=x.length;Y<I;Y++)S=v.opposite(L,W=x[Y]),A=l(W,v.getEdgeAttributes(W)),this.neighborhood[y]=G[S],this.weights[y++]=A,this.outDegrees[P]+=A;this.starts[P]=g}i.prototype.bounds=function(v){return[this.starts[v],this.starts[v+1]]},i.prototype.project=function(){var v=this,E={};return v.nodes.forEach(function(s,h){E[s]=Array.from(v.neighborhood.slice(v.starts[h],v.starts[h+1])).map(function(g){return v.nodes[g]})}),E},i.prototype.collect=function(v){var E,s,h={};for(E=0,s=v.length;E<s;E++)h[this.nodes[E]]=v[E];return h},i.prototype.assign=function(v,E){var s=0;this.graph.updateEachNodeAttributes(function(h,g){return g[v]=E[s++],g},{attributes:[v]})},R.NeighborhoodIndex=i,b.prototype.bounds=i.prototype.bounds,b.prototype.project=i.prototype.project,b.prototype.collect=i.prototype.collect,b.prototype.assign=i.prototype.assign,R.WeightedNeighborhoodIndex=b},5681:(st,R,N)=>{var V=N(8487),z=N(6714),k=N(909),i={attributes:{x:"x",y:"y"},center:0,hierarchyAttributes:[],rng:Math.random,scale:1};function b(y,m,w,U,j){this.wrappedCircle=j||null,this.children={},this.countChildren=0,this.id=y||null,this.next=null,this.previous=null,this.x=m||null,this.y=w||null,this.r=j?1010101:U||999}function v(y,m,w){for(var U in m.children){var j=m.children[U];j.hasChildren()?v(y,j,w):w[j.id]={x:j.x,y:j.y}}}function E(y,m){var w=y.r-m.r,U=m.x-y.x,j=m.y-y.y;return w<0||w*w<U*U+j*j}function s(y,m){var w=y.r-m.r+1e-6,U=m.x-y.x,j=m.y-y.y;return w>0&&w*w>U*U+j*j}function h(y,m){for(var w=0;w<m.length;++w)if(!s(y,m[w]))return!1;return!0}function f(y,m){var w=y.x,U=y.y,j=y.r,$=m.x,X=m.y,tt=m.r,rt=$-w,it=X-U,gt=tt-j,lt=Math.sqrt(rt*rt+it*it);return new b(null,(w+$+rt/lt*gt)/2,(U+X+it/lt*gt)/2,(lt+j+tt)/2)}function d(y,m,w){var U=y.x,j=y.y,$=y.r,X=m.x,tt=m.y,rt=m.r,it=w.x,gt=w.y,lt=w.r,Et=U-X,ht=U-it,At=j-tt,Dt=j-gt,Pt=rt-$,ut=lt-$,dt=U*U+j*j-$*$,xt=dt-X*X-tt*tt+rt*rt,Zt=dt-it*it-gt*gt+lt*lt,Vt=ht*At-Et*Dt,Xt=(At*Zt-Dt*xt)/(2*Vt)-U,Kt=(Dt*Pt-At*ut)/Vt,Qt=(ht*xt-Et*Zt)/(2*Vt)-j,ue=(Et*ut-ht*Pt)/Vt,ge=Kt*Kt+ue*ue-1,oe=2*($+Xt*Kt+Qt*ue),Le=Xt*Xt+Qt*Qt-$*$,ce=-(ge?(oe+Math.sqrt(oe*oe-4*ge*Le))/(2*ge):Le/oe);return new b(null,U+Xt+Kt*ce,j+Qt+ue*ce,ce)}function l(y){switch(y.length){case 1:return function g(y){return new b(null,y.x,y.y,y.r)}(y[0]);case 2:return f(y[0],y[1]);case 3:return d(y[0],y[1],y[2]);default:throw new Error("graphology-layout/circlepack: Invalid basis length "+y.length)}}function G(y,m){var w,U;if(h(m,y))return[m];for(w=0;w<y.length;++w)if(E(m,y[w])&&h(f(y[w],m),y))return[y[w],m];for(w=0;w<y.length-1;++w)for(U=w+1;U<y.length;++U)if(E(f(y[w],y[U]),m)&&E(f(y[w],m),y[U])&&E(f(y[U],m),y[w])&&h(d(y[w],y[U],m),y))return[y[w],y[U],m];throw new Error("graphology-layout/circlepack: extendBasis failure !")}function P(y){var m=y.wrappedCircle,w=y.next.wrappedCircle,U=m.r+w.r,j=(m.x*w.r+w.x*m.r)/U,$=(m.y*w.r+w.y*m.r)/U;return j*j+$*$}function Y(y,m,w){var j,$,tt,rt,U=y.x-m.x,X=y.y-m.y,it=U*U+X*X;it?($=m.r+w.r,rt=y.r+w.r,($*=$)>(rt*=rt)?(j=(it+rt-$)/(2*it),tt=Math.sqrt(Math.max(0,rt/it-j*j)),w.x=y.x-j*U-tt*X,w.y=y.y-j*X+tt*U):(j=(it+$-rt)/(2*it),tt=Math.sqrt(Math.max(0,$/it-j*j)),w.x=m.x+j*U-tt*X,w.y=m.y+j*X+tt*U)):(w.x=m.x+w.r,w.y=m.y)}function I(y,m){var w=y.r+m.r-1e-6,U=m.x-y.x,j=m.y-y.y;return w>0&&w*w>U*U+j*j}function S(y,m){var w=0;if(y.hasChildren()){for(var U in y.children){var j=y.children[U];j.hasChildren()&&(j.r=S(j,m))}w=function L(y,m){var U,j,$,X,tt,rt,it,gt,lt,Et,w=y.length;if(0===w)return 0;if((U=y[0]).x=0,U.y=0,w<=1)return U.r;if(U.x=-(j=y[1]).r,j.x=U.r,j.y=0,w<=2)return U.r+j.r;Y(j,U,$=y[2]),U=new b(null,null,null,null,U),j=new b(null,null,null,null,j),$=new b(null,null,null,null,$),U.next=$.previous=j,j.next=U.previous=$,$.next=j.previous=U;t:for(rt=3;rt<w;++rt){Y(U.wrappedCircle,j.wrappedCircle,$=y[rt]),$=new b(null,null,null,null,$),it=j.next,gt=U.previous,lt=j.wrappedCircle.r,Et=U.wrappedCircle.r;do{if(lt<=Et){if(I(it.wrappedCircle,$.wrappedCircle)){U.next=j=it,j.previous=U,--rt;continue t}lt+=it.wrappedCircle.r,it=it.next}else{if(I(gt.wrappedCircle,$.wrappedCircle)){(U=gt).next=j,j.previous=U,--rt;continue t}Et+=gt.wrappedCircle.r,gt=gt.previous}}while(it!==gt.next);for($.previous=U,$.next=j,U.next=j.previous=j=$,X=P(U);($=$.next)!==j;)(tt=P($))<X&&(U=$,X=tt);j=U.next}U=[j.wrappedCircle],$=j;for(var ht=1e4;($=$.next)!==j&&0!=--ht;)U.push($.wrappedCircle);for($=function Z(y,m){var X,tt,w=0,U=y.slice(),j=y.length,$=[];for(m(U);w<j;)X=U[w],tt&&s(tt,X)?++w:(tt=l($=G($,X)),w=0);return tt}(U,m),rt=0;rt<w;++rt)(U=y[rt]).x-=$.x,U.y-=$.y;return $.r}(Object.values(y.children),m)}return w}function W(y,m,w){if(!z(m))throw new Error("graphology-layout/circlepack: the given graph is not a valid graphology instance.");w=V(w,i);var U={},j={},$=m.nodes(),X=w.center,tt=w.hierarchyAttributes,rt=k.createShuffleInPlace(w.rng),it=w.scale,gt=new b;m.forEachNode(function(Pt,ut){var xt=new b(Pt,null,null,ut.size?ut.size:1),Zt=gt;tt.forEach(function(Vt){Zt=Zt.getChild(ut[Vt])}),Zt.addChild(Pt,xt)}),function x(y,m){for(var w in S(y,m),y.children)y.children[w].applyPositionToChildren()}(gt,rt),v(m,gt,U);var Et,ht,At,lt=$.length;for(At=0;At<lt;At++){var Dt=$[At];j[Dt]={x:Et=X+it*U[Dt].x,y:ht=X+it*U[Dt].y},y&&(m.setNodeAttribute(Dt,w.attributes.x,Et),m.setNodeAttribute(Dt,w.attributes.y,ht))}return j}b.prototype.hasChildren=function(){return this.countChildren>0},b.prototype.addChild=function(y,m){this.children[y]=m,++this.countChildren},b.prototype.getChild=function(y){if(!this.children.hasOwnProperty(y)){var m=new b;this.children[y]=m,++this.countChildren}return this.children[y]},b.prototype.applyPositionToChildren=function(){if(this.hasChildren()){var y=this;for(var m in y.children){var w=y.children[m];w.x+=y.x,w.y+=y.y,w.applyPositionToChildren()}}};var A=W.bind(null,!1);A.assign=W.bind(null,!0),st.exports=A},6651:(st,R,N)=>{var V=N(8487),z=N(6714),k={dimensions:["x","y"],center:.5,scale:1};function i(v,E,s){if(!z(E))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");var h=(s=V(s,k)).dimensions;if(!Array.isArray(h)||2!==h.length)throw new Error("graphology-layout/random: given dimensions are invalid.");var f=s.scale,d=2*Math.PI,l=(s.center-.5)*f,G=E.order,P=h[0],Z=h[1];function Y(S,x){return x[P]=f*Math.cos(S*d/G)+l,x[Z]=f*Math.sin(S*d/G)+l,x}var I=0;if(!v){var L={};return E.forEachNode(function(S){L[S]=Y(I++,{})}),L}E.updateEachNodeAttributes(function(S,x){return Y(I++,x),x},{attributes:h})}var b=i.bind(null,!1);b.assign=i.bind(null,!0),st.exports=b},2568:(st,R,N)=>{N(5681),R.circular=N(6651),N(2738),N(6660)},2738:(st,R,N)=>{var V=N(8487),z=N(6714),k={dimensions:["x","y"],center:.5,rng:Math.random,scale:1};function i(v,E,s){if(!z(E))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");var h=(s=V(s,k)).dimensions;if(!Array.isArray(h)||h.length<1)throw new Error("graphology-layout/random: given dimensions are invalid.");var g=h.length,d=s.rng,l=s.scale,G=(s.center-.5)*l;function P(Y){for(var I=0;I<g;I++)Y[h[I]]=d()*l+G;return Y}if(!v){var Z={};return E.forEachNode(function(Y){Z[Y]=P({})}),Z}E.updateEachNodeAttributes(function(Y,I){return P(I),I},{attributes:h})}var b=i.bind(null,!1);b.assign=i.bind(null,!0),st.exports=b},6660:(st,R,N)=>{var V=N(8487),z=N(6714),k=Math.PI/180,i={dimensions:["x","y"],centeredOnZero:!1,degrees:!1};function b(E,s,h,g){if(!z(s))throw new Error("graphology-layout/rotation: the given graph is not a valid graphology instance.");(g=V(g,i)).degrees&&(h*=k);var f=g.dimensions;if(!Array.isArray(f)||2!==f.length)throw new Error("graphology-layout/random: given dimensions are invalid.");if(0===s.order)return E?void 0:{};var d=f[0],l=f[1],G=0,P=0;if(!g.centeredOnZero){var Z=1/0,Y=-1/0,I=1/0,L=-1/0;s.forEachNode(function(y,m){var w=m[d],U=m[l];w<Z&&(Z=w),w>Y&&(Y=w),U<I&&(I=U),U>L&&(L=U)}),G=(Z+Y)/2,P=(I+L)/2}var S=Math.cos(h),x=Math.sin(h);function W(y){var m=y[d],w=y[l];return y[d]=G+(m-G)*S-(w-P)*x,y[l]=P+(m-G)*x+(w-P)*S,y}if(!E){var A={};return s.forEachNode(function(y,m){var w={};w[d]=m[d],w[l]=m[l],A[y]=W(w)}),A}s.updateEachNodeAttributes(function(y,m){return W(m),m},{attributes:f})}var v=b.bind(null,!1);v.assign=b.bind(null,!0),st.exports=v},1063:(st,R,N)=>{var V=N(6714),z=N(3933),k=N(8487),i=z.createUnweightedIndexedBrandes,b=z.createDijkstraIndexedBrandes,v={nodeCentralityAttribute:"betweennessCentrality",getEdgeWeight:"weight",normalized:!0};function E(h,g,f){if(!V(g))throw new Error("graphology-centrality/beetweenness-centrality: the given graph is not a valid graphology instance.");var Z,Y,I,L,S,x,W,A,y,m,d=(f=k(f,v)).nodeCentralityAttribute,l=f.normalized,G=f.getEdgeWeight?b(g,f.getEdgeWeight):i(g),P=g.order,w=new Float64Array(P),U=new Float64Array(P);for(x=0;x<P;x++){for(I=(Z=G(x))[1],L=Z[2],W=(Y=Z[0]).size;W--;)w[Y.items[Y.size-W]]=0;for(;0!==Y.size;){for(S=(1+w[m=Y.pop()])/L[m],W=0,A=I[m].length;W<A;W++)w[y=I[m][W]]+=L[y]*S;m!==x&&(U[m]+=w[m])}}var j;if(null!==(j=l?P<=2?null:1/((P-1)*(P-2)):"undirected"===g.type?.5:null))for(x=0;x<P;x++)U[x]*=j;return h?G.index.assign(d,U):G.index.collect(U)}var s=E.bind(null,!1);s.assign=E.bind(null,!0),st.exports=s},3378:(st,R,N)=>{var V=N(6714),z=N(8487),k=N(8740),i=N(4268),b=N(6078).NeighborhoodIndex,v={nodeCentralityAttribute:"closenessCentrality",wassermanFaust:!1};function E(g){this.index=new b(g,"inbound"),this.queue=new k(Array,g.order),this.seen=new i(g.order)}function s(g,f,d){if(!V(f))throw new Error("graphology-metrics/centrality/closeness: the given graph is not a valid graphology instance.");var Z,Y,I,L,S,l=(d=z(d,v)).wassermanFaust,G=new E(f),P=f.order,x=new Float64Array(P);for(Z=0;Z<P;Z++)I=(Y=G.fromNode(Z))[0],S=0,(L=Y[1])>0&&P>1&&(S=I/L,l&&(S*=I/(P-1))),x[Z]=S;return g?G.index.assign(d.nodeCentralityAttribute,x):G.index.collect(x)}E.prototype.fromNode=function(g){var f=this.index,d=this.queue,l=this.seen;l.clear(),d.clear(),l.add(g),d.push([g,0]);for(var G,P,Z,Y,I,L,S=0,x=0;0!==d.size;)for(0!==(Z=(G=d.shift())[1])&&(S+=Z,x+=1),I=f.starts[(P=G[0])+1],Y=f.starts[P];Y<I;Y++)!l.has(L=f.neighborhood[Y])&&(l.add(L),d.push([L,Z+1]));return[x,S]};var h=s.bind(null,!1);h.assign=s.bind(null,!0),st.exports=h},5408:(st,R,N)=>{var V=N(6714);function z(v,E,s,h){var g=E+"Centrality";if(!V(s))throw new Error("graphology-centrality/"+g+": the given graph is not a valid graphology instance.");if("degree"!==E&&"undirected"===s.type)throw new Error("graphology-centrality/"+g+": cannot compute "+E+" centrality on an undirected graph.");var f=(h=h||{}).nodeCentralityAttribute||g,d=s.order-1,l=s[E].bind(s);if(!v){var G={};return s.forEachNode(function(P){G[P]=l(P)/d}),G}s.updateEachNodeAttributes(function(P,Z){return Z[f]=l(P)/d,Z},{attributes:[f]})}var k=z.bind(null,!1,"degree"),i=z.bind(null,!1,"inDegree"),b=z.bind(null,!1,"outDegree");k.assign=z.bind(null,!0,"degree"),i.assign=z.bind(null,!0,"inDegree"),b.assign=z.bind(null,!0,"outDegree"),R.degreeCentrality=k,R.inDegreeCentrality=i,R.outDegreeCentrality=b},5894:(st,R,N)=>{var V=N(6714),z=N(8487),k=N(6078).WeightedNeighborhoodIndex,i={nodeCentralityAttribute:"eigenvectorCentrality",getEdgeWeight:"weight",maxIterations:100,tolerance:1e-6};function b(s){for(var h=0,g=0,f=0,d=s.length;f<d;f++){var l=Math.abs(s[f]);l>h&&(g*=h/l*(h/l),h=l),g+=0===l&&0===h?0:l/h*(l/h)}return h===1/0?1:h*Math.sqrt(g)}function v(s,h,g){if(!V(h))throw new Error("graphology-metrics/centrality/eigenvector: the given graph is not a valid graphology instance.");var P,Z,Y,f=(g=z(g,i)).maxIterations,d=g.tolerance,l=h.order,G=new k(h,g.getEdgeWeight),L=new Float64Array(h.order);for(P=0;P<l;P++)L[P]=1/l;for(var A,y,S=0,x=0,m=!1;S<f;){for(A=L,L=new Float64Array(A),P=0;P<l;P++)for(Y=G.starts[P+1],Z=G.starts[P];Z<Y;Z++)L[G.neighborhood[Z]]+=A[P]*G.weights[Z];for(y=b(L),P=0;P<l;P++)L[P]/=y;for(x=0,P=0;P<l;P++)x+=Math.abs(L[P]-A[P]);if(x<l*d){m=!0;break}S++}if(!m)throw Error("graphology-metrics/centrality/eigenvector: failed to converge.");if(!s)return G.collect(L);G.assign(g.nodeCentralityAttribute,L)}var E=v.bind(null,!1);E.assign=v.bind(null,!0),st.exports=E},9850:(st,R,N)=>{var V=N(8487),z=N(6714),k=N(2954).Q6,i={nodeAuthorityAttribute:"authority",nodeHubAttribute:"hub",getEdgeWeight:"weight",maxIterations:100,normalize:!0,tolerance:1e-8};function b(h,g){var d,l,f=Object.create(null);for(d=0,l=h.length;d<l;d++)f[h[d]]=g;return f}function v(h){var g=0;for(var f in h)g+=h[f];return g}function E(h,g,f){if(!z(g))throw new Error("graphology-hits: the given graph is not a valid graphology instance.");if(g.multi)throw new Error("graphology-hits: the HITS algorithm does not work with MultiGraphs.");f=V(f,i);var P,L,S,x,W,A,y,m,w,U,j,$,X,tt,d=k(f.getEdgeWeight).fromEntry,l=g.order,G=g.nodes(),Z=b(G,1/l),Y={},I=!1;for(g.forEachEdge(function(rt,it,gt,lt,Et,ht,At){Y[rt]=d(rt,it,gt,lt,Et,ht,At)}),y=0;y<f.maxIterations;y++){for(L=Z,Z=b(G,0),S=b(G,0),w=0,m=0,$=0;$<l;$++)for(X=0,tt=(P=g.outboundEdges(x=G[$])).length;X<tt;X++)W=g.opposite(x,A=P[X]),S[W]+=L[x]*Y[A],S[W]>m&&(m=S[W]);for($=0;$<l;$++)for(X=0,tt=(P=g.outboundEdges(x=G[$])).length;X<tt;X++)W=g.opposite(x,A=P[X]),Z[x]+=S[W]*Y[A],Z[W]>w&&(w=Z[W]);for(x in j=1/w,Z)Z[x]*=j;for(x in j=1/m,S)S[x]*=j;for(x in U=0,Z)U+=Math.abs(Z[x]-L[x]);if(U<f.tolerance){I=!0;break}}if(!I)throw Error("graphology-metrics/centrality/hits: failed to converge.");if(f.normalize){for(x in j=1/v(S),S)S[x]*=j;for(x in j=1/v(Z),Z)Z[x]*=j}if(!h)return{hubs:Z,authorities:S};g.updateEachNodeAttributes(function(rt,it){return it[f.nodeAuthorityAttribute]=S[rt],it[f.nodeHubAttribute]=Z[rt],it},{attributes:[f.nodeAuthorityAttribute,f.nodeHubAttribute]})}var s=E.bind(null,!1);s.assign=E.bind(null,!0),st.exports=s},5547:(st,R,N)=>{N(5408);N(1063),N(3378),N(5894),N(9850),R.pagerank=N(593)},593:(st,R,N)=>{var V=N(6714),z=N(8487),k=N(6078).WeightedNeighborhoodIndex,i={nodePagerankAttribute:"pagerank",getEdgeWeight:"weight",alpha:.85,maxIterations:100,tolerance:1e-6};function b(E,s,h){if(!V(s))throw new Error("graphology-metrics/centrality/pagerank: the given graph is not a valid graphology instance.");var Y,I,L,S,g=(h=z(h,i)).alpha,f=h.maxIterations,d=h.tolerance,l=h.nodePagerankAttribute,G=s.order,P=1/G,Z=new k(s,h.getEdgeWeight),x=new Float64Array(s.order),W=new Float64Array(Z.weights.length),A=[];for(Y=0;Y<G;Y++)for(x[Y]=P,L=Z.starts[Y+1],0===(S=Z.outDegrees[Y])&&A.push(Y),I=Z.starts[Y];I<L;I++)W[I]=Z.weights[I]/S;for(var w,j,y=0,m=0,$=!1;y<f;){for(j=x,x=new Float64Array(s.order),w=0,Y=0,L=A.length;Y<L;Y++)w+=j[A[Y]];for(w*=g,Y=0;Y<G;Y++){for(L=Z.starts[Y+1],I=Z.starts[Y];I<L;I++)x[Z.neighborhood[I]]+=g*j[Y]*W[I];x[Y]+=w*P+(1-g)*P}for(m=0,Y=0;Y<G;Y++)m+=Math.abs(x[Y]-j[Y]);if(m<G*d){$=!0;break}y++}if(!$)throw Error("graphology-metrics/centrality/pagerank: failed to converge.");if(!E)return Z.collect(x);Z.assign(l,x)}var v=b.bind(null,!1);v.assign=b.bind(null,!0),st.exports=v},3933:(st,R,N)=>{var V=N(8740),z=N(7451),k=N(4547),i=N(6116),b=N(6078),v=b.NeighborhoodIndex,E=b.WeightedNeighborhoodIndex;function s(h,g){return h[0]>g[0]?1:h[0]<g[0]?-1:h[1]>g[1]?1:h[1]<g[1]?-1:h[2]>g[2]?1:h[2]<g[2]?-1:h[3]>g[3]?1:h[3]<g[3]?-1:0}R.createUnweightedIndexedBrandes=function(g){var f=new v(g),d=f.neighborhood,l=f.starts,G=g.order,P=new z(i.getPointerArray(G),G),Z=new Uint32Array(G),Y=new Array(G),I=new Int32Array(G),L=new V(Uint32Array,G),S=function(x){var W,A,m,w,U,j;for(U=0;U<G;U++)Y[U]=[],Z[U]=0,I[U]=-1;for(Z[x]=1,I[x]=0,L.push(x);0!==L.size;)for(U=L.shift(),P.push(U),W=I[U],A=Z[U],m=l[U+1],w=l[U];w<m;w++)-1===I[j=d[w]]&&(L.push(j),I[j]=W+1),I[j]===W+1&&(Z[j]+=A,Y[j].push(U));return[P,Y,Z]};return S.index=f,S},R.createDijkstraIndexedBrandes=function(g,f){var d=new E(g,f||"weight"),l=d.neighborhood,G=d.weights,P=d.starts,Z=g.order,Y=new z(i.getPointerArray(Z),Z),I=new Uint32Array(Z),L=new Array(Z),S=new Float64Array(Z),x=new Float64Array(Z),W=new k(s),A=function(y){var w,U,j,$,X,tt,rt,it,gt=0;for(rt=0;rt<Z;rt++)L[rt]=[],I[rt]=0,S[rt]=-1,x[rt]=-1;for(I[y]=1,x[y]=0,W.push([0,gt++,y,y]);0!==W.size;)if(j=(U=W.pop())[0],$=U[2],-1===S[rt=U[3]])for(Y.push(rt),S[rt]=j,I[rt]+=I[$],w=P[rt+1],tt=P[rt];tt<w;tt++)X=j+G[tt],-1===S[it=l[tt]]&&(-1===x[it]||X<x[it])?(x[it]=X,W.push([X,gt++,rt,it]),I[it]=0,L[it]=[rt]):X===x[it]&&(I[it]+=I[rt],L[it].push(rt));return[Y,L,I]};return A.index=d,A}},778:(st,R)=>{R.De=function(z,k,i,b,v,E){return E=Object.assign({},E),k?null==i?z.addUndirectedEdge(b,v,E):z.addUndirectedEdgeWithKey(i,b,v,E):null==i?z.addDirectedEdge(b,v,E):z.addDirectedEdgeWithKey(i,b,v,E)}},6262:(st,R)=>{R.B=function(N,V,z){return z=Object.assign({},z),N.addNode(V,z)}},8487:st=>{function R(V){return!V||"object"!=typeof V||"function"==typeof V||Array.isArray(V)||V instanceof Set||V instanceof Map||V instanceof RegExp||V instanceof Date}st.exports=function N(V,z){V=V||{};var k={};for(var i in z){var b=V[i],v=z[i];k[i]=R(v)?void 0===b?v:b:N(b,v)}return k}},2954:(st,R)=>{function V(i){return"number"!=typeof i||isNaN(i)?1:i}R.Q6=function(i){return function k(i,b){var v={},E=function(g){return void 0===g?b:g};"function"==typeof b&&(E=b);var s=function(g){return E(g[i])},h=function(){return E(void 0)};return"string"==typeof i?(v.fromAttributes=s,v.fromGraph=function(g,f){return s(g.getEdgeAttributes(f))},v.fromEntry=function(g,f){return s(f)},v.fromPartialEntry=v.fromEntry,v.fromMinimalEntry=v.fromEntry):"function"==typeof i?(v.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},v.fromGraph=function(g,f){var d=g.extremities(f);return E(i(f,g.getEdgeAttributes(f),d[0],d[1],g.getNodeAttributes(d[0]),g.getNodeAttributes(d[1]),g.isUndirected(f)))},v.fromEntry=function(g,f,d,l,G,P,Z){return E(i(g,f,d,l,G,P,Z))},v.fromPartialEntry=function(g,f,d,l){return E(i(g,f,d,l))},v.fromMinimalEntry=function(g,f){return E(i(g,f))}):(v.fromAttributes=h,v.fromGraph=h,v.fromEntry=h,v.fromMinimalEntry=h),v}(i,V)}},5568:(st,R,N)=>{var V=N(6714);st.exports=function(k){if(!V(k))throw new Error("graphology-utils/infer-type: expecting a valid graphology instance.");var i=k.type;return"mixed"!==i?i:0===k.directedSize&&0===k.undirectedSize||k.directedSize>0&&k.undirectedSize>0?"mixed":k.directedSize>0?"directed":"undirected"}},6714:st=>{st.exports=function(N){return null!==N&&"object"==typeof N&&"function"==typeof N.addUndirectedEdgeWithKey&&"function"==typeof N.dropNode&&"boolean"==typeof N.multi}},5595:function(st){st.exports=function(){"use strict";function R(_){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(_)}function N(_,D){_.prototype=Object.create(D.prototype),_.prototype.constructor=_,z(_,D)}function V(_){return(V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)})(_)}function z(_,D){return(z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,a){return C.__proto__=a,C})(_,D)}function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(_){return!1}}function i(_,D,C){return(i=k()?Reflect.construct.bind():function(a,c,T){var B=[null];B.push.apply(B,c);var q=new(Function.bind.apply(a,B));return T&&z(q,T.prototype),q}).apply(null,arguments)}function b(_){var D="function"==typeof Map?new Map:void 0;return b=function(C){if(null===C||-1===Function.toString.call(C).indexOf("[native code]"))return C;if("function"!=typeof C)throw new TypeError("Super expression must either be null or a function");if(void 0!==D){if(D.has(C))return D.get(C);D.set(C,c)}function c(){return i(C,arguments,V(this).constructor)}return c.prototype=Object.create(C.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),z(c,C)},b(_)}function v(_){if(void 0===_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}var E=function(){for(var _=arguments[0],D=1,C=arguments.length;D<C;D++)if(arguments[D])for(var a in arguments[D])_[a]=arguments[D][a];return _};function s(_,D,C,a){var c=_._nodes.get(D),T=null;return c?T="mixed"===a?c.out&&c.out[C]||c.undirected&&c.undirected[C]:"directed"===a?c.out&&c.out[C]:c.undirected&&c.undirected[C]:T}function h(_){return"object"===R(_)&&null!==_}function g(_){var D;for(D in _)return!1;return!0}function f(_,D,C){Object.defineProperty(_,D,{enumerable:!1,configurable:!1,writable:!0,value:C})}function d(_,D,C){var a={enumerable:!0,configurable:!0};"function"==typeof C?a.get=C:(a.value=C,a.writable=!1),Object.defineProperty(_,D,a)}function l(_){return!(!h(_)||_.attributes&&!Array.isArray(_.attributes))}"function"==typeof Object.assign&&(E=Object.assign);var G,P={exports:{}},Z="object"==typeof Reflect?Reflect:null,Y=Z&&"function"==typeof Z.apply?Z.apply:function(_,D,C){return Function.prototype.apply.call(_,D,C)};G=Z&&"function"==typeof Z.ownKeys?Z.ownKeys:Object.getOwnPropertySymbols?function(_){return Object.getOwnPropertyNames(_).concat(Object.getOwnPropertySymbols(_))}:function(_){return Object.getOwnPropertyNames(_)};var I=Number.isNaN||function(_){return _!=_};function L(){L.init.call(this)}P.exports=L,P.exports.once=function(_,D){return new Promise(function(C,a){function c(B){_.removeListener(D,T),a(B)}function T(){"function"==typeof _.removeListener&&_.removeListener("error",c),C([].slice.call(arguments))}var B;$(_,D,T,{once:!0}),"error"!==D&&("function"==typeof(B=_).on&&$(B,"error",c,{once:!0}))})},L.EventEmitter=L,L.prototype._events=void 0,L.prototype._eventsCount=0,L.prototype._maxListeners=void 0;var S=10;function x(_){if("function"!=typeof _)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}function W(_){return void 0===_._maxListeners?L.defaultMaxListeners:_._maxListeners}function A(_,D,C,a){var c,T,B;if(x(C),void 0===(T=_._events)?(T=_._events=Object.create(null),_._eventsCount=0):(void 0!==T.newListener&&(_.emit("newListener",D,C.listener?C.listener:C),T=_._events),B=T[D]),void 0===B)B=T[D]=C,++_._eventsCount;else if("function"==typeof B?B=T[D]=a?[C,B]:[B,C]:a?B.unshift(C):B.push(C),(c=W(_))>0&&B.length>c&&!B.warned){B.warned=!0;var ot=new Error("Possible EventEmitter memory leak detected. "+B.length+" "+String(D)+" listeners added. Use emitter.setMaxListeners() to increase limit");ot.name="MaxListenersExceededWarning",ot.emitter=_,ot.type=D,ot.count=B.length,console&&console.warn&&console.warn(ot)}return _}function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(_,D,C){var a={fired:!1,wrapFn:void 0,target:_,type:D,listener:C},c=y.bind(a);return c.listener=C,a.wrapFn=c,c}function w(_,D,C){var a=_._events;if(void 0===a)return[];var c=a[D];return void 0===c?[]:"function"==typeof c?C?[c.listener||c]:[c]:C?function(T){for(var B=new Array(T.length),q=0;q<B.length;++q)B[q]=T[q].listener||T[q];return B}(c):j(c,c.length)}function U(_){var D=this._events;if(void 0!==D){var C=D[_];if("function"==typeof C)return 1;if(void 0!==C)return C.length}return 0}function j(_,D){for(var C=new Array(D),a=0;a<D;++a)C[a]=_[a];return C}function $(_,D,C,a){if("function"==typeof _.on)a.once?_.once(D,C):_.on(D,C);else{if("function"!=typeof _.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _);_.addEventListener(D,function c(T){a.once&&_.removeEventListener(D,c),C(T)})}}function X(_){if("function"!=typeof _)throw new Error("obliterator/iterator: expecting a function!");this.next=_}Object.defineProperty(L,"defaultMaxListeners",{enumerable:!0,get:function(){return S},set:function(_){if("number"!=typeof _||_<0||I(_))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_+".");S=_}}),L.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},L.prototype.setMaxListeners=function(_){if("number"!=typeof _||_<0||I(_))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+_+".");return this._maxListeners=_,this},L.prototype.getMaxListeners=function(){return W(this)},L.prototype.emit=function(_){for(var D=[],C=1;C<arguments.length;C++)D.push(arguments[C]);var a="error"===_,c=this._events;if(void 0!==c)a=a&&void 0===c.error;else if(!a)return!1;if(a){var T;if(D.length>0&&(T=D[0]),T instanceof Error)throw T;var B=new Error("Unhandled error."+(T?" ("+T.message+")":""));throw B.context=T,B}var q=c[_];if(void 0===q)return!1;if("function"==typeof q)Y(q,this,D);else{var ot=q.length,bt=j(q,ot);for(C=0;C<ot;++C)Y(bt[C],this,D)}return!0},L.prototype.on=L.prototype.addListener=function(_,D){return A(this,_,D,!1)},L.prototype.prependListener=function(_,D){return A(this,_,D,!0)},L.prototype.once=function(_,D){return x(D),this.on(_,m(this,_,D)),this},L.prototype.prependOnceListener=function(_,D){return x(D),this.prependListener(_,m(this,_,D)),this},L.prototype.off=L.prototype.removeListener=function(_,D){var C,a,c,T,B;if(x(D),void 0===(a=this._events))return this;if(void 0===(C=a[_]))return this;if(C===D||C.listener===D)0==--this._eventsCount?this._events=Object.create(null):(delete a[_],a.removeListener&&this.emit("removeListener",_,C.listener||D));else if("function"!=typeof C){for(c=-1,T=C.length-1;T>=0;T--)if(C[T]===D||C[T].listener===D){B=C[T].listener,c=T;break}if(c<0)return this;0===c?C.shift():function(q,ot){for(;ot+1<q.length;ot++)q[ot]=q[ot+1];q.pop()}(C,c),1===C.length&&(a[_]=C[0]),void 0!==a.removeListener&&this.emit("removeListener",_,B||D)}return this},L.prototype.removeAllListeners=function(_){var D,C,a;if(void 0===(C=this._events))return this;if(void 0===C.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==C[_]&&(0==--this._eventsCount?this._events=Object.create(null):delete C[_]),this;if(0===arguments.length){var c,T=Object.keys(C);for(a=0;a<T.length;++a)"removeListener"!==(c=T[a])&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(D=C[_]))this.removeListener(_,D);else if(void 0!==D)for(a=D.length-1;a>=0;a--)this.removeListener(_,D[a]);return this},L.prototype.listeners=function(_){return w(this,_,!0)},L.prototype.rawListeners=function(_){return w(this,_,!1)},L.listenerCount=function(_,D){return"function"==typeof _.listenerCount?_.listenerCount(D):U.call(_,D)},L.prototype.listenerCount=U,L.prototype.eventNames=function(){return this._eventsCount>0?G(this._events):[]},"undefined"!=typeof Symbol&&(X.prototype[Symbol.iterator]=function(){return this}),X.of=function(){var _=arguments,D=_.length,C=0;return new X(function(){return C>=D?{done:!0}:{done:!1,value:_[C++]}})},X.empty=function(){return new X(function(){return{done:!0}})},X.fromSequence=function(_){var D=0,C=_.length;return new X(function(){return D>=C?{done:!0}:{done:!1,value:_[D++]}})},X.is=function(_){return _ instanceof X||"object"==typeof _&&null!==_&&"function"==typeof _.next};var tt=X,rt={};rt.ARRAY_BUFFER_SUPPORT="undefined"!=typeof ArrayBuffer,rt.SYMBOL_SUPPORT="undefined"!=typeof Symbol;var it=tt,lt=rt.ARRAY_BUFFER_SUPPORT,Et=rt.SYMBOL_SUPPORT,ht=function(_){var C,D="string"==typeof(C=_)||Array.isArray(C)||lt&&ArrayBuffer.isView(C)?it.fromSequence(C):"object"!=typeof C||null===C?null:Et&&"function"==typeof C[Symbol.iterator]?C[Symbol.iterator]():"function"==typeof C.next?C:null;if(!D)throw new Error("obliterator: target is not iterable nor a valid iterator.");return D},At=ht,Dt=function(_,D){for(var C,a=arguments.length>1?D:1/0,c=a!==1/0?new Array(a):[],T=0,B=At(_);;){if(T===a)return c;if((C=B.next()).done)return T!==D&&(c.length=T),c;c[T++]=C.value}},Pt=function(_){function D(C){var a;return(a=_.call(this)||this).name="GraphError",a.message=C,a}return N(D,_),D}(b(Error)),ut=function(_){function D(C){var a;return(a=_.call(this,C)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(v(a),D.prototype.constructor),a}return N(D,_),D}(Pt),dt=function(_){function D(C){var a;return(a=_.call(this,C)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(v(a),D.prototype.constructor),a}return N(D,_),D}(Pt),xt=function(_){function D(C){var a;return(a=_.call(this,C)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(v(a),D.prototype.constructor),a}return N(D,_),D}(Pt);function Zt(_,D){this.key=_,this.attributes=D,this.clear()}function Vt(_,D){this.key=_,this.attributes=D,this.clear()}function Xt(_,D){this.key=_,this.attributes=D,this.clear()}function Kt(_,D,C,a,c){this.key=D,this.attributes=c,this.undirected=_,this.source=C,this.target=a}function Qt(_,D,C,a,c,T,B){var q,ot,bt,wt;if(a=""+a,0===C){if(!(q=_._nodes.get(a)))throw new dt("Graph.".concat(D,': could not find the "').concat(a,'" node in the graph.'));bt=c,wt=T}else if(3===C){if(!(ot=_._edges.get(c=""+c)))throw new dt("Graph.".concat(D,': could not find the "').concat(c,'" edge in the graph.'));var vt=ot.source.key,Ct=ot.target.key;if(a===vt)q=ot.target;else{if(a!==Ct)throw new dt("Graph.".concat(D,': the "').concat(a,'" node is not attached to the "').concat(c,'" edge (').concat(vt,", ").concat(Ct,")."));q=ot.source}bt=T,wt=B}else{if(!(ot=_._edges.get(a)))throw new dt("Graph.".concat(D,': could not find the "').concat(a,'" edge in the graph.'));q=1===C?ot.source:ot.target,bt=c,wt=T}return[q,bt,wt]}Zt.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}},Vt.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}},Xt.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}},Kt.prototype.attach=function(){var _="out",D="in";this.undirected&&(_=D="undirected");var C=this.source.key,a=this.target.key;this.source[_][a]=this,this.undirected&&C===a||(this.target[D][C]=this)},Kt.prototype.attachMulti=function(){var _="out",D="in",C=this.source.key,a=this.target.key;this.undirected&&(_=D="undirected");var c=this.source[_],T=c[a];if(void 0===T)return c[a]=this,void(this.undirected&&C===a||(this.target[D][C]=this));T.previous=this,this.next=T,c[a]=this,this.target[D][C]=this},Kt.prototype.detach=function(){var _=this.source.key,C="out",a="in";this.undirected&&(C=a="undirected"),delete this.source[C][this.target.key],delete this.target[a][_]},Kt.prototype.detachMulti=function(){var _=this.source.key,D=this.target.key,C="out",a="in";this.undirected&&(C=a="undirected"),void 0===this.previous?void 0===this.next?(delete this.source[C][D],delete this.target[a][_]):(this.next.previous=void 0,this.source[C][D]=this.next,this.target[a][_]=this.next):(this.previous.next=this.next,void 0!==this.next&&(this.next.previous=this.previous))};var ue=[{name:function(_){return"get".concat(_,"Attribute")},attacher:function(_,D,C){_.prototype[D]=function(a,c,T){var B=Qt(this,D,C,a,c,T);return B[0].attributes[B[1]]}}},{name:function(_){return"get".concat(_,"Attributes")},attacher:function(_,D,C){_.prototype[D]=function(a,c){return Qt(this,D,C,a,c)[0].attributes}}},{name:function(_){return"has".concat(_,"Attribute")},attacher:function(_,D,C){_.prototype[D]=function(a,c,T){var B=Qt(this,D,C,a,c,T);return B[0].attributes.hasOwnProperty(B[1])}}},{name:function(_){return"set".concat(_,"Attribute")},attacher:function(_,D,C){_.prototype[D]=function(a,c,T,B){var q=Qt(this,D,C,a,c,T,B),ot=q[0],bt=q[1];return ot.attributes[bt]=q[2],this.emit("nodeAttributesUpdated",{key:ot.key,type:"set",attributes:ot.attributes,name:bt}),this}}},{name:function(_){return"update".concat(_,"Attribute")},attacher:function(_,D,C){_.prototype[D]=function(a,c,T,B){var q=Qt(this,D,C,a,c,T,B),ot=q[0],bt=q[1],wt=q[2];if("function"!=typeof wt)throw new ut("Graph.".concat(D,": updater should be a function."));var vt=ot.attributes,Ct=wt(vt[bt]);return vt[bt]=Ct,this.emit("nodeAttributesUpdated",{key:ot.key,type:"set",attributes:ot.attributes,name:bt}),this}}},{name:function(_){return"remove".concat(_,"Attribute")},attacher:function(_,D,C){_.prototype[D]=function(a,c,T){var B=Qt(this,D,C,a,c,T),q=B[0],ot=B[1];return delete q.attributes[ot],this.emit("nodeAttributesUpdated",{key:q.key,type:"remove",attributes:q.attributes,name:ot}),this}}},{name:function(_){return"replace".concat(_,"Attributes")},attacher:function(_,D,C){_.prototype[D]=function(a,c,T){var B=Qt(this,D,C,a,c,T),q=B[0],ot=B[1];if(!h(ot))throw new ut("Graph.".concat(D,": provided attributes are not a plain object."));return q.attributes=ot,this.emit("nodeAttributesUpdated",{key:q.key,type:"replace",attributes:q.attributes}),this}}},{name:function(_){return"merge".concat(_,"Attributes")},attacher:function(_,D,C){_.prototype[D]=function(a,c,T){var B=Qt(this,D,C,a,c,T),q=B[0],ot=B[1];if(!h(ot))throw new ut("Graph.".concat(D,": provided attributes are not a plain object."));return E(q.attributes,ot),this.emit("nodeAttributesUpdated",{key:q.key,type:"merge",attributes:q.attributes,data:ot}),this}}},{name:function(_){return"update".concat(_,"Attributes")},attacher:function(_,D,C){_.prototype[D]=function(a,c,T){var B=Qt(this,D,C,a,c,T),q=B[0],ot=B[1];if("function"!=typeof ot)throw new ut("Graph.".concat(D,": provided updater is not a function."));return q.attributes=ot(q.attributes),this.emit("nodeAttributesUpdated",{key:q.key,type:"update",attributes:q.attributes}),this}}}],ge=[{name:function(_){return"get".concat(_,"Attribute")},attacher:function(_,D,C){_.prototype[D]=function(a,c){var T;if("mixed"!==this.type&&"mixed"!==C&&C!==this.type)throw new xt("Graph.".concat(D,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new xt("Graph.".concat(D,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var B=""+a,q=""+c;if(c=arguments[2],!(T=s(this,B,q,C)))throw new dt("Graph.".concat(D,': could not find an edge for the given path ("').concat(B,'" - "').concat(q,'").'))}else{if("mixed"!==C)throw new xt("Graph.".concat(D,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(T=this._edges.get(a=""+a)))throw new dt("Graph.".concat(D,': could not find the "').concat(a,'" edge in the graph.'))}return T.attributes[c]}}},{name:function(_){return"get".concat(_,"Attributes")},attacher:function(_,D,C){_.prototype[D]=function(a){var c;if("mixed"!==this.type&&"mixed"!==C&&C!==this.type)throw new xt("Graph.".concat(D,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new xt("Graph.".concat(D,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var T=""+a,B=""+arguments[1];if(!(c=s(this,T,B,C)))throw new dt("Graph.".concat(D,': could not find an edge for the given path ("').concat(T,'" - "').concat(B,'").'))}else{if("mixed"!==C)throw new xt("Graph.".concat(D,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(c=this._edges.get(a=""+a)))throw new dt("Graph.".concat(D,': could not find the "').concat(a,'" edge in the graph.'))}return c.attributes}}},{name:function(_){return"has".concat(_,"Attribute")},attacher:function(_,D,C){_.prototype[D]=function(a,c){var T;if("mixed"!==this.type&&"mixed"!==C&&C!==this.type)throw new xt("Graph.".concat(D,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new xt("Graph.".concat(D,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var B=""+a,q=""+c;if(c=arguments[2],!(T=s(this,B,q,C)))throw new dt("Graph.".concat(D,': could not find an edge for the given path ("').concat(B,'" - "').concat(q,'").'))}else{if("mixed"!==C)throw new xt("Graph.".concat(D,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(T=this._edges.get(a=""+a)))throw new dt("Graph.".concat(D,': could not find the "').concat(a,'" edge in the graph.'))}return T.attributes.hasOwnProperty(c)}}},{name:function(_){return"set".concat(_,"Attribute")},attacher:function(_,D,C){_.prototype[D]=function(a,c,T){var B;if("mixed"!==this.type&&"mixed"!==C&&C!==this.type)throw new xt("Graph.".concat(D,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new xt("Graph.".concat(D,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var q=""+a,ot=""+c;if(c=arguments[2],T=arguments[3],!(B=s(this,q,ot,C)))throw new dt("Graph.".concat(D,': could not find an edge for the given path ("').concat(q,'" - "').concat(ot,'").'))}else{if("mixed"!==C)throw new xt("Graph.".concat(D,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(B=this._edges.get(a=""+a)))throw new dt("Graph.".concat(D,': could not find the "').concat(a,'" edge in the graph.'))}return B.attributes[c]=T,this.emit("edgeAttributesUpdated",{key:B.key,type:"set",attributes:B.attributes,name:c}),this}}},{name:function(_){return"update".concat(_,"Attribute")},attacher:function(_,D,C){_.prototype[D]=function(a,c,T){var B;if("mixed"!==this.type&&"mixed"!==C&&C!==this.type)throw new xt("Graph.".concat(D,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new xt("Graph.".concat(D,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var q=""+a,ot=""+c;if(c=arguments[2],T=arguments[3],!(B=s(this,q,ot,C)))throw new dt("Graph.".concat(D,': could not find an edge for the given path ("').concat(q,'" - "').concat(ot,'").'))}else{if("mixed"!==C)throw new xt("Graph.".concat(D,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(B=this._edges.get(a=""+a)))throw new dt("Graph.".concat(D,': could not find the "').concat(a,'" edge in the graph.'))}if("function"!=typeof T)throw new ut("Graph.".concat(D,": updater should be a function."));return B.attributes[c]=T(B.attributes[c]),this.emit("edgeAttributesUpdated",{key:B.key,type:"set",attributes:B.attributes,name:c}),this}}},{name:function(_){return"remove".concat(_,"Attribute")},attacher:function(_,D,C){_.prototype[D]=function(a,c){var T;if("mixed"!==this.type&&"mixed"!==C&&C!==this.type)throw new xt("Graph.".concat(D,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new xt("Graph.".concat(D,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var B=""+a,q=""+c;if(c=arguments[2],!(T=s(this,B,q,C)))throw new dt("Graph.".concat(D,': could not find an edge for the given path ("').concat(B,'" - "').concat(q,'").'))}else{if("mixed"!==C)throw new xt("Graph.".concat(D,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(T=this._edges.get(a=""+a)))throw new dt("Graph.".concat(D,': could not find the "').concat(a,'" edge in the graph.'))}return delete T.attributes[c],this.emit("edgeAttributesUpdated",{key:T.key,type:"remove",attributes:T.attributes,name:c}),this}}},{name:function(_){return"replace".concat(_,"Attributes")},attacher:function(_,D,C){_.prototype[D]=function(a,c){var T;if("mixed"!==this.type&&"mixed"!==C&&C!==this.type)throw new xt("Graph.".concat(D,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new xt("Graph.".concat(D,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var B=""+a,q=""+c;if(c=arguments[2],!(T=s(this,B,q,C)))throw new dt("Graph.".concat(D,': could not find an edge for the given path ("').concat(B,'" - "').concat(q,'").'))}else{if("mixed"!==C)throw new xt("Graph.".concat(D,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(T=this._edges.get(a=""+a)))throw new dt("Graph.".concat(D,': could not find the "').concat(a,'" edge in the graph.'))}if(!h(c))throw new ut("Graph.".concat(D,": provided attributes are not a plain object."));return T.attributes=c,this.emit("edgeAttributesUpdated",{key:T.key,type:"replace",attributes:T.attributes}),this}}},{name:function(_){return"merge".concat(_,"Attributes")},attacher:function(_,D,C){_.prototype[D]=function(a,c){var T;if("mixed"!==this.type&&"mixed"!==C&&C!==this.type)throw new xt("Graph.".concat(D,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new xt("Graph.".concat(D,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var B=""+a,q=""+c;if(c=arguments[2],!(T=s(this,B,q,C)))throw new dt("Graph.".concat(D,': could not find an edge for the given path ("').concat(B,'" - "').concat(q,'").'))}else{if("mixed"!==C)throw new xt("Graph.".concat(D,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(T=this._edges.get(a=""+a)))throw new dt("Graph.".concat(D,': could not find the "').concat(a,'" edge in the graph.'))}if(!h(c))throw new ut("Graph.".concat(D,": provided attributes are not a plain object."));return E(T.attributes,c),this.emit("edgeAttributesUpdated",{key:T.key,type:"merge",attributes:T.attributes,data:c}),this}}},{name:function(_){return"update".concat(_,"Attributes")},attacher:function(_,D,C){_.prototype[D]=function(a,c){var T;if("mixed"!==this.type&&"mixed"!==C&&C!==this.type)throw new xt("Graph.".concat(D,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new xt("Graph.".concat(D,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var B=""+a,q=""+c;if(c=arguments[2],!(T=s(this,B,q,C)))throw new dt("Graph.".concat(D,': could not find an edge for the given path ("').concat(B,'" - "').concat(q,'").'))}else{if("mixed"!==C)throw new xt("Graph.".concat(D,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(T=this._edges.get(a=""+a)))throw new dt("Graph.".concat(D,': could not find the "').concat(a,'" edge in the graph.'))}if("function"!=typeof c)throw new ut("Graph.".concat(D,": provided updater is not a function."));return T.attributes=c(T.attributes),this.emit("edgeAttributesUpdated",{key:T.key,type:"update",attributes:T.attributes}),this}}}],oe=tt,Le=ht,ce=function(){var _=arguments,D=null,C=-1;return new oe(function(){for(var a=null;;){if(null===D){if(++C>=_.length)return{done:!0};D=Le(_[C])}if(!0!==(a=D.next()).done)break;D=null}return a})},Rn=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Pn(_,D,C,a){var c=!1;for(var T in D)if(T!==a){var B=D[T];if(c=C(B.key,B.attributes,B.source.key,B.target.key,B.source.attributes,B.target.attributes,B.undirected),_&&c)return B.key}}function Ce(_,D,C,a){var c,T,B,q=!1;for(var ot in D)if(ot!==a){c=D[ot];do{if(q=C(c.key,c.attributes,(T=c.source).key,(B=c.target).key,T.attributes,B.attributes,c.undirected),_&&q)return c.key;c=c.next}while(void 0!==c)}}function De(_,D){var C,a=Object.keys(_),c=a.length,T=0;return new tt(function(){do{if(C)C=C.next;else{if(T>=c)return{done:!0};var B=a[T++];if(B===D){C=void 0;continue}C=_[B]}}while(!C);return{done:!1,value:{edge:C.key,attributes:C.attributes,source:C.source.key,target:C.target.key,sourceAttributes:C.source.attributes,targetAttributes:C.target.attributes,undirected:C.undirected}}})}function On(_,D,C,a){var c=D[C];if(c){var T=c.source,B=c.target;return a(c.key,c.attributes,T.key,B.key,T.attributes,B.attributes,c.undirected)&&_?c.key:void 0}}function In(_,D,C,a){var c=D[C];if(c){var T=!1;do{if(T=a(c.key,c.attributes,c.source.key,c.target.key,c.source.attributes,c.target.attributes,c.undirected),_&&T)return c.key;c=c.next}while(void 0!==c)}}function Fn(_,D){var C=_[D];return void 0!==C.next?new tt(function(){if(!C)return{done:!0};var a={edge:C.key,attributes:C.attributes,source:C.source.key,target:C.target.key,sourceAttributes:C.source.attributes,targetAttributes:C.target.attributes,undirected:C.undirected};return C=C.next,{done:!1,value:a}}):tt.of({edge:C.key,attributes:C.attributes,source:C.source.key,target:C.target.key,sourceAttributes:C.source.attributes,targetAttributes:C.target.attributes,undirected:C.undirected})}function ui(_,D){if(0===_.size)return[];if("mixed"===D||D===_.type)return"function"==typeof Array.from?Array.from(_._edges.keys()):Dt(_._edges.keys(),_._edges.size);for(var C,a,T=new Array("undirected"===D?_.undirectedSize:_.directedSize),B="undirected"===D,q=_._edges.values(),ot=0;!0!==(C=q.next()).done;)(a=C.value).undirected===B&&(T[ot++]=a.key);return T}function rr(_,D,C,a){if(0!==D.size)for(var c,T,B="mixed"!==C&&C!==D.type,q="undirected"===C,ot=!1,bt=D._edges.values();!0!==(c=bt.next()).done;)if(T=c.value,!B||T.undirected===q){var vt=T.key,St=T.source,Ft=T.target;if(ot=a(vt,T.attributes,St.key,Ft.key,St.attributes,Ft.attributes,T.undirected),_&&ot)return vt}}function ci(_,D){if(0===_.size)return tt.empty();var C="mixed"!==D&&D!==_.type,a="undirected"===D,c=_._edges.values();return new tt(function(){for(var T,B;;){if((T=c.next()).done)return T;if(B=T.value,!C||B.undirected===a)break}return{value:{edge:B.key,attributes:B.attributes,source:B.source.key,target:B.target.key,sourceAttributes:B.source.attributes,targetAttributes:B.target.attributes,undirected:B.undirected},done:!1}})}function Gn(_,D,C,a,c,T){var B,q=D?Ce:Pn;if("undirected"!==C&&("out"!==a&&(B=q(_,c.in,T),_&&B)||"in"!==a&&(B=q(_,c.out,T,a?void 0:c.key),_&&B))||"directed"!==C&&(B=q(_,c.undirected,T),_&&B))return B}function hi(_,D,C,a){var c=[];return Gn(!1,_,D,C,a,function(T){c.push(T)}),c}function je(_,D,C){var a=tt.empty();return"undirected"!==_&&("out"!==D&&void 0!==C.in&&(a=ce(a,De(C.in))),"in"!==D&&void 0!==C.out&&(a=ce(a,De(C.out,D?void 0:C.key)))),"directed"!==_&&void 0!==C.undirected&&(a=ce(a,De(C.undirected))),a}function kn(_,D,C,a,c,T,B){var q,ot=C?In:On;if("undirected"!==D&&(void 0!==c.in&&"out"!==a&&(q=ot(_,c.in,T,B),_&&q)||void 0!==c.out&&"in"!==a&&(a||c.key!==T)&&(q=ot(_,c.out,T,B),_&&q))||"directed"!==D&&void 0!==c.undirected&&(q=ot(_,c.undirected,T,B),_&&q))return q}function Ke(_,D,C,a,c){var T=[];return kn(!1,_,D,C,a,c,function(B){T.push(B)}),T}function li(_,D,C,a){var c=tt.empty();return"undirected"!==_&&(void 0!==C.in&&"out"!==D&&a in C.in&&(c=ce(c,Fn(C.in,a))),void 0!==C.out&&"in"!==D&&a in C.out&&(D||C.key!==a)&&(c=ce(c,Fn(C.out,a)))),"directed"!==_&&void 0!==C.undirected&&a in C.undirected&&(c=ce(c,Fn(C.undirected,a))),c}var fi=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function hn(){this.A=null,this.B=null}function Qe(_,D,C,a,c){for(var T in a){var B=a[T],q=B.source,bt=q===C?B.target:q;if(!D||!D.has(bt.key)){var wt=c(bt.key,bt.attributes);if(_&&wt)return bt.key}}}function zn(_,D,C,a,c){if("mixed"!==D){if("undirected"===D)return Qe(_,null,a,a.undirected,c);if("string"==typeof C)return Qe(_,null,a,a[C],c)}var T,B=new hn;if("undirected"!==D){if("out"!==C){if(T=Qe(_,null,a,a.in,c),_&&T)return T;B.wrap(a.in)}if("in"!==C){if(T=Qe(_,B,a,a.out,c),_&&T)return T;B.wrap(a.out)}}if("directed"!==D&&(T=Qe(_,B,a,a.undirected,c),_&&T))return T}function We(_,D,C){var a=Object.keys(C),c=a.length,T=0;return new tt(function(){var B=null;do{if(T>=c)return _&&_.wrap(C),{done:!0};var q=C[a[T++]],ot=q.source;B=ot===D?q.target:ot,_&&_.has(B.key)&&(B=null)}while(null===B);return{done:!1,value:{neighbor:B.key,attributes:B.attributes}}})}function Be(_,D,C,a,c){for(var T,B,q,ot,bt,wt,vt,Ct=a._nodes.values(),St=a.type;!0!==(T=Ct.next()).done;){var Ft=!1;if(B=T.value,"undirected"!==St)for(q in ot=B.out){bt=ot[q];do{if(Ft=!0,vt=c(B.key,(wt=bt.target).key,B.attributes,wt.attributes,bt.key,bt.attributes,bt.undirected),_&&vt)return bt;bt=bt.next}while(bt)}if("directed"!==St)for(q in ot=B.undirected)if(!(D&&B.key>q)){bt=ot[q];do{if((wt=bt.target).key!==q&&(wt=bt.source),Ft=!0,vt=c(B.key,wt.key,B.attributes,wt.attributes,bt.key,bt.attributes,bt.undirected),_&&vt)return bt;bt=bt.next}while(bt)}if(C&&!Ft&&(vt=c(B.key,null,B.attributes,null,null,null,null),_&&vt))return null}}function ir(_){if(!h(_))throw new ut('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in _))throw new ut("Graph.import: serialized node is missing its key.");if("attributes"in _&&(!h(_.attributes)||null===_.attributes))throw new ut("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function pi(_){if(!h(_))throw new ut('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in _))throw new ut("Graph.import: serialized edge is missing its source.");if(!("target"in _))throw new ut("Graph.import: serialized edge is missing its target.");if("attributes"in _&&(!h(_.attributes)||null===_.attributes))throw new ut("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in _&&"boolean"!=typeof _.undirected)throw new ut("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}hn.prototype.wrap=function(_){null===this.A?this.A=_:null===this.B&&(this.B=_)},hn.prototype.has=function(_){return null!==this.A&&_ in this.A||null!==this.B&&_ in this.B};var or,gi=(or=255&Math.floor(256*Math.random()),function(){return or++}),vi=new Set(["directed","undirected","mixed"]),ar=new Set(["domain","_events","_eventsCount","_maxListeners"]),Ie={allowSelfLoops:!0,multi:!1,type:"mixed"};function sr(_,D,C){var a=new _.NodeDataClass(D,C);return _._nodes.set(D,a),_.emit("nodeAdded",{key:D,attributes:C}),a}function ur(_,D,C,a,c,T,B,q){if(!a&&"undirected"===_.type)throw new xt("Graph.".concat(D,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(a&&"directed"===_.type)throw new xt("Graph.".concat(D,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(q&&!h(q))throw new ut("Graph.".concat(D,': invalid attributes. Expecting an object but got "').concat(q,'"'));if(T=""+T,B=""+B,q=q||{},!_.allowSelfLoops&&T===B)throw new xt("Graph.".concat(D,': source & target are the same ("').concat(T,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var ot=_._nodes.get(T),bt=_._nodes.get(B);if(!ot)throw new dt("Graph.".concat(D,': source node "').concat(T,'" not found.'));if(!bt)throw new dt("Graph.".concat(D,': target node "').concat(B,'" not found.'));var wt={key:null,undirected:a,source:T,target:B,attributes:q};if(C)c=_._edgeKeyGenerator();else if(_._edges.has(c=""+c))throw new xt("Graph.".concat(D,': the "').concat(c,'" edge already exists in the graph.'));if(!_.multi&&(a?void 0!==ot.undirected[B]:void 0!==ot.out[B]))throw new xt("Graph.".concat(D,': an edge linking "').concat(T,'" to "').concat(B,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var vt=new Kt(a,c,ot,bt,q);_._edges.set(c,vt);var Ct=T===B;return a?(ot.undirectedDegree++,bt.undirectedDegree++,Ct&&(ot.undirectedLoops++,_._undirectedSelfLoopCount++)):(ot.outDegree++,bt.inDegree++,Ct&&(ot.directedLoops++,_._directedSelfLoopCount++)),_.multi?vt.attachMulti():vt.attach(),a?_._undirectedSize++:_._directedSize++,wt.key=c,_.emit("edgeAdded",wt),c}function yi(_,D,C,a,c,T,B,q,ot){if(!a&&"undirected"===_.type)throw new xt("Graph.".concat(D,": you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead."));if(a&&"directed"===_.type)throw new xt("Graph.".concat(D,": you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead."));if(q)if(ot){if("function"!=typeof q)throw new ut("Graph.".concat(D,': invalid updater function. Expecting a function but got "').concat(q,'"'))}else if(!h(q))throw new ut("Graph.".concat(D,': invalid attributes. Expecting an object but got "').concat(q,'"'));var bt;if(T=""+T,B=""+B,ot&&(bt=q,q=void 0),!_.allowSelfLoops&&T===B)throw new xt("Graph.".concat(D,': source & target are the same ("').concat(T,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var wt,vt,Ct=_._nodes.get(T),St=_._nodes.get(B);if(!C&&(wt=_._edges.get(c))){if(!(wt.source.key===T&&wt.target.key===B||a&&wt.source.key===B&&wt.target.key===T))throw new xt("Graph.".concat(D,': inconsistency detected when attempting to merge the "').concat(c,'" edge with "').concat(T,'" source & "').concat(B,'" target vs. ("').concat(wt.source.key,'", "').concat(wt.target.key,'").'));vt=wt}if(vt||_.multi||!Ct||(vt=a?Ct.undirected[B]:Ct.out[B]),vt){var Ft=[vt.key,!1,!1,!1];return(ot?bt:q)?(ot?(vt.attributes=bt(vt.attributes),_.emit("edgeAttributesUpdated",{type:"replace",key:vt.key,attributes:vt.attributes})):(E(vt.attributes,q),_.emit("edgeAttributesUpdated",{type:"merge",key:vt.key,attributes:vt.attributes,data:q})),Ft):Ft}q=q||{},ot&&bt&&(q=bt(q));var te={key:null,undirected:a,source:T,target:B,attributes:q};if(C)c=_._edgeKeyGenerator();else if(_._edges.has(c=""+c))throw new xt("Graph.".concat(D,': the "').concat(c,'" edge already exists in the graph.'));var ae=!1,ie=!1;Ct||(Ct=sr(_,T,{}),ae=!0,T===B&&(St=Ct,ie=!0)),St||(St=sr(_,B,{}),ie=!0),wt=new Kt(a,c,Ct,St,q),_._edges.set(c,wt);var ve=T===B;return a?(Ct.undirectedDegree++,St.undirectedDegree++,ve&&(Ct.undirectedLoops++,_._undirectedSelfLoopCount++)):(Ct.outDegree++,St.inDegree++,ve&&(Ct.directedLoops++,_._directedSelfLoopCount++)),_.multi?wt.attachMulti():wt.attach(),a?_._undirectedSize++:_._directedSize++,te.key=c,_.emit("edgeAdded",te),[c,!0,ae,ie]}function Ze(_,D){_._edges.delete(D.key);var C=D.source,a=D.target,c=D.attributes,T=D.undirected,B=C===a;T?(C.undirectedDegree--,a.undirectedDegree--,B&&(C.undirectedLoops--,_._undirectedSelfLoopCount--)):(C.outDegree--,a.inDegree--,B&&(C.directedLoops--,_._directedSelfLoopCount--)),_.multi?D.detachMulti():D.detach(),T?_._undirectedSize--:_._directedSize--,_.emit("edgeDropped",{key:D.key,attributes:c,source:C.key,target:a.key,undirected:T})}var _,Jt=function(_){function D(a){var c;if(c=_.call(this)||this,"boolean"!=typeof(a=E({},Ie,a)).multi)throw new ut("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(a.multi,'".'));if(!vi.has(a.type))throw new ut('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(a.type,'".'));if("boolean"!=typeof a.allowSelfLoops)throw new ut("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(a.allowSelfLoops,'".'));var T="mixed"===a.type?Zt:"directed"===a.type?Vt:Xt;f(v(c),"NodeDataClass",T);var B="geid_"+gi()+"_",q=0;return f(v(c),"_attributes",{}),f(v(c),"_nodes",new Map),f(v(c),"_edges",new Map),f(v(c),"_directedSize",0),f(v(c),"_undirectedSize",0),f(v(c),"_directedSelfLoopCount",0),f(v(c),"_undirectedSelfLoopCount",0),f(v(c),"_edgeKeyGenerator",function(){var ot;do{ot=B+q++}while(c._edges.has(ot));return ot}),f(v(c),"_options",a),ar.forEach(function(ot){return f(v(c),ot,c[ot])}),d(v(c),"order",function(){return c._nodes.size}),d(v(c),"size",function(){return c._edges.size}),d(v(c),"directedSize",function(){return c._directedSize}),d(v(c),"undirectedSize",function(){return c._undirectedSize}),d(v(c),"selfLoopCount",function(){return c._directedSelfLoopCount+c._undirectedSelfLoopCount}),d(v(c),"directedSelfLoopCount",function(){return c._directedSelfLoopCount}),d(v(c),"undirectedSelfLoopCount",function(){return c._undirectedSelfLoopCount}),d(v(c),"multi",c._options.multi),d(v(c),"type",c._options.type),d(v(c),"allowSelfLoops",c._options.allowSelfLoops),d(v(c),"implementation",function(){return"graphology"}),c}N(D,_);var C=D.prototype;return C._resetInstanceCounters=function(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0},C.hasNode=function(a){return this._nodes.has(""+a)},C.hasDirectedEdge=function(a,c){if("undirected"===this.type)return!1;if(1===arguments.length){var B=this._edges.get(""+a);return!!B&&!B.undirected}if(2===arguments.length){c=""+c;var q=this._nodes.get(a=""+a);return!!q&&q.out.hasOwnProperty(c)}throw new ut("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},C.hasUndirectedEdge=function(a,c){if("directed"===this.type)return!1;if(1===arguments.length){var B=this._edges.get(""+a);return!!B&&B.undirected}if(2===arguments.length){c=""+c;var q=this._nodes.get(a=""+a);return!!q&&q.undirected.hasOwnProperty(c)}throw new ut("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},C.hasEdge=function(a,c){if(1===arguments.length)return this._edges.has(""+a);if(2===arguments.length){c=""+c;var B=this._nodes.get(a=""+a);return!!B&&(void 0!==B.out&&B.out.hasOwnProperty(c)||void 0!==B.undirected&&B.undirected.hasOwnProperty(c))}throw new ut("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},C.directedEdge=function(a,c){if("undirected"!==this.type){if(a=""+a,c=""+c,this.multi)throw new xt("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var T=this._nodes.get(a);if(!T)throw new dt('Graph.directedEdge: could not find the "'.concat(a,'" source node in the graph.'));if(!this._nodes.has(c))throw new dt('Graph.directedEdge: could not find the "'.concat(c,'" target node in the graph.'));var B=T.out&&T.out[c]||void 0;return B?B.key:void 0}},C.undirectedEdge=function(a,c){if("directed"!==this.type){if(a=""+a,c=""+c,this.multi)throw new xt("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var T=this._nodes.get(a);if(!T)throw new dt('Graph.undirectedEdge: could not find the "'.concat(a,'" source node in the graph.'));if(!this._nodes.has(c))throw new dt('Graph.undirectedEdge: could not find the "'.concat(c,'" target node in the graph.'));var B=T.undirected&&T.undirected[c]||void 0;return B?B.key:void 0}},C.edge=function(a,c){if(this.multi)throw new xt("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");c=""+c;var T=this._nodes.get(a=""+a);if(!T)throw new dt('Graph.edge: could not find the "'.concat(a,'" source node in the graph.'));if(!this._nodes.has(c))throw new dt('Graph.edge: could not find the "'.concat(c,'" target node in the graph.'));var B=T.out&&T.out[c]||T.undirected&&T.undirected[c]||void 0;if(B)return B.key},C.areDirectedNeighbors=function(a,c){c=""+c;var T=this._nodes.get(a=""+a);if(!T)throw new dt('Graph.areDirectedNeighbors: could not find the "'.concat(a,'" node in the graph.'));return"undirected"!==this.type&&(c in T.in||c in T.out)},C.areOutNeighbors=function(a,c){c=""+c;var T=this._nodes.get(a=""+a);if(!T)throw new dt('Graph.areOutNeighbors: could not find the "'.concat(a,'" node in the graph.'));return"undirected"!==this.type&&c in T.out},C.areInNeighbors=function(a,c){c=""+c;var T=this._nodes.get(a=""+a);if(!T)throw new dt('Graph.areInNeighbors: could not find the "'.concat(a,'" node in the graph.'));return"undirected"!==this.type&&c in T.in},C.areUndirectedNeighbors=function(a,c){c=""+c;var T=this._nodes.get(a=""+a);if(!T)throw new dt('Graph.areUndirectedNeighbors: could not find the "'.concat(a,'" node in the graph.'));return"directed"!==this.type&&c in T.undirected},C.areNeighbors=function(a,c){c=""+c;var T=this._nodes.get(a=""+a);if(!T)throw new dt('Graph.areNeighbors: could not find the "'.concat(a,'" node in the graph.'));return"undirected"!==this.type&&(c in T.in||c in T.out)||"directed"!==this.type&&c in T.undirected},C.areInboundNeighbors=function(a,c){c=""+c;var T=this._nodes.get(a=""+a);if(!T)throw new dt('Graph.areInboundNeighbors: could not find the "'.concat(a,'" node in the graph.'));return"undirected"!==this.type&&c in T.in||"directed"!==this.type&&c in T.undirected},C.areOutboundNeighbors=function(a,c){c=""+c;var T=this._nodes.get(a=""+a);if(!T)throw new dt('Graph.areOutboundNeighbors: could not find the "'.concat(a,'" node in the graph.'));return"undirected"!==this.type&&c in T.out||"directed"!==this.type&&c in T.undirected},C.inDegree=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new dt('Graph.inDegree: could not find the "'.concat(a,'" node in the graph.'));return"undirected"===this.type?0:c.inDegree},C.outDegree=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new dt('Graph.outDegree: could not find the "'.concat(a,'" node in the graph.'));return"undirected"===this.type?0:c.outDegree},C.directedDegree=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new dt('Graph.directedDegree: could not find the "'.concat(a,'" node in the graph.'));return"undirected"===this.type?0:c.inDegree+c.outDegree},C.undirectedDegree=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new dt('Graph.undirectedDegree: could not find the "'.concat(a,'" node in the graph.'));return"directed"===this.type?0:c.undirectedDegree},C.inboundDegree=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new dt('Graph.inboundDegree: could not find the "'.concat(a,'" node in the graph.'));var T=0;return"directed"!==this.type&&(T+=c.undirectedDegree),"undirected"!==this.type&&(T+=c.inDegree),T},C.outboundDegree=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new dt('Graph.outboundDegree: could not find the "'.concat(a,'" node in the graph.'));var T=0;return"directed"!==this.type&&(T+=c.undirectedDegree),"undirected"!==this.type&&(T+=c.outDegree),T},C.degree=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new dt('Graph.degree: could not find the "'.concat(a,'" node in the graph.'));var T=0;return"directed"!==this.type&&(T+=c.undirectedDegree),"undirected"!==this.type&&(T+=c.inDegree+c.outDegree),T},C.inDegreeWithoutSelfLoops=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new dt('Graph.inDegreeWithoutSelfLoops: could not find the "'.concat(a,'" node in the graph.'));return"undirected"===this.type?0:c.inDegree-c.directedLoops},C.outDegreeWithoutSelfLoops=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new dt('Graph.outDegreeWithoutSelfLoops: could not find the "'.concat(a,'" node in the graph.'));return"undirected"===this.type?0:c.outDegree-c.directedLoops},C.directedDegreeWithoutSelfLoops=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new dt('Graph.directedDegreeWithoutSelfLoops: could not find the "'.concat(a,'" node in the graph.'));return"undirected"===this.type?0:c.inDegree+c.outDegree-2*c.directedLoops},C.undirectedDegreeWithoutSelfLoops=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new dt('Graph.undirectedDegreeWithoutSelfLoops: could not find the "'.concat(a,'" node in the graph.'));return"directed"===this.type?0:c.undirectedDegree-2*c.undirectedLoops},C.inboundDegreeWithoutSelfLoops=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new dt('Graph.inboundDegreeWithoutSelfLoops: could not find the "'.concat(a,'" node in the graph.'));var T=0,B=0;return"directed"!==this.type&&(T+=c.undirectedDegree,B+=2*c.undirectedLoops),"undirected"!==this.type&&(T+=c.inDegree,B+=c.directedLoops),T-B},C.outboundDegreeWithoutSelfLoops=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new dt('Graph.outboundDegreeWithoutSelfLoops: could not find the "'.concat(a,'" node in the graph.'));var T=0,B=0;return"directed"!==this.type&&(T+=c.undirectedDegree,B+=2*c.undirectedLoops),"undirected"!==this.type&&(T+=c.outDegree,B+=c.directedLoops),T-B},C.degreeWithoutSelfLoops=function(a){var c=this._nodes.get(a=""+a);if(!c)throw new dt('Graph.degreeWithoutSelfLoops: could not find the "'.concat(a,'" node in the graph.'));var T=0,B=0;return"directed"!==this.type&&(T+=c.undirectedDegree,B+=2*c.undirectedLoops),"undirected"!==this.type&&(T+=c.inDegree+c.outDegree,B+=2*c.directedLoops),T-B},C.source=function(a){var c=this._edges.get(a=""+a);if(!c)throw new dt('Graph.source: could not find the "'.concat(a,'" edge in the graph.'));return c.source.key},C.target=function(a){var c=this._edges.get(a=""+a);if(!c)throw new dt('Graph.target: could not find the "'.concat(a,'" edge in the graph.'));return c.target.key},C.extremities=function(a){var c=this._edges.get(a=""+a);if(!c)throw new dt('Graph.extremities: could not find the "'.concat(a,'" edge in the graph.'));return[c.source.key,c.target.key]},C.opposite=function(a,c){a=""+a;var T=this._edges.get(c=""+c);if(!T)throw new dt('Graph.opposite: could not find the "'.concat(c,'" edge in the graph.'));var B=T.source.key,q=T.target.key;if(a===B)return q;if(a===q)return B;throw new dt('Graph.opposite: the "'.concat(a,'" node is not attached to the "').concat(c,'" edge (').concat(B,", ").concat(q,")."))},C.hasExtremity=function(a,c){c=""+c;var T=this._edges.get(a=""+a);if(!T)throw new dt('Graph.hasExtremity: could not find the "'.concat(a,'" edge in the graph.'));return T.source.key===c||T.target.key===c},C.isUndirected=function(a){var c=this._edges.get(a=""+a);if(!c)throw new dt('Graph.isUndirected: could not find the "'.concat(a,'" edge in the graph.'));return c.undirected},C.isDirected=function(a){var c=this._edges.get(a=""+a);if(!c)throw new dt('Graph.isDirected: could not find the "'.concat(a,'" edge in the graph.'));return!c.undirected},C.isSelfLoop=function(a){var c=this._edges.get(a=""+a);if(!c)throw new dt('Graph.isSelfLoop: could not find the "'.concat(a,'" edge in the graph.'));return c.source===c.target},C.addNode=function(a,c){return function(B,q,ot){if(ot&&!h(ot))throw new ut('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(ot,'"'));if(ot=ot||{},B._nodes.has(q=""+q))throw new xt('Graph.addNode: the "'.concat(q,'" node already exist in the graph.'));var bt=new B.NodeDataClass(q,ot);return B._nodes.set(q,bt),B.emit("nodeAdded",{key:q,attributes:ot}),bt}(this,a,c).key},C.mergeNode=function(a,c){if(c&&!h(c))throw new ut('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(c,'"'));c=c||{};var T=this._nodes.get(a=""+a);return T?(c&&(E(T.attributes,c),this.emit("nodeAttributesUpdated",{type:"merge",key:a,attributes:T.attributes,data:c})),[a,!1]):(T=new this.NodeDataClass(a,c),this._nodes.set(a,T),this.emit("nodeAdded",{key:a,attributes:c}),[a,!0])},C.updateNode=function(a,c){if(c&&"function"!=typeof c)throw new ut('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(c,'"'));var T=this._nodes.get(a=""+a);if(T)return c&&(T.attributes=c(T.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:a,attributes:T.attributes})),[a,!1];var q=c?c({}):{};return T=new this.NodeDataClass(a,q),this._nodes.set(a,T),this.emit("nodeAdded",{key:a,attributes:q}),[a,!0]},C.dropNode=function(a){var c,T=this._nodes.get(a=""+a);if(!T)throw new dt('Graph.dropNode: could not find the "'.concat(a,'" node in the graph.'));if("undirected"!==this.type){for(var B in T.out){c=T.out[B];do{Ze(this,c),c=c.next}while(c)}for(var q in T.in){c=T.in[q];do{Ze(this,c),c=c.next}while(c)}}if("directed"!==this.type)for(var ot in T.undirected){c=T.undirected[ot];do{Ze(this,c),c=c.next}while(c)}this._nodes.delete(a),this.emit("nodeDropped",{key:a,attributes:T.attributes})},C.dropEdge=function(a){var c;if(arguments.length>1){var T=""+arguments[0],B=""+arguments[1];if(!(c=s(this,T,B,this.type)))throw new dt('Graph.dropEdge: could not find the "'.concat(T,'" -> "').concat(B,'" edge in the graph.'))}else if(!(c=this._edges.get(a=""+a)))throw new dt('Graph.dropEdge: could not find the "'.concat(a,'" edge in the graph.'));return Ze(this,c),this},C.dropDirectedEdge=function(a,c){if(arguments.length<2)throw new xt("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new xt("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var T=s(this,a=""+a,c=""+c,"directed");if(!T)throw new dt('Graph.dropDirectedEdge: could not find a "'.concat(a,'" -> "').concat(c,'" edge in the graph.'));return Ze(this,T),this},C.dropUndirectedEdge=function(a,c){if(arguments.length<2)throw new xt("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new xt("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var T=s(this,a,c,"undirected");if(!T)throw new dt('Graph.dropUndirectedEdge: could not find a "'.concat(a,'" -> "').concat(c,'" edge in the graph.'));return Ze(this,T),this},C.clear=function(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")},C.clearEdges=function(){for(var a,c=this._nodes.values();!0!==(a=c.next()).done;)a.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")},C.getAttribute=function(a){return this._attributes[a]},C.getAttributes=function(){return this._attributes},C.hasAttribute=function(a){return this._attributes.hasOwnProperty(a)},C.setAttribute=function(a,c){return this._attributes[a]=c,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:a}),this},C.updateAttribute=function(a,c){if("function"!=typeof c)throw new ut("Graph.updateAttribute: updater should be a function.");return this._attributes[a]=c(this._attributes[a]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:a}),this},C.removeAttribute=function(a){return delete this._attributes[a],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:a}),this},C.replaceAttributes=function(a){if(!h(a))throw new ut("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=a,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},C.mergeAttributes=function(a){if(!h(a))throw new ut("Graph.mergeAttributes: provided attributes are not a plain object.");return E(this._attributes,a),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:a}),this},C.updateAttributes=function(a){if("function"!=typeof a)throw new ut("Graph.updateAttributes: provided updater is not a function.");return this._attributes=a(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this},C.updateEachNodeAttributes=function(a,c){if("function"!=typeof a)throw new ut("Graph.updateEachNodeAttributes: expecting an updater function.");if(c&&!l(c))throw new ut("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var T,B,q=this._nodes.values();!0!==(T=q.next()).done;)(B=T.value).attributes=a(B.key,B.attributes);this.emit("eachNodeAttributesUpdated",{hints:c||null})},C.updateEachEdgeAttributes=function(a,c){if("function"!=typeof a)throw new ut("Graph.updateEachEdgeAttributes: expecting an updater function.");if(c&&!l(c))throw new ut("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var T,B,q,ot,bt=this._edges.values();!0!==(T=bt.next()).done;)q=(B=T.value).source,B.attributes=a(B.key,B.attributes,q.key,(ot=B.target).key,q.attributes,ot.attributes,B.undirected);this.emit("eachEdgeAttributesUpdated",{hints:c||null})},C.forEachAdjacencyEntry=function(a){if("function"!=typeof a)throw new ut("Graph.forEachAdjacencyEntry: expecting a callback.");Be(!1,!1,!1,this,a)},C.forEachAdjacencyEntryWithOrphans=function(a){if("function"!=typeof a)throw new ut("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Be(!1,!1,!0,this,a)},C.forEachAssymetricAdjacencyEntry=function(a){if("function"!=typeof a)throw new ut("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Be(!1,!0,!1,this,a)},C.forEachAssymetricAdjacencyEntryWithOrphans=function(a){if("function"!=typeof a)throw new ut("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Be(!1,!0,!0,this,a)},C.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):Dt(this._nodes.keys(),this._nodes.size)},C.forEachNode=function(a){if("function"!=typeof a)throw new ut("Graph.forEachNode: expecting a callback.");for(var c,T,B=this._nodes.values();!0!==(c=B.next()).done;)a((T=c.value).key,T.attributes)},C.findNode=function(a){if("function"!=typeof a)throw new ut("Graph.findNode: expecting a callback.");for(var c,T,B=this._nodes.values();!0!==(c=B.next()).done;)if(a((T=c.value).key,T.attributes))return T.key},C.mapNodes=function(a){if("function"!=typeof a)throw new ut("Graph.mapNode: expecting a callback.");for(var c,T,B=this._nodes.values(),q=new Array(this.order),ot=0;!0!==(c=B.next()).done;)q[ot++]=a((T=c.value).key,T.attributes);return q},C.someNode=function(a){if("function"!=typeof a)throw new ut("Graph.someNode: expecting a callback.");for(var c,T,B=this._nodes.values();!0!==(c=B.next()).done;)if(a((T=c.value).key,T.attributes))return!0;return!1},C.everyNode=function(a){if("function"!=typeof a)throw new ut("Graph.everyNode: expecting a callback.");for(var c,T,B=this._nodes.values();!0!==(c=B.next()).done;)if(!a((T=c.value).key,T.attributes))return!1;return!0},C.filterNodes=function(a){if("function"!=typeof a)throw new ut("Graph.filterNodes: expecting a callback.");for(var c,T,B=this._nodes.values(),q=[];!0!==(c=B.next()).done;)a((T=c.value).key,T.attributes)&&q.push(T.key);return q},C.reduceNodes=function(a,c){if("function"!=typeof a)throw new ut("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new ut("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");for(var T,B,q=c,ot=this._nodes.values();!0!==(T=ot.next()).done;)q=a(q,(B=T.value).key,B.attributes);return q},C.nodeEntries=function(){var a=this._nodes.values();return new tt(function(){var c=a.next();if(c.done)return c;var T=c.value;return{value:{node:T.key,attributes:T.attributes},done:!1}})},C.export=function(){var a=this,c=new Array(this._nodes.size),T=0;this._nodes.forEach(function(q,ot){var wt,vt;c[T++]=(vt={key:ot},g((wt=q).attributes)||(vt.attributes=E({},wt.attributes)),vt)});var B=new Array(this._edges.size);return T=0,this._edges.forEach(function(q,ot){var bt,vt,Ct;B[T++]=(bt=a.type,Ct={key:ot,source:(vt=q).source.key,target:vt.target.key},g(vt.attributes)||(Ct.attributes=E({},vt.attributes)),"mixed"===bt&&vt.undirected&&(Ct.undirected=!0),Ct)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:c,edges:B}},C.import=function(a){var c,T,B,q,ot,bt=this,wt=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(a instanceof D)return a.forEachNode(function(ye,he){wt?bt.mergeNode(ye,he):bt.addNode(ye,he)}),a.forEachEdge(function(ye,he,Je,ln,go,vo,pr){wt?pr?bt.mergeUndirectedEdgeWithKey(ye,Je,ln,he):bt.mergeDirectedEdgeWithKey(ye,Je,ln,he):pr?bt.addUndirectedEdgeWithKey(ye,Je,ln,he):bt.addDirectedEdgeWithKey(ye,Je,ln,he)}),this;if(!h(a))throw new ut("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(a.attributes){if(!h(a.attributes))throw new ut("Graph.import: invalid attributes. Expecting a plain object.");wt?this.mergeAttributes(a.attributes):this.replaceAttributes(a.attributes)}if(a.nodes){if(B=a.nodes,!Array.isArray(B))throw new ut("Graph.import: invalid nodes. Expecting an array.");for(c=0,T=B.length;c<T;c++){ir(q=B[c]);var Ct=q.key,St=q.attributes;wt?this.mergeNode(Ct,St):this.addNode(Ct,St)}}if(a.edges){var Ft=!1;if("undirected"===this.type&&(Ft=!0),B=a.edges,!Array.isArray(B))throw new ut("Graph.import: invalid edges. Expecting an array.");for(c=0,T=B.length;c<T;c++){pi(ot=B[c]);var te=ot.source,ae=ot.target,ie=ot.attributes,ve=ot.undirected,_e=void 0===ve?Ft:ve;"key"in ot?(wt?_e?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:_e?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,ot.key,te,ae,ie):(wt?_e?this.mergeUndirectedEdge:this.mergeDirectedEdge:_e?this.addUndirectedEdge:this.addDirectedEdge).call(this,te,ae,ie)}}return this},C.nullCopy=function(a){var c=new D(E({},this._options,a));return c.replaceAttributes(E({},this.getAttributes())),c},C.emptyCopy=function(a){var c=this.nullCopy(a);return this._nodes.forEach(function(T,B){var q=E({},T.attributes);T=new c.NodeDataClass(B,q),c._nodes.set(B,T)}),c},C.copy=function(a){if("string"==typeof(a=a||{}).type&&a.type!==this.type&&"mixed"!==a.type)throw new xt('Graph.copy: cannot create an incompatible copy from "'.concat(this.type,'" type to "').concat(a.type,'" because this would mean losing information about the current graph.'));if("boolean"==typeof a.multi&&a.multi!==this.multi&&!0!==a.multi)throw new xt("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if("boolean"==typeof a.allowSelfLoops&&a.allowSelfLoops!==this.allowSelfLoops&&!0!==a.allowSelfLoops)throw new xt("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");for(var c,T,B=this.emptyCopy(a),q=this._edges.values();!0!==(c=q.next()).done;)ur(B,"copy",!1,(T=c.value).undirected,T.key,T.source.key,T.target.key,E({},T.attributes));return B},C.toJSON=function(){return this.export()},C.toString=function(){return"[object Graph]"},C.inspect=function(){var a=this,c={};this._nodes.forEach(function(bt,wt){c[wt]=bt.attributes});var T={},B={};this._edges.forEach(function(bt,wt){var vt,Ct=bt.undirected?"--":"->",St="",Ft=bt.source.key,$t=bt.target.key;bt.undirected&&Ft>$t&&(vt=Ft,Ft=$t,$t=vt);var te="(".concat(Ft,")").concat(Ct,"(").concat($t,")");wt.startsWith("geid_")?a.multi&&(void 0===B[te]?B[te]=0:B[te]++,St+="".concat(B[te],". ")):St+="[".concat(wt,"]: "),T[St+=te]=bt.attributes});var q={};for(var ot in this)this.hasOwnProperty(ot)&&!ar.has(ot)&&"function"!=typeof this[ot]&&"symbol"!==R(ot)&&(q[ot]=this[ot]);return q.attributes=this._attributes,q.nodes=c,q.edges=T,f(q,"constructor",this.constructor),q},D}(P.exports.EventEmitter);"undefined"!=typeof Symbol&&(Jt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Jt.prototype.inspect),[{name:function(_){return"".concat(_,"Edge")},generateKey:!0},{name:function(_){return"".concat(_,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(_){return"".concat(_,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(_){return"".concat(_,"EdgeWithKey")}},{name:function(_){return"".concat(_,"DirectedEdgeWithKey")},type:"directed"},{name:function(_){return"".concat(_,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(_){["add","merge","update"].forEach(function(D){var C=_.name(D),a="add"===D?ur:yi;Jt.prototype[C]=_.generateKey?function(c,T,B){return a(this,C,!0,"undirected"===(_.type||this.type),null,c,T,B,"update"===D)}:function(c,T,B,q){return a(this,C,!1,"undirected"===(_.type||this.type),c,T,B,q,"update"===D)}})}),_=Jt,ue.forEach(function(D){var C=D.name,a=D.attacher;a(_,C("Node"),0),a(_,C("Source"),1),a(_,C("Target"),2),a(_,C("Opposite"),3)}),function(_){ge.forEach(function(D){var C=D.name,a=D.attacher;a(_,C("Edge"),"mixed"),a(_,C("DirectedEdge"),"directed"),a(_,C("UndirectedEdge"),"undirected")})}(Jt),function(_){Rn.forEach(function(D){var a,c,T,B;T=(a=D).type,B=a.direction,_.prototype[c=a.name]=function(q,ot){if("mixed"!==T&&"mixed"!==this.type&&T!==this.type)return[];if(!arguments.length)return ui(this,T);if(1===arguments.length){var bt=this._nodes.get(q=""+q);if(void 0===bt)throw new dt("Graph.".concat(c,': could not find the "').concat(q,'" node in the graph.'));return hi(this.multi,"mixed"===T?this.type:T,B,bt)}if(2===arguments.length){ot=""+ot;var wt=this._nodes.get(q=""+q);if(!wt)throw new dt("Graph.".concat(c,':  could not find the "').concat(q,'" source node in the graph.'));if(!this._nodes.has(ot))throw new dt("Graph.".concat(c,':  could not find the "').concat(ot,'" target node in the graph.'));return Ke(T,this.multi,B,wt,ot)}throw new ut("Graph.".concat(c,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(C,a){var c=a.name,T=a.type,B=a.direction,q="forEach"+c[0].toUpperCase()+c.slice(1,-1);C.prototype[q]=function(vt,Ct,St){if("mixed"===T||"mixed"===this.type||T===this.type){if(1===arguments.length)return rr(!1,this,T,St=vt);if(2===arguments.length){St=Ct;var Ft=this._nodes.get(vt=""+vt);if(void 0===Ft)throw new dt("Graph.".concat(q,': could not find the "').concat(vt,'" node in the graph.'));return Gn(!1,this.multi,"mixed"===T?this.type:T,B,Ft,St)}if(3===arguments.length){Ct=""+Ct;var $t=this._nodes.get(vt=""+vt);if(!$t)throw new dt("Graph.".concat(q,':  could not find the "').concat(vt,'" source node in the graph.'));if(!this._nodes.has(Ct))throw new dt("Graph.".concat(q,':  could not find the "').concat(Ct,'" target node in the graph.'));return kn(!1,T,this.multi,B,$t,Ct,St)}throw new ut("Graph.".concat(q,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}};var ot="map"+c[0].toUpperCase()+c.slice(1);C.prototype[ot]=function(){var vt,Ct=Array.prototype.slice.call(arguments),St=Ct.pop();if(0===Ct.length){var Ft=0;"directed"!==T&&(Ft+=this.undirectedSize),"undirected"!==T&&(Ft+=this.directedSize),vt=new Array(Ft);var $t=0;Ct.push(function(te,ae,ie,ve,_e,ye,he){vt[$t++]=St(te,ae,ie,ve,_e,ye,he)})}else vt=[],Ct.push(function(te,ae,ie,ve,_e,ye,he){vt.push(St(te,ae,ie,ve,_e,ye,he))});return this[q].apply(this,Ct),vt};var bt="filter"+c[0].toUpperCase()+c.slice(1);C.prototype[bt]=function(){var vt=Array.prototype.slice.call(arguments),Ct=vt.pop(),St=[];return vt.push(function(Ft,$t,te,ae,ie,ve,_e){Ct(Ft,$t,te,ae,ie,ve,_e)&&St.push(Ft)}),this[q].apply(this,vt),St};var wt="reduce"+c[0].toUpperCase()+c.slice(1);C.prototype[wt]=function(){var vt,Ct,St=Array.prototype.slice.call(arguments);if(St.length<2||St.length>4)throw new ut("Graph.".concat(wt,": invalid number of arguments (expecting 2, 3 or 4 and got ").concat(St.length,")."));if("function"==typeof St[St.length-1]&&"function"!=typeof St[St.length-2])throw new ut("Graph.".concat(wt,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));2===St.length?(vt=St[0],Ct=St[1],St=[]):3===St.length?(vt=St[1],Ct=St[2],St=[St[0]]):4===St.length&&(vt=St[2],Ct=St[3],St=[St[0],St[1]]);var Ft=Ct;return St.push(function($t,te,ae,ie,ve,_e,ye){Ft=vt(Ft,$t,te,ae,ie,ve,_e,ye)}),this[q].apply(this,St),Ft}}(_,D),function(C,a){var c=a.name,T=a.type,B=a.direction,q="find"+c[0].toUpperCase()+c.slice(1,-1);C.prototype[q]=function(wt,vt,Ct){if("mixed"!==T&&"mixed"!==this.type&&T!==this.type)return!1;if(1===arguments.length)return rr(!0,this,T,Ct=wt);if(2===arguments.length){Ct=vt;var St=this._nodes.get(wt=""+wt);if(void 0===St)throw new dt("Graph.".concat(q,': could not find the "').concat(wt,'" node in the graph.'));return Gn(!0,this.multi,"mixed"===T?this.type:T,B,St,Ct)}if(3===arguments.length){vt=""+vt;var Ft=this._nodes.get(wt=""+wt);if(!Ft)throw new dt("Graph.".concat(q,':  could not find the "').concat(wt,'" source node in the graph.'));if(!this._nodes.has(vt))throw new dt("Graph.".concat(q,':  could not find the "').concat(vt,'" target node in the graph.'));return kn(!0,T,this.multi,B,Ft,vt,Ct)}throw new ut("Graph.".concat(q,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))};var ot="some"+c[0].toUpperCase()+c.slice(1,-1);C.prototype[ot]=function(){var wt=Array.prototype.slice.call(arguments),vt=wt.pop();return wt.push(function(Ct,St,Ft,$t,te,ae,ie){return vt(Ct,St,Ft,$t,te,ae,ie)}),!!this[q].apply(this,wt)};var bt="every"+c[0].toUpperCase()+c.slice(1,-1);C.prototype[bt]=function(){var wt=Array.prototype.slice.call(arguments),vt=wt.pop();return wt.push(function(Ct,St,Ft,$t,te,ae,ie){return!vt(Ct,St,Ft,$t,te,ae,ie)}),!this[q].apply(this,wt)}}(_,D),function(C,a){var T=a.type,B=a.direction,q=a.name.slice(0,-1)+"Entries";C.prototype[q]=function(ot,bt){if("mixed"!==T&&"mixed"!==this.type&&T!==this.type)return tt.empty();if(!arguments.length)return ci(this,T);if(1===arguments.length){var wt=this._nodes.get(ot=""+ot);if(!wt)throw new dt("Graph.".concat(q,': could not find the "').concat(ot,'" node in the graph.'));return je(T,B,wt)}if(2===arguments.length){bt=""+bt;var vt=this._nodes.get(ot=""+ot);if(!vt)throw new dt("Graph.".concat(q,':  could not find the "').concat(ot,'" source node in the graph.'));if(!this._nodes.has(bt))throw new dt("Graph.".concat(q,':  could not find the "').concat(bt,'" target node in the graph.'));return li(T,B,vt,bt)}throw new ut("Graph.".concat(q,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(_,D)})}(Jt),function(_){fi.forEach(function(D){var C,a,c,T,B,q,ot;(function Re(_,D){var C=D.name,a=D.type,c=D.direction;_.prototype[C]=function(T){if("mixed"!==a&&"mixed"!==this.type&&a!==this.type)return[];var B=this._nodes.get(T=""+T);if(void 0===B)throw new dt("Graph.".concat(C,': could not find the "').concat(T,'" node in the graph.'));return function(q,ot,bt){if("mixed"!==q){if("undirected"===q)return Object.keys(bt.undirected);if("string"==typeof ot)return Object.keys(bt[ot])}var wt=[];return zn(!1,q,ot,bt,function(vt){wt.push(vt)}),wt}("mixed"===a?this.type:a,c,B)}})(_,D),function(C,a){var c=a.name,T=a.type,B=a.direction,q="forEach"+c[0].toUpperCase()+c.slice(1,-1);C.prototype[q]=function(vt,Ct){if("mixed"===T||"mixed"===this.type||T===this.type){var St=this._nodes.get(vt=""+vt);if(void 0===St)throw new dt("Graph.".concat(q,': could not find the "').concat(vt,'" node in the graph.'));zn(!1,"mixed"===T?this.type:T,B,St,Ct)}};var ot="map"+c[0].toUpperCase()+c.slice(1);C.prototype[ot]=function(vt,Ct){var St=[];return this[q](vt,function(Ft,$t){St.push(Ct(Ft,$t))}),St};var bt="filter"+c[0].toUpperCase()+c.slice(1);C.prototype[bt]=function(vt,Ct){var St=[];return this[q](vt,function(Ft,$t){Ct(Ft,$t)&&St.push(Ft)}),St};var wt="reduce"+c[0].toUpperCase()+c.slice(1);C.prototype[wt]=function(vt,Ct,St){if(arguments.length<3)throw new ut("Graph.".concat(wt,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));var Ft=St;return this[q](vt,function($t,te){Ft=Ct(Ft,$t,te)}),Ft}}(_,D),C=_,T=(a=D).type,B=a.direction,q=(c=a.name)[0].toUpperCase()+c.slice(1,-1),C.prototype[ot="find"+q]=function(vt,Ct){if("mixed"===T||"mixed"===this.type||T===this.type){var St=this._nodes.get(vt=""+vt);if(void 0===St)throw new dt("Graph.".concat(ot,': could not find the "').concat(vt,'" node in the graph.'));return zn(!0,"mixed"===T?this.type:T,B,St,Ct)}},C.prototype["some"+q]=function(vt,Ct){return!!this[ot](vt,Ct)},C.prototype["every"+q]=function(vt,Ct){return!this[ot](vt,function(St,Ft){return!Ct(St,Ft)})},function di(_,D){var a=D.type,c=D.direction,T=D.name.slice(0,-1)+"Entries";_.prototype[T]=function(B){if("mixed"!==a&&"mixed"!==this.type&&a!==this.type)return tt.empty();var q=this._nodes.get(B=""+B);if(void 0===q)throw new dt("Graph.".concat(T,': could not find the "').concat(B,'" node in the graph.'));return function(ot,bt,wt){if("mixed"!==ot){if("undirected"===ot)return We(null,wt,wt.undirected);if("string"==typeof bt)return We(null,wt,wt[bt])}var vt=tt.empty(),Ct=new hn;return"undirected"!==ot&&("out"!==bt&&(vt=ce(vt,We(Ct,wt,wt.in))),"in"!==bt&&(vt=ce(vt,We(Ct,wt,wt.out)))),"directed"!==ot&&(vt=ce(vt,We(Ct,wt,wt.undirected))),vt}("mixed"===a?this.type:a,c,q)}}(_,D)})}(Jt);var cr=function(_){function D(C){var a=E({type:"directed"},C);if("multi"in a&&!1!==a.multi)throw new ut("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==a.type)throw new ut('DirectedGraph.from: inconsistent "'+a.type+'" type in given options!');return _.call(this,a)||this}return N(D,_),D}(Jt),hr=function(_){function D(C){var a=E({type:"undirected"},C);if("multi"in a&&!1!==a.multi)throw new ut("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==a.type)throw new ut('UndirectedGraph.from: inconsistent "'+a.type+'" type in given options!');return _.call(this,a)||this}return N(D,_),D}(Jt),lr=function(_){function D(C){var a=E({multi:!0},C);if("multi"in a&&!0!==a.multi)throw new ut("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return _.call(this,a)||this}return N(D,_),D}(Jt),fr=function(_){function D(C){var a=E({type:"directed",multi:!0},C);if("multi"in a&&!0!==a.multi)throw new ut("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==a.type)throw new ut('MultiDirectedGraph.from: inconsistent "'+a.type+'" type in given options!');return _.call(this,a)||this}return N(D,_),D}(Jt),dr=function(_){function D(C){var a=E({type:"undirected",multi:!0},C);if("multi"in a&&!0!==a.multi)throw new ut("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==a.type)throw new ut('MultiUndirectedGraph.from: inconsistent "'+a.type+'" type in given options!');return _.call(this,a)||this}return N(D,_),D}(Jt);function He(_){_.from=function(D,C){var a=E({},D.options,C),c=new _(a);return c.import(D),c}}return He(Jt),He(cr),He(hr),He(lr),He(fr),He(dr),Jt.Graph=Jt,Jt.DirectedGraph=cr,Jt.UndirectedGraph=hr,Jt.MultiGraph=lr,Jt.MultiDirectedGraph=fr,Jt.MultiUndirectedGraph=dr,Jt.InvalidArgumentsGraphError=ut,Jt.NotFoundGraphError=dt,Jt.UsageGraphError=xt,Jt}()},8740:(st,R,N)=>{var V=N(6009),z=N(5701);function k(i,b){if(arguments.length<2)throw new Error("mnemonist/fixed-deque: expecting an Array class and a capacity.");if("number"!=typeof b||b<=0)throw new Error("mnemonist/fixed-deque: `capacity` should be a positive number.");this.ArrayClass=i,this.capacity=b,this.items=new i(this.capacity),this.clear()}k.prototype.clear=function(){this.start=0,this.size=0},k.prototype.push=function(i){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.push: deque capacity ("+this.capacity+") exceeded!");return this.items[(this.start+this.size)%this.capacity]=i,++this.size},k.prototype.unshift=function(i){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.unshift: deque capacity ("+this.capacity+") exceeded!");var b=this.start-1;return 0===this.start&&(b=this.capacity-1),this.items[b]=i,this.start=b,++this.size},k.prototype.pop=function(){if(0===this.size)return;const i=(this.start+this.size-1)%this.capacity;return this.size--,this.items[i]},k.prototype.shift=function(){if(0!==this.size){var i=this.start;return this.size--,this.start++,this.start===this.capacity&&(this.start=0),this.items[i]}},k.prototype.peekFirst=function(){if(0!==this.size)return this.items[this.start]},k.prototype.peekLast=function(){if(0!==this.size){var i=this.start+this.size-1;return i>this.capacity&&(i-=this.capacity),this.items[i]}},k.prototype.get=function(i){if(0!==this.size)return(i=this.start+i)>this.capacity&&(i-=this.capacity),this.items[i]},k.prototype.forEach=function(i,b){b=arguments.length>1?b:this;for(var v=this.capacity,E=this.size,s=this.start,h=0;h<E;)i.call(b,this.items[s],h,this),h++,++s===v&&(s=0)},k.prototype.toArray=function(){var i=this.start+this.size;if(i<this.capacity)return this.items.slice(this.start,i);for(var b=new this.ArrayClass(this.size),v=this.capacity,E=this.size,s=this.start,h=0;h<E;)b[h]=this.items[s],h++,++s===v&&(s=0);return b},k.prototype.values=function(){var i=this.items,b=this.capacity,v=this.size,E=this.start,s=0;return new z(function(){if(s>=v)return{done:!0};var h=i[E];return E++,s++,E===b&&(E=0),{value:h,done:!1}})},k.prototype.entries=function(){var i=this.items,b=this.capacity,v=this.size,E=this.start,s=0;return new z(function(){if(s>=v)return{done:!0};var h=i[E];return++E===b&&(E=0),{value:[s++,h],done:!1}})},"undefined"!=typeof Symbol&&(k.prototype[Symbol.iterator]=k.prototype.values),k.prototype.inspect=function(){var i=this.toArray();return i.type=this.ArrayClass.name,i.capacity=this.capacity,Object.defineProperty(i,"constructor",{value:k,enumerable:!1}),i},"undefined"!=typeof Symbol&&(k.prototype[Symbol.for("nodejs.util.inspect.custom")]=k.prototype.inspect),k.from=function(i,b,v){if(arguments.length<3&&"number"!=typeof(v=V.guessLength(i)))throw new Error("mnemonist/fixed-deque.from: could not guess iterable length. Please provide desired capacity as last argument.");var E=new k(b,v);if(V.isArrayLike(i)){var s,h;for(s=0,h=i.length;s<h;s++)E.items[s]=i[s];return E.size=h,E}return V.forEach(i,function(g){E.push(g)}),E},st.exports=k},7451:(st,R,N)=>{var V=N(5701),z=N(6009);function k(i,b){if(arguments.length<2)throw new Error("mnemonist/fixed-stack: expecting an Array class and a capacity.");if("number"!=typeof b||b<=0)throw new Error("mnemonist/fixed-stack: `capacity` should be a positive number.");this.capacity=b,this.ArrayClass=i,this.items=new this.ArrayClass(this.capacity),this.clear()}k.prototype.clear=function(){this.size=0},k.prototype.push=function(i){if(this.size===this.capacity)throw new Error("mnemonist/fixed-stack.push: stack capacity ("+this.capacity+") exceeded!");return this.items[this.size++]=i,this.size},k.prototype.pop=function(){if(0!==this.size)return this.items[--this.size]},k.prototype.peek=function(){return this.items[this.size-1]},k.prototype.forEach=function(i,b){b=arguments.length>1?b:this;for(var v=0,E=this.items.length;v<E;v++)i.call(b,this.items[E-v-1],v,this)},k.prototype.toArray=function(){for(var i=new this.ArrayClass(this.size),b=this.size-1,v=this.size;v--;)i[v]=this.items[b-v];return i},k.prototype.values=function(){var i=this.items,b=this.size,v=0;return new V(function(){if(v>=b)return{done:!0};var E=i[b-v-1];return v++,{value:E,done:!1}})},k.prototype.entries=function(){var i=this.items,b=this.size,v=0;return new V(function(){if(v>=b)return{done:!0};var E=i[b-v-1];return{value:[v++,E],done:!1}})},"undefined"!=typeof Symbol&&(k.prototype[Symbol.iterator]=k.prototype.values),k.prototype.toString=function(){return this.toArray().join(",")},k.prototype.toJSON=function(){return this.toArray()},k.prototype.inspect=function(){var i=this.toArray();return i.type=this.ArrayClass.name,i.capacity=this.capacity,Object.defineProperty(i,"constructor",{value:k,enumerable:!1}),i},"undefined"!=typeof Symbol&&(k.prototype[Symbol.for("nodejs.util.inspect.custom")]=k.prototype.inspect),k.from=function(i,b,v){if(arguments.length<3&&"number"!=typeof(v=z.guessLength(i)))throw new Error("mnemonist/fixed-stack.from: could not guess iterable length. Please provide desired capacity as last argument.");var E=new k(b,v);if(z.isArrayLike(i)){var s,h;for(s=0,h=i.length;s<h;s++)E.items[s]=i[s];return E.size=h,E}return z.forEach(i,function(g){E.push(g)}),E},st.exports=k},4547:(st,R,N)=>{var V=N(4467),z=N(2062),k=N(6009),i=z.DEFAULT_COMPARATOR,b=z.reverseComparator;function v(I,L,S,x){for(var A,y,W=L[x];x>S&&I(W,y=L[A=x-1>>1])<0;)L[x]=y,x=A;L[x]=W}function E(I,L,S){for(var m,x=L.length,W=S,A=L[S],y=2*S+1;y<x;)(m=y+1)<x&&I(L[y],L[m])>=0&&(y=m),L[S]=L[y],y=2*(S=y)+1;L[S]=A,v(I,L,W,S)}function s(I,L,S){L.push(S),v(I,L,0,L.length-1)}function h(I,L){var S=L.pop();if(0!==L.length){var x=L[0];return L[0]=S,E(I,L,0),x}return S}function g(I,L,S){if(0===L.length)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var x=L[0];return L[0]=S,E(I,L,0),x}function f(I,L,S){var x;return 0!==L.length&&I(L[0],S)<0&&(x=L[0],L[0]=S,S=x,E(I,L,0)),S}function d(I,L){for(var W=L.length>>1;--W>=0;)E(I,L,W)}function l(I,L){for(var S=L.length,x=0,W=new Array(S);x<S;)W[x++]=h(I,L);return W}function Z(I){if(this.clear(),this.comparator=I||i,"function"!=typeof this.comparator)throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}function Y(I){if(this.clear(),this.comparator=I||i,"function"!=typeof this.comparator)throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=b(this.comparator)}Z.prototype.clear=function(){this.items=[],this.size=0},Z.prototype.push=function(I){return s(this.comparator,this.items,I),++this.size},Z.prototype.peek=function(){return this.items[0]},Z.prototype.pop=function(){return 0!==this.size&&this.size--,h(this.comparator,this.items)},Z.prototype.replace=function(I){return g(this.comparator,this.items,I)},Z.prototype.pushpop=function(I){return f(this.comparator,this.items,I)},Z.prototype.consume=function(){return this.size=0,l(this.comparator,this.items)},Z.prototype.toArray=function(){return l(this.comparator,this.items.slice())},Z.prototype.inspect=function(){var I=this.toArray();return Object.defineProperty(I,"constructor",{value:Z,enumerable:!1}),I},"undefined"!=typeof Symbol&&(Z.prototype[Symbol.for("nodejs.util.inspect.custom")]=Z.prototype.inspect),Y.prototype=Z.prototype,Z.from=function(I,L){var x,S=new Z(L);return x=k.isArrayLike(I)?I.slice():k.toArray(I),d(S.comparator,x),S.items=x,S.size=x.length,S},Y.from=function(I,L){var x,S=new Y(L);return x=k.isArrayLike(I)?I.slice():k.toArray(I),d(S.comparator,x),S.items=x,S.size=x.length,S},Z.siftUp=E,Z.siftDown=v,Z.push=s,Z.pop=h,Z.replace=g,Z.pushpop=f,Z.heapify=d,Z.consume=l,Z.nsmallest=function G(I,L,S){2===arguments.length&&(S=L,L=I,I=i);var W,A,y,w,x=b(I),m=1/0;if(1===L){if(k.isArrayLike(S)){for(W=0,A=S.length;W<A;W++)y=S[W],(m===1/0||I(y,m)<0)&&(m=y);return(w=new S.constructor(1))[0]=m,w}return V(S,function(j){(m===1/0||I(j,m)<0)&&(m=j)}),[m]}if(k.isArrayLike(S)){if(L>=S.length)return S.slice().sort(I);for(w=S.slice(0,L),d(x,w),W=L,A=S.length;W<A;W++)x(S[W],w[0])>0&&g(x,w,S[W]);return w.sort(I)}var U=k.guessLength(S);return null!==U&&U<L&&(L=U),w=new Array(L),W=0,V(S,function(j){W<L?w[W]=j:(W===L&&d(x,w),x(j,w[0])>0&&g(x,w,j)),W++}),w.length>W&&(w.length=W),w.sort(I)},Z.nlargest=function P(I,L,S){2===arguments.length&&(S=L,L=I,I=i);var W,A,y,w,x=b(I),m=-1/0;if(1===L){if(k.isArrayLike(S)){for(W=0,A=S.length;W<A;W++)y=S[W],(m===-1/0||I(y,m)>0)&&(m=y);return(w=new S.constructor(1))[0]=m,w}return V(S,function(j){(m===-1/0||I(j,m)>0)&&(m=j)}),[m]}if(k.isArrayLike(S)){if(L>=S.length)return S.slice().sort(x);for(w=S.slice(0,L),d(I,w),W=L,A=S.length;W<A;W++)I(S[W],w[0])>0&&g(I,w,S[W]);return w.sort(x)}var U=k.guessLength(S);return null!==U&&U<L&&(L=U),w=new Array(L),W=0,V(S,function(j){W<L?w[W]=j:(W===L&&d(I,w),I(j,w[0])>0&&g(I,w,j)),W++}),w.length>W&&(w.length=W),w.sort(x)},Z.MinHeap=Z,Z.MaxHeap=Y,st.exports=Z},8090:(st,R,N)=>{var V=N(5701),z=N(6116).getPointerArray;function k(i,b){arguments.length<2&&(b=i,i=Array);var v=z(b);this.size=0,this.length=b,this.dense=new v(b),this.sparse=new v(b),this.vals=new i(b)}k.prototype.clear=function(){this.size=0},k.prototype.has=function(i){var b=this.sparse[i];return b<this.size&&this.dense[b]===i},k.prototype.get=function(i){var b=this.sparse[i];if(b<this.size&&this.dense[b]===i)return this.vals[b]},k.prototype.set=function(i,b){var v=this.sparse[i];return v<this.size&&this.dense[v]===i?(this.vals[v]=b,this):(this.dense[this.size]=i,this.sparse[i]=this.size,this.vals[this.size]=b,this.size++,this)},k.prototype.delete=function(i){var b=this.sparse[i];return!(b>=this.size||this.dense[b]!==i||(this.dense[this.sparse[i]]=b=this.dense[this.size-1],this.sparse[b]=this.sparse[i],this.size--,0))},k.prototype.forEach=function(i,b){b=arguments.length>1?b:this;for(var v=0;v<this.size;v++)i.call(b,this.vals[v],this.dense[v])},k.prototype.keys=function(){var i=this.size,b=this.dense,v=0;return new V(function(){if(v<i){var E=b[v];return v++,{value:E}}return{done:!0}})},k.prototype.values=function(){var i=this.size,b=this.vals,v=0;return new V(function(){if(v<i){var E=b[v];return v++,{value:E}}return{done:!0}})},k.prototype.entries=function(){var i=this.size,b=this.dense,v=this.vals,E=0;return new V(function(){if(E<i){var s=[b[E],v[E]];return E++,{value:s}}return{done:!0}})},"undefined"!=typeof Symbol&&(k.prototype[Symbol.iterator]=k.prototype.entries),k.prototype.inspect=function(){for(var i=new Map,b=0;b<this.size;b++)i.set(this.dense[b],this.vals[b]);return Object.defineProperty(i,"constructor",{value:k,enumerable:!1}),i.length=this.length,this.vals.constructor!==Array&&(i.type=this.vals.constructor.name),i},"undefined"!=typeof Symbol&&(k.prototype[Symbol.for("nodejs.util.inspect.custom")]=k.prototype.inspect),st.exports=k},5766:(st,R,N)=>{var V=N(5701),z=N(6116).getPointerArray;function k(i){var b=z(i);this.start=0,this.size=0,this.capacity=i,this.dense=new b(i),this.sparse=new b(i)}k.prototype.clear=function(){this.start=0,this.size=0},k.prototype.has=function(i){if(0===this.size)return!1;var b=this.sparse[i];return(b<this.capacity&&b>=this.start&&b<this.start+this.size||b<(this.start+this.size)%this.capacity)&&this.dense[b]===i},k.prototype.enqueue=function(i){var b=this.sparse[i];return 0!==this.size&&(b<this.capacity&&b>=this.start&&b<this.start+this.size||b<(this.start+this.size)%this.capacity)&&this.dense[b]===i||(this.dense[b=(this.start+this.size)%this.capacity]=i,this.sparse[i]=b,this.size++),this},k.prototype.dequeue=function(){if(0!==this.size){var i=this.start;this.size--,this.start++,this.start===this.capacity&&(this.start=0);var b=this.dense[i];return this.sparse[b]=this.capacity,b}},k.prototype.forEach=function(i,b){b=arguments.length>1?b:this;for(var v=this.capacity,E=this.size,s=this.start,h=0;h<E;)i.call(b,this.dense[s],h,this),h++,++s===v&&(s=0)},k.prototype.values=function(){var i=this.dense,b=this.capacity,v=this.size,E=this.start,s=0;return new V(function(){if(s>=v)return{done:!0};var h=i[E];return E++,s++,E===b&&(E=0),{value:h,done:!1}})},"undefined"!=typeof Symbol&&(k.prototype[Symbol.iterator]=k.prototype.values),k.prototype.inspect=function(){var i=[];return this.forEach(function(b){i.push(b)}),Object.defineProperty(i,"constructor",{value:k,enumerable:!1}),i.capacity=this.capacity,i},"undefined"!=typeof Symbol&&(k.prototype[Symbol.for("nodejs.util.inspect.custom")]=k.prototype.inspect),st.exports=k},4268:(st,R,N)=>{var V=N(5701),z=N(6116).getPointerArray;function k(i){var b=z(i);this.size=0,this.length=i,this.dense=new b(i),this.sparse=new b(i)}k.prototype.clear=function(){this.size=0},k.prototype.has=function(i){var b=this.sparse[i];return b<this.size&&this.dense[b]===i},k.prototype.add=function(i){var b=this.sparse[i];return b<this.size&&this.dense[b]===i||(this.dense[this.size]=i,this.sparse[i]=this.size,this.size++),this},k.prototype.delete=function(i){var b=this.sparse[i];return!(b>=this.size||this.dense[b]!==i||(this.dense[this.sparse[i]]=b=this.dense[this.size-1],this.sparse[b]=this.sparse[i],this.size--,0))},k.prototype.forEach=function(i,b){b=arguments.length>1?b:this;for(var v,E=0;E<this.size;E++)i.call(b,v=this.dense[E],v)},k.prototype.values=function(){var i=this.size,b=this.dense,v=0;return new V(function(){if(v<i){var E=b[v];return v++,{value:E}}return{done:!0}})},"undefined"!=typeof Symbol&&(k.prototype[Symbol.iterator]=k.prototype.values),k.prototype.inspect=function(){for(var i=new Set,b=0;b<this.size;b++)i.add(this.dense[b]);return Object.defineProperty(i,"constructor",{value:k,enumerable:!1}),i.length=this.length,i},"undefined"!=typeof Symbol&&(k.prototype[Symbol.for("nodejs.util.inspect.custom")]=k.prototype.inspect),st.exports=k},2062:(st,R)=>{R.DEFAULT_COMPARATOR=function(i,b){return i<b?-1:i>b?1:0},R.DEFAULT_REVERSE_COMPARATOR=function(i,b){return i<b?1:i>b?-1:0},R.reverseComparator=function z(i){return function(b,v){return i(v,b)}},R.createTupleComparator=function k(i){return 2===i?function(b,v){return b[0]<v[0]?-1:b[0]>v[0]?1:b[1]<v[1]?-1:b[1]>v[1]?1:0}:function(b,v){for(var E=0;E<i;){if(b[E]<v[E])return-1;if(b[E]>v[E])return 1;E++}return 0}}},6009:(st,R,N)=>{var V=N(4467),z=N(6116);function i(E){return"number"==typeof E.length?E.length:"number"==typeof E.size?E.size:void 0}R.isArrayLike=function k(E){return Array.isArray(E)||z.isTypedArray(E)},R.guessLength=i,R.toArray=function b(E){var s=i(E),h="number"==typeof s?new Array(s):[],g=0;return V(E,function(f){h[g++]=f}),h},R.toArrayWithIndices=function v(E){var s=i(E),h="number"==typeof s?z.getPointerArray(s):Array,g="number"==typeof s?new Array(s):[],f="number"==typeof s?new h(s):[],d=0;return V(E,function(l){g[d]=l,f[d]=d++}),[g,f]}},6116:(st,R)=>{var N=Math.pow(2,8)-1,V=Math.pow(2,16)-1,z=Math.pow(2,32)-1,k=Math.pow(2,7)-1,i=Math.pow(2,15)-1,b=Math.pow(2,31)-1;R.getPointerArray=function(E){var s=E-1;if(s<=N)return Uint8Array;if(s<=V)return Uint16Array;if(s<=z)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},R.getSignedPointerArray=function(E){var s=E-1;return s<=k?Int8Array:s<=i?Int16Array:s<=b?Int32Array:Float64Array},R.getNumberType=function(E){return E===(0|E)?-1===Math.sign(E)?E<=127&&E>=-128?Int8Array:E<=32767&&E>=-32768?Int16Array:Int32Array:E<=255?Uint8Array:E<=65535?Uint16Array:Uint32Array:Float64Array};var v={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};R.getMinimalRepresentation=function(E,s){var f,d,l,G,P,h=null,g=0;for(G=0,P=E.length;G<P;G++)l=s?s(E[G]):E[G],d=R.getNumberType(l),(f=v[d.name])>g&&(g=f,h=d);return h},R.isTypedArray=function(E){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView(E)},R.concat=function(){var s,h,g,E=0;for(s=0,g=arguments.length;s<g;s++)E+=arguments[s].length;var f=new arguments[0].constructor(E);for(s=0,h=0;s<g;s++)f.set(arguments[s],h),h+=arguments[s].length;return f},R.indices=function(E){for(var h=new(R.getPointerArray(E))(E),g=0;g<E;g++)h[g]=g;return h}},4467:(st,R,N)=>{var V=N(8123),z=V.ARRAY_BUFFER_SUPPORT,k=V.SYMBOL_SUPPORT;st.exports=function(b,v){var E,s,h,g,f;if(!b)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof v)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(b)||z&&ArrayBuffer.isView(b)||"string"==typeof b||"[object Arguments]"===b.toString())for(h=0,g=b.length;h<g;h++)v(b[h],h);else if("function"!=typeof b.forEach)if(k&&Symbol.iterator in b&&"function"!=typeof b.next&&(b=b[Symbol.iterator]()),"function"!=typeof b.next)for(s in b)b.hasOwnProperty(s)&&v(b[s],s);else for(E=b,h=0;!0!==(f=E.next()).done;)v(f.value,h),h++;else b.forEach(v)}},5701:st=>{function R(N){if("function"!=typeof N)throw new Error("obliterator/iterator: expecting a function!");this.next=N}"undefined"!=typeof Symbol&&(R.prototype[Symbol.iterator]=function(){return this}),R.of=function(){var N=arguments,V=N.length,z=0;return new R(function(){return z>=V?{done:!0}:{done:!1,value:N[z++]}})},R.empty=function(){return new R(function(){return{done:!0}})},R.fromSequence=function(N){var V=0,z=N.length;return new R(function(){return V>=z?{done:!0}:{done:!1,value:N[V++]}})},R.is=function(N){return N instanceof R||"object"==typeof N&&null!==N&&"function"==typeof N.next},st.exports=R},8123:(st,R)=>{R.ARRAY_BUFFER_SUPPORT="undefined"!=typeof ArrayBuffer,R.SYMBOL_SUPPORT="undefined"!=typeof Symbol},8859:st=>{function R(V){return function(z){return"number"!=typeof z&&(z=z.length),Math.floor(V()*z)}}var N=R(Math.random);N.createRandomIndex=R,st.exports=N},853:st=>{function R(V){return function(z,k){return z+Math.floor(V()*(k-z+1))}}var N=R(Math.random);N.createRandom=R,st.exports=N},909:(st,R,N)=>{var V=N(853).createRandom;function z(i){var b=V(i);return function(v){for(var E=v.length,s=E-1,h=-1;++h<E;){var g=b(h,s),f=v[g];v[g]=v[h],v[h]=f}}}var k=z(Math.random);k.createShuffleInPlace=z,st.exports=k},340:(st,R,N)=>{var V=N(9471),z=N(2992),k=N(7657),i=N(5583),b=N(1929),v=N(8083),E=N(3818);E.alea=V,E.xor128=z,E.xorwow=k,E.xorshift7=i,E.xor4096=b,E.tychei=v,st.exports=E},9471:function(st,R,N){var V;!function(z,k,i){function b(h){var g=this,f=function s(){var h=4022871197;return function(f){f=String(f);for(var d=0;d<f.length;d++){var l=.02519603282416938*(h+=f.charCodeAt(d));l-=h=l>>>0,h=(l*=h)>>>0,h+=4294967296*(l-=h)}return 2.3283064365386963e-10*(h>>>0)}}();g.next=function(){var d=2091639*g.s0+2.3283064365386963e-10*g.c;return g.s0=g.s1,g.s1=g.s2,g.s2=d-(g.c=0|d)},g.c=1,g.s0=f(" "),g.s1=f(" "),g.s2=f(" "),g.s0-=f(h),g.s0<0&&(g.s0+=1),g.s1-=f(h),g.s1<0&&(g.s1+=1),g.s2-=f(h),g.s2<0&&(g.s2+=1),f=null}function v(h,g){return g.c=h.c,g.s0=h.s0,g.s1=h.s1,g.s2=h.s2,g}function E(h,g){var f=new b(h),d=g&&g.state,l=f.next;return l.int32=function(){return 4294967296*f.next()|0},l.double=function(){return l()+11102230246251565e-32*(2097152*l()|0)},l.quick=l,d&&("object"==typeof d&&v(d,f),l.state=function(){return v(f,{})}),l}k&&k.exports?k.exports=E:N.amdD&&N.amdO?void 0!==(V=function(){return E}.call(R,N,R,k))&&(k.exports=V):this.alea=E}(0,st=N.nmd(st))},8083:function(st,R,N){var V;!function(z,k,i){function b(s){var h=this,g="";h.next=function(){var d=h.b,l=h.c,G=h.d,P=h.a;return d=d<<25^d>>>7^l,l=l-G|0,G=G<<24^G>>>8^P,P=P-d|0,h.b=d=d<<20^d>>>12^l,h.c=l=l-G|0,h.d=G<<16^l>>>16^P,h.a=P-d|0},h.a=0,h.b=0,h.c=-1640531527,h.d=1367130551,s===Math.floor(s)?(h.a=s/4294967296|0,h.b=0|s):g+=s;for(var f=0;f<g.length+20;f++)h.b^=0|g.charCodeAt(f),h.next()}function v(s,h){return h.a=s.a,h.b=s.b,h.c=s.c,h.d=s.d,h}function E(s,h){var g=new b(s),f=h&&h.state,d=function(){return(g.next()>>>0)/4294967296};return d.double=function(){do{var P=((g.next()>>>11)+(g.next()>>>0)/4294967296)/(1<<21)}while(0===P);return P},d.int32=g.next,d.quick=d,f&&("object"==typeof f&&v(f,g),d.state=function(){return v(g,{})}),d}k&&k.exports?k.exports=E:N.amdD&&N.amdO?void 0!==(V=function(){return E}.call(R,N,R,k))&&(k.exports=V):this.tychei=E}(0,st=N.nmd(st))},2992:function(st,R,N){var V;!function(z,k,i){function b(s){var h=this,g="";h.x=0,h.y=0,h.z=0,h.w=0,h.next=function(){var d=h.x^h.x<<11;return h.x=h.y,h.y=h.z,h.z=h.w,h.w^=h.w>>>19^d^d>>>8},s===(0|s)?h.x=s:g+=s;for(var f=0;f<g.length+64;f++)h.x^=0|g.charCodeAt(f),h.next()}function v(s,h){return h.x=s.x,h.y=s.y,h.z=s.z,h.w=s.w,h}function E(s,h){var g=new b(s),f=h&&h.state,d=function(){return(g.next()>>>0)/4294967296};return d.double=function(){do{var P=((g.next()>>>11)+(g.next()>>>0)/4294967296)/(1<<21)}while(0===P);return P},d.int32=g.next,d.quick=d,f&&("object"==typeof f&&v(f,g),d.state=function(){return v(g,{})}),d}k&&k.exports?k.exports=E:N.amdD&&N.amdO?void 0!==(V=function(){return E}.call(R,N,R,k))&&(k.exports=V):this.xor128=E}(0,st=N.nmd(st))},1929:function(st,R,N){var V;!function(z,k,i){function b(s){var h=this;h.next=function(){var G,P,f=h.w,d=h.X,l=h.i;return h.w=f=f+1640531527|0,P=d[l+34&127],G=d[l=l+1&127],P^=P<<13,G^=G<<17,P=d[l]=(P^=P>>>15)^(G^=G>>>12),h.i=l,P+(f^f>>>16)|0},function g(f,d){var l,G,P,Z,Y,I=[],L=128;for(d===(0|d)?(G=d,d=null):(d+="\0",G=0,L=Math.max(L,d.length)),P=0,Z=-32;Z<L;++Z)d&&(G^=d.charCodeAt((Z+32)%d.length)),0===Z&&(Y=G),G^=G<<10,G^=G>>>15,G^=G<<4,G^=G>>>13,Z>=0&&(P=0==(l=I[127&Z]^=G+(Y=Y+1640531527|0))?P+1:0);for(P>=128&&(I[127&(d&&d.length||0)]=-1),P=127,Z=512;Z>0;--Z)G=I[P+34&127],l=I[P=P+1&127],G^=G<<13,l^=l<<17,I[P]=(G^=G>>>15)^(l^=l>>>12);f.w=Y,f.X=I,f.i=P}(h,s)}function v(s,h){return h.i=s.i,h.w=s.w,h.X=s.X.slice(),h}function E(s,h){null==s&&(s=+new Date);var g=new b(s),f=h&&h.state,d=function(){return(g.next()>>>0)/4294967296};return d.double=function(){do{var P=((g.next()>>>11)+(g.next()>>>0)/4294967296)/(1<<21)}while(0===P);return P},d.int32=g.next,d.quick=d,f&&(f.X&&v(f,g),d.state=function(){return v(g,{})}),d}k&&k.exports?k.exports=E:N.amdD&&N.amdO?void 0!==(V=function(){return E}.call(R,N,R,k))&&(k.exports=V):this.xor4096=E}(0,st=N.nmd(st))},5583:function(st,R,N){var V;!function(z,k,i){function b(s){var h=this;h.next=function(){var l,G,f=h.x,d=h.i;return l=f[d],G=(l^=l>>>7)^l<<24,G^=(l=f[d+1&7])^l>>>10,G^=(l=f[d+3&7])^l>>>3,G^=(l=f[d+4&7])^l<<7,l=f[d+7&7],f[d]=G^=(l^=l<<13)^l<<9,h.i=d+1&7,G},function g(f,d){var l,P=[];if(d===(0|d))P[0]=d;else for(d=""+d,l=0;l<d.length;++l)P[7&l]=P[7&l]<<15^d.charCodeAt(l)+P[l+1&7]<<13;for(;P.length<8;)P.push(0);for(l=0;l<8&&0===P[l];++l);for(8==l&&(P[7]=-1),f.x=P,f.i=0,l=256;l>0;--l)f.next()}(h,s)}function v(s,h){return h.x=s.x.slice(),h.i=s.i,h}function E(s,h){null==s&&(s=+new Date);var g=new b(s),f=h&&h.state,d=function(){return(g.next()>>>0)/4294967296};return d.double=function(){do{var P=((g.next()>>>11)+(g.next()>>>0)/4294967296)/(1<<21)}while(0===P);return P},d.int32=g.next,d.quick=d,f&&(f.x&&v(f,g),d.state=function(){return v(g,{})}),d}k&&k.exports?k.exports=E:N.amdD&&N.amdO?void 0!==(V=function(){return E}.call(R,N,R,k))&&(k.exports=V):this.xorshift7=E}(0,st=N.nmd(st))},7657:function(st,R,N){var V;!function(z,k,i){function b(s){var h=this,g="";h.next=function(){var d=h.x^h.x>>>2;return h.x=h.y,h.y=h.z,h.z=h.w,h.w=h.v,(h.d=h.d+362437|0)+(h.v=h.v^h.v<<4^d^d<<1)|0},h.x=0,h.y=0,h.z=0,h.w=0,h.v=0,s===(0|s)?h.x=s:g+=s;for(var f=0;f<g.length+64;f++)h.x^=0|g.charCodeAt(f),f==g.length&&(h.d=h.x<<10^h.x>>>4),h.next()}function v(s,h){return h.x=s.x,h.y=s.y,h.z=s.z,h.w=s.w,h.v=s.v,h.d=s.d,h}function E(s,h){var g=new b(s),f=h&&h.state,d=function(){return(g.next()>>>0)/4294967296};return d.double=function(){do{var P=((g.next()>>>11)+(g.next()>>>0)/4294967296)/(1<<21)}while(0===P);return P},d.int32=g.next,d.quick=d,f&&("object"==typeof f&&v(f,g),d.state=function(){return v(g,{})}),d}k&&k.exports?k.exports=E:N.amdD&&N.amdO?void 0!==(V=function(){return E}.call(R,N,R,k))&&(k.exports=V):this.xorwow=E}(0,st=N.nmd(st))},3818:function(st,R,N){var V;!function(z,k,i){var l,b=256,h=i.pow(b,6),g=i.pow(2,52),f=2*g,d=255;function G(x,W,A){var y=[],m=I(Y((W=1==W?{entropy:!0}:W||{}).entropy?[x,S(k)]:null==x?function L(){try{var x;return l&&(x=l.randomBytes)?x=x(b):(x=new Uint8Array(b),(z.crypto||z.msCrypto).getRandomValues(x)),S(x)}catch(y){var W=z.navigator,A=W&&W.plugins;return[+new Date,z,A,z.screen,S(k)]}}():x,3),y),w=new P(y),U=function(){for(var j=w.g(6),$=h,X=0;j<g;)j=(j+X)*b,$*=b,X=w.g(1);for(;j>=f;)j/=2,$/=2,X>>>=1;return(j+X)/$};return U.int32=function(){return 0|w.g(4)},U.quick=function(){return w.g(4)/4294967296},U.double=U,I(S(w.S),k),(W.pass||A||function(j,$,X,tt){return tt&&(tt.S&&Z(tt,w),j.state=function(){return Z(w,{})}),X?(i.random=j,$):j})(U,m,"global"in W?W.global:this==i,W.state)}function P(x){var W,A=x.length,y=this,m=0,w=y.i=y.j=0,U=y.S=[];for(A||(x=[A++]);m<b;)U[m]=m++;for(m=0;m<b;m++)U[m]=U[w=d&w+x[m%A]+(W=U[m])],U[w]=W;(y.g=function(j){for(var $,X=0,tt=y.i,rt=y.j,it=y.S;j--;)$=it[tt=d&tt+1],X=X*b+it[d&(it[tt]=it[rt=d&rt+$])+(it[rt]=$)];return y.i=tt,y.j=rt,X})(b)}function Z(x,W){return W.i=x.i,W.j=x.j,W.S=x.S.slice(),W}function Y(x,W){var m,A=[],y=typeof x;if(W&&"object"==y)for(m in x)try{A.push(Y(x[m],W-1))}catch(w){}return A.length?A:"string"==y?x:x+"\0"}function I(x,W){for(var y,A=x+"",m=0;m<A.length;)W[d&m]=d&(y^=19*W[d&m])+A.charCodeAt(m++);return S(W)}function S(x){return String.fromCharCode.apply(0,x)}if(I(i.random(),k),st.exports){st.exports=G;try{l=N(5042)}catch(x){}}else void 0!==(V=function(){return G}.call(R,N,R,st))&&(st.exports=V)}("undefined"!=typeof self?self:this,[],Math)},2002:function(st,R,N){"use strict";var h,V=this&&this.__extends||(h=function(g,f){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,l){d.__proto__=l}||function(d,l){for(var G in l)Object.prototype.hasOwnProperty.call(l,G)&&(d[G]=l[G])})(g,f)},function(g,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function d(){this.constructor=g}h(g,f),g.prototype=null===f?Object.create(f):(d.prototype=f.prototype,new d)}),z=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(R,"__esModule",{value:!0});var k=N(2630),i=z(N(4539)),b=N(1699),v=N(57),E=1.5,s=function(h){function g(){var f=h.call(this)||this;return f.x=.5,f.y=.5,f.angle=0,f.ratio=1,f.minRatio=null,f.maxRatio=null,f.nextFrame=null,f.previousState=null,f.enabled=!0,f.previousState=f.getState(),f}return V(g,h),g.from=function(f){return(new g).setState(f)},g.prototype.enable=function(){return this.enabled=!0,this},g.prototype.disable=function(){return this.enabled=!1,this},g.prototype.getState=function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}},g.prototype.hasState=function(f){return this.x===f.x&&this.y===f.y&&this.ratio===f.ratio&&this.angle===f.angle},g.prototype.getPreviousState=function(){var f=this.previousState;return f?{x:f.x,y:f.y,angle:f.angle,ratio:f.ratio}:null},g.prototype.getBoundedRatio=function(f){var d=f;return"number"==typeof this.minRatio&&(d=Math.max(d,this.minRatio)),"number"==typeof this.maxRatio&&(d=Math.min(d,this.maxRatio)),d},g.prototype.validateState=function(f){var d={};return"number"==typeof f.x&&(d.x=f.x),"number"==typeof f.y&&(d.y=f.y),"number"==typeof f.angle&&(d.angle=f.angle),"number"==typeof f.ratio&&(d.ratio=this.getBoundedRatio(f.ratio)),d},g.prototype.isAnimated=function(){return!!this.nextFrame},g.prototype.setState=function(f){if(!this.enabled)return this;this.previousState=this.getState();var d=this.validateState(f);return"number"==typeof d.x&&(this.x=d.x),"number"==typeof d.y&&(this.y=d.y),"number"==typeof d.angle&&(this.angle=d.angle),"number"==typeof d.ratio&&(this.ratio=d.ratio),this.hasState(this.previousState)||this.emit("updated",this.getState()),this},g.prototype.updateState=function(f){return this.setState(f(this.getState())),this},g.prototype.animate=function(f,d,l){var G=this;if(this.enabled){var P=Object.assign({},k.ANIMATE_DEFAULTS,d),Z=this.validateState(f),Y="function"==typeof P.easing?P.easing:i.default[P.easing],I=Date.now(),L=this.getState(),S=function(){var x=(Date.now()-I)/P.duration;if(x>=1)return G.nextFrame=null,G.setState(Z),void(G.animationCallback&&(G.animationCallback.call(null),G.animationCallback=void 0));var W=Y(x),A={};"number"==typeof Z.x&&(A.x=L.x+(Z.x-L.x)*W),"number"==typeof Z.y&&(A.y=L.y+(Z.y-L.y)*W),"number"==typeof Z.angle&&(A.angle=L.angle+(Z.angle-L.angle)*W),"number"==typeof Z.ratio&&(A.ratio=L.ratio+(Z.ratio-L.ratio)*W),G.setState(A),G.nextFrame=(0,b.requestFrame)(S)};this.nextFrame?((0,b.cancelFrame)(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=(0,b.requestFrame)(S)):S(),this.animationCallback=l}},g.prototype.animatedZoom=function(f){if(f){if("number"==typeof f)return this.animate({ratio:this.ratio/f});this.animate({ratio:this.ratio/(f.factor||E)},f)}else this.animate({ratio:this.ratio/E})},g.prototype.animatedUnzoom=function(f){if(f){if("number"==typeof f)return this.animate({ratio:this.ratio*f});this.animate({ratio:this.ratio*(f.factor||E)},f)}else this.animate({ratio:this.ratio*E})},g.prototype.animatedReset=function(f){this.animate({x:.5,y:.5,ratio:1,angle:0},f)},g.prototype.copy=function(){return g.from(this.getState())},g}(v.TypedEventEmitter);R.default=s},5473:function(st,R,N){"use strict";var d,V=this&&this.__extends||(d=function(l,G){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,Z){P.__proto__=Z}||function(P,Z){for(var Y in Z)Object.prototype.hasOwnProperty.call(Z,Y)&&(P[Y]=Z[Y])})(l,G)},function(l,G){if("function"!=typeof G&&null!==G)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");function P(){this.constructor=l}d(l,G),l.prototype=null===G?Object.create(G):(P.prototype=G.prototype,new P)}),z=this&&this.__assign||function(){return z=Object.assign||function(d){for(var l,G=1,P=arguments.length;G<P;G++)for(var Z in l=arguments[G])Object.prototype.hasOwnProperty.call(l,Z)&&(d[Z]=l[Z]);return d},z.apply(this,arguments)};Object.defineProperty(R,"__esModule",{value:!0}),R.getWheelDelta=R.getTouchCoords=R.getTouchesArray=R.getWheelCoords=R.getMouseCoords=R.getPosition=void 0;var k=N(57);function i(d,l){var G=l.getBoundingClientRect();return{x:d.clientX-G.left,y:d.clientY-G.top}}function b(d,l){var G=z(z({},i(d,l)),{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){G.sigmaDefaultPrevented=!0},original:d});return G}function s(d){for(var l=[],G=0,P=Math.min(d.length,2);G<P;G++)l.push(d[G]);return l}function g(d){if(void 0!==d.deltaY)return-3*d.deltaY/360;if(void 0!==d.detail)return d.detail/-9;throw new Error("Captor: could not extract delta from event.")}R.getPosition=i,R.getMouseCoords=b,R.getWheelCoords=function v(d,l){return z(z({},b(d,l)),{delta:g(d)})},R.getTouchesArray=s,R.getTouchCoords=function h(d,l){return{touches:s(d.touches).map(function(G){return i(G,l)}),original:d}},R.getWheelDelta=g;var f=function(d){function l(G,P){var Z=d.call(this)||this;return Z.container=G,Z.renderer=P,Z}return V(l,d),l}(k.TypedEventEmitter);R.default=f},2465:function(st,R,N){"use strict";var Z,V=this&&this.__extends||(Z=function(Y,I){return(Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,S){L.__proto__=S}||function(L,S){for(var x in S)Object.prototype.hasOwnProperty.call(S,x)&&(L[x]=S[x])})(Y,I)},function(Y,I){if("function"!=typeof I&&null!==I)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");function L(){this.constructor=Y}Z(Y,I),Y.prototype=null===I?Object.create(I):(L.prototype=I.prototype,new L)}),z=this&&this.__createBinding||(Object.create?function(Z,Y,I,L){void 0===L&&(L=I),Object.defineProperty(Z,L,{enumerable:!0,get:function(){return Y[I]}})}:function(Z,Y,I,L){void 0===L&&(L=I),Z[L]=Y[I]}),k=this&&this.__setModuleDefault||(Object.create?function(Z,Y){Object.defineProperty(Z,"default",{enumerable:!0,value:Y})}:function(Z,Y){Z.default=Y}),i=this&&this.__importStar||function(Z){if(Z&&Z.__esModule)return Z;var Y={};if(null!=Z)for(var I in Z)"default"!==I&&Object.prototype.hasOwnProperty.call(Z,I)&&z(Y,Z,I);return k(Y,Z),Y};Object.defineProperty(R,"__esModule",{value:!0});var b=i(N(5473)),P=function(Z){function Y(I,L){var S=Z.call(this,I,L)||this;return S.enabled=!0,S.draggedEvents=0,S.downStartTime=null,S.lastMouseX=null,S.lastMouseY=null,S.isMouseDown=!1,S.isMoving=!1,S.movingTimeout=null,S.startCameraState=null,S.clicks=0,S.doubleClickTimeout=null,S.currentWheelDirection=0,S.handleClick=S.handleClick.bind(S),S.handleRightClick=S.handleRightClick.bind(S),S.handleDown=S.handleDown.bind(S),S.handleUp=S.handleUp.bind(S),S.handleMove=S.handleMove.bind(S),S.handleWheel=S.handleWheel.bind(S),S.handleOut=S.handleOut.bind(S),I.addEventListener("click",S.handleClick,!1),I.addEventListener("contextmenu",S.handleRightClick,!1),I.addEventListener("mousedown",S.handleDown,!1),I.addEventListener("wheel",S.handleWheel,!1),I.addEventListener("mouseout",S.handleOut,!1),document.addEventListener("mousemove",S.handleMove,!1),document.addEventListener("mouseup",S.handleUp,!1),S}return V(Y,Z),Y.prototype.kill=function(){var I=this.container;I.removeEventListener("click",this.handleClick),I.removeEventListener("contextmenu",this.handleRightClick),I.removeEventListener("mousedown",this.handleDown),I.removeEventListener("wheel",this.handleWheel),I.removeEventListener("mouseout",this.handleOut),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)},Y.prototype.handleClick=function(I){var L=this;if(this.enabled){if(this.clicks++,2===this.clicks)return this.clicks=0,"number"==typeof this.doubleClickTimeout&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(I);setTimeout(function(){L.clicks=0,L.doubleClickTimeout=null},300),this.draggedEvents<3&&this.emit("click",(0,b.getMouseCoords)(I,this.container))}},Y.prototype.handleRightClick=function(I){!this.enabled||this.emit("rightClick",(0,b.getMouseCoords)(I,this.container))},Y.prototype.handleDoubleClick=function(I){if(this.enabled){I.preventDefault(),I.stopPropagation();var L=(0,b.getMouseCoords)(I,this.container);if(this.emit("doubleClick",L),!L.sigmaDefaultPrevented){var S=this.renderer.getCamera(),x=S.getBoundedRatio(S.getState().ratio/2.2);S.animate(this.renderer.getViewportZoomedState((0,b.getPosition)(I,this.container),x),{easing:"quadraticInOut",duration:200})}}},Y.prototype.handleDown=function(I){if(this.enabled){if(0===I.button){this.startCameraState=this.renderer.getCamera().getState();var L=(0,b.getPosition)(I,this.container),x=L.y;this.lastMouseX=L.x,this.lastMouseY=x,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",(0,b.getMouseCoords)(I,this.container))}},Y.prototype.handleUp=function(I){var L=this;if(this.enabled&&this.isMouseDown){var S=this.renderer.getCamera();this.isMouseDown=!1,"number"==typeof this.movingTimeout&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var x=(0,b.getPosition)(I,this.container),W=x.x,A=x.y,y=S.getState(),m=S.getPreviousState()||{x:0,y:0};this.isMoving?S.animate({x:y.x+3*(y.x-m.x),y:y.y+3*(y.y-m.y)},{duration:200,easing:"quadraticOut"}):(this.lastMouseX!==W||this.lastMouseY!==A)&&S.setState({x:y.x,y:y.y}),this.isMoving=!1,setTimeout(function(){L.draggedEvents=0,L.renderer.refresh()},0),this.emit("mouseup",(0,b.getMouseCoords)(I,this.container))}},Y.prototype.handleMove=function(I){var L=this;if(this.enabled){var S=(0,b.getMouseCoords)(I,this.container);if(this.emit("mousemovebody",S),I.target===this.container&&this.emit("mousemove",S),!S.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,"number"==typeof this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){L.movingTimeout=null,L.isMoving=!1},100);var x=this.renderer.getCamera(),W=(0,b.getPosition)(I,this.container),A=W.x,y=W.y,m=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),w=this.renderer.viewportToFramedGraph({x:A,y}),U=m.x-w.x,j=m.y-w.y,$=x.getState();x.setState({x:$.x+U,y:$.y+j}),this.lastMouseX=A,this.lastMouseY=y,I.preventDefault(),I.stopPropagation()}}},Y.prototype.handleWheel=function(I){var L=this;if(this.enabled){I.preventDefault(),I.stopPropagation();var S=(0,b.getWheelDelta)(I);if(S){var x=(0,b.getWheelCoords)(I,this.container);if(this.emit("wheel",x),!x.sigmaDefaultPrevented){var W=S>0?1/1.7:1.7,A=this.renderer.getCamera(),y=A.getBoundedRatio(A.getState().ratio*W),m=S>0?1:-1,w=Date.now();this.currentWheelDirection===m&&this.lastWheelTriggerTime&&w-this.lastWheelTriggerTime<50||(A.animate(this.renderer.getViewportZoomedState((0,b.getPosition)(I,this.container),y),{easing:"quadraticOut",duration:250},function(){L.currentWheelDirection=0}),this.currentWheelDirection=m,this.lastWheelTriggerTime=w)}}}},Y.prototype.handleOut=function(){},Y}(b.default);R.default=P},1565:function(st,R,N){"use strict";var f,V=this&&this.__extends||(f=function(d,l){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,P){G.__proto__=P}||function(G,P){for(var Z in P)Object.prototype.hasOwnProperty.call(P,Z)&&(G[Z]=P[Z])})(d,l)},function(d,l){if("function"!=typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function G(){this.constructor=d}f(d,l),d.prototype=null===l?Object.create(l):(G.prototype=l.prototype,new G)}),z=this&&this.__createBinding||(Object.create?function(f,d,l,G){void 0===G&&(G=l),Object.defineProperty(f,G,{enumerable:!0,get:function(){return d[l]}})}:function(f,d,l,G){void 0===G&&(G=l),f[G]=d[l]}),k=this&&this.__setModuleDefault||(Object.create?function(f,d){Object.defineProperty(f,"default",{enumerable:!0,value:d})}:function(f,d){f.default=d}),i=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var d={};if(null!=f)for(var l in f)"default"!==l&&Object.prototype.hasOwnProperty.call(f,l)&&z(d,f,l);return k(d,f),d},b=this&&this.__read||function(f,d){var l="function"==typeof Symbol&&f[Symbol.iterator];if(!l)return f;var P,Y,G=l.call(f),Z=[];try{for(;(void 0===d||d-- >0)&&!(P=G.next()).done;)Z.push(P.value)}catch(I){Y={error:I}}finally{try{P&&!P.done&&(l=G.return)&&l.call(G)}finally{if(Y)throw Y.error}}return Z};Object.defineProperty(R,"__esModule",{value:!0});var v=i(N(5473)),g=function(f){function d(l,G){var P=f.call(this,l,G)||this;return P.enabled=!0,P.isMoving=!1,P.hasMoved=!1,P.touchMode=0,P.startTouchesPositions=[],P.handleStart=P.handleStart.bind(P),P.handleLeave=P.handleLeave.bind(P),P.handleMove=P.handleMove.bind(P),l.addEventListener("touchstart",P.handleStart,!1),l.addEventListener("touchend",P.handleLeave,!1),l.addEventListener("touchcancel",P.handleLeave,!1),l.addEventListener("touchmove",P.handleMove,!1),P}return V(d,f),d.prototype.kill=function(){var l=this.container;l.removeEventListener("touchstart",this.handleStart),l.removeEventListener("touchend",this.handleLeave),l.removeEventListener("touchcancel",this.handleLeave),l.removeEventListener("touchmove",this.handleMove)},d.prototype.getDimensions=function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}},d.prototype.dispatchRelatedMouseEvent=function(l,G,P,Z){var Y=P||G.touches[0],I=new MouseEvent(l,{clientX:Y.clientX,clientY:Y.clientY,altKey:G.altKey,ctrlKey:G.ctrlKey});I.isFakeSigmaMouseEvent=!0,(Z||this.container).dispatchEvent(I)},d.prototype.handleStart=function(l){var G=this;if(this.enabled){l.preventDefault(),1===l.touches.length&&this.dispatchRelatedMouseEvent("mousedown",l);var P=(0,v.getTouchesArray)(l.touches);if(this.touchMode=P.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=P.map(function(A){return(0,v.getPosition)(A,G.container)}),this.lastTouches=P,this.lastTouchesPositions=this.startTouchesPositions,2===this.touchMode){var Z=b(this.startTouchesPositions,2),Y=Z[0],I=Y.x,L=Y.y,S=Z[1],x=S.x,W=S.y;this.startTouchesAngle=Math.atan2(W-L,x-I),this.startTouchesDistance=Math.sqrt(Math.pow(x-I,2)+Math.pow(W-L,2))}this.emit("touchdown",(0,v.getTouchCoords)(l,this.container))}},d.prototype.handleLeave=function(l){if(this.enabled){switch(l.preventDefault(),0===l.touches.length&&this.lastTouches&&this.lastTouches.length&&(this.dispatchRelatedMouseEvent("mouseup",l,this.lastTouches[0],document),this.hasMoved||this.dispatchRelatedMouseEvent("click",l,this.lastTouches[0])),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(1===l.touches.length){this.handleStart(l),l.preventDefault();break}case 1:if(this.isMoving){var G=this.renderer.getCamera(),P=G.getState(),Z=G.getPreviousState()||{x:0,y:0};G.animate({x:P.x+3*(P.x-Z.x),y:P.y+3*(P.y-Z.y)},{duration:200,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0}this.emit("touchup",(0,v.getTouchCoords)(l,this.container))}},d.prototype.handleMove=function(l){var G,P=this;if(this.enabled){l.preventDefault(),1===l.touches.length&&this.dispatchRelatedMouseEvent("mousemove",l);var Z=(0,v.getTouchesArray)(l.touches),Y=Z.map(function(dt){return(0,v.getPosition)(dt,P.container)});if(this.lastTouches=Z,this.lastTouchesPositions=Y,this.hasMoved||(this.hasMoved=Y.some(function(dt,xt){var Zt=P.startTouchesPositions[xt];return dt.x!==Zt.x||dt.y!==Zt.y})),this.hasMoved){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){P.isMoving=!1},200);var I=this.renderer.getCamera(),L=this.startCameraState;switch(this.touchMode){case 1:var S=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),x=S.x,W=S.y,A=this.renderer.viewportToFramedGraph(Y[0]);I.setState({x:L.x+x-(y=A.x),y:L.y+W-(m=A.y)});break;case 2:var w={},U=Y[0],j=U.x,$=U.y,X=Y[1],tt=X.x,rt=X.y,it=Math.atan2(rt-$,tt-j)-this.startTouchesAngle,gt=Math.hypot(rt-$,tt-j)/this.startTouchesDistance,lt=I.getBoundedRatio(L.ratio/gt);w.ratio=lt,w.angle=L.angle+it;var y,Et=this.getDimensions(),ht=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:L}),At=Math.min(Et.width,Et.height),ut=lt/At,m=$-At/2/(At/Et.height);m=(G=b([(y=j-At/2/(At/Et.width))*Math.cos(-w.angle)-m*Math.sin(-w.angle),m*Math.cos(-w.angle)+y*Math.sin(-w.angle)],2))[1],w.x=ht.x-(y=G[0])*ut,w.y=ht.y+m*ut,I.setState(w)}this.emit("touchmove",(0,v.getTouchCoords)(l,this.container))}}},d}(v.default);R.default=g},4942:(st,R)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.edgeLabelsToDisplayFromNodes=R.LabelGrid=void 0;var N=function(){function k(i,b){this.key=i,this.size=b}return k.compare=function(i,b){return i.size>b.size?-1:i.size<b.size||i.key>b.key?1:-1},k}(),V=function(){function k(){this.width=0,this.height=0,this.cellSize=0,this.columns=0,this.rows=0,this.cells={}}return k.prototype.resizeAndClear=function(i,b){this.width=i.width,this.height=i.height,this.cellSize=b,this.columns=Math.ceil(i.width/b),this.rows=Math.ceil(i.height/b),this.cells={}},k.prototype.getIndex=function(i){var b=Math.floor(i.x/this.cellSize);return Math.floor(i.y/this.cellSize)*this.columns+b},k.prototype.add=function(i,b,v){var E=new N(i,b),s=this.getIndex(v),h=this.cells[s];h||(this.cells[s]=h=[]),h.push(E)},k.prototype.organize=function(){for(var i in this.cells)this.cells[i].sort(N.compare)},k.prototype.getLabelsToDisplay=function(i,b){var v=this.cellSize*this.cellSize,h=Math.ceil(v/i/i*b/v),g=[];for(var f in this.cells)for(var d=this.cells[f],l=0;l<Math.min(h,d.length);l++)g.push(d[l].key);return g},k}();R.LabelGrid=V,R.edgeLabelsToDisplayFromNodes=function z(k){var b=k.hoveredNode,v=k.highlightedNodes,E=k.displayedNodeLabels,s=[];return k.graph.forEachEdge(function(h,g,f,d){(f===b||d===b||v.has(f)||v.has(d)||E.has(f)&&E.has(d))&&s.push(h)}),s}},3650:function(st,R,N){"use strict";var V=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(R,"__esModule",{value:!0}),R.rectangleCollidesWithQuad=R.squareCollidesWithQuad=R.getCircumscribedAlignedRectangle=R.isRectangleAligned=void 0;var z=V(N(3333)),b=5460,G=!1;function P(y){return y.x1===y.x2||y.y1===y.y2}function Z(y){var m=Math.sqrt(Math.pow(y.x2-y.x1,2)+Math.pow(y.y2-y.y1,2)),w_x=(y.y1-y.y2)*y.height/m,w_y=(y.x2-y.x1)*y.height/m,U={x:y.x1,y:y.y1},j={x:y.x2,y:y.y2},$={x:y.x1+w_x,y:y.y1+w_y},X={x:y.x2+w_x,y:y.y2+w_y},tt=Math.min(U.x,j.x,$.x,X.x),rt=Math.max(U.x,j.x,$.x,X.x),it=Math.min(U.y,j.y,$.y,X.y);return{x1:tt,y1:it,x2:rt,y2:it,height:Math.max(U.y,j.y,$.y,X.y)-it}}function Y(y,m,w,U,j,$,X){return y<U+$&&y+w>U&&m<j+X&&m+w>j}function I(y,m,w,U,j,$,X,tt){return y<j+X&&y+w>j&&m<$+tt&&m+U>$}function L(y,m,w,U,j,$){var it=y<w+j/2;return m<U+$/2?it?1:2:it?3:4}R.isRectangleAligned=P,R.getCircumscribedAlignedRectangle=Z,R.squareCollidesWithQuad=Y,R.rectangleCollidesWithQuad=I;var A=function(){function y(m){var w;void 0===m&&(m={}),this.containers=((w={})[b]=[],w),this.cache=null,this.lastRectangle=null;var U=Math.pow(4,5);this.data=new Float32Array((4*U-1)/3*4),this.resize(m.boundaries?m.boundaries:{x:0,y:0,width:1,height:1})}return y.prototype.add=function(m,w,U,j){return function x(y,m,w,U,j,$,X){for(var tt=j-X,rt=$-X,it=2*X,gt=0,lt=0;;){if(gt>=y)return w[lt]=w[lt]||[],void w[lt].push(U);var Et=4*lt+4,ht=4*lt+8,At=4*lt+12,Dt=4*lt+16,Pt=Y(tt,rt,it,m[Et+0],m[Et+1],m[Et+2],m[Et+3]),ut=Y(tt,rt,it,m[ht+0],m[ht+1],m[ht+2],m[ht+3]),dt=Y(tt,rt,it,m[At+0],m[At+1],m[At+2],m[At+3]),xt=Y(tt,rt,it,m[Dt+0],m[Dt+1],m[Dt+2],m[Dt+3]),Zt=[Pt,ut,dt,xt].reduce(function(Vt,Xt){return Xt?Vt+1:Vt},0);if(0===Zt&&0===gt)return w[b].push(U),void(!G&&w[b].length>=5&&(G=!0,console.warn("sigma/quadtree.insertNode: At least 5 nodes are outside the global quadtree zone. You might have a problem with the normalization function or the custom bounding box.")));if(0===Zt)throw new Error("sigma/quadtree.insertNode: no collision (level: ".concat(gt,", key: ").concat(U,", x: ").concat(j,", y: ").concat($,", size: ").concat(X,")."));if(3===Zt)throw new Error("sigma/quadtree.insertNode: 3 impossible collisions (level: ".concat(gt,", key: ").concat(U,", x: ").concat(j,", y: ").concat($,", size: ").concat(X,")."));if(Zt>1)return w[lt]=w[lt]||[],void w[lt].push(U);gt++,Pt&&(lt=Et),ut&&(lt=ht),dt&&(lt=At),xt&&(lt=Dt)}}(5,this.data,this.containers,m,w,U,j),this},y.prototype.resize=function(m){this.clear(),this.data[0]=m.x,this.data[1]=m.y,this.data[2]=m.width,this.data[3]=m.height,function S(y,m){for(var w=[0,0];w.length;){var U=w.pop(),j=w.pop(),$=4*j+4,X=4*j+8,tt=4*j+12,rt=4*j+16,it=m[j+0],gt=m[j+1],ht=m[j+2]/2,At=m[j+3]/2;m[$+0]=it,m[$+1]=gt,m[$+2]=ht,m[$+3]=At,m[X+0]=it+ht,m[X+1]=gt,m[X+2]=ht,m[X+3]=At,m[tt+0]=it,m[tt+1]=gt+At,m[tt+2]=ht,m[tt+3]=At,m[rt+0]=it+ht,m[rt+1]=gt+At,m[rt+2]=ht,m[rt+3]=At,U<y-1&&(w.push(rt,U+1),w.push(tt,U+1),w.push(X,U+1),w.push($,U+1))}}(5,this.data)},y.prototype.clear=function(){var m;return this.containers=((m={})[b]=[],m),this},y.prototype.point=function(m,w){var U=this.containers[b].slice(),j=0,$=0;do{this.containers[j]&&(0,z.default)(U,this.containers[j]),j=4*j+4*L(m,w,this.data[j+0],this.data[j+1],this.data[j+2],this.data[j+3]),$++}while($<=5);return U},y.prototype.rectangle=function(m,w,U,j,$){var X=this.lastRectangle;return X&&m===X.x1&&U===X.x2&&w===X.y1&&j===X.y2&&$===X.height||(this.lastRectangle={x1:m,y1:w,x2:U,y2:j,height:$},P(this.lastRectangle)||(this.lastRectangle=Z(this.lastRectangle)),this.cache=function W(y,m,w,U,j,$,X){for(var it,tt=[0,0],rt=[];tt.length;){var gt=tt.pop(),lt=tt.pop();if((it=w[lt])&&(0,z.default)(rt,it),!(gt>=y)){var Et=4*lt+4,ht=4*lt+8,At=4*lt+12,Dt=4*lt+16,Pt=I(U,j,$,X,m[Et+0],m[Et+1],m[Et+2],m[Et+3]),ut=I(U,j,$,X,m[ht+0],m[ht+1],m[ht+2],m[ht+3]),dt=I(U,j,$,X,m[At+0],m[At+1],m[At+2],m[At+3]),xt=I(U,j,$,X,m[Dt+0],m[Dt+1],m[Dt+2],m[Dt+3]);Pt&&tt.push(Et,gt+1),ut&&tt.push(ht,gt+1),dt&&tt.push(At,gt+1),xt&&tt.push(Dt,gt+1)}}return rt}(5,this.data,this.containers,m,w,Math.abs(m-U)||Math.abs(w-j),$),(0,z.default)(this.cache,this.containers[b])),this.cache},y}();R.default=A},756:function(st,R,N){"use strict";var V=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(R,"__esModule",{value:!0}),R.Sigma=R.MouseCaptor=R.QuadTree=R.Camera=void 0;var z=V(N(4870));R.Sigma=z.default;var k=V(N(2002));R.Camera=k.default;var i=V(N(3650));R.QuadTree=i.default;var b=V(N(2465));R.MouseCaptor=b.default,R.default=z.default},1285:(st,R)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function N(V,z,k,i,b){var v=b.edgeLabelSize,E=b.edgeLabelFont,s=b.edgeLabelWeight,g=z.label;if(g){V.fillStyle=b.edgeLabelColor.attribute?z[b.edgeLabelColor.attribute]||b.edgeLabelColor.color||"#000":b.edgeLabelColor.color,V.font="".concat(s," ").concat(v,"px ").concat(E);var f=k.size,d=i.size,l=k.x,G=k.y,P=i.x,Z=i.y,Y=(l+P)/2,I=(G+Z)/2,L=P-l,S=Z-G,x=Math.sqrt(L*L+S*S);if(!(x<f+d)){Y=((l+=L*f/x)+(P-=L*d/x))/2,I=((G+=S*f/x)+(Z-=S*d/x))/2,L=P-l,S=Z-G,x=Math.sqrt(L*L+S*S);var y,W=V.measureText(g).width;if(W>x){for(W=V.measureText(g+="\u2026").width;W>x&&g.length>1;)g=g.slice(0,-2)+"\u2026",W=V.measureText(g).width;if(g.length<4)return}y=L>0?S>0?Math.acos(L/x):Math.asin(S/x):S>0?Math.acos(L/x)+Math.PI:Math.asin(L/x)+Math.PI/2,V.save(),V.translate(Y,I),V.rotate(y),V.fillText(g,-W/2,z.size/2+v),V.restore()}}}},4997:function(st,R,N){"use strict";var V=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(R,"__esModule",{value:!0});var z=V(N(9597));R.default=function k(i,b,v){var E=v.labelSize,s=v.labelFont;if(i.font="".concat(v.labelWeight," ").concat(E,"px ").concat(s),i.fillStyle="#FFF",i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=8,i.shadowColor="#000","string"==typeof b.label){var f=i.measureText(b.label).width,d=Math.round(f+5),l=Math.round(E+4),G=Math.max(b.size,E/2)+2,P=Math.asin(l/2/G),Z=Math.sqrt(Math.abs(Math.pow(G,2)-Math.pow(l/2,2)));i.beginPath(),i.moveTo(b.x+Z,b.y+l/2),i.lineTo(b.x+G+d,b.y+l/2),i.lineTo(b.x+G+d,b.y-l/2),i.lineTo(b.x+Z,b.y-l/2),i.arc(b.x,b.y,G,P,-P),i.closePath(),i.fill()}else i.beginPath(),i.arc(b.x,b.y,b.size+2,0,2*Math.PI),i.closePath(),i.fill();i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=0,(0,z.default)(i,b,v)}},9597:(st,R)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function N(V,z,k){if(z.label){var i=k.labelSize,b=k.labelFont,v=k.labelWeight;V.fillStyle=k.labelColor.attribute?z[k.labelColor.attribute]||k.labelColor.color||"#000":k.labelColor.color,V.font="".concat(v," ").concat(i,"px ").concat(b),V.fillText(z.label,z.x+z.size+3,z.y+i/3)}}},6160:function(st,R,N){"use strict";var v,V=this&&this.__extends||(v=function(E,s){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var f in g)Object.prototype.hasOwnProperty.call(g,f)&&(h[f]=g[f])})(E,s)},function(E,s){if("function"!=typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function h(){this.constructor=E}v(E,s),E.prototype=null===s?Object.create(s):(h.prototype=s.prototype,new h)});Object.defineProperty(R,"__esModule",{value:!0}),R.createEdgeCompoundProgram=R.EdgeProgram=R.AbstractEdgeProgram=void 0;var z=N(9693),k=function(v){function E(){return null!==v&&v.apply(this,arguments)||this}return V(E,v),E}(z.AbstractProgram);R.AbstractEdgeProgram=k;var i=function(v){function E(){return null!==v&&v.apply(this,arguments)||this}return V(E,v),E.prototype.process=function(s,h,g,f){var d=s*this.STRIDE;if(!(f.hidden||h.hidden||g.hidden))return this.processVisibleItem(d,h,g,f);for(var l=d+this.STRIDE;d<l;d++)this.array[d]=0},E}(z.Program);R.EdgeProgram=i,R.createEdgeCompoundProgram=function b(v){return function(){function E(s,h){this.programs=v.map(function(g){return new g(s,h)})}return E.prototype.reallocate=function(s){this.programs.forEach(function(h){return h.reallocate(s)})},E.prototype.process=function(s,h,g,f){this.programs.forEach(function(d){return d.process(s,h,g,f)})},E.prototype.render=function(s){this.programs.forEach(function(h){return h.render(s)})},E}()}},4588:function(st,R,N){"use strict";var v,V=this&&this.__extends||(v=function(E,s){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var f in g)Object.prototype.hasOwnProperty.call(g,f)&&(h[f]=g[f])})(E,s)},function(E,s){if("function"!=typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function h(){this.constructor=E}v(E,s),E.prototype=null===s?Object.create(s):(h.prototype=s.prototype,new h)});Object.defineProperty(R,"__esModule",{value:!0}),R.createNodeCompoundProgram=R.NodeProgram=R.AbstractNodeProgram=void 0;var z=N(9693),k=function(v){function E(){return null!==v&&v.apply(this,arguments)||this}return V(E,v),E}(z.AbstractProgram);R.AbstractNodeProgram=k;var i=function(v){function E(){return null!==v&&v.apply(this,arguments)||this}return V(E,v),E.prototype.process=function(s,h){var g=s*this.STRIDE;if(!h.hidden)return this.processVisibleItem(g,h);for(var f=g+this.STRIDE;g<f;g++)this.array[g]=0},E}(z.Program);R.NodeProgram=i,R.createNodeCompoundProgram=function b(v){return function(){function E(s,h){this.programs=v.map(function(g){return new g(s,h)})}return E.prototype.reallocate=function(s){this.programs.forEach(function(h){return h.reallocate(s)})},E.prototype.process=function(s,h){this.programs.forEach(function(g){return g.process(s,h)})},E.prototype.render=function(s){this.programs.forEach(function(h){return h.render(s)})},E}()}},9693:(st,R,N)=>{"use strict";var V;Object.defineProperty(R,"__esModule",{value:!0}),R.Program=R.AbstractProgram=void 0;var z=N(1699),k=N(5166),i=((V={})[WebGL2RenderingContext.BOOL]=1,V[WebGL2RenderingContext.BYTE]=1,V[WebGL2RenderingContext.UNSIGNED_BYTE]=1,V[WebGL2RenderingContext.SHORT]=2,V[WebGL2RenderingContext.UNSIGNED_SHORT]=2,V[WebGL2RenderingContext.INT]=4,V[WebGL2RenderingContext.UNSIGNED_INT]=4,V[WebGL2RenderingContext.FLOAT]=4,V);R.AbstractProgram=function E(s,h){};var v=function(){function E(s,h){var g=this;this.array=new Float32Array,this.indicesArray=null,this.uniformLocations={},this.attributeLocations={},this.capacity=0,this.verticesCount=0;var f=this.getDefinition();this.VERTICES=f.VERTICES,this.ARRAY_ITEMS_PER_VERTEX=f.ARRAY_ITEMS_PER_VERTEX,this.VERTEX_SHADER_SOURCE=f.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=f.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=f.UNIFORMS,this.ATTRIBUTES=f.ATTRIBUTES,this.STRIDE=this.VERTICES*this.ARRAY_ITEMS_PER_VERTEX,this.gl=s,this.renderer=h;var d=s.createBuffer();if(null===d)throw new Error("Program: error while creating the webgl buffer.");this.buffer=d;var l=s.createBuffer();if(null===l)throw new Error("Program: error while creating the webgl indices buffer.");this.indicesBuffer=l,this.vertexShader=(0,k.loadVertexShader)(this.gl,this.VERTEX_SHADER_SOURCE),this.fragmentShader=(0,k.loadFragmentShader)(this.gl,this.FRAGMENT_SHADER_SOURCE),this.program=(0,k.loadProgram)(this.gl,[this.vertexShader,this.fragmentShader]),this.canUse32BitsIndices=(0,z.canUse32BitsIndices)(this.gl),this.indicesType=this.canUse32BitsIndices?s.UNSIGNED_INT:s.UNSIGNED_SHORT,this.IndicesArray=this.canUse32BitsIndices?Uint32Array:Uint16Array,this.UNIFORMS.forEach(function(G){var P=g.gl.getUniformLocation(g.program,G);if(null===P)throw new Error('Program: error while getting location for uniform "'.concat(G,'".'));g.uniformLocations[G]=P}),this.ATTRIBUTES.forEach(function(G){var P=g.gl.getAttribLocation(g.program,G.name);if(-1===P)throw new Error('Program: error while getting location for attribute "'.concat(G.name,'".'));g.attributeLocations[G.name]=P})}return E.prototype.bind=function(){var s=this,h=this.gl;for(var g in h.bindBuffer(h.ARRAY_BUFFER,this.buffer),this.indicesArray&&h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),this.attributeLocations)h.enableVertexAttribArray(this.attributeLocations[g]);var f=0;this.ATTRIBUTES.forEach(function(d){h.vertexAttribPointer(s.attributeLocations[d.name],d.size,d.type,d.normalized||!1,s.ARRAY_ITEMS_PER_VERTEX*Float32Array.BYTES_PER_ELEMENT,f);var G=i[d.type];if("number"!=typeof G)throw new Error('Program.bind: yet unsupported attribute type "'.concat(d.type,'"!'));f+=d.size*G})},E.prototype.bufferData=function(){var s=this.gl;this.gl.bufferData(s.ARRAY_BUFFER,this.array,s.DYNAMIC_DRAW),this.indicesArray&&this.gl.bufferData(s.ELEMENT_ARRAY_BUFFER,this.indicesArray,s.STATIC_DRAW)},E.prototype.reallocateIndices=function(){},E.prototype.reallocate=function(s){s!==this.capacity&&(this.capacity=s,this.verticesCount=this.VERTICES*s,this.array=new Float32Array(this.verticesCount*this.ARRAY_ITEMS_PER_VERTEX),"function"==typeof this.reallocateIndices&&this.reallocateIndices())},E.prototype.hasNothingToRender=function(){return 0===this.verticesCount},E.prototype.render=function(s){this.hasNothingToRender()||(this.bind(),this.bufferData(),this.gl.useProgram(this.program),this.draw(s))},E}();R.Program=v},1391:function(st,R,N){"use strict";var V=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(R,"__esModule",{value:!0});var z=N(6160),k=V(N(1034)),i=V(N(2542)),b=(0,z.createEdgeCompoundProgram)([i.default,k.default]);R.default=b},1034:function(st,R,N){"use strict";var f,V=this&&this.__extends||(f=function(d,l){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,P){G.__proto__=P}||function(G,P){for(var Z in P)Object.prototype.hasOwnProperty.call(P,Z)&&(G[Z]=P[Z])})(d,l)},function(d,l){if("function"!=typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function G(){this.constructor=d}f(d,l),d.prototype=null===l?Object.create(l):(G.prototype=l.prototype,new G)}),z=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(R,"__esModule",{value:!0});var k=N(1699),i=N(6160),b=z(N(4647)),v=z(N(2018)),E=WebGLRenderingContext.UNSIGNED_BYTE,s=WebGLRenderingContext.FLOAT,h=["u_matrix","u_sizeRatio","u_correctionRatio"],g=function(f){function d(){return null!==f&&f.apply(this,arguments)||this}return V(d,f),d.prototype.getDefinition=function(){return{VERTICES:3,ARRAY_ITEMS_PER_VERTEX:9,VERTEX_SHADER_SOURCE:b.default,FRAGMENT_SHADER_SOURCE:v.default,UNIFORMS:h,ATTRIBUTES:[{name:"a_position",size:2,type:s},{name:"a_normal",size:2,type:s},{name:"a_radius",size:1,type:s},{name:"a_color",size:4,type:E,normalized:!0},{name:"a_barycentric",size:3,type:s}]}},d.prototype.processVisibleItem=function(l,G,P,Z){var Y=Z.size||1,I=P.size||1,L=G.x,S=G.y,x=P.x,W=P.y,A=(0,k.floatColor)(Z.color),y=x-L,m=W-S,w=y*y+m*m,U=0,j=0;w&&(U=-m*(w=1/Math.sqrt(w))*Y,j=y*w*Y);var $=this.array;$[l++]=x,$[l++]=W,$[l++]=-U,$[l++]=-j,$[l++]=I,$[l++]=A,$[l++]=1,$[l++]=0,$[l++]=0,$[l++]=x,$[l++]=W,$[l++]=-U,$[l++]=-j,$[l++]=I,$[l++]=A,$[l++]=0,$[l++]=1,$[l++]=0,$[l++]=x,$[l++]=W,$[l++]=-U,$[l++]=-j,$[l++]=I,$[l++]=A,$[l++]=0,$[l++]=0,$[l]=1},d.prototype.draw=function(l){var G=this.gl,P=this.uniformLocations,Y=P.u_sizeRatio,I=P.u_correctionRatio;G.uniformMatrix3fv(P.u_matrix,!1,l.matrix),G.uniform1f(Y,l.sizeRatio),G.uniform1f(I,l.correctionRatio),G.drawArrays(G.TRIANGLES,0,this.verticesCount)},d}(i.EdgeProgram);R.default=g},2542:function(st,R,N){"use strict";var g,V=this&&this.__extends||(g=function(f,d){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,G){l.__proto__=G}||function(l,G){for(var P in G)Object.prototype.hasOwnProperty.call(G,P)&&(l[P]=G[P])})(f,d)},function(f,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function l(){this.constructor=f}g(f,d),f.prototype=null===d?Object.create(d):(l.prototype=d.prototype,new l)}),z=this&&this.__assign||function(){return z=Object.assign||function(g){for(var f,d=1,l=arguments.length;d<l;d++)for(var G in f=arguments[d])Object.prototype.hasOwnProperty.call(f,G)&&(g[G]=f[G]);return g},z.apply(this,arguments)},k=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(R,"__esModule",{value:!0});var i=k(N(5803)),b=k(N(2529)),v=N(1699),E=WebGLRenderingContext.UNSIGNED_BYTE,s=WebGLRenderingContext.FLOAT,h=function(g){function f(){return null!==g&&g.apply(this,arguments)||this}return V(f,g),f.prototype.getDefinition=function(){return z(z({},g.prototype.getDefinition.call(this)),{ARRAY_ITEMS_PER_VERTEX:6,VERTEX_SHADER_SOURCE:b.default,ATTRIBUTES:[{name:"a_position",size:2,type:s},{name:"a_normal",size:2,type:s},{name:"a_color",size:4,type:E,normalized:!0},{name:"a_radius",size:1,type:s}]})},f.prototype.processVisibleItem=function(d,l,G,P){var Z=P.size||1,Y=l.x,I=l.y,L=G.x,S=G.y,x=(0,v.floatColor)(P.color),W=L-Y,A=S-I,y=G.size||1,m=W*W+A*A,w=0,U=0;m&&(w=-A*(m=1/Math.sqrt(m))*Z,U=W*m*Z);var j=this.array;j[d++]=Y,j[d++]=I,j[d++]=w,j[d++]=U,j[d++]=x,j[d++]=0,j[d++]=Y,j[d++]=I,j[d++]=-w,j[d++]=-U,j[d++]=x,j[d++]=0,j[d++]=L,j[d++]=S,j[d++]=w,j[d++]=U,j[d++]=x,j[d++]=y,j[d++]=L,j[d++]=S,j[d++]=-w,j[d++]=-U,j[d++]=x,j[d]=-y},f}(i.default);R.default=h},5803:function(st,R,N){"use strict";var f,V=this&&this.__extends||(f=function(d,l){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,P){G.__proto__=P}||function(G,P){for(var Z in P)Object.prototype.hasOwnProperty.call(P,Z)&&(G[Z]=P[Z])})(d,l)},function(d,l){if("function"!=typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function G(){this.constructor=d}f(d,l),d.prototype=null===l?Object.create(l):(G.prototype=l.prototype,new G)}),z=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(R,"__esModule",{value:!0});var k=N(1699),i=N(6160),b=z(N(4464)),v=z(N(5179)),E=WebGLRenderingContext.UNSIGNED_BYTE,s=WebGLRenderingContext.FLOAT,h=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio"],g=function(f){function d(){return null!==f&&f.apply(this,arguments)||this}return V(d,f),d.prototype.getDefinition=function(){return{VERTICES:4,ARRAY_ITEMS_PER_VERTEX:5,VERTEX_SHADER_SOURCE:b.default,FRAGMENT_SHADER_SOURCE:v.default,UNIFORMS:h,ATTRIBUTES:[{name:"a_position",size:2,type:s},{name:"a_normal",size:2,type:s},{name:"a_color",size:4,type:E,normalized:!0}]}},d.prototype.reallocateIndices=function(){for(var l=this.verticesCount,P=new this.IndicesArray(l+l/2),Z=0,Y=0;Z<l;Z+=4)P[Y++]=Z,P[Y++]=Z+1,P[Y++]=Z+2,P[Y++]=Z+2,P[Y++]=Z+1,P[Y++]=Z+3;this.indicesArray=P},d.prototype.processVisibleItem=function(l,G,P,Z){var Y=Z.size||1,I=G.x,L=G.y,S=P.x,x=P.y,W=(0,k.floatColor)(Z.color),A=S-I,y=x-L,m=A*A+y*y,w=0,U=0;m&&(w=-y*(m=1/Math.sqrt(m))*Y,U=A*m*Y);var j=this.array;j[l++]=I,j[l++]=L,j[l++]=w,j[l++]=U,j[l++]=W,j[l++]=I,j[l++]=L,j[l++]=-w,j[l++]=-U,j[l++]=W,j[l++]=S,j[l++]=x,j[l++]=w,j[l++]=U,j[l++]=W,j[l++]=S,j[l++]=x,j[l++]=-w,j[l++]=-U,j[l]=W},d.prototype.draw=function(l){var G=this.gl,P=this.uniformLocations,Y=P.u_zoomRatio,I=P.u_correctionRatio,L=P.u_sizeRatio;if(G.uniformMatrix3fv(P.u_matrix,!1,l.matrix),G.uniform1f(Y,l.zoomRatio),G.uniform1f(L,l.sizeRatio),G.uniform1f(I,l.correctionRatio),!this.indicesArray)throw new Error("EdgeRectangleProgram: indicesArray should be allocated when drawing!");G.drawElements(G.TRIANGLES,this.indicesArray.length,this.indicesType,0)},d}(i.EdgeProgram);R.default=g},780:function(st,R,N){"use strict";var f,V=this&&this.__extends||(f=function(d,l){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,P){G.__proto__=P}||function(G,P){for(var Z in P)Object.prototype.hasOwnProperty.call(P,Z)&&(G[Z]=P[Z])})(d,l)},function(d,l){if("function"!=typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function G(){this.constructor=d}f(d,l),d.prototype=null===l?Object.create(l):(G.prototype=l.prototype,new G)}),z=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(R,"__esModule",{value:!0});var k=N(1699),i=N(4588),b=z(N(7165)),v=z(N(517)),E=WebGLRenderingContext.UNSIGNED_BYTE,s=WebGLRenderingContext.FLOAT,h=["u_sizeRatio","u_pixelRatio","u_matrix"],g=function(f){function d(){return null!==f&&f.apply(this,arguments)||this}return V(d,f),d.prototype.getDefinition=function(){return{VERTICES:1,ARRAY_ITEMS_PER_VERTEX:4,VERTEX_SHADER_SOURCE:b.default,FRAGMENT_SHADER_SOURCE:v.default,UNIFORMS:h,ATTRIBUTES:[{name:"a_position",size:2,type:s},{name:"a_size",size:1,type:s},{name:"a_color",size:4,type:E,normalized:!0}]}},d.prototype.processVisibleItem=function(l,G){var P=this.array;P[l++]=G.x,P[l++]=G.y,P[l++]=G.size,P[l]=(0,k.floatColor)(G.color)},d.prototype.draw=function(l){var G=this.gl,P=this.uniformLocations,Y=P.u_pixelRatio,I=P.u_matrix;G.uniform1f(P.u_sizeRatio,l.sizeRatio),G.uniform1f(Y,l.pixelRatio),G.uniformMatrix3fv(I,!1,l.matrix),G.drawArrays(G.POINTS,0,this.verticesCount)},d}(i.NodeProgram);R.default=g},2018:st=>{(()=>{"use strict";var R={d:(z,k)=>{for(var i in k)R.o(k,i)&&!R.o(z,i)&&Object.defineProperty(z,i,{enumerable:!0,get:k[i]})},o:(z,k)=>Object.prototype.hasOwnProperty.call(z,k),r:z=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})}},N={};R.r(N),R.d(N,{default:()=>V});const V="precision mediump float;\n\nvarying vec4 v_color;\n\nvoid main(void) {\n  gl_FragColor = v_color;\n}\n";st.exports=N})()},4647:st=>{(()=>{"use strict";var R={d:(z,k)=>{for(var i in k)R.o(k,i)&&!R.o(z,i)&&Object.defineProperty(z,i,{enumerable:!0,get:k[i]})},o:(z,k)=>Object.prototype.hasOwnProperty.call(z,k),r:z=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})}},N={};R.r(N),R.d(N,{default:()=>V});const V="attribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_radius;\nattribute vec4 a_color;\nattribute vec3 a_barycentric;\n\nuniform mat3 u_matrix;\nuniform float u_sizeRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\nconst float arrowHeadWidthLengthRatio = 0.66;\nconst float arrowHeadLengthThicknessRatio = 2.5;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl and\n  // edge.clamped.vert.glsl. Please read it to get better comments on what's\n  // happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;\n  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;\n  float webGLArrowHeadLength = webGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\n  float webGLArrowHeadHalfWidth = webGLArrowHeadLength * arrowHeadWidthLengthRatio / 2.0;\n\n  float da = a_barycentric.x;\n  float db = a_barycentric.y;\n  float dc = a_barycentric.z;\n\n  vec2 delta = vec2(\n      da * (webGLNodeRadius * unitNormal.y)\n    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadHalfWidth * unitNormal.x)\n    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadHalfWidth * unitNormal.x),\n\n      da * (-webGLNodeRadius * unitNormal.x)\n    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadHalfWidth * unitNormal.y)\n    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadHalfWidth * unitNormal.y)\n  );\n\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\n\n  gl_Position = vec4(position, 0, 1);\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";st.exports=N})()},2529:st=>{(()=>{"use strict";var R={d:(z,k)=>{for(var i in k)R.o(k,i)&&!R.o(z,i)&&Object.defineProperty(z,i,{enumerable:!0,get:k[i]})},o:(z,k)=>Object.prototype.hasOwnProperty.call(z,k),r:z=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})}},N={};R.r(N),R.d(N,{default:()=>V});const V="attribute vec4 a_color;\nattribute vec2 a_normal;\nattribute vec2 a_position;\nattribute float a_radius;\n\nuniform mat3 u_matrix;\nuniform float u_zoomRatio;\nuniform float u_sizeRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\nconst float arrowHeadLengthThicknessRatio = 2.5;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl. Please read it to\n  // get better comments on what's happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;\n\n  // Here, we move the point to leave space for the arrow head:\n  float direction = sign(a_radius);\n  float webGLNodeRadius = direction * a_radius * 2.0 * u_correctionRatio / u_sizeRatio;\n  float webGLArrowHeadLength = webGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\n\n  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);\n\n  v_thickness = webGLThickness / u_zoomRatio;\n\n  v_normal = unitNormal;\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";st.exports=N})()},5179:st=>{(()=>{"use strict";var R={d:(z,k)=>{for(var i in k)R.o(k,i)&&!R.o(z,i)&&Object.defineProperty(z,i,{enumerable:!0,get:k[i]})},o:(z,k)=>Object.prototype.hasOwnProperty.call(z,k),r:z=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})}},N={};R.r(N),R.d(N,{default:()=>V});const V="precision mediump float;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float feather = 0.001;\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  float dist = length(v_normal) * v_thickness;\n\n  float t = smoothstep(\n    v_thickness - feather,\n    v_thickness,\n    dist\n  );\n\n  gl_FragColor = mix(v_color, transparent, t);\n}\n";st.exports=N})()},4464:st=>{(()=>{"use strict";var R={d:(z,k)=>{for(var i in k)R.o(k,i)&&!R.o(z,i)&&Object.defineProperty(z,i,{enumerable:!0,get:k[i]})},o:(z,k)=>Object.prototype.hasOwnProperty.call(z,k),r:z=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})}},N={};R.r(N),R.d(N,{default:()=>V});const V='attribute vec4 a_color;\nattribute vec2 a_normal;\nattribute vec2 a_position;\n\nuniform mat3 u_matrix;\nuniform float u_sizeRatio;\nuniform float u_zoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // We require edges to be at least `minThickness` pixels thick *on screen*\n  // (so we need to compensate the size ratio):\n  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);\n\n  // Then, we need to retrieve the normalized thickness of the edge in the WebGL\n  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction\n  // ratio:\n  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * webGLThickness, 1)).xy, 0, 1);\n\n  // For the fragment shader though, we need a thickness that takes the "magic"\n  // correction ratio into account (as in webGLThickness), but so that the\n  // antialiasing effect does not depend on the zoom level. So here\'s yet\n  // another thickness version:\n  v_thickness = webGLThickness / u_zoomRatio;\n\n  v_normal = unitNormal;\n  v_color = a_color;\n  v_color.a *= bias;\n}\n';st.exports=N})()},517:st=>{(()=>{"use strict";var R={d:(z,k)=>{for(var i in k)R.o(k,i)&&!R.o(z,i)&&Object.defineProperty(z,i,{enumerable:!0,get:k[i]})},o:(z,k)=>Object.prototype.hasOwnProperty.call(z,k),r:z=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})}},N={};R.r(N),R.d(N,{default:()=>V});const V="precision mediump float;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float radius = 0.5;\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  vec2 m = gl_PointCoord - vec2(0.5, 0.5);\n  float dist = radius - length(m);\n\n  float t = 0.0;\n  if (dist > v_border)\n    t = 1.0;\n  else if (dist > 0.0)\n    t = dist / v_border;\n\n  gl_FragColor = mix(transparent, v_color, t);\n}\n";st.exports=N})()},7165:st=>{(()=>{"use strict";var R={d:(z,k)=>{for(var i in k)R.o(k,i)&&!R.o(z,i)&&Object.defineProperty(z,i,{enumerable:!0,get:k[i]})},o:(z,k)=>Object.prototype.hasOwnProperty.call(z,k),r:z=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})}},N={};R.r(N),R.d(N,{default:()=>V});const V="attribute vec2 a_position;\nattribute float a_size;\nattribute vec4 a_color;\n\nuniform float u_sizeRatio;\nuniform float u_pixelRatio;\nuniform mat3 u_matrix;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  gl_Position = vec4(\n    (u_matrix * vec3(a_position, 1)).xy,\n    0,\n    1\n  );\n\n  // Multiply the point size twice:\n  //  - x SCALING_RATIO to correct the canvas scaling\n  //  - x 2 to correct the formulae\n  gl_PointSize = a_size / u_sizeRatio * u_pixelRatio * 2.0;\n\n  v_border = (0.5 / a_size) * u_sizeRatio;\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";st.exports=N})()},5166:(st,R)=>{"use strict";function N(i,b,v){var s=b.createShader("VERTEX"===i?b.VERTEX_SHADER:b.FRAGMENT_SHADER);if(null===s)throw new Error("loadShader: error while creating the shader");if(b.shaderSource(s,v),b.compileShader(s),!b.getShaderParameter(s,b.COMPILE_STATUS)){var g=b.getShaderInfoLog(s);throw b.deleteShader(s),new Error("loadShader: error while compiling the shader:\n".concat(g,"\n").concat(v))}return s}Object.defineProperty(R,"__esModule",{value:!0}),R.loadProgram=R.loadFragmentShader=R.loadVertexShader=void 0,R.loadVertexShader=function V(i,b){return N("VERTEX",i,b)},R.loadFragmentShader=function z(i,b){return N("FRAGMENT",i,b)},R.loadProgram=function k(i,b){var E,s,v=i.createProgram();if(null===v)throw new Error("loadProgram: error while creating the program.");for(E=0,s=b.length;E<s;E++)i.attachShader(v,b[E]);if(i.linkProgram(v),!i.getProgramParameter(v,i.LINK_STATUS))throw i.deleteProgram(v),new Error("loadProgram: error while linking the program.");return v}},2621:function(st,R,N){"use strict";var V=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(R,"__esModule",{value:!0}),R.resolveSettings=R.validateSettings=R.DEFAULT_EDGE_PROGRAM_CLASSES=R.DEFAULT_NODE_PROGRAM_CLASSES=R.DEFAULT_SETTINGS=void 0;var z=N(1699),k=V(N(9597)),i=V(N(4997)),b=V(N(1285)),v=V(N(780)),E=V(N(5803)),s=V(N(1391));R.DEFAULT_SETTINGS={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeClickEvents:!1,enableEdgeWheelEvents:!1,enableEdgeHoverEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,labelRenderer:k.default,hoverRenderer:i.default,edgeLabelRenderer:b.default,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},R.DEFAULT_NODE_PROGRAM_CLASSES={circle:v.default},R.DEFAULT_EDGE_PROGRAM_CLASSES={arrow:s.default,line:E.default},R.validateSettings=function h(f){if("number"!=typeof f.labelDensity||f.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var d=f.minCameraRatio,l=f.maxCameraRatio;if("number"==typeof d&&"number"==typeof l&&l<d)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")},R.resolveSettings=function g(f){var d=(0,z.assign)({},R.DEFAULT_SETTINGS,f);return d.nodeProgramClasses=(0,z.assign)({},R.DEFAULT_NODE_PROGRAM_CLASSES,d.nodeProgramClasses),d.edgeProgramClasses=(0,z.assign)({},R.DEFAULT_EDGE_PROGRAM_CLASSES,d.edgeProgramClasses),d}},4870:function(st,R,N){"use strict";var x,V=this&&this.__extends||(x=function(W,A){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,m){y.__proto__=m}||function(y,m){for(var w in m)Object.prototype.hasOwnProperty.call(m,w)&&(y[w]=m[w])})(W,A)},function(W,A){if("function"!=typeof A&&null!==A)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function y(){this.constructor=W}x(W,A),W.prototype=null===A?Object.create(A):(y.prototype=A.prototype,new y)}),z=this&&this.__assign||function(){return z=Object.assign||function(x){for(var W,A=1,y=arguments.length;A<y;A++)for(var m in W=arguments[A])Object.prototype.hasOwnProperty.call(W,m)&&(x[m]=W[m]);return x},z.apply(this,arguments)},k=this&&this.__values||function(x){var W="function"==typeof Symbol&&Symbol.iterator,A=W&&x[W],y=0;if(A)return A.call(x);if(x&&"number"==typeof x.length)return{next:function(){return x&&y>=x.length&&(x=void 0),{value:x&&x[y++],done:!x}}};throw new TypeError(W?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(R,"__esModule",{value:!0});var b=i(N(3333)),v=i(N(2002)),E=i(N(2465)),s=i(N(3650)),h=N(57),g=N(1699),f=N(4942),d=N(2621),l=i(N(1565)),G=N(7611),P=N(3180);function I(x,W,A){if(!A.hasOwnProperty("x")||!A.hasOwnProperty("y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(W,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return A.color||(A.color=x.defaultNodeColor),!A.label&&""!==A.label&&(A.label=null),A.label=null!=A.label?""+A.label:null,A.size||(A.size=2),A.hasOwnProperty("hidden")||(A.hidden=!1),A.hasOwnProperty("highlighted")||(A.highlighted=!1),A.hasOwnProperty("forceLabel")||(A.forceLabel=!1),(!A.type||""===A.type)&&(A.type=x.defaultNodeType),A.zIndex||(A.zIndex=0),A}function L(x,W,A){return A.color||(A.color=x.defaultEdgeColor),A.label||(A.label=""),A.size||(A.size=.5),A.hasOwnProperty("hidden")||(A.hidden=!1),A.hasOwnProperty("forceLabel")||(A.forceLabel=!1),(!A.type||""===A.type)&&(A.type=x.defaultEdgeType),A.zIndex||(A.zIndex=0),A}var S=function(x){function W(A,y,m){void 0===m&&(m={});var w=x.call(this)||this;if(w.elements={},w.canvasContexts={},w.webGLContexts={},w.activeListeners={},w.quadtree=new s.default,w.labelGrid=new f.LabelGrid,w.nodeDataCache={},w.edgeDataCache={},w.nodesWithForcedLabels=[],w.edgesWithForcedLabels=[],w.nodeExtent={x:[0,1],y:[0,1]},w.matrix=(0,G.identity)(),w.invMatrix=(0,G.identity)(),w.correctionRatio=1,w.customBBox=null,w.normalizationFunction=(0,g.createNormalizationFunction)({x:[0,1],y:[0,1]}),w.graphToViewportRatio=1,w.width=0,w.height=0,w.pixelRatio=(0,g.getPixelRatio)(),w.displayedNodeLabels=new Set,w.displayedEdgeLabels=new Set,w.highlightedNodes=new Set,w.hoveredNode=null,w.hoveredEdge=null,w.renderFrame=null,w.renderHighlightedNodesFrame=null,w.needToProcess=!1,w.checkEdgesEventsFrame=null,w.nodePrograms={},w.nodeHoverPrograms={},w.edgePrograms={},w.settings=(0,d.resolveSettings)(m),(0,d.validateSettings)(w.settings),(0,g.validateGraph)(A),!(y instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");for(var U in w.graph=A,w.container=y,w.createWebGLContext("edges",{preserveDrawingBuffer:!0}),w.createCanvasContext("edgeLabels"),w.createWebGLContext("nodes"),w.createCanvasContext("labels"),w.createCanvasContext("hovers"),w.createWebGLContext("hoverNodes"),w.createCanvasContext("mouse"),w.webGLContexts){var j=w.webGLContexts[U];j.blendFunc(j.ONE,j.ONE_MINUS_SRC_ALPHA),j.enable(j.BLEND)}for(var $ in w.settings.nodeProgramClasses){var X=w.settings.nodeProgramClasses[$];w.nodePrograms[$]=new X(w.webGLContexts.nodes,w);var tt=X;$ in w.settings.nodeHoverProgramClasses&&(tt=w.settings.nodeHoverProgramClasses[$]),w.nodeHoverPrograms[$]=new tt(w.webGLContexts.hoverNodes,w)}for(var $ in w.settings.edgeProgramClasses)w.edgePrograms[$]=new(0,w.settings.edgeProgramClasses[$])(w.webGLContexts.edges,w);return w.resize(),w.camera=new v.default,w.bindCameraHandlers(),w.mouseCaptor=new E.default(w.elements.mouse,w),w.touchCaptor=new l.default(w.elements.mouse,w),w.bindEventHandlers(),w.bindGraphHandlers(),w.handleSettingsUpdate(),w.refresh(),w}return V(W,x),W.prototype.createCanvas=function(A){var y=(0,g.createElement)("canvas",{position:"absolute"},{class:"sigma-".concat(A)});return this.elements[A]=y,this.container.appendChild(y),y},W.prototype.createCanvasContext=function(A){var y=this.createCanvas(A);return this.canvasContexts[A]=y.getContext("2d",{preserveDrawingBuffer:!1,antialias:!1}),this},W.prototype.createWebGLContext=function(A,y){var U,m=this.createCanvas(A),w=z({preserveDrawingBuffer:!1,antialias:!1},y||{});return(U=m.getContext("webgl2",w))||(U=m.getContext("webgl",w)),U||(U=m.getContext("experimental-webgl",w)),this.webGLContexts[A]=U,this},W.prototype.bindCameraHandlers=function(){var A=this;return this.activeListeners.camera=function(){A.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this},W.prototype.unbindCameraHandlers=function(){return this.camera.removeListener("updated",this.activeListeners.camera),this},W.prototype.mouseIsOnNode=function(A,y,m){var w=A.x,U=A.y,j=y.x,$=y.y;return w>j-m&&w<j+m&&U>$-m&&U<$+m&&Math.sqrt(Math.pow(w-j,2)+Math.pow(U-$,2))<m},W.prototype.getQuadNodes=function(A){var y=this.viewportToFramedGraph(A);return this.quadtree.point(y.x,1-y.y)},W.prototype.getNodeAtPosition=function(A){for(var y=A.x,m=A.y,w=this.getQuadNodes(A),U=1/0,j=null,$=0,X=w.length;$<X;$++){var tt=w[$],rt=this.nodeDataCache[tt],it=this.framedGraphToViewport(rt),gt=this.scaleSize(rt.size);if(!rt.hidden&&this.mouseIsOnNode(A,it,gt)){var lt=Math.sqrt(Math.pow(y-it.x,2)+Math.pow(m-it.y,2));lt<U&&(U=lt,j=tt)}}return j},W.prototype.bindEventHandlers=function(){var A=this;this.activeListeners.handleResize=function(){A.scheduleRender()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(m){var w={event:m,preventSigmaDefault:function(){m.preventSigmaDefault()}},U=A.getNodeAtPosition(m);if(U&&A.hoveredNode!==U&&!A.nodeDataCache[U].hidden)return A.hoveredNode&&A.emit("leaveNode",z(z({},w),{node:A.hoveredNode})),A.hoveredNode=U,A.emit("enterNode",z(z({},w),{node:U})),void A.scheduleHighlightedNodesRender();if(A.hoveredNode){var j=A.nodeDataCache[A.hoveredNode],$=A.framedGraphToViewport(j),X=A.scaleSize(j.size);if(!A.mouseIsOnNode(m,$,X)){var tt=A.hoveredNode;return A.hoveredNode=null,A.emit("leaveNode",z(z({},w),{node:tt})),void A.scheduleHighlightedNodesRender()}}!0===A.settings.enableEdgeHoverEvents?A.checkEdgeHoverEvents(w):"debounce"===A.settings.enableEdgeHoverEvents&&(A.checkEdgesEventsFrame||(A.checkEdgesEventsFrame=(0,g.requestFrame)(function(){A.checkEdgeHoverEvents(w),A.checkEdgesEventsFrame=null})))};var y=function(m){return function(w){var U={event:w,preventSigmaDefault:function(){w.preventSigmaDefault()}},$=w.original.isFakeSigmaMouseEvent?A.getNodeAtPosition(w):A.hoveredNode;if($)return A.emit("".concat(m,"Node"),z(z({},U),{node:$}));if("wheel"===m?A.settings.enableEdgeWheelEvents:A.settings.enableEdgeClickEvents){var X=A.getEdgeAtPoint(w.x,w.y);if(X)return A.emit("".concat(m,"Edge"),z(z({},U),{edge:X}))}return A.emit("".concat(m,"Stage"),U)}};return this.activeListeners.handleClick=y("click"),this.activeListeners.handleRightClick=y("rightClick"),this.activeListeners.handleDoubleClick=y("doubleClick"),this.activeListeners.handleWheel=y("wheel"),this.activeListeners.handleDown=y("down"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this},W.prototype.bindGraphHandlers=function(){var A=this,y=this.graph;return this.activeListeners.graphUpdate=function(){A.scheduleRefresh()},this.activeListeners.dropNodeGraphUpdate=function(m){delete A.nodeDataCache[m.key],A.hoveredNode===m.key&&(A.hoveredNode=null),A.activeListeners.graphUpdate()},this.activeListeners.dropEdgeGraphUpdate=function(m){delete A.edgeDataCache[m.key],A.hoveredEdge===m.key&&(A.hoveredEdge=null),A.activeListeners.graphUpdate()},this.activeListeners.clearEdgesGraphUpdate=function(){A.edgeDataCache={},A.hoveredEdge=null,A.activeListeners.graphUpdate()},this.activeListeners.clearGraphUpdate=function(){A.nodeDataCache={},A.hoveredNode=null,A.activeListeners.clearEdgesGraphUpdate()},y.on("nodeAdded",this.activeListeners.graphUpdate),y.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),y.on("nodeAttributesUpdated",this.activeListeners.graphUpdate),y.on("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),y.on("edgeAdded",this.activeListeners.graphUpdate),y.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),y.on("edgeAttributesUpdated",this.activeListeners.graphUpdate),y.on("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),y.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),y.on("cleared",this.activeListeners.clearGraphUpdate),this},W.prototype.unbindGraphHandlers=function(){var A=this.graph;A.removeListener("nodeAdded",this.activeListeners.graphUpdate),A.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),A.removeListener("nodeAttributesUpdated",this.activeListeners.graphUpdate),A.removeListener("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),A.removeListener("edgeAdded",this.activeListeners.graphUpdate),A.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),A.removeListener("edgeAttributesUpdated",this.activeListeners.graphUpdate),A.removeListener("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),A.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),A.removeListener("cleared",this.activeListeners.clearGraphUpdate)},W.prototype.checkEdgeHoverEvents=function(A){var y=this.hoveredNode?null:this.getEdgeAtPoint(A.event.x,A.event.y);return y!==this.hoveredEdge&&(this.hoveredEdge&&this.emit("leaveEdge",z(z({},A),{edge:this.hoveredEdge})),y&&this.emit("enterEdge",z(z({},A),{edge:y})),this.hoveredEdge=y),this},W.prototype.getEdgeAtPoint=function(A,y){var m,w,U=this,$=this.edgeDataCache,X=this.nodeDataCache;if(!(0,P.isPixelColored)(this.webGLContexts.edges,A*this.pixelRatio,y*this.pixelRatio))return null;var tt=this.viewportToGraph({x:A,y}),rt=tt.x,it=tt.y,gt=0;if(this.graph.someEdge(function(dt,xt,Zt,Vt,Xt,Kt){var Qt=Xt.x,ue=Xt.y,ge=Kt.x,oe=Kt.y;if($[dt].hidden||X[Zt].hidden||X[Vt].hidden)return!1;if(Qt!==ge||ue!==oe){var Le=Math.sqrt(Math.pow(ge-Qt,2)+Math.pow(oe-ue,2)),ce=U.graphToViewport({x:Qt,y:ue}),Rn=ce.x,Pn=ce.y,Ce=U.graphToViewport({x:ge,y:oe}),On=Ce.y,In=Math.sqrt(Math.pow(Ce.x-Rn,2)+Math.pow(On-Pn,2));return gt=Le/In,!0}}),!gt)return null;var lt=this.graph.filterEdges(function(dt,xt,Zt,Vt,Xt,Kt){return!($[dt].hidden||X[Zt].hidden||X[Vt].hidden)&&(!!(0,P.doEdgeCollideWithPoint)(rt,it,Xt.x,Xt.y,Kt.x,Kt.y,U.scaleSize($[dt].size*gt))||void 0)});if(0===lt.length)return null;var Et=lt[lt.length-1],ht=-1/0;try{for(var At=k(lt),Dt=At.next();!Dt.done;Dt=At.next()){var Pt=Dt.value,ut=this.graph.getEdgeAttribute(Pt,"zIndex");ut>=ht&&(Et=Pt,ht=ut)}}catch(dt){m={error:dt}}finally{try{Dt&&!Dt.done&&(w=At.return)&&w.call(At)}finally{if(m)throw m.error}}return Et},W.prototype.process=function(){var A=this,y=this.graph,m=this.settings,w=this.getDimensions(),U=[1/0,-1/0],j=[1/0,-1/0];this.quadtree.clear(),this.labelGrid.resizeAndClear(w,m.labelGridCellSize),this.highlightedNodes=new Set,this.nodeExtent=(0,g.graphExtent)(y),this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[];var $=new v.default,X=(0,g.matrixFromCamera)($.getState(),this.getDimensions(),this.getGraphDimensions(),this.getSetting("stagePadding")||0);this.normalizationFunction=(0,g.createNormalizationFunction)(this.customBBox||this.nodeExtent);for(var tt={},rt=y.nodes(),it=0,gt=rt.length;it<gt;it++){var lt=rt[it],Et=Object.assign({},y.getNodeAttributes(lt));m.nodeReducer&&(Et=m.nodeReducer(lt,Et)),tt[(ht=I(this.settings,lt,Et)).type]=(tt[ht.type]||0)+1,this.nodeDataCache[lt]=ht,this.normalizationFunction.applyTo(ht),ht.forceLabel&&this.nodesWithForcedLabels.push(lt),this.settings.zIndex&&(ht.zIndex<U[0]&&(U[0]=ht.zIndex),ht.zIndex>U[1]&&(U[1]=ht.zIndex))}for(var At in this.nodePrograms){if(!this.nodePrograms.hasOwnProperty(At))throw new Error('Sigma: could not find a suitable program for node type "'.concat(At,'"!'));this.nodePrograms[At].reallocate(tt[At]||0),tt[At]=0}this.settings.zIndex&&U[0]!==U[1]&&(rt=(0,g.zIndexOrdering)(U,function(Kt){return A.nodeDataCache[Kt].zIndex},rt));var Dt=this.normalizationFunction.ratio;for(it=0,gt=rt.length;it<gt;it++){this.quadtree.add(lt=rt[it],(ht=this.nodeDataCache[lt]).x,1-ht.y,this.scaleSize(ht.size,1)/Dt),"string"==typeof ht.label&&!ht.hidden&&this.labelGrid.add(lt,ht.size,this.framedGraphToViewport(ht,{matrix:X}));var Pt=this.nodePrograms[ht.type];if(!Pt)throw new Error('Sigma: could not find a suitable program for node type "'.concat(ht.type,'"!'));Pt.process(tt[ht.type]++,ht),ht.highlighted&&!ht.hidden&&this.highlightedNodes.add(lt)}this.labelGrid.organize();var ut={},dt=y.edges();for(it=0,gt=dt.length;it<gt;it++){var xt=dt[it];Et=Object.assign({},y.getEdgeAttributes(xt)),m.edgeReducer&&(Et=m.edgeReducer(xt,Et)),ut[(ht=L(this.settings,0,Et)).type]=(ut[ht.type]||0)+1,this.edgeDataCache[xt]=ht,ht.forceLabel&&!ht.hidden&&this.edgesWithForcedLabels.push(xt),this.settings.zIndex&&(ht.zIndex<j[0]&&(j[0]=ht.zIndex),ht.zIndex>j[1]&&(j[1]=ht.zIndex))}for(var At in this.edgePrograms){if(!this.edgePrograms.hasOwnProperty(At))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(At,'"!'));this.edgePrograms[At].reallocate(ut[At]||0),ut[At]=0}for(this.settings.zIndex&&j[0]!==j[1]&&(dt=(0,g.zIndexOrdering)(j,function(Kt){return A.edgeDataCache[Kt].zIndex},dt)),it=0,gt=dt.length;it<gt;it++){var ht=this.edgeDataCache[xt=dt[it]],Zt=y.extremities(xt),Vt=this.nodeDataCache[Zt[0]],Xt=this.nodeDataCache[Zt[1]];this.edgePrograms[ht.type].process(ut[ht.type]++,Vt,Xt,ht)}return this},W.prototype.handleSettingsUpdate=function(){return this.camera.minRatio=this.settings.minCameraRatio,this.camera.maxRatio=this.settings.maxCameraRatio,this.camera.setState(this.camera.validateState(this.camera.getState())),this},W.prototype.renderLabels=function(){if(!this.settings.renderLabels)return this;var A=this.camera.getState(),y=this.labelGrid.getLabelsToDisplay(A.ratio,this.settings.labelDensity);(0,b.default)(y,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var m=this.canvasContexts.labels,w=0,U=y.length;w<U;w++){var j=y[w],$=this.nodeDataCache[j];if(!this.displayedNodeLabels.has(j)&&!$.hidden){var X=this.framedGraphToViewport($),tt=X.x,rt=X.y,it=this.scaleSize($.size);!$.forceLabel&&it<this.settings.labelRenderedSizeThreshold||tt<-150||tt>this.width+150||rt<-50||rt>this.height+50||(this.displayedNodeLabels.add(j),this.settings.labelRenderer(m,z(z({key:j},$),{size:it,x:tt,y:rt}),this.settings))}}return this},W.prototype.renderEdgeLabels=function(){if(!this.settings.renderEdgeLabels)return this;var A=this.canvasContexts.edgeLabels;A.clearRect(0,0,this.width,this.height);for(var y=(0,f.edgeLabelsToDisplayFromNodes)({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes}).concat(this.edgesWithForcedLabels),m=new Set,w=0,U=y.length;w<U;w++){var j=y[w],$=this.graph.extremities(j),X=this.nodeDataCache[$[0]],tt=this.nodeDataCache[$[1]],rt=this.edgeDataCache[j];m.has(j)||rt.hidden||X.hidden||tt.hidden||(this.settings.edgeLabelRenderer(A,z(z({key:j},rt),{size:this.scaleSize(rt.size)}),z(z(z({key:$[0]},X),this.framedGraphToViewport(X)),{size:this.scaleSize(X.size)}),z(z(z({key:$[1]},tt),this.framedGraphToViewport(tt)),{size:this.scaleSize(tt.size)}),this.settings),m.add(j))}return this.displayedEdgeLabels=m,this},W.prototype.renderHighlightedNodes=function(){var A=this,y=this.canvasContexts.hovers;y.clearRect(0,0,this.width,this.height);var w=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&w.push(this.hoveredNode),this.highlightedNodes.forEach(function(X){X!==A.hoveredNode&&w.push(X)}),w.forEach(function(X){return function(X){var tt=A.nodeDataCache[X],rt=A.framedGraphToViewport(tt),it=rt.x,gt=rt.y,lt=A.scaleSize(tt.size);A.settings.hoverRenderer(y,z(z({key:X},tt),{size:lt,x:it,y:gt}),A.settings)}(X)});var U={};for(var j in w.forEach(function(X){var tt=A.nodeDataCache[X].type;U[tt]=(U[tt]||0)+1}),this.nodeHoverPrograms)this.nodeHoverPrograms[j].reallocate(U[j]||0),U[j]=0;for(var j in w.forEach(function(X){var tt=A.nodeDataCache[X];A.nodeHoverPrograms[tt.type].process(U[tt.type]++,tt)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT),this.nodeHoverPrograms)this.nodeHoverPrograms[j].render({matrix:this.matrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio})},W.prototype.scheduleHighlightedNodesRender=function(){var A=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=(0,g.requestFrame)(function(){A.renderHighlightedNodesFrame=null,A.renderHighlightedNodes(),A.renderEdgeLabels()}))},W.prototype.render=function(){var A=this;this.emit("beforeRender");var y=function(){return A.emit("afterRender"),A};if(this.renderFrame&&((0,g.cancelFrame)(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),!this.graph.order)return y();var m=this.mouseCaptor,w=this.camera.isAnimated()||m.isMoving||m.draggedEvents||m.currentWheelDirection,U=this.camera.getState(),j=this.getDimensions(),$=this.getGraphDimensions(),X=this.getSetting("stagePadding")||0;this.matrix=(0,g.matrixFromCamera)(U,j,$,X),this.invMatrix=(0,g.matrixFromCamera)(U,j,$,X,!0),this.correctionRatio=(0,g.getMatrixImpact)(this.matrix,U,j),this.graphToViewportRatio=this.getGraphToViewportRatio();var tt={matrix:this.matrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio};for(var rt in this.nodePrograms)this.nodePrograms[rt].render(tt);if(!this.settings.hideEdgesOnMove||!w)for(var rt in this.edgePrograms)this.edgePrograms[rt].render(tt);return this.settings.hideLabelsOnMove&&w||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),y()},W.prototype.getCamera=function(){return this.camera},W.prototype.setCamera=function(A){this.unbindCameraHandlers(),this.camera=A,this.bindCameraHandlers()},W.prototype.getContainer=function(){return this.container},W.prototype.getGraph=function(){return this.graph},W.prototype.setGraph=function(A){A!==this.graph&&(this.unbindGraphHandlers(),this.nodeDataCache={},this.edgeDataCache={},this.displayedNodeLabels.clear(),this.displayedEdgeLabels.clear(),this.highlightedNodes.clear(),this.hoveredNode=null,this.hoveredEdge=null,this.nodesWithForcedLabels.length=0,this.edgesWithForcedLabels.length=0,null!==this.checkEdgesEventsFrame&&((0,g.cancelFrame)(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=A,this.bindGraphHandlers(),this.refresh())},W.prototype.getMouseCaptor=function(){return this.mouseCaptor},W.prototype.getTouchCaptor=function(){return this.touchCaptor},W.prototype.getDimensions=function(){return{width:this.width,height:this.height}},W.prototype.getGraphDimensions=function(){var A=this.customBBox||this.nodeExtent;return{width:A.x[1]-A.x[0]||1,height:A.y[1]-A.y[0]||1}},W.prototype.getNodeDisplayData=function(A){var y=this.nodeDataCache[A];return y?Object.assign({},y):void 0},W.prototype.getEdgeDisplayData=function(A){var y=this.edgeDataCache[A];return y?Object.assign({},y):void 0},W.prototype.getNodeDisplayedLabels=function(){return new Set(this.displayedNodeLabels)},W.prototype.getEdgeDisplayedLabels=function(){return new Set(this.displayedEdgeLabels)},W.prototype.getSettings=function(){return z({},this.settings)},W.prototype.getSetting=function(A){return this.settings[A]},W.prototype.setSetting=function(A,y){return this.settings[A]=y,(0,d.validateSettings)(this.settings),this.handleSettingsUpdate(),this.scheduleRefresh(),this},W.prototype.updateSetting=function(A,y){return this.settings[A]=y(this.settings[A]),(0,d.validateSettings)(this.settings),this.handleSettingsUpdate(),this.scheduleRefresh(),this},W.prototype.resize=function(){var A=this.width,y=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=(0,g.getPixelRatio)(),0===this.width){if(!this.settings.allowInvalidContainer)throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");this.width=1}if(0===this.height){if(!this.settings.allowInvalidContainer)throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");this.height=1}if(A===this.width&&y===this.height)return this;for(var m in this.emit("resize"),this.elements){var w=this.elements[m];w.style.width=this.width+"px",w.style.height=this.height+"px"}for(var m in this.canvasContexts)this.elements[m].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[m].setAttribute("height",this.height*this.pixelRatio+"px"),1!==this.pixelRatio&&this.canvasContexts[m].scale(this.pixelRatio,this.pixelRatio);for(var m in this.webGLContexts)this.elements[m].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[m].setAttribute("height",this.height*this.pixelRatio+"px"),this.webGLContexts[m].viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio);return this},W.prototype.clear=function(){return this.webGLContexts.nodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT),this.webGLContexts.edges.clear(this.webGLContexts.edges.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this},W.prototype.refresh=function(){return this.needToProcess=!0,this.render(),this},W.prototype.scheduleRender=function(){var A=this;return this.renderFrame||(this.renderFrame=(0,g.requestFrame)(function(){A.render()})),this},W.prototype.scheduleRefresh=function(){return this.needToProcess=!0,this.scheduleRender(),this},W.prototype.getViewportZoomedState=function(A,y){var m=this.camera.getState(),U=m.angle,j=m.x,$=m.y,X=y/m.ratio,tt={x:this.width/2,y:this.height/2},rt=this.viewportToFramedGraph(A),it=this.viewportToFramedGraph(tt);return{angle:U,x:(rt.x-it.x)*(1-X)+j,y:(rt.y-it.y)*(1-X)+$,ratio:y}},W.prototype.viewRectangle=function(){var A=0*this.width/8,y=0*this.height/8,m=this.viewportToFramedGraph({x:0-A,y:0-y}),w=this.viewportToFramedGraph({x:this.width+A,y:0-y}),U=this.viewportToFramedGraph({x:0,y:this.height+y});return{x1:m.x,y1:m.y,x2:w.x,y2:w.y,height:w.y-U.y}},W.prototype.framedGraphToViewport=function(A,y){void 0===y&&(y={});var w=y.matrix?y.matrix:y.cameraState||y.viewportDimensions||y.graphDimensions?(0,g.matrixFromCamera)(y.cameraState||this.camera.getState(),y.viewportDimensions||this.getDimensions(),y.graphDimensions||this.getGraphDimensions(),y.padding||this.getSetting("stagePadding")||0):this.matrix,U=(0,G.multiplyVec2)(w,A);return{x:(1+U.x)*this.width/2,y:(1-U.y)*this.height/2}},W.prototype.viewportToFramedGraph=function(A,y){void 0===y&&(y={});var w=y.matrix?y.matrix:y.cameraState||y.viewportDimensions||!y.graphDimensions?(0,g.matrixFromCamera)(y.cameraState||this.camera.getState(),y.viewportDimensions||this.getDimensions(),y.graphDimensions||this.getGraphDimensions(),y.padding||this.getSetting("stagePadding")||0,!0):this.invMatrix,U=(0,G.multiplyVec2)(w,{x:A.x/this.width*2-1,y:1-A.y/this.height*2});return isNaN(U.x)&&(U.x=0),isNaN(U.y)&&(U.y=0),U},W.prototype.viewportToGraph=function(A,y){return void 0===y&&(y={}),this.normalizationFunction.inverse(this.viewportToFramedGraph(A,y))},W.prototype.graphToViewport=function(A,y){return void 0===y&&(y={}),this.framedGraphToViewport(this.normalizationFunction(A),y)},W.prototype.getGraphToViewportRatio=function(){var A={x:0,y:0},y={x:1,y:1},m=Math.sqrt(Math.pow(A.x-y.x,2)+Math.pow(A.y-y.y,2)),w=this.graphToViewport(A),U=this.graphToViewport(y);return Math.sqrt(Math.pow(w.x-U.x,2)+Math.pow(w.y-U.y,2))/m},W.prototype.getBBox=function(){return(0,g.graphExtent)(this.graph)},W.prototype.getCustomBBox=function(){return this.customBBox},W.prototype.setCustomBBox=function(A){return this.customBBox=A,this.scheduleRender(),this},W.prototype.kill=function(){this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.quadtree=new s.default,this.nodeDataCache={},this.edgeDataCache={},this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[],this.highlightedNodes.clear(),this.renderFrame&&((0,g.cancelFrame)(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&((0,g.cancelFrame)(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var A=this.container;A.firstChild;)A.removeChild(A.firstChild)},W.prototype.scaleSize=function(A,y){return void 0===A&&(A=1),void 0===y&&(y=this.camera.ratio),A/this.settings.zoomToSizeRatioFunction(y)*("positions"===this.getSetting("itemSizesReference")?y*this.graphToViewportRatio:1)},W.prototype.getCanvases=function(){return z({},this.elements)},W}(h.TypedEventEmitter);R.default=S},57:function(st,R,N){"use strict";var i,V=this&&this.__extends||(i=function(b,v){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,s){E.__proto__=s}||function(E,s){for(var h in s)Object.prototype.hasOwnProperty.call(s,h)&&(E[h]=s[h])})(b,v)},function(b,v){if("function"!=typeof v&&null!==v)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function E(){this.constructor=b}i(b,v),b.prototype=null===v?Object.create(v):(E.prototype=v.prototype,new E)});Object.defineProperty(R,"__esModule",{value:!0}),R.TypedEventEmitter=void 0;var k=function(i){function b(){var v=i.call(this)||this;return v.rawEmitter=v,v}return V(b,i),b}(N(9069).EventEmitter);R.TypedEventEmitter=k},2630:function(st,R,N){"use strict";var V=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(R,"__esModule",{value:!0}),R.animateNodes=R.ANIMATE_DEFAULTS=void 0;var z=N(1699),k=V(N(4539));R.ANIMATE_DEFAULTS={easing:"quadraticInOut",duration:150},R.animateNodes=function i(b,v,E,s){var h=Object.assign({},R.ANIMATE_DEFAULTS,E),g="function"==typeof h.easing?h.easing:k.default[h.easing],f=Date.now(),d={};for(var l in v){var G=v[l];for(var P in d[l]={},G)d[l][P]=b.getNodeAttribute(l,P)}var Z=null,Y=function(){Z=null;var I=(Date.now()-f)/h.duration;if(I>=1){for(var L in v){var S=v[L];for(var x in S)b.setNodeAttribute(L,x,S[x])}"function"==typeof s&&s()}else{for(var L in I=g(I),v){S=v[L];var W=d[L];for(var x in S)b.setNodeAttribute(L,x,S[x]*I+W[x]*(1-I))}Z=(0,z.requestFrame)(Y)}};return Y(),function(){Z&&(0,z.cancelFrame)(Z)}}},5147:(st,R)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.HTML_COLORS=void 0,R.HTML_COLORS={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"}},4539:(st,R)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.cubicInOut=R.cubicOut=R.cubicIn=R.quadraticInOut=R.quadraticOut=R.quadraticIn=R.linear=void 0,R.linear=function(s){return s},R.quadraticIn=function(s){return s*s},R.quadraticOut=function(s){return s*(2-s)},R.quadraticInOut=function(s){return(s*=2)<1?.5*s*s:-.5*(--s*(s-2)-1)},R.cubicIn=function(s){return s*s*s},R.cubicOut=function(s){return--s*s*s+1},R.cubicInOut=function(s){return(s*=2)<1?.5*s*s*s:.5*((s-=2)*s*s+2)},R.default={linear:R.linear,quadraticIn:R.quadraticIn,quadraticOut:R.quadraticOut,quadraticInOut:R.quadraticInOut,cubicIn:R.cubicIn,cubicOut:R.cubicOut,cubicInOut:R.cubicInOut}},3180:(st,R)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.doEdgeCollideWithPoint=R.isPixelColored=void 0,R.isPixelColored=function N(z,k,i){var b=new Uint8Array(4);return z.readPixels(k,z.drawingBufferHeight-i,1,1,z.RGBA,z.UNSIGNED_BYTE,b),b[3]>0},R.doEdgeCollideWithPoint=function V(z,k,i,b,v,E,s){return!(z<i-s&&z<v-s||k<b-s&&k<E-s||z>i+s&&z>v+s||k>b+s&&k>E+s)&&Math.abs((v-i)*(b-k)-(i-z)*(E-b))/Math.sqrt(Math.pow(v-i,2)+Math.pow(E-b,2))<s/2}},1699:function(st,R,N){"use strict";var V=this&&this.__read||function(X,tt){var rt="function"==typeof Symbol&&X[Symbol.iterator];if(!rt)return X;var gt,Et,it=rt.call(X),lt=[];try{for(;(void 0===tt||tt-- >0)&&!(gt=it.next()).done;)lt.push(gt.value)}catch(ht){Et={error:ht}}finally{try{gt&&!gt.done&&(rt=it.return)&&rt.call(it)}finally{if(Et)throw Et.error}}return lt},z=this&&this.__importDefault||function(X){return X&&X.__esModule?X:{default:X}};Object.defineProperty(R,"__esModule",{value:!0}),R.validateGraph=R.canUse32BitsIndices=R.extractPixel=R.getMatrixImpact=R.matrixFromCamera=R.getCorrectionRatio=R.floatColor=R.floatArrayColor=R.parseColor=R.zIndexOrdering=R.createNormalizationFunction=R.graphExtent=R.getPixelRatio=R.createElement=R.cancelFrame=R.requestFrame=R.assignDeep=R.assign=R.isPlainObject=void 0;var k=z(N(6714)),i=N(7611),b=N(5147);function v(X){return"object"==typeof X&&null!==X&&X.constructor===Object}R.isPlainObject=v,R.assign=function E(X){for(var tt=[],rt=1;rt<arguments.length;rt++)tt[rt-1]=arguments[rt];X=X||{};for(var it=0,gt=tt.length;it<gt;it++){var lt=tt[it];!lt||Object.assign(X,lt)}return X},R.assignDeep=function s(X){for(var tt=[],rt=1;rt<arguments.length;rt++)tt[rt-1]=arguments[rt];X=X||{};for(var it=0,gt=tt.length;it<gt;it++){var lt=tt[it];if(lt)for(var Et in lt)X[Et]=v(lt[Et])?s(X[Et],lt[Et]):lt[Et]}return X},R.requestFrame="undefined"!=typeof requestAnimationFrame?function(X){return requestAnimationFrame(X)}:function(X){return setTimeout(X,0)},R.cancelFrame="undefined"!=typeof cancelAnimationFrame?function(X){return cancelAnimationFrame(X)}:function(X){return clearTimeout(X)},R.createElement=function h(X,tt,rt){var it=document.createElement(X);if(tt)for(var gt in tt)it.style[gt]=tt[gt];if(rt)for(var gt in rt)it.setAttribute(gt,rt[gt]);return it},R.getPixelRatio=function g(){return void 0!==window.devicePixelRatio?window.devicePixelRatio:1},R.graphExtent=function f(X){if(!X.order)return{x:[0,1],y:[0,1]};var tt=1/0,rt=-1/0,it=1/0,gt=-1/0;return X.forEachNode(function(lt,Et){var ht=Et.x,At=Et.y;ht<tt&&(tt=ht),ht>rt&&(rt=ht),At<it&&(it=At),At>gt&&(gt=At)}),{x:[tt,rt],y:[it,gt]}},R.createNormalizationFunction=function d(X){var tt=V(X.x,2),rt=tt[0],it=tt[1],gt=V(X.y,2),lt=gt[0],Et=gt[1],ht=Math.max(it-rt,Et-lt),At=(it+rt)/2,Dt=(Et+lt)/2;(0===ht||Math.abs(ht)===1/0||isNaN(ht))&&(ht=1),isNaN(At)&&(At=0),isNaN(Dt)&&(Dt=0);var Pt=function(ut){return{x:.5+(ut.x-At)/ht,y:.5+(ut.y-Dt)/ht}};return Pt.applyTo=function(ut){ut.x=.5+(ut.x-At)/ht,ut.y=.5+(ut.y-Dt)/ht},Pt.inverse=function(ut){return{x:At+ht*(ut.x-.5),y:Dt+ht*(ut.y-.5)}},Pt.ratio=ht,Pt},R.zIndexOrdering=function l(X,tt,rt){return rt.sort(function(it,gt){var lt=tt(it)||0,Et=tt(gt)||0;return lt<Et?-1:lt>Et?1:0})};var G=new Int8Array(4),P=new Int32Array(G.buffer,0,1),Z=new Float32Array(G.buffer,0,1),Y=/^\s*rgba?\s*\(/,I=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function L(X){var tt=0,rt=0,it=0,gt=1;if("#"===X[0])4===X.length?(tt=parseInt(X.charAt(1)+X.charAt(1),16),rt=parseInt(X.charAt(2)+X.charAt(2),16),it=parseInt(X.charAt(3)+X.charAt(3),16)):(tt=parseInt(X.charAt(1)+X.charAt(2),16),rt=parseInt(X.charAt(3)+X.charAt(4),16),it=parseInt(X.charAt(5)+X.charAt(6),16)),9===X.length&&(gt=parseInt(X.charAt(7)+X.charAt(8),16)/255);else if(Y.test(X)){var lt=X.match(I);lt&&(tt=+lt[1],rt=+lt[2],it=+lt[3],lt[4]&&(gt=+lt[4]))}return{r:tt,g:rt,b:it,a:gt}}R.parseColor=L;var S={};for(var x in b.HTML_COLORS)S[x]=A(b.HTML_COLORS[x]),S[b.HTML_COLORS[x]]=S[x];function A(X){if(void 0!==S[X])return S[X];var tt=L(X),lt=tt.a;P[0]=4278190079&((lt=255*lt|0)<<24|tt.b<<16|tt.g<<8|tt.r);var Et=Z[0];return S[X]=Et,Et}function y(X,tt){var rt=X.height/X.width,it=tt.height/tt.width;return rt<1&&it>1||rt>1&&it<1?1:Math.min(Math.max(it,1/it),Math.max(1/rt,rt))}R.floatArrayColor=function W(X){var tt=L(X=b.HTML_COLORS[X]||X);return new Float32Array([tt.r/255,tt.g/255,tt.b/255,tt.a])},R.floatColor=A,R.getCorrectionRatio=y,R.matrixFromCamera=function m(X,tt,rt,it,gt){var lt=X.angle,Et=X.ratio,ht=X.x,At=X.y,Dt=tt.width,Pt=tt.height,ut=(0,i.identity)(),dt=Math.min(Dt,Pt)-2*it,xt=y(tt,rt);return gt?((0,i.multiply)(ut,(0,i.translate)((0,i.identity)(),ht,At)),(0,i.multiply)(ut,(0,i.scale)((0,i.identity)(),Et)),(0,i.multiply)(ut,(0,i.rotate)((0,i.identity)(),lt)),(0,i.multiply)(ut,(0,i.scale)((0,i.identity)(),Dt/dt/2/xt,Pt/dt/2/xt))):((0,i.multiply)(ut,(0,i.scale)((0,i.identity)(),dt/Dt*2*xt,dt/Pt*2*xt)),(0,i.multiply)(ut,(0,i.rotate)((0,i.identity)(),-lt)),(0,i.multiply)(ut,(0,i.scale)((0,i.identity)(),1/Et)),(0,i.multiply)(ut,(0,i.translate)((0,i.identity)(),-ht,-At))),ut},R.getMatrixImpact=function w(X,tt,rt){var it=(0,i.multiplyVec2)(X,{x:Math.cos(tt.angle),y:Math.sin(tt.angle)},0),lt=it.y;return 1/Math.sqrt(Math.pow(it.x,2)+Math.pow(lt,2))/rt.width},R.extractPixel=function U(X,tt,rt,it){var gt=it||new Uint8Array(4);return X.readPixels(tt,rt,1,1,X.RGBA,X.UNSIGNED_BYTE,gt),gt},R.canUse32BitsIndices=function j(X){return"undefined"!=typeof WebGL2RenderingContext&&X instanceof WebGL2RenderingContext||!!X.getExtension("OES_element_index_uint")},R.validateGraph=function $(X){if(!(0,k.default)(X))throw new Error("Sigma: invalid graph instance.");X.forEachNode(function(tt,rt){if(!Number.isFinite(rt.x)||!Number.isFinite(rt.y))throw new Error("Sigma: Coordinates of node ".concat(tt," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}},7611:(st,R)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.multiplyVec2=R.multiply=R.translate=R.rotate=R.scale=R.identity=void 0,R.identity=function N(){return Float32Array.of(1,0,0,0,1,0,0,0,1)},R.scale=function V(v,E,s){return v[0]=E,v[4]="number"==typeof s?s:E,v},R.rotate=function z(v,E){var s=Math.sin(E),h=Math.cos(E);return v[0]=h,v[1]=s,v[3]=-s,v[4]=h,v},R.translate=function k(v,E,s){return v[6]=E,v[7]=s,v},R.multiply=function i(v,E){var s=v[0],h=v[1],g=v[2],f=v[3],d=v[4],l=v[5],G=v[6],P=v[7],Z=v[8],Y=E[0],I=E[1],L=E[2],S=E[3],x=E[4],W=E[5],A=E[6],y=E[7],m=E[8];return v[0]=Y*s+I*f+L*G,v[1]=Y*h+I*d+L*P,v[2]=Y*g+I*l+L*Z,v[3]=S*s+x*f+W*G,v[4]=S*h+x*d+W*P,v[5]=S*g+x*l+W*Z,v[6]=A*s+y*f+m*G,v[7]=A*h+y*d+m*P,v[8]=A*g+y*l+m*Z,v},R.multiplyVec2=function b(v,E,s){void 0===s&&(s=1);var P=E.x,Z=E.y;return{x:P*v[0]+Z*v[3]+v[6]*s,y:P*v[1]+Z*v[4]+v[7]*s}}},5042:()=>{}}]);