(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5305],{5305:(lt,et,N)=>{"use strict";N.r(et),N.d(et,{WikiModule:()=>Cf});var F=N(4521),$=N(5861),I=N(9268),s=N(5e3);let _=(()=>{class t{constructor(){this.subscriptionsData=[]}ngOnDestroy(){this.allSubscriptions().forEach(e=>{e.unsubscribe()})}subscribe(e,r,i,u){const c=(0,I.V)();return this.subscriptionsData.push({id:c,subscription:e.subscribe(r,i,u)}),c}unsubscribe(e){const r=this.subscriptionById(e);!r||r.closed||r.unsubscribe()}unsubscribeAll(){this.subscriptionsData.forEach(e=>e.subscription.unsubscribe())}allSubscriptions(){return this.subscriptionsData.map(e=>e.subscription)}subscriptionById(e){const r=this.subscriptionsData.find(i=>i.id===e);return null==r?void 0:r.subscription}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,r){},encapsulation:2}),t})();const g=(t,n)=>{if(0===t.length)return[];if(0===n.length)return[];const e=A(t,n);return t.map(r=>({id:r.id,label:r.name,group:r.planet,score:e[r.id]}))},d=t=>{const n={};for(const r of t){const i=`${r.characterId1}-${r.characterId2}`;n[i]?n[i]+=1:n[i]=1}let e=[];for(const r in n){const[i,u]=r.split("-");e.push({source:i,target:u,weight:n[r],group:"undefined"})}return e},v=t=>{const n=new Set;return t.forEach(e=>{n.add(e.characterId1),n.add(e.characterId2)}),Array.from(n)},A=(t,n)=>{const i={};n.forEach(M=>{var U,O,R,rt;null!==(U=i[R=M.characterId1])&&void 0!==U||(i[R]=0),null!==(O=i[rt=M.characterId2])&&void 0!==O||(i[rt]=0),i[M.characterId1]+=1,i[M.characterId2]+=1});const u=Object.values(i);let c=Math.min(...u);const w=Math.max(...u)-c,m={};for(const[M,U]of Object.entries(i))m[M]=(U-c)/w*55+5;return m};var x=N(7489),S=N.n(x),B=N(5595),T=N(7749),P=N.n(T),Z=N(4004),D=N(520),L=N(3905),G=N(2843),k=N(262),V=N(2340);let K=(()=>{class t{generate(e){let r=e;return r.startsWith("/")||(r="/"+r),"assets/db"+r+".json"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),tt=(()=>{class t{constructor(e,r){this.http=e,this.router=r,this.requestCache={},setInterval(()=>{this.clearCache()},300)}get(e){var r=this;const i=this.router.generate(e);return new Promise(function(){var u=(0,$.Z)(function*(c,p){try{c(yield(0,L.z)(r.http.get(i).pipe((0,k.K)(m=>(0,G._)(m)))))}catch(w){p(w)}});return function(c,p){return u.apply(this,arguments)}}())}headers(){return{headers:(new D.WM).set("app-version",V.N.appVersion).set("Access-Control-Allow-Origin","*")}}clearCache(){const e=(0,x.keys)(this.requestCache),r=(new Date).getTime();for(const i of e){const u=this.requestCache[i];if(!u)continue;const c=r-u.timestamp;!u.response&&c<2e4||u.response&&c<200||(this.requestCache[i]=null,delete this.requestCache[i])}}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(D.eN),s.LFG(K))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var q=N(9175);const Q=(t,n)=>n.find(e=>e.id===t),ot=(t,n)=>{t||(t=[]);let e=[...t];return n.forEach(r=>{e=pt(e,r)}),e},pt=(t,n)=>{const e=n;let r=[...t];return(0,x.some)(r,i=>i.id===e.id)?r=r.map(i=>i.id===e.id?n:i):r.push(n),r};let zt=(()=>{class t extends q.m1{constructor(){super({characters:[]}),this.characters$=this.select(e=>e.characters)}saveAllCharacters(e){(0,x.isEqual)(this.get().characters,e)||this.patchState(r=>({characters:ot(r.characters,e)}))}syncState(){return this.get()}syncCharacter(e){return Q(e,this.get().characters)}reset(){this.patchState({characters:[]})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Mt=(()=>{class t{constructor(e,r){this.api=e,this.store=r}fetchAllCharacter(){var e=this;return(0,$.Z)(function*(){const r=yield e.api.get("characters");e.store.saveAllCharacters(r)})()}fetchAllCosmereCharacter(){var e=this;return(0,$.Z)(function*(){const i=(yield e.api.get("characters")).filter(u=>"Cosmere"===u.universe);e.store.saveAllCharacters(i)})()}syncAllCharacters(){return this.store.syncState().characters}allCharacters(){return this.store.characters$}cosmereCharacters(){return this.store.characters$.pipe((0,Z.U)(e=>e.filter(r=>"Cosmere"===r.universe)))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(tt),s.LFG(zt))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Bt=(()=>{class t extends q.m1{constructor(){super({relationships:[]}),this.relationships$=this.select(e=>e.relationships)}saveAllRelationship(e){(0,x.isEqual)(this.get().relationships,e)||this.patchState(r=>({relationships:ot(r.relationships,e)}))}syncState(){return this.get()}reset(){this.patchState({relationships:[]})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ht=(()=>{class t{constructor(e,r){this.api=e,this.store=r}fetchAllRelationship(){var e=this;return(0,$.Z)(function*(){const r=yield e.api.get("relationships");e.store.saveAllRelationship(r)})()}fetchAllRelationshipByBookId(e){var r=this;return(0,$.Z)(function*(){const i=yield r.api.get("relationships-"+e);r.store.saveAllRelationship(i)})()}fetchAllCosmereRelationship(){var e=this;return(0,$.Z)(function*(){const r=[];for(const c of["warbreaker","mistborn1","mistborn2","mistborn3","mistborn4","mistborn5","mistborn6","stormlight1","stormlight2","stormlight3","stormlight4"])r.push(e.api.get("relationships-"+c).then(p=>p).catch(p=>{}));const i=yield Promise.all(r);let u=[];i.forEach(c=>u=ot(u,c)),e.store.saveAllRelationship(u)})()}syncAllRelationship(){return this.store.syncState().relationships}allRelationship(){return this.store.relationships$}cosmereRelationships(){return this.store.relationships$.pipe((0,Z.U)(e=>e.filter(r=>["warbreaker","mistborn1","mistborn2","mistborn3","mistborn4","mistborn5","mistborn6","stormlight1","stormlight2","stormlight3","stormlight4"].includes(r.bookId))))}relationshipsByBook(e){return this.store.relationships$.pipe((0,Z.U)(r=>r.filter(i=>(null==i?void 0:i.bookId)===e)))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(tt),s.LFG(Bt))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var jt=N(5598),Ft=N(9976);function Qt(t,n){let e;if(void 0===n)for(const r of t)null!=r&&(e<r||void 0===e&&r>=r)&&(e=r);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(e<i||void 0===e&&i>=i)&&(e=i)}return e}function Wt(t,n){let e;if(void 0===n)for(const r of t)null!=r&&(e>r||void 0===e&&r>=r)&&(e=r);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(e>i||void 0===e&&i>=i)&&(e=i)}return e}function ft(t,n){return null==t||null==n?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function Jt(t,n){return(null==t||!(t>=t))-(null==n||!(n>=n))||(t<n?-1:t>n?1:0)}function ye(t,n,e=0,r=1/0,i){if(n=Math.floor(n),e=Math.floor(Math.max(0,e)),r=Math.floor(Math.min(t.length-1,r)),!(e<=n&&n<=r))return t;for(i=void 0===i?Jt:function bt(t=ft){if(t===ft)return Jt;if("function"!=typeof t)throw new TypeError("compare is not a function");return(n,e)=>{const r=t(n,e);return r||0===r?r:(0===t(e,e))-(0===t(n,n))}}(i);r>e;){if(r-e>600){const w=r-e+1,m=n-e+1,M=Math.log(w),U=.5*Math.exp(2*M/3),O=.5*Math.sqrt(M*U*(w-U)/w)*(m-w/2<0?-1:1);ye(t,n,Math.max(e,Math.floor(n-m*U/w+O)),Math.min(r,Math.floor(n+(w-m)*U/w+O)),i)}const u=t[n];let c=e,p=r;for(ee(t,e,n),i(t[r],u)>0&&ee(t,e,r);c<p;){for(ee(t,c,p),++c,--p;i(t[c],u)<0;)++c;for(;i(t[p],u)>0;)--p}0===i(t[e],u)?ee(t,e,p):(++p,ee(t,p,r)),p<=n&&(e=p+1),n<=p&&(r=p-1)}return t}function ee(t,n,e){const r=t[n];t[n]=t[e],t[e]=r}function ke(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),u=new Array(i);++r<i;)u[r]=t+r*e;return u}class xe extends Map{constructor(n,e=Xn){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=n)for(const[r,i]of n)this.set(r,i)}get(n){return super.get(Cn(this,n))}has(n){return super.has(Cn(this,n))}set(n,e){return super.set($n(this,n),e)}delete(n){return super.delete(en(this,n))}}class Tr extends Set{constructor(n,e=Xn){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=n)for(const r of n)this.add(r)}has(n){return super.has(Cn(this,n))}add(n){return super.add($n(this,n))}delete(n){return super.delete(en(this,n))}}function Cn({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):e}function $n({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):(t.set(r,e),e)}function en({_intern:t,_key:n},e){const r=n(e);return t.has(r)&&(e=t.get(r),t.delete(r)),e}function Xn(t){return null!==t&&"object"==typeof t?t.valueOf():t}function Or(t){return t}function Ur(t){return"translate("+t+",0)"}function Pr(t){return"translate(0,"+t+")"}function Sn(t){return n=>+t(n)}function Rr(t,n){return n=Math.max(0,t.bandwidth()-2*n)/2,t.round()&&(n=Math.round(n)),e=>+t(e)+n}function jr(){return!this.__axis}function sn(t,n){var e=[],r=null,i=null,u=6,c=6,p=3,w="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,m=1===t||4===t?-1:1,M=4===t||2===t?"x":"y",U=1===t||3===t?Ur:Pr;function O(R){var rt=null==r?n.ticks?n.ticks.apply(n,e):n.domain():r,J=null==i?n.tickFormat?n.tickFormat.apply(n,e):Or:i,j=Math.max(u,0)+p,W=n.range(),nt=+W[0]+w,at=+W[W.length-1]+w,X=(n.bandwidth?Rr:Sn)(n.copy(),w),ht=R.selection?R.selection():R,xt=ht.selectAll(".domain").data([null]),kt=ht.selectAll(".tick").data(rt,n).order(),_t=kt.exit(),Ot=kt.enter().append("g").attr("class","tick"),Ct=kt.select("line"),wt=kt.select("text");xt=xt.merge(xt.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),kt=kt.merge(Ot),Ct=Ct.merge(Ot.append("line").attr("stroke","currentColor").attr(M+"2",m*u)),wt=wt.merge(Ot.append("text").attr("fill","currentColor").attr(M,m*j).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),R!==ht&&(xt=xt.transition(R),kt=kt.transition(R),Ct=Ct.transition(R),wt=wt.transition(R),_t=_t.transition(R).attr("opacity",1e-6).attr("transform",function(Rt){return isFinite(Rt=X(Rt))?U(Rt+w):this.getAttribute("transform")}),Ot.attr("opacity",1e-6).attr("transform",function(Rt){var It=this.parentNode.__axis;return U((It&&isFinite(It=It(Rt))?It:X(Rt))+w)})),_t.remove(),xt.attr("d",4===t||2===t?c?"M"+m*c+","+nt+"H"+w+"V"+at+"H"+m*c:"M"+w+","+nt+"V"+at:c?"M"+nt+","+m*c+"V"+w+"H"+at+"V"+m*c:"M"+nt+","+w+"H"+at),kt.attr("opacity",1).attr("transform",function(Rt){return U(X(Rt)+w)}),Ct.attr(M+"2",m*u),wt.attr(M,m*j).text(J),ht.filter(jr).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),ht.each(function(){this.__axis=X})}return O.scale=function(R){return arguments.length?(n=R,O):n},O.ticks=function(){return e=Array.from(arguments),O},O.tickArguments=function(R){return arguments.length?(e=null==R?[]:Array.from(R),O):e.slice()},O.tickValues=function(R){return arguments.length?(r=null==R?null:Array.from(R),O):r&&r.slice()},O.tickFormat=function(R){return arguments.length?(i=R,O):i},O.tickSize=function(R){return arguments.length?(u=c=+R,O):u},O.tickSizeInner=function(R){return arguments.length?(u=+R,O):u},O.tickSizeOuter=function(R){return arguments.length?(c=+R,O):c},O.tickPadding=function(R){return arguments.length?(p=+R,O):p},O.offset=function(R){return arguments.length?(w=+R,O):w},O}function un(t){return sn(3,t)}function De(t){return sn(4,t)}function Wr(){}function Nn(t){return null==t?Wr:function(){return this.querySelector(t)}}function Br(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function Zr(){return[]}function Mn(t){return null==t?Zr:function(){return this.querySelectorAll(t)}}function Dn(t){return function(){return this.matches(t)}}function Vn(t){return function(n){return n.matches(t)}}var Hn=Array.prototype.find;function $r(){return this.firstElementChild}var $t=Array.prototype.filter;function qn(){return Array.from(this.children)}function zn(t){return new Array(t.length)}function h(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function y(t){return function(){return t}}function f(t,n,e,r,i,u){for(var p,c=0,w=n.length,m=u.length;c<m;++c)(p=n[c])?(p.__data__=u[c],r[c]=p):e[c]=new h(t,u[c]);for(;c<w;++c)(p=n[c])&&(i[c]=p)}function o(t,n,e,r,i,u,c){var p,w,R,m=new Map,M=n.length,U=u.length,O=new Array(M);for(p=0;p<M;++p)(w=n[p])&&(O[p]=R=c.call(w,w.__data__,p,n)+"",m.has(R)?i[p]=w:m.set(R,w));for(p=0;p<U;++p)R=c.call(t,u[p],p,u)+"",(w=m.get(R))?(r[p]=w,w.__data__=u[p],m.delete(R)):e[p]=new h(t,u[p]);for(p=0;p<M;++p)(w=n[p])&&m.get(O[p])===w&&(i[p]=w)}function a(t){return t.__data__}function b(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function yt(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}h.prototype={constructor:h,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var se="http://www.w3.org/1999/xhtml";const le={svg:"http://www.w3.org/2000/svg",xhtml:se,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ie(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),le.hasOwnProperty(n)?{space:le[n],local:t}:t}function we(t){return function(){this.removeAttribute(t)}}function hn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function fn(t,n){return function(){this.setAttribute(t,n)}}function Gi(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function Ii(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function er(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function Li(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function vs(t){return function(){this.style.removeProperty(t)}}function ws(t,n,e){return function(){this.style.setProperty(t,n,e)}}function bs(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function ln(t,n){return t.style.getPropertyValue(n)||Li(t).getComputedStyle(t,null).getPropertyValue(n)}function As(t){return function(){delete this[t]}}function Es(t,n){return function(){this[t]=n}}function _s(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function Ti(t){return t.trim().split(/^|\s+/)}function Xr(t){return t.classList||new Oi(t)}function Oi(t){this._node=t,this._names=Ti(t.getAttribute("class")||"")}function Ui(t,n){for(var e=Xr(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function Pi(t,n){for(var e=Xr(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function Cs(t){return function(){Ui(this,t)}}function Ss(t){return function(){Pi(this,t)}}function Ns(t,n){return function(){(n.apply(this,arguments)?Ui:Pi)(this,t)}}function Ds(){this.textContent=""}function zs(t){return function(){this.textContent=t}}function Gs(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}function Ls(){this.innerHTML=""}function Ts(t){return function(){this.innerHTML=t}}function Os(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}function Ps(){this.nextSibling&&this.parentNode.appendChild(this)}function js(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Bs(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===se&&n.documentElement.namespaceURI===se?n.createElement(t):n.createElementNS(e,t)}}function Zs(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Vr(t){var n=ie(t);return(n.local?Zs:Bs)(n)}function Ys(){return null}function Xs(){var t=this.parentNode;t&&t.removeChild(this)}function Hs(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Ks(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function ta(t){return t.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");return r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),{type:n,name:e}})}function ea(t){return function(){var n=this.__on;if(n){for(var u,e=0,r=-1,i=n.length;e<i;++e)u=n[e],t.type&&u.type!==t.type||u.name!==t.name?n[++r]=u:this.removeEventListener(u.type,u.listener,u.options);++r?n.length=r:delete this.__on}}}function na(t,n,e){return function(){var i,r=this.__on,u=function Js(t){return function(n){t.call(this,n,this.__data__)}}(n);if(r)for(var c=0,p=r.length;c<p;++c)if((i=r[c]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=u,i.options=e),void(i.value=n);this.addEventListener(t.type,u,e),i={type:t.type,name:t.name,value:n,listener:u,options:e},r?r.push(i):this.__on=[i]}}function Ri(t,n,e){var r=Li(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function ia(t,n){return function(){return Ri(this,t,n)}}function oa(t,n){return function(){return Ri(this,t,n.apply(this,arguments))}}Oi.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ji=[null];function be(t,n){this._groups=t,this._parents=n}function Wi(){return new be([[document.documentElement]],ji)}be.prototype=Wi.prototype={constructor:be,select:function cn(t){"function"!=typeof t&&(t=Nn(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var w,m,u=n[i],c=u.length,p=r[i]=new Array(c),M=0;M<c;++M)(w=u[M])&&(m=t.call(w,w.__data__,M,u))&&("__data__"in w&&(m.__data__=w.__data__),p[M]=m);return new be(r,this._parents)},selectAll:function Yr(t){t="function"==typeof t?function Fr(t){return function(){return Br(t.apply(this,arguments))}}(t):Mn(t);for(var n=this._groups,e=n.length,r=[],i=[],u=0;u<e;++u)for(var w,c=n[u],p=c.length,m=0;m<p;++m)(w=c[m])&&(r.push(t.call(w,w.__data__,m,c)),i.push(w));return new be(r,i)},selectChild:function Ue(t){return this.select(null==t?$r:function Kn(t){return function(){return Hn.call(this.children,t)}}("function"==typeof t?t:Vn(t)))},selectChildren:function Jn(t){return this.selectAll(null==t?qn:function Qn(t){return function(){return $t.call(this.children,t)}}("function"==typeof t?t:Vn(t)))},filter:function tr(t){"function"!=typeof t&&(t=Dn(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var w,u=n[i],c=u.length,p=r[i]=[],m=0;m<c;++m)(w=u[m])&&t.call(w,w.__data__,m,u)&&p.push(w);return new be(r,this._parents)},data:function l(t,n){if(!arguments.length)return Array.from(this,a);var e=n?o:f,r=this._parents,i=this._groups;"function"!=typeof t&&(t=y(t));for(var u=i.length,c=new Array(u),p=new Array(u),w=new Array(u),m=0;m<u;++m){var M=r[m],U=i[m],O=U.length,R=b(t.call(M,M&&M.__data__,m,r)),rt=R.length,J=p[m]=new Array(rt),j=c[m]=new Array(rt),W=w[m]=new Array(O);e(M,U,J,j,W,R,n);for(var X,ht,nt=0,at=0;nt<rt;++nt)if(X=J[nt]){for(nt>=at&&(at=nt+1);!(ht=j[at])&&++at<rt;);X._next=ht||null}}return(c=new be(c,r))._enter=p,c._exit=w,c},enter:function Pe(){return new be(this._enter||this._groups.map(zn),this._parents)},exit:function z(){return new be(this._exit||this._groups.map(zn),this._parents)},join:function Y(t,n,e){var r=this.enter(),i=this,u=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=n&&(i=n(i))&&(i=i.selection()),null==e?u.remove():e(u),r&&i?r.merge(i).order():i},merge:function ct(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,c=Math.min(i,r.length),p=new Array(i),w=0;w<c;++w)for(var R,m=e[w],M=r[w],U=m.length,O=p[w]=new Array(U),rt=0;rt<U;++rt)(R=m[rt]||M[rt])&&(O[rt]=R);for(;w<i;++w)p[w]=e[w];return new be(p,this._parents)},selection:function ua(){return this},order:function ut(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var c,r=t[n],i=r.length-1,u=r[i];--i>=0;)(c=r[i])&&(u&&4^c.compareDocumentPosition(u)&&u.parentNode.insertBefore(c,u),u=c);return this},sort:function it(t){function n(U,O){return U&&O?t(U.__data__,O.__data__):!U-!O}t||(t=yt);for(var e=this._groups,r=e.length,i=new Array(r),u=0;u<r;++u){for(var m,c=e[u],p=c.length,w=i[u]=new Array(p),M=0;M<p;++M)(m=c[M])&&(w[M]=m);w.sort(n)}return new be(i,this._parents).order()},call:function mt(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function Gt(){return Array.from(this)},node:function Zt(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,u=r.length;i<u;++i){var c=r[i];if(c)return c}return null},size:function Xt(){let t=0;for(const n of this)++t;return t},empty:function ne(){return!this.node()},each:function te(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var p,i=n[e],u=0,c=i.length;u<c;++u)(p=i[u])&&t.call(p,p.__data__,u,i);return this},attr:function ms(t,n){var e=ie(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?hn:we:"function"==typeof n?e.local?er:Ii:e.local?Gi:fn)(e,n))},style:function xs(t,n,e){return arguments.length>1?this.each((null==n?vs:"function"==typeof n?bs:ws)(t,n,null==e?"":e)):ln(this.node(),t)},property:function ks(t,n){return arguments.length>1?this.each((null==n?As:"function"==typeof n?_s:Es)(t,n)):this.node()[t]},classed:function Ms(t,n){var e=Ti(t+"");if(arguments.length<2){for(var r=Xr(this.node()),i=-1,u=e.length;++i<u;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?Ns:n?Cs:Ss)(e,n))},text:function Is(t){return arguments.length?this.each(null==t?Ds:("function"==typeof t?Gs:zs)(t)):this.node().textContent},html:function Us(t){return arguments.length?this.each(null==t?Ls:("function"==typeof t?Os:Ts)(t)):this.node().innerHTML},raise:function Rs(){return this.each(Ps)},lower:function Ws(){return this.each(js)},append:function Fs(t){var n="function"==typeof t?t:Vr(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function $s(t,n){var e="function"==typeof t?t:Vr(t),r=null==n?Ys:"function"==typeof n?n:Nn(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function Vs(){return this.each(Xs)},clone:function qs(t){return this.select(t?Ks:Hs)},datum:function Qs(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function ra(t,n,e){var i,c,r=ta(t+""),u=r.length;if(!(arguments.length<2)){for(p=n?na:ea,i=0;i<u;++i)this.each(p(r[i],n,e));return this}var p=this.node().__on;if(p)for(var M,w=0,m=p.length;w<m;++w)for(i=0,M=p[w];i<u;++i)if((c=r[i]).type===M.type&&c.name===M.name)return M.value},dispatch:function sa(t,n){return this.each(("function"==typeof n?oa:ia)(t,n))},[Symbol.iterator]:function*aa(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var c,r=t[n],i=0,u=r.length;i<u;++i)(c=r[i])&&(yield c)}};const Gn=Wi;var ca={value:()=>{}};function Bi(){for(var r,t=0,n=arguments.length,e={};t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new nr(e)}function nr(t){this._=t}function ha(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}function fa(t,n){for(var i,e=0,r=t.length;e<r;++e)if((i=t[e]).name===n)return i.value}function Zi(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=ca,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}nr.prototype=Bi.prototype={constructor:nr,on:function(t,n){var i,e=this._,r=ha(t+"",e),u=-1,c=r.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++u<c;)if(i=(t=r[u]).type)e[i]=Zi(e[i],t.name,n);else if(null==n)for(i in e)e[i]=Zi(e[i],t.name,null);return this}for(;++u<c;)if((i=(t=r[u]).type)&&(i=fa(e[i],t.name)))return i},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new nr(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var i,u,e=new Array(i),r=0;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=0,i=(u=this._[t]).length;r<i;++r)u[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,u=r.length;i<u;++i)r[i].value.apply(n,e)}};const rr=Bi;var ir,Tn,dn=0,In=0,Ln=0,or=0,Ye=0,sr=0,On="object"==typeof performance&&performance.now?performance:Date,Yi="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Hr(){return Ye||(Yi(la),Ye=On.now()+sr)}function la(){Ye=0}function ar(){this._call=this._time=this._next=null}function Kr(t,n,e){var r=new ar;return r.restart(t,n,e),r}function $i(){Ye=(or=On.now())+sr,dn=In=0;try{!function da(){Hr(),++dn;for(var n,t=ir;t;)(n=Ye-t._time)>=0&&t._call.call(void 0,n),t=t._next;--dn}()}finally{dn=0,function ga(){for(var t,e,n=ir,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:ir=e);Tn=t,qr(r)}(),Ye=0}}function pa(){var t=On.now(),n=t-or;n>1e3&&(sr-=n,or=t)}function qr(t){dn||(In&&(In=clearTimeout(In)),t-Ye>24?(t<1/0&&(In=setTimeout($i,t-On.now()-sr)),Ln&&(Ln=clearInterval(Ln))):(Ln||(or=On.now(),Ln=setInterval(pa,1e3)),dn=1,Yi($i)))}function Xi(t,n,e){var r=new ar;return r.restart(i=>{r.stop(),t(i+n)},n=null==n?0:+n,e),r}ar.prototype=Kr.prototype={constructor:ar,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?Hr():+e)+(null==n?0:+n),!this._next&&Tn!==this&&(Tn?Tn._next=this:ir=this,Tn=this),this._call=t,this._time=e,qr()},stop:function(){this._call&&(this._call=null,this._time=1/0,qr())}};var ya=rr("start","end","cancel","interrupt"),ma=[];function hr(t,n,e,r,i,u){var c=t.__transition;if(c){if(e in c)return}else t.__transition={};!function va(t,n,e){var i,r=t.__transition;function c(m){var M,U,O,R;if(1!==e.state)return w();for(M in r)if((R=r[M]).name===e.name){if(3===R.state)return Xi(c);4===R.state?(R.state=6,R.timer.stop(),R.on.call("interrupt",t,t.__data__,R.index,R.group),delete r[M]):+M<n&&(R.state=6,R.timer.stop(),R.on.call("cancel",t,t.__data__,R.index,R.group),delete r[M])}if(Xi(function(){3===e.state&&(e.state=4,e.timer.restart(p,e.delay,e.time),p(m))}),e.state=2,e.on.call("start",t,t.__data__,e.index,e.group),2===e.state){for(e.state=3,i=new Array(O=e.tween.length),M=0,U=-1;M<O;++M)(R=e.tween[M].value.call(t,t.__data__,e.index,e.group))&&(i[++U]=R);i.length=U+1}}function p(m){for(var M=m<e.duration?e.ease.call(null,m/e.duration):(e.timer.restart(w),e.state=5,1),U=-1,O=i.length;++U<O;)i[U].call(t,M);5===e.state&&(e.on.call("end",t,t.__data__,e.index,e.group),w())}function w(){for(var m in e.state=6,e.timer.stop(),delete r[n],r)return;delete t.__transition}r[n]=e,e.timer=Kr(function u(m){e.state=1,e.timer.restart(c,e.delay,e.time),e.delay<=m&&c(m-e.delay)},0,e.time)}(t,e,{name:n,index:r,group:i,on:ya,tween:ma,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:0})}function ti(t,n){var e=Ae(t,n);if(e.state>0)throw new Error("too late; already scheduled");return e}function Ce(t,n){var e=Ae(t,n);if(e.state>3)throw new Error("too late; already running");return e}function Ae(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function fr(t,n){var r,i,c,e=t.__transition,u=!0;if(e){for(c in n=null==n?null:n+"",e)(r=e[c]).name===n?(i=r.state>2&&r.state<5,r.state=6,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete e[c]):u=!1;u&&delete t.__transition}}function Ee(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}var lr,qi=180/Math.PI,ei={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Qi(t,n,e,r,i,u){var c,p,w;return(c=Math.sqrt(t*t+n*n))&&(t/=c,n/=c),(w=t*e+n*r)&&(e-=t*w,r-=n*w),(p=Math.sqrt(e*e+r*r))&&(e/=p,r/=p,w/=p),t*r<n*e&&(t=-t,n=-n,w=-w,c=-c),{translateX:i,translateY:u,rotate:Math.atan2(n,t)*qi,skewX:Math.atan(w)*qi,scaleX:c,scaleY:p}}function Ji(t,n,e,r){function i(m){return m.length?m.pop()+" ":""}return function(m,M){var U=[],O=[];return m=t(m),M=t(M),function u(m,M,U,O,R,rt){if(m!==U||M!==O){var J=R.push("translate(",null,n,null,e);rt.push({i:J-4,x:Ee(m,U)},{i:J-2,x:Ee(M,O)})}else(U||O)&&R.push("translate("+U+n+O+e)}(m.translateX,m.translateY,M.translateX,M.translateY,U,O),function c(m,M,U,O){m!==M?(m-M>180?M+=360:M-m>180&&(m+=360),O.push({i:U.push(i(U)+"rotate(",null,r)-2,x:Ee(m,M)})):M&&U.push(i(U)+"rotate("+M+r)}(m.rotate,M.rotate,U,O),function p(m,M,U,O){m!==M?O.push({i:U.push(i(U)+"skewX(",null,r)-2,x:Ee(m,M)}):M&&U.push(i(U)+"skewX("+M+r)}(m.skewX,M.skewX,U,O),function w(m,M,U,O,R,rt){if(m!==U||M!==O){var J=R.push(i(R)+"scale(",null,",",null,")");rt.push({i:J-4,x:Ee(m,U)},{i:J-2,x:Ee(M,O)})}else(1!==U||1!==O)&&R.push(i(R)+"scale("+U+","+O+")")}(m.scaleX,m.scaleY,M.scaleX,M.scaleY,U,O),m=M=null,function(R){for(var j,rt=-1,J=O.length;++rt<J;)U[(j=O[rt]).i]=j.x(R);return U.join("")}}}var Aa=Ji(function ba(t){const n=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?ei:Qi(n.a,n.b,n.c,n.d,n.e,n.f)},"px, ","px)","deg)"),Ea=Ji(function xa(t){return null!=t&&(lr||(lr=document.createElementNS("http://www.w3.org/2000/svg","g")),lr.setAttribute("transform",t),t=lr.transform.baseVal.consolidate())?Qi((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):ei},", ",")",")");function _a(t,n){var e,r;return function(){var i=Ce(this,t),u=i.tween;if(u!==e)for(var c=0,p=(r=e=u).length;c<p;++c)if(r[c].name===n){(r=r.slice()).splice(c,1);break}i.tween=r}}function ka(t,n,e){var r,i;if("function"!=typeof e)throw new Error;return function(){var u=Ce(this,t),c=u.tween;if(c!==r){i=(r=c).slice();for(var p={name:n,value:e},w=0,m=i.length;w<m;++w)if(i[w].name===n){i[w]=p;break}w===m&&i.push(p)}u.tween=i}}function ni(t,n,e){var r=t._id;return t.each(function(){var i=Ce(this,r);(i.value||(i.value={}))[n]=e.apply(this,arguments)}),function(i){return Ae(i,r).value[n]}}function dr(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function ri(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function pn(){}var gn=1/.7,yn="\\s*([+-]?\\d+)\\s*",Un="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Se="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Sa=/^#([0-9a-f]{3,8})$/,Na=new RegExp(`^rgb\\(${yn},${yn},${yn}\\)$`),Ma=new RegExp(`^rgb\\(${Se},${Se},${Se}\\)$`),Da=new RegExp(`^rgba\\(${yn},${yn},${yn},${Un}\\)$`),za=new RegExp(`^rgba\\(${Se},${Se},${Se},${Un}\\)$`),Ga=new RegExp(`^hsl\\(${Un},${Se},${Se}\\)$`),Ia=new RegExp(`^hsla\\(${Un},${Se},${Se},${Un}\\)$`),to={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function eo(){return this.rgb().formatHex()}function no(){return this.rgb().formatRgb()}function Xe(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=Sa.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?ro(n):3===e?new ue(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?pr(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?pr(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=Na.exec(t))?new ue(n[1],n[2],n[3],1):(n=Ma.exec(t))?new ue(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=Da.exec(t))?pr(n[1],n[2],n[3],n[4]):(n=za.exec(t))?pr(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=Ga.exec(t))?ao(n[1],n[2]/100,n[3]/100,1):(n=Ia.exec(t))?ao(n[1],n[2]/100,n[3]/100,n[4]):to.hasOwnProperty(t)?ro(to[t]):"transparent"===t?new ue(NaN,NaN,NaN,0):null}function ro(t){return new ue(t>>16&255,t>>8&255,255&t,1)}function pr(t,n,e,r){return r<=0&&(t=n=e=NaN),new ue(t,n,e,r)}function io(t){return t instanceof pn||(t=Xe(t)),t?new ue((t=t.rgb()).r,t.g,t.b,t.opacity):new ue}function gr(t,n,e,r){return 1===arguments.length?io(t):new ue(t,n,e,null==r?1:r)}function ue(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function oo(){return`#${He(this.r)}${He(this.g)}${He(this.b)}`}function so(){const t=yr(this.opacity);return`${1===t?"rgb(":"rgba("}${Ve(this.r)}, ${Ve(this.g)}, ${Ve(this.b)}${1===t?")":`, ${t})`}`}function yr(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ve(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function He(t){return((t=Ve(t))<16?"0":"")+t.toString(16)}function ao(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new _e(t,n,e,r)}function uo(t){if(t instanceof _e)return new _e(t.h,t.s,t.l,t.opacity);if(t instanceof pn||(t=Xe(t)),!t)return new _e;if(t instanceof _e)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),u=Math.max(n,e,r),c=NaN,p=u-i,w=(u+i)/2;return p?(c=n===u?(e-r)/p+6*(e<r):e===u?(r-n)/p+2:(n-e)/p+4,p/=w<.5?u+i:2-u-i,c*=60):p=w>0&&w<1?0:c,new _e(c,p,w,t.opacity)}function _e(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function co(t){return(t=(t||0)%360)<0?t+360:t}function mr(t){return Math.max(0,Math.min(1,t||0))}function ii(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}function ho(t,n,e,r,i){var u=t*t,c=u*t;return((1-3*t+3*u-c)*n+(4-6*u+3*c)*e+(1+3*t+3*u-3*c)*r+c*i)/6}dr(pn,Xe,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:eo,formatHex:eo,formatHex8:function La(){return this.rgb().formatHex8()},formatHsl:function Ta(){return uo(this).formatHsl()},formatRgb:no,toString:no}),dr(ue,gr,ri(pn,{brighter(t){return t=null==t?gn:Math.pow(gn,t),new ue(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new ue(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ue(Ve(this.r),Ve(this.g),Ve(this.b),yr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oo,formatHex:oo,formatHex8:function Oa(){return`#${He(this.r)}${He(this.g)}${He(this.b)}${He(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:so,toString:so})),dr(_e,function Ua(t,n,e,r){return 1===arguments.length?uo(t):new _e(t,n,e,null==r?1:r)},ri(pn,{brighter(t){return t=null==t?gn:Math.pow(gn,t),new _e(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new _e(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new ue(ii(t>=240?t-240:t+120,i,r),ii(t,i,r),ii(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new _e(co(this.h),mr(this.s),mr(this.l),yr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=yr(this.opacity);return`${1===t?"hsl(":"hsla("}${co(this.h)}, ${100*mr(this.s)}%, ${100*mr(this.l)}%${1===t?")":`, ${t})`}`}}));const vr=t=>()=>t;function fo(t,n){return function(e){return t+e*n}}function mn(t,n){var e=n-t;return e?fo(t,e):vr(isNaN(t)?n:t)}const wr=function t(n){var e=function Ba(t){return 1==(t=+t)?mn:function(n,e){return e-n?function ja(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):vr(isNaN(n)?e:n)}}(n);function r(i,u){var c=e((i=gr(i)).r,(u=gr(u)).r),p=e(i.g,u.g),w=e(i.b,u.b),m=mn(i.opacity,u.opacity);return function(M){return i.r=c(M),i.g=p(M),i.b=w(M),i.opacity=m(M),i+""}}return r.gamma=t,r}(1);function lo(t){return function(n){var c,p,e=n.length,r=new Array(e),i=new Array(e),u=new Array(e);for(c=0;c<e;++c)p=gr(n[c]),r[c]=p.r||0,i[c]=p.g||0,u[c]=p.b||0;return r=t(r),i=t(i),u=t(u),p.opacity=1,function(w){return p.r=r(w),p.g=i(w),p.b=u(w),p+""}}}lo(function Pa(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],u=t[r+1];return ho((e-r/n)*n,r>0?t[r-1]:2*i-u,i,u,r<n-1?t[r+2]:2*u-i)}}),lo(function Ra(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n);return ho((e-r/n)*n,t[(r+n-1)%n],t[r%n],t[(r+1)%n],t[(r+2)%n])}});var oi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,si=new RegExp(oi.source,"g");function po(t,n){var r,i,u,e=oi.lastIndex=si.lastIndex=0,c=-1,p=[],w=[];for(t+="",n+="";(r=oi.exec(t))&&(i=si.exec(n));)(u=i.index)>e&&(u=n.slice(e,u),p[c]?p[c]+=u:p[++c]=u),(r=r[0])===(i=i[0])?p[c]?p[c]+=i:p[++c]=i:(p[++c]=null,w.push({i:c,x:Ee(r,i)})),e=si.lastIndex;return e<n.length&&(u=n.slice(e),p[c]?p[c]+=u:p[++c]=u),p.length<2?w[0]?function Fa(t){return function(n){return t(n)+""}}(w[0].x):function Za(t){return function(){return t}}(n):(n=w.length,function(m){for(var U,M=0;M<n;++M)p[(U=w[M]).i]=U.x(m);return p.join("")})}function go(t,n){var e;return("number"==typeof n?Ee:n instanceof Xe?wr:(e=Xe(n))?(n=e,wr):po)(t,n)}function Ya(t){return function(){this.removeAttribute(t)}}function $a(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Xa(t,n,e){var r,u,i=e+"";return function(){var c=this.getAttribute(t);return c===i?null:c===r?u:u=n(r=c,e)}}function Va(t,n,e){var r,u,i=e+"";return function(){var c=this.getAttributeNS(t.space,t.local);return c===i?null:c===r?u:u=n(r=c,e)}}function Ha(t,n,e){var r,i,u;return function(){var c,w,p=e(this);return null==p?void this.removeAttribute(t):(c=this.getAttribute(t))===(w=p+"")?null:c===r&&w===i?u:(i=w,u=n(r=c,p))}}function Ka(t,n,e){var r,i,u;return function(){var c,w,p=e(this);return null==p?void this.removeAttributeNS(t.space,t.local):(c=this.getAttributeNS(t.space,t.local))===(w=p+"")?null:c===r&&w===i?u:(i=w,u=n(r=c,p))}}function Qa(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function Ja(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function tu(t,n){var e,r;function i(){var u=n.apply(this,arguments);return u!==r&&(e=(r=u)&&Ja(t,u)),e}return i._value=n,i}function eu(t,n){var e,r;function i(){var u=n.apply(this,arguments);return u!==r&&(e=(r=u)&&Qa(t,u)),e}return i._value=n,i}function ru(t,n){return function(){ti(this,t).delay=+n.apply(this,arguments)}}function iu(t,n){return n=+n,function(){ti(this,t).delay=n}}function su(t,n){return function(){Ce(this,t).duration=+n.apply(this,arguments)}}function au(t,n){return n=+n,function(){Ce(this,t).duration=n}}function cu(t,n){if("function"!=typeof n)throw new Error;return function(){Ce(this,t).ease=n}}function yu(t,n,e){var r,i,u=function gu(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||"start"===n})}(n)?ti:Ce;return function(){var c=u(this,t),p=c.on;p!==r&&(i=(r=p).copy()).on(n,e),c.on=i}}var Au=Gn.prototype.constructor;function yo(t){return function(){this.style.removeProperty(t)}}function Mu(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function Du(t,n,e){var r,i;function u(){var c=n.apply(this,arguments);return c!==i&&(r=(i=c)&&Mu(t,c,e)),r}return u._value=n,u}function Tu(t){return function(n){this.textContent=t.call(this,n)}}function Ou(t){var n,e;function r(){var i=t.apply(this,arguments);return i!==e&&(n=(e=i)&&Tu(i)),n}return r._value=t,r}var ju=0;function ze(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function mo(){return++ju}var Ge=Gn.prototype;ze.prototype=function Wu(t){return Gn().transition(t)}.prototype={constructor:ze,select:function bu(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=Nn(t));for(var r=this._groups,i=r.length,u=new Array(i),c=0;c<i;++c)for(var M,U,p=r[c],w=p.length,m=u[c]=new Array(w),O=0;O<w;++O)(M=p[O])&&(U=t.call(M,M.__data__,O,p))&&("__data__"in M&&(U.__data__=M.__data__),m[O]=U,hr(m[O],n,e,O,m,Ae(M,e)));return new ze(u,this._parents,n,e)},selectAll:function xu(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=Mn(t));for(var r=this._groups,i=r.length,u=[],c=[],p=0;p<i;++p)for(var M,w=r[p],m=w.length,U=0;U<m;++U)if(M=w[U]){for(var R,O=t.call(M,M.__data__,U,w),rt=Ae(M,e),J=0,j=O.length;J<j;++J)(R=O[J])&&hr(R,n,e,J,O,rt);u.push(O),c.push(M)}return new ze(u,c,n,e)},selectChild:Ge.selectChild,selectChildren:Ge.selectChildren,filter:function du(t){"function"!=typeof t&&(t=Dn(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var w,u=n[i],c=u.length,p=r[i]=[],m=0;m<c;++m)(w=u[m])&&t.call(w,w.__data__,m,u)&&p.push(w);return new ze(r,this._parents,this._name,this._id)},merge:function pu(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,u=Math.min(r,e.length),c=new Array(r),p=0;p<u;++p)for(var O,w=n[p],m=e[p],M=w.length,U=c[p]=new Array(M),R=0;R<M;++R)(O=w[R]||m[R])&&(U[R]=O);for(;p<r;++p)c[p]=n[p];return new ze(c,this._parents,this._name,this._id)},selection:function Eu(){return new Au(this._groups,this._parents)},transition:function Pu(){for(var t=this._name,n=this._id,e=mo(),r=this._groups,i=r.length,u=0;u<i;++u)for(var w,c=r[u],p=c.length,m=0;m<p;++m)if(w=c[m]){var M=Ae(w,n);hr(w,t,e,m,c,{time:M.time+M.delay+M.duration,delay:0,duration:M.duration,ease:M.ease})}return new ze(r,this._parents,t,e)},call:Ge.call,nodes:Ge.nodes,node:Ge.node,size:Ge.size,empty:Ge.empty,each:Ge.each,on:function mu(t,n){var e=this._id;return arguments.length<2?Ae(this.node(),e).on.on(t):this.each(yu(e,t,n))},attr:function qa(t,n){var e=ie(t),r="transform"===e?Ea:go;return this.attrTween(t,"function"==typeof n?(e.local?Ka:Ha)(e,r,ni(this,"attr."+t,n)):null==n?(e.local?$a:Ya)(e):(e.local?Va:Xa)(e,r,n))},attrTween:function nu(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=ie(t);return this.tween(e,(r.local?tu:eu)(r,n))},style:function Nu(t,n,e){var r="transform"==(t+="")?Aa:go;return null==n?this.styleTween(t,function _u(t,n){var e,r,i;return function(){var u=ln(this,t),c=(this.style.removeProperty(t),ln(this,t));return u===c?null:u===e&&c===r?i:i=n(e=u,r=c)}}(t,r)).on("end.style."+t,yo(t)):"function"==typeof n?this.styleTween(t,function Cu(t,n,e){var r,i,u;return function(){var c=ln(this,t),p=e(this),w=p+"";return null==p&&(this.style.removeProperty(t),w=p=ln(this,t)),c===w?null:c===r&&w===i?u:(i=w,u=n(r=c,p))}}(t,r,ni(this,"style."+t,n))).each(function Su(t,n){var e,r,i,p,u="style."+n,c="end."+u;return function(){var w=Ce(this,t),m=w.on,M=null==w.value[u]?p||(p=yo(n)):void 0;(m!==e||i!==M)&&(r=(e=m).copy()).on(c,i=M),w.on=r}}(this._id,t)):this.styleTween(t,function ku(t,n,e){var r,u,i=e+"";return function(){var c=ln(this,t);return c===i?null:c===r?u:u=n(r=c,e)}}(t,r,n),e).on("end.style."+t,null)},styleTween:function zu(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,Du(t,n,null==e?"":e))},text:function Lu(t){return this.tween("text","function"==typeof t?function Iu(t){return function(){var n=t(this);this.textContent=null==n?"":n}}(ni(this,"text",t)):function Gu(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function Uu(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;return this.tween(n,Ou(t))},remove:function wu(){return this.on("end.remove",function vu(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}(this._id))},tween:function Ca(t,n){var e=this._id;if(t+="",arguments.length<2){for(var c,r=Ae(this.node(),e).tween,i=0,u=r.length;i<u;++i)if((c=r[i]).name===t)return c.value;return null}return this.each((null==n?_a:ka)(e,t,n))},delay:function ou(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?ru:iu)(n,t)):Ae(this.node(),n).delay},duration:function uu(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?su:au)(n,t)):Ae(this.node(),n).duration},ease:function hu(t){var n=this._id;return arguments.length?this.each(cu(n,t)):Ae(this.node(),n).ease},easeVarying:function lu(t){if("function"!=typeof t)throw new Error;return this.each(function fu(t,n){return function(){var e=n.apply(this,arguments);if("function"!=typeof e)throw new Error;Ce(this,t).ease=e}}(this._id,t))},end:function Ru(){var t,n,e=this,r=e._id,i=e.size();return new Promise(function(u,c){var p={value:c},w={value:function(){0==--i&&u()}};e.each(function(){var m=Ce(this,r),M=m.on;M!==t&&((n=(t=M).copy())._.cancel.push(p),n._.interrupt.push(p),n._.end.push(w)),m.on=n}),0===i&&u()})},[Symbol.iterator]:Ge[Symbol.iterator]};var Zu={time:null,delay:0,duration:250,ease:function Bu(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Fu(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}Gn.prototype.interrupt=function wa(t){return this.each(function(){fr(this,t)})},Gn.prototype.transition=function Yu(t){var n,e;t instanceof ze?(n=t._id,t=t._name):(n=mo(),(e=Zu).time=Hr(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,u=0;u<i;++u)for(var w,c=r[u],p=c.length,m=0;m<p;++m)(w=c[m])&&hr(w,t,n,m,c,e||Fu(w,n));return new ze(r,this._parents,t,n)};Math;function Pn(t){return{type:t}}function oe(t){return"string"==typeof t?new be([[document.querySelector(t)]],[document.documentElement]):new be([[t]],ji)}function Le(t,n){if(t=function Ju(t){let n;for(;n=t.sourceEvent;)t=n;return t}(t),void 0===n&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(n.getScreenCTM().inverse())).x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}}return[t.pageX,t.pageY]}["w","e"].map(Pn),["n","s"].map(Pn),["n","w","e","s","nw","ne","sw","se"].map(Pn);const tc={passive:!1},Rn={capture:!0,passive:!1};function fi(t){t.stopImmediatePropagation()}function bn(t){t.preventDefault(),t.stopImmediatePropagation()}function Eo(t){var n=t.document.documentElement,e=oe(t).on("dragstart.drag",bn,Rn);"onselectstart"in n?e.on("selectstart.drag",bn,Rn):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function _o(t,n){var e=t.document.documentElement,r=oe(t).on("dragstart.drag",null);n&&(r.on("click.drag",bn,Rn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const Ar=t=>()=>t;function li(t,{sourceEvent:n,subject:e,target:r,identifier:i,active:u,x:c,y:p,dx:w,dy:m,dispatch:M}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:p,enumerable:!0,configurable:!0},dx:{value:w,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:M}})}function ec(t){return!t.ctrlKey&&!t.button}function nc(){return this.parentNode}function rc(t,n){return null==n?{x:t.x,y:t.y}:n}function ic(){return navigator.maxTouchPoints||"ontouchstart"in this}function ko(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,U,O,R,rt,J,j,W,nt,u=t._root,c={data:r},p=t._x0,w=t._y0,m=t._x1,M=t._y1;if(!u)return t._root=c,t;for(;u.length;)if((J=n>=(U=(p+m)/2))?p=U:m=U,(j=e>=(O=(w+M)/2))?w=O:M=O,i=u,!(u=u[W=j<<1|J]))return i[W]=c,t;if(R=+t._x.call(null,u.data),rt=+t._y.call(null,u.data),n===R&&e===rt)return c.next=u,i?i[W]=c:t._root=c,t;do{i=i?i[W]=new Array(4):t._root=new Array(4),(J=n>=(U=(p+m)/2))?p=U:m=U,(j=e>=(O=(w+M)/2))?w=O:M=O}while((W=j<<1|J)==(nt=(rt>=O)<<1|R>=U));return i[nt]=u,i[W]=c,t}function de(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i}function wc(t){return t[0]}function xc(t){return t[1]}function di(t,n,e){var r=new pi(null==n?wc:n,null==e?xc:e,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function pi(t,n,e,r,i,u){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=u,this._root=void 0}function Co(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}li.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var pe=di.prototype=pi.prototype;function Ke(t){return function(){return t}}function Re(t){return 1e-6*(t()-.5)}function Ec(t){return t.x+t.vx}function _c(t){return t.y+t.vy}function Cc(t){return t.index}function So(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}pe.copy=function(){var e,r,t=new pi(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return t;if(!n.length)return t._root=Co(n),t;for(e=[{source:n,target:t._root=new Array(4)}];n=e.pop();)for(var i=0;i<4;++i)(r=n.source[i])&&(r.length?e.push({source:r,target:n.target[i]=new Array(4)}):n.target[i]=Co(r));return t},pe.add=function ac(t){const n=+this._x.call(null,t),e=+this._y.call(null,t);return ko(this.cover(n,e),n,e,t)},pe.addAll=function uc(t){var n,e,i,u,r=t.length,c=new Array(r),p=new Array(r),w=1/0,m=1/0,M=-1/0,U=-1/0;for(e=0;e<r;++e)isNaN(i=+this._x.call(null,n=t[e]))||isNaN(u=+this._y.call(null,n))||(c[e]=i,p[e]=u,i<w&&(w=i),i>M&&(M=i),u<m&&(m=u),u>U&&(U=u));if(w>M||m>U)return this;for(this.cover(w,m).cover(M,U),e=0;e<r;++e)ko(this,c[e],p[e],t[e]);return this},pe.cover=function cc(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,u=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,u=(r=Math.floor(n))+1;else{for(var w,m,c=i-e||1,p=this._root;e>t||t>=i||r>n||n>=u;)switch(m=(n<r)<<1|t<e,w=new Array(4),w[m]=p,p=w,c*=2,m){case 0:i=e+c,u=r+c;break;case 1:e=i-c,u=r+c;break;case 2:i=e+c,r=u-c;break;case 3:e=i-c,r=u-c}this._root&&this._root.length&&(this._root=p)}return this._x0=e,this._y0=r,this._x1=i,this._y1=u,this},pe.data=function hc(){var t=[];return this.visit(function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)}),t},pe.extent=function fc(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},pe.find=function lc(t,n,e){var r,c,p,w,m,rt,J,i=this._x0,u=this._y0,M=this._x1,U=this._y1,O=[],R=this._root;for(R&&O.push(new de(R,i,u,M,U)),null==e?e=1/0:(i=t-e,u=n-e,M=t+e,U=n+e,e*=e);rt=O.pop();)if(!(!(R=rt.node)||(c=rt.x0)>M||(p=rt.y0)>U||(w=rt.x1)<i||(m=rt.y1)<u))if(R.length){var j=(c+w)/2,W=(p+m)/2;O.push(new de(R[3],j,W,w,m),new de(R[2],c,W,j,m),new de(R[1],j,p,w,W),new de(R[0],c,p,j,W)),(J=(n>=W)<<1|t>=j)&&(rt=O[O.length-1],O[O.length-1]=O[O.length-1-J],O[O.length-1-J]=rt)}else{var nt=t-+this._x.call(null,R.data),at=n-+this._y.call(null,R.data),X=nt*nt+at*at;if(X<e){var ht=Math.sqrt(e=X);i=t-ht,u=n-ht,M=t+ht,U=n+ht,r=R.data}}return r},pe.remove=function dc(t){if(isNaN(M=+this._x.call(null,t))||isNaN(U=+this._y.call(null,t)))return this;var n,r,i,u,M,U,O,R,rt,J,j,W,e=this._root,c=this._x0,p=this._y0,w=this._x1,m=this._y1;if(!e)return this;if(e.length)for(;;){if((rt=M>=(O=(c+w)/2))?c=O:w=O,(J=U>=(R=(p+m)/2))?p=R:m=R,n=e,!(e=e[j=J<<1|rt]))return this;if(!e.length)break;(n[j+1&3]||n[j+2&3]||n[j+3&3])&&(r=n,W=j)}for(;e.data!==t;)if(i=e,!(e=e.next))return this;return(u=e.next)&&delete e.next,i?(u?i.next=u:delete i.next,this):n?(u?n[j]=u:delete n[j],(e=n[0]||n[1]||n[2]||n[3])&&e===(n[3]||n[2]||n[1]||n[0])&&!e.length&&(r?r[W]=e:this._root=e),this):(this._root=u,this)},pe.removeAll=function pc(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this},pe.root=function gc(){return this._root},pe.size=function yc(){var t=0;return this.visit(function(n){if(!n.length)do{++t}while(n=n.next)}),t},pe.visit=function mc(t){var e,i,u,c,p,w,n=[],r=this._root;for(r&&n.push(new de(r,this._x0,this._y0,this._x1,this._y1));e=n.pop();)if(!t(r=e.node,u=e.x0,c=e.y0,p=e.x1,w=e.y1)&&r.length){var m=(u+p)/2,M=(c+w)/2;(i=r[3])&&n.push(new de(i,m,M,p,w)),(i=r[2])&&n.push(new de(i,u,M,m,w)),(i=r[1])&&n.push(new de(i,m,c,p,M)),(i=r[0])&&n.push(new de(i,u,c,m,M))}return this},pe.visitAfter=function vc(t){var r,n=[],e=[];for(this._root&&n.push(new de(this._root,this._x0,this._y0,this._x1,this._y1));r=n.pop();){var i=r.node;if(i.length){var u,c=r.x0,p=r.y0,w=r.x1,m=r.y1,M=(c+w)/2,U=(p+m)/2;(u=i[0])&&n.push(new de(u,c,p,M,U)),(u=i[1])&&n.push(new de(u,M,p,w,U)),(u=i[2])&&n.push(new de(u,c,U,M,m)),(u=i[3])&&n.push(new de(u,M,U,w,m))}e.push(r)}for(;r=e.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this},pe.x=function bc(t){return arguments.length?(this._x=t,this):this._x},pe.y=function Ac(t){return arguments.length?(this._y=t,this):this._y};const No=4294967296;function zc(t){return t.x}function Gc(t){return t.y}var Lc=Math.PI*(3-Math.sqrt(5));function Er(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function xn(t){return(t=Er(Math.abs(t)))?t[1]:NaN}var Mo,jc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _r(t){if(!(n=jc.exec(t)))throw new Error("invalid format: "+t);var n;return new gi({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function gi(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Do(t,n){var e=Er(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}_r.prototype=gi.prototype,gi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const zo={"%":(t,n)=>(100*t).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function Uc(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>Do(100*t,n),r:Do,s:function Bc(t,n){var e=Er(t,n);if(!e)return t+"";var r=e[0],i=e[1],u=i-(Mo=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,c=r.length;return u===c?r:u>c?r+new Array(u-c+1).join("0"):u>0?r.slice(0,u)+"."+r.slice(u):"0."+new Array(1-u).join("0")+Er(t,Math.max(0,n+u-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Go(t){return t}var kr,Cr,To,Io=Array.prototype.map,Lo=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Oo(t,n){var c,e=n?n.length:0,r=t?Math.min(e,t.length):0,i=new Array(r),u=new Array(e);for(c=0;c<r;++c)i[c]=An(t[c],n[c]);for(;c<e;++c)u[c]=n[c];return function(p){for(c=0;c<r;++c)u[c]=i[c](p);return u}}function Yc(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function $c(t,n){var i,e={},r={};for(i in(null===t||"object"!=typeof t)&&(t={}),(null===n||"object"!=typeof n)&&(n={}),n)i in t?e[i]=An(t[i],n[i]):r[i]=n[i];return function(u){for(i in e)r[i]=e[i](u);return r}}function Xc(t,n){n||(n=[]);var i,e=t?Math.min(n.length,t.length):0,r=n.slice();return function(u){for(i=0;i<e;++i)r[i]=t[i]*(1-u)+n[i]*u;return r}}function An(t,n){var r,e=typeof n;return null==n||"boolean"===e?vr(n):("number"===e?Ee:"string"===e?(r=Xe(n))?(n=r,wr):po:n instanceof Xe?wr:n instanceof Date?Yc:function Vc(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(n)?Xc:Array.isArray(n)?Oo:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?$c:Ee)(t,n)}function yi(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}function Uo(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t(r/(n-1));return e}function mi(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}function Hc(t,n){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof n?this.interpolator(n):this.range(n)}return this}!function Fc(t){kr=function Zc(t){var n=void 0===t.grouping||void 0===t.thousands?Go:function Pc(t,n){return function(e,r){for(var i=e.length,u=[],c=0,p=t[0],w=0;i>0&&p>0&&(w+p+1>r&&(p=Math.max(1,r-w)),u.push(e.substring(i-=p,i+p)),!((w+=p+1)>r));)p=t[c=(c+1)%t.length];return u.reverse().join(n)}}(Io.call(t.grouping,Number),t.thousands+""),e=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",i=void 0===t.decimal?".":t.decimal+"",u=void 0===t.numerals?Go:function Rc(t){return function(n){return n.replace(/[0-9]/g,function(e){return t[+e]})}}(Io.call(t.numerals,String)),c=void 0===t.percent?"%":t.percent+"",p=void 0===t.minus?"\u2212":t.minus+"",w=void 0===t.nan?"NaN":t.nan+"";function m(U){var O=(U=_r(U)).fill,R=U.align,rt=U.sign,J=U.symbol,j=U.zero,W=U.width,nt=U.comma,at=U.precision,X=U.trim,ht=U.type;"n"===ht?(nt=!0,ht="g"):zo[ht]||(void 0===at&&(at=12),X=!0,ht="g"),(j||"0"===O&&"="===R)&&(j=!0,O="0",R="=");var xt="$"===J?e:"#"===J&&/[boxX]/.test(ht)?"0"+ht.toLowerCase():"",kt="$"===J?r:/[%p]/.test(ht)?c:"",_t=zo[ht],Ot=/[defgprs%]/.test(ht);function Ct(wt){var H,At,st,Rt=xt,It=kt;if("c"===ht)It=_t(wt)+It,wt="";else{var vt=(wt=+wt)<0||1/wt<0;if(wt=isNaN(wt)?w:_t(Math.abs(wt),at),X&&(wt=function Wc(t){t:for(var i,n=t.length,e=1,r=-1;e<n;++e)switch(t[e]){case".":r=i=e;break;case"0":0===r&&(r=e),i=e;break;default:if(!+t[e])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(wt)),vt&&0==+wt&&"+"!==rt&&(vt=!1),Rt=(vt?"("===rt?rt:p:"-"===rt||"("===rt?"":rt)+Rt,It=("s"===ht?Lo[8+Mo/3]:"")+It+(vt&&"("===rt?")":""),Ot)for(H=-1,At=wt.length;++H<At;)if(48>(st=wt.charCodeAt(H))||st>57){It=(46===st?i+wt.slice(H+1):wt.slice(H))+It,wt=wt.slice(0,H);break}}nt&&!j&&(wt=n(wt,1/0));var Dt=Rt.length+wt.length+It.length,Et=Dt<W?new Array(W-Dt+1).join(O):"";switch(nt&&j&&(wt=n(Et+wt,Et.length?W-It.length:1/0),Et=""),R){case"<":wt=Rt+wt+It+Et;break;case"=":wt=Rt+Et+wt+It;break;case"^":wt=Et.slice(0,Dt=Et.length>>1)+Rt+wt+It+Et.slice(Dt);break;default:wt=Et+Rt+wt+It}return u(wt)}return at=void 0===at?6:/[gprs]/.test(ht)?Math.max(1,Math.min(21,at)):Math.max(0,Math.min(20,at)),Ct.toString=function(){return U+""},Ct}return{format:m,formatPrefix:function M(U,O){var R=m(((U=_r(U)).type="f",U)),rt=3*Math.max(-8,Math.min(8,Math.floor(xn(O)/3))),J=Math.pow(10,-rt),j=Lo[8+rt/3];return function(W){return R(J*W)+j}}}}(t),Cr=kr.format,To=kr.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});const Po=Symbol("implicit");function vi(){var t=new xe,n=[],e=[],r=Po;function i(u){let c=t.get(u);if(void 0===c){if(r!==Po)return r;t.set(u,c=n.push(u)-1)}return e[c%e.length]}return i.domain=function(u){if(!arguments.length)return n.slice();n=[],t=new xe;for(const c of u)t.has(c)||t.set(c,n.push(c)-1);return i},i.range=function(u){return arguments.length?(e=Array.from(u),i):e.slice()},i.unknown=function(u){return arguments.length?(r=u,i):r},i.copy=function(){return vi(n,e).unknown(r)},mi.apply(i,arguments),i}function jn(){var u,c,t=vi().unknown(void 0),n=t.domain,e=t.range,r=0,i=1,p=!1,w=0,m=0,M=.5;function U(){var O=n().length,R=i<r,rt=R?i:r,J=R?r:i;u=(J-rt)/Math.max(1,O-w+2*m),p&&(u=Math.floor(u)),rt+=(J-rt-u*(O-w))*M,c=u*(1-w),p&&(rt=Math.round(rt),c=Math.round(c));var j=ke(O).map(function(W){return rt+u*W});return e(R?j.reverse():j)}return delete t.unknown,t.domain=function(O){return arguments.length?(n(O),U()):n()},t.range=function(O){return arguments.length?([r,i]=O,r=+r,i=+i,U()):[r,i]},t.rangeRound=function(O){return[r,i]=O,r=+r,i=+i,p=!0,U()},t.bandwidth=function(){return c},t.step=function(){return u},t.round=function(O){return arguments.length?(p=!!O,U()):p},t.padding=function(O){return arguments.length?(w=Math.min(1,m=+O),U()):w},t.paddingInner=function(O){return arguments.length?(w=Math.min(1,O),U()):w},t.paddingOuter=function(O){return arguments.length?(m=+O,U()):m},t.align=function(O){return arguments.length?(M=Math.max(0,Math.min(1,O)),U()):M},t.copy=function(){return jn(n(),[r,i]).round(p).paddingInner(w).paddingOuter(m).align(M)},mi.apply(U(),arguments)}const Kc=Math.sqrt(50),qc=Math.sqrt(10),Qc=Math.sqrt(2);function Sr(t,n,e){const r=(n-t)/Math.max(0,e),i=Math.floor(Math.log10(r)),u=r/Math.pow(10,i),c=u>=Kc?10:u>=qc?5:u>=Qc?2:1;let p,w,m;return i<0?(m=Math.pow(10,-i)/c,p=Math.round(t*m),w=Math.round(n*m),p/m<t&&++p,w/m>n&&--w,m=-m):(m=Math.pow(10,i)*c,p=Math.round(t/m),w=Math.round(n/m),p*m<t&&++p,w*m>n&&--w),w<p&&.5<=e&&e<2?Sr(t,n,2*e):[p,w,m]}function wi(t,n,e){return Sr(t=+t,n=+n,e=+e)[2]}function eh(t,n){return null==t||null==n?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function jo(t){let n,e,r;function i(p,w,m=0,M=p.length){if(m<M){if(0!==n(w,w))return M;do{const U=m+M>>>1;e(p[U],w)<0?m=U+1:M=U}while(m<M)}return m}return 2!==t.length?(n=ft,e=(p,w)=>ft(t(p),w),r=(p,w)=>t(p)-w):(n=t===ft||t===eh?t:nh,e=t,r=t),{left:i,center:function c(p,w,m=0,M=p.length){const U=i(p,w,m,M-1);return U>m&&r(p[U-1],w)>-r(p[U],w)?U-1:U},right:function u(p,w,m=0,M=p.length){if(m<M){if(0!==n(w,w))return M;do{const U=m+M>>>1;e(p[U],w)<=0?m=U+1:M=U}while(m<M)}return m}}}function nh(){return 0}const rh=jo(ft).right,ih=(jo(function ae(t){return null===t?NaN:+t}),rh);function sh(t){return+t}var Bo=[0,1];function je(t){return t}function bi(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:function oh(t){return function(){return t}}(isNaN(n)?NaN:.5)}function uh(t,n,e){var r=t[0],i=t[1],u=n[0],c=n[1];return i<r?(r=bi(i,r),u=e(c,u)):(r=bi(r,i),u=e(u,c)),function(p){return u(r(p))}}function ch(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),u=new Array(r),c=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++c<r;)i[c]=bi(t[c],t[c+1]),u[c]=e(n[c],n[c+1]);return function(p){var w=ih(t,p,1,r)-1;return u[w](i[w](p))}}function hh(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function lh(){return function fh(){var r,i,u,p,w,m,t=Bo,n=Bo,e=An,c=je;function M(){var O=Math.min(t.length,n.length);return c!==je&&(c=function ah(t,n){var e;return t>n&&(e=t,t=n,n=e),function(r){return Math.max(t,Math.min(n,r))}}(t[0],t[O-1])),p=O>2?ch:uh,w=m=null,U}function U(O){return null==O||isNaN(O=+O)?u:(w||(w=p(t.map(r),n,e)))(r(c(O)))}return U.invert=function(O){return c(i((m||(m=p(n,t.map(r),Ee)))(O)))},U.domain=function(O){return arguments.length?(t=Array.from(O,sh),M()):t.slice()},U.range=function(O){return arguments.length?(n=Array.from(O),M()):n.slice()},U.rangeRound=function(O){return n=Array.from(O),e=yi,M()},U.clamp=function(O){return arguments.length?(c=!!O||je,M()):c!==je},U.interpolate=function(O){return arguments.length?(e=O,M()):e},U.unknown=function(O){return arguments.length?(u=O,U):u},function(O,R){return r=O,i=R,M()}}()(je,je)}function Zo(t){var n=t.domain;return t.ticks=function(e){var r=n();return function Jc(t,n,e){if(!((e=+e)>0))return[];if((t=+t)==(n=+n))return[t];const r=n<t,[i,u,c]=r?Sr(n,t,e):Sr(t,n,e);if(!(u>=i))return[];const p=u-i+1,w=new Array(p);if(r)if(c<0)for(let m=0;m<p;++m)w[m]=(u-m)/-c;else for(let m=0;m<p;++m)w[m]=(u-m)*c;else if(c<0)for(let m=0;m<p;++m)w[m]=(i+m)/-c;else for(let m=0;m<p;++m)w[m]=(i+m)*c;return w}(r[0],r[r.length-1],null==e?10:e)},t.tickFormat=function(e,r){var i=n();return function yh(t,n,e,r){var u,i=function th(t,n,e){e=+e;const r=(n=+n)<(t=+t),i=r?wi(n,t,e):wi(t,n,e);return(r?-1:1)*(i<0?1/-i:i)}(t,n,e);switch((r=_r(null==r?",f":r)).type){case"s":var c=Math.max(Math.abs(t),Math.abs(n));return null==r.precision&&!isNaN(u=function dh(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(xn(n)/3)))-xn(Math.abs(t)))}(i,c))&&(r.precision=u),To(r,c);case"":case"e":case"g":case"p":case"r":null==r.precision&&!isNaN(u=function ph(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,xn(n)-xn(t))+1}(i,Math.max(Math.abs(t),Math.abs(n))))&&(r.precision=u-("e"===r.type));break;case"f":case"%":null==r.precision&&!isNaN(u=function gh(t){return Math.max(0,-xn(Math.abs(t)))}(i))&&(r.precision=u-2*("%"===r.type))}return Cr(r)}(i[0],i[i.length-1],null==e?10:e,r)},t.nice=function(e){null==e&&(e=10);var w,m,r=n(),i=0,u=r.length-1,c=r[i],p=r[u],M=10;for(p<c&&(m=c,c=p,p=m,m=i,i=u,u=m);M-- >0;){if((m=wi(c,p,e))===w)return r[i]=c,r[u]=p,n(r);if(m>0)c=Math.floor(c/m)*m,p=Math.ceil(p/m)*m;else{if(!(m<0))break;c=Math.ceil(c*m)/m,p=Math.floor(p*m)/m}w=m}return t},t}function En(){var t=lh();return t.copy=function(){return hh(t,En())},mi.apply(t,arguments),Zo(t)}function Nr(){var e,r,i,u,w,t=0,n=1,c=je,p=!1;function m(U){return null==U||isNaN(U=+U)?w:c(0===i?.5:(U=(u(U)-e)*i,p?Math.max(0,Math.min(1,U)):U))}function M(U){return function(O){var R,rt;return arguments.length?([R,rt]=O,c=U(R,rt),m):[c(0),c(1)]}}return m.domain=function(U){return arguments.length?([t,n]=U,e=u(t=+t),r=u(n=+n),i=e===r?0:1/(r-e),m):[t,n]},m.clamp=function(U){return arguments.length?(p=!!U,m):p},m.interpolator=function(U){return arguments.length?(c=U,m):c},m.range=M(An),m.rangeRound=M(yi),m.unknown=function(U){return arguments.length?(w=U,m):w},function(U){return u=U,e=U(t),r=U(n),i=e===r?0:1/(r-e),m}}function Mr(t,n){return n.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Fo(){var t=Zo(Nr()(je));return t.copy=function(){return Mr(t,Fo())},Hc.apply(t,arguments)}const bh=function wh(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(6*r,6*++r);return e}("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),xh=Math.PI/180,Ah=180/Math.PI;var xi=1.78277,Ai=-.29227,Dr=-.90649,Wn=1.97294,Xo=Wn*Dr,Vo=Wn*xi,Ho=xi*Ai- -.14861*Dr;function Eh(t){if(t instanceof qe)return new qe(t.h,t.s,t.l,t.opacity);t instanceof ue||(t=io(t));var e=t.g/255,r=t.b/255,i=(Ho*r+Xo*(t.r/255)-Vo*e)/(Ho+Xo-Vo),u=r-i,c=(Wn*(e-i)-Ai*u)/Dr,p=Math.sqrt(c*c+u*u)/(Wn*i*(1-i)),w=p?Math.atan2(c,u)*Ah-120:NaN;return new qe(w<0?w+360:w,p,i,t.opacity)}function We(t,n,e,r){return 1===arguments.length?Eh(t):new qe(t,n,e,null==r?1:r)}function qe(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Ko(t){return function n(e){function r(i,u){var c=t((i=We(i)).h,(u=We(u)).h),p=mn(i.s,u.s),w=mn(i.l,u.l),m=mn(i.opacity,u.opacity);return function(M){return i.h=c(M),i.s=p(M),i.l=w(Math.pow(M,e)),i.opacity=m(M),i+""}}return e=+e,r.gamma=n,r}(1)}dr(qe,We,ri(pn,{brighter(t){return t=null==t?gn:Math.pow(gn,t),new qe(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new qe(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*xh,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new ue(255*(n+e*(-.14861*r+xi*i)),255*(n+e*(Ai*r+Dr*i)),255*(n+e*(Wn*r)),this.opacity)}})),Ko(function Wa(t,n){var e=n-t;return e?fo(t,e>180||e<-180?e-360*Math.round(e/360):e):vr(isNaN(t)?n:t)});var qo=Ko(mn),_h=(qo(We(-100,.75,.35),We(80,1.5,.8)),qo(We(260,.75,.35),We(80,1.5,.8)));function Qo(t){return oe(Vr(t).call(document.documentElement))}function Jo(t){return((t=Math.exp(t))+1/t)/2}We();const Nh=function t(n,e,r){function i(u,c){var j,W,p=u[0],w=u[1],m=u[2],O=c[2],R=c[0]-p,rt=c[1]-w,J=R*R+rt*rt;if(J<1e-12)W=Math.log(O/m)/n,j=function(kt){return[p+kt*R,w+kt*rt,m*Math.exp(n*kt*W)]};else{var nt=Math.sqrt(J),at=(O*O-m*m+r*J)/(2*m*e*nt),X=(O*O-m*m-r*J)/(2*O*e*nt),ht=Math.log(Math.sqrt(at*at+1)-at),xt=Math.log(Math.sqrt(X*X+1)-X);W=(xt-ht)/n,j=function(kt){var _t=kt*W,Ot=Jo(ht),Ct=m/(e*nt)*(Ot*function Sh(t){return((t=Math.exp(2*t))-1)/(t+1)}(n*_t+ht)-function Ch(t){return((t=Math.exp(t))-1/t)/2}(ht));return[p+Ct*R,w+Ct*rt,m*Ot/Jo(n*_t+ht)]}}return j.duration=1e3*W*n/Math.SQRT2,j}return i.rho=function(u){var c=Math.max(.001,+u),p=c*c;return t(c,p,p*p)},i}(Math.SQRT2,2,4),Gr=t=>()=>t;function Mh(t,{sourceEvent:n,target:e,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Te(t,n,e){this.k=t,this.x=n,this.y=e}Te.prototype={constructor:Te,scale:function(t){return 1===t?this:new Te(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new Te(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ei=new Te(1,0,0);function _i(t){t.stopImmediatePropagation()}function Bn(t){t.preventDefault(),t.stopImmediatePropagation()}function zh(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function Gh(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function ts(){return this.__zoom||Ei}function Ih(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Lh(){return navigator.maxTouchPoints||"ontouchstart"in this}function Th(t,n,e){var r=t.invertX(n[0][0])-e[0][0],i=t.invertX(n[1][0])-e[1][0],u=t.invertY(n[0][1])-e[0][1],c=t.invertY(n[1][1])-e[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),c>u?(u+c)/2:Math.min(0,u)||Math.max(0,c))}var Uh=N(4825);let es=(()=>{class t extends Ft.H{constructor(){super(),this.nodes=[],this.links=[],this.width=window.screen.availWidth,this.height=window.screen.availHeight,this.characterLinks=[],this.defaultOptions={zoom:!0,edgeRadius:0},this.id=(0,I.V)(),this.groups=[]}ngOnChanges(e){this.nodes.length>0&&this.links.length>0&&this.create()}ngAfterViewInit(){this.nodes.length>0&&this.links.length>0&&this.create()}create(){this.options=Object.assign(Object.assign({},this.defaultOptions),this.options),this.element=document.getElementById(this.id+"-network"),oe(this.element).selectChildren().remove(),this.createCharacterLinks(),this.initializeColor(),this.createSvg(),this.createLink(),this.createSimulation(),this.createNode()}initializeColor(){this.groups=Array.from(new Set(this.characterLinks.map(e=>e.group))),this.color=vi(this.groups,bh)}createCharacterLinks(){const e=this.nodes.map(r=>r.id);this.characterLinks=this.links.filter(r=>e.includes(r.source)&&e.includes(r.target))}createSimulation(){this.simulation=function Tc(t){var n,e=1,r=.001,i=1-Math.pow(r,1/300),u=0,c=.6,p=new Map,w=Kr(U),m=rr("tick","end"),M=function Dc(){let t=1;return()=>(t=(1664525*t+1013904223)%No)/No}();function U(){O(),m.call("tick",n),e<r&&(w.stop(),m.call("end",n))}function O(J){var j,nt,W=t.length;void 0===J&&(J=1);for(var at=0;at<J;++at)for(e+=(u-e)*i,p.forEach(function(X){X(e)}),j=0;j<W;++j)null==(nt=t[j]).fx?nt.x+=nt.vx*=c:(nt.x=nt.fx,nt.vx=0),null==nt.fy?nt.y+=nt.vy*=c:(nt.y=nt.fy,nt.vy=0);return n}function R(){for(var W,J=0,j=t.length;J<j;++J){if((W=t[J]).index=J,null!=W.fx&&(W.x=W.fx),null!=W.fy&&(W.y=W.fy),isNaN(W.x)||isNaN(W.y)){var nt=10*Math.sqrt(.5+J),at=J*Lc;W.x=nt*Math.cos(at),W.y=nt*Math.sin(at)}(isNaN(W.vx)||isNaN(W.vy))&&(W.vx=W.vy=0)}}function rt(J){return J.initialize&&J.initialize(t,M),J}return null==t&&(t=[]),R(),n={tick:O,restart:function(){return w.restart(U),n},stop:function(){return w.stop(),n},nodes:function(J){return arguments.length?(t=J,R(),p.forEach(rt),n):t},alpha:function(J){return arguments.length?(e=+J,n):e},alphaMin:function(J){return arguments.length?(r=+J,n):r},alphaDecay:function(J){return arguments.length?(i=+J,n):+i},alphaTarget:function(J){return arguments.length?(u=+J,n):u},velocityDecay:function(J){return arguments.length?(c=1-J,n):1-c},randomSource:function(J){return arguments.length?(M=J,p.forEach(rt),n):M},force:function(J,j){return arguments.length>1?(null==j?p.delete(J):p.set(J,rt(j)),n):p.get(J)},find:function(J,j,W){var X,ht,xt,kt,_t,nt=0,at=t.length;for(null==W?W=1/0:W*=W,nt=0;nt<at;++nt)(xt=(X=J-(kt=t[nt]).x)*X+(ht=j-kt.y)*ht)<W&&(_t=kt,W=xt);return _t},on:function(J,j){return arguments.length>1?(m.on(J,j),n):m.on(J)}}}(this.nodes).force("link",function Sc(t){var r,u,c,p,w,m,n=Cc,e=function U(j){return 1/Math.min(p[j.source.index],p[j.target.index])},i=Ke(30),M=1;function O(j){for(var W=0,nt=t.length;W<M;++W)for(var X,ht,xt,kt,_t,Ot,Ct,at=0;at<nt;++at)kt=(xt=(X=t[at]).target).x+xt.vx-(ht=X.source).x-ht.vx||Re(m),_t=xt.y+xt.vy-ht.y-ht.vy||Re(m),_t*=Ot=((Ot=Math.sqrt(kt*kt+_t*_t))-u[at])/Ot*j*r[at],xt.vx-=(kt*=Ot)*(Ct=w[at]),xt.vy-=_t*Ct,ht.vx+=kt*(Ct=1-Ct),ht.vy+=_t*Ct}function R(){if(c){var j,X,W=c.length,nt=t.length,at=new Map(c.map((ht,xt)=>[n(ht,xt,c),ht]));for(j=0,p=new Array(W);j<nt;++j)(X=t[j]).index=j,"object"!=typeof X.source&&(X.source=So(at,X.source)),"object"!=typeof X.target&&(X.target=So(at,X.target)),p[X.source.index]=(p[X.source.index]||0)+1,p[X.target.index]=(p[X.target.index]||0)+1;for(j=0,w=new Array(nt);j<nt;++j)w[j]=p[(X=t[j]).source.index]/(p[X.source.index]+p[X.target.index]);r=new Array(nt),rt(),u=new Array(nt),J()}}function rt(){if(c)for(var j=0,W=t.length;j<W;++j)r[j]=+e(t[j],j,t)}function J(){if(c)for(var j=0,W=t.length;j<W;++j)u[j]=+i(t[j],j,t)}return null==t&&(t=[]),O.initialize=function(j,W){c=j,m=W,R()},O.links=function(j){return arguments.length?(t=j,R(),O):t},O.id=function(j){return arguments.length?(n=j,O):n},O.iterations=function(j){return arguments.length?(M=+j,O):M},O.strength=function(j){return arguments.length?(e="function"==typeof j?j:Ke(+j),rt(),O):e},O.distance=function(j){return arguments.length?(i="function"==typeof j?j:Ke(+j),J(),O):i},O}(this.characterLinks).distance(20).id(this.getId)).force("charge",function Oc(){var t,n,e,r,u,i=Ke(-30),c=1,p=1/0,w=.81;function m(R){var rt,J=t.length,j=di(t,zc,Gc).visitAfter(U);for(r=R,rt=0;rt<J;++rt)n=t[rt],j.visit(O)}function M(){if(t){var R,J,rt=t.length;for(u=new Array(rt),R=0;R<rt;++R)u[(J=t[R]).index]=+i(J,R,t)}}function U(R){var J,j,nt,at,X,rt=0,W=0;if(R.length){for(nt=at=X=0;X<4;++X)(J=R[X])&&(j=Math.abs(J.value))&&(rt+=J.value,W+=j,nt+=j*J.x,at+=j*J.y);R.x=nt/W,R.y=at/W}else{(J=R).x=J.data.x,J.y=J.data.y;do{rt+=u[J.data.index]}while(J=J.next)}R.value=rt}function O(R,rt,J,j){if(!R.value)return!0;var W=R.x-n.x,nt=R.y-n.y,at=j-rt,X=W*W+nt*nt;if(at*at/w<X)return X<p&&(0===W&&(X+=(W=Re(e))*W),0===nt&&(X+=(nt=Re(e))*nt),X<c&&(X=Math.sqrt(c*X)),n.vx+=W*R.value*r/X,n.vy+=nt*R.value*r/X),!0;if(!(R.length||X>=p)){(R.data!==n||R.next)&&(0===W&&(X+=(W=Re(e))*W),0===nt&&(X+=(nt=Re(e))*nt),X<c&&(X=Math.sqrt(c*X)));do{R.data!==n&&(n.vx+=W*(at=u[R.data.index]*r/X),n.vy+=nt*at)}while(R=R.next)}}return m.initialize=function(R,rt){t=R,e=rt,M()},m.strength=function(R){return arguments.length?(i="function"==typeof R?R:Ke(+R),M(),m):i},m.distanceMin=function(R){return arguments.length?(c=R*R,m):Math.sqrt(c)},m.distanceMax=function(R){return arguments.length?(p=R*R,m):Math.sqrt(p)},m.theta=function(R){return arguments.length?(w=R*R,m):Math.sqrt(w)},m}().strength(e=>-100*e.score)).force("center",function sc(t,n){var e,r=1;function i(){var u,p,c=e.length,w=0,m=0;for(u=0;u<c;++u)w+=(p=e[u]).x,m+=p.y;for(w=(w/c-t)*r,m=(m/c-n)*r,u=0;u<c;++u)(p=e[u]).x-=w,p.y-=m}return null==t&&(t=0),null==n&&(n=0),i.initialize=function(u){e=u},i.x=function(u){return arguments.length?(t=+u,i):t},i.y=function(u){return arguments.length?(n=+u,i):n},i.strength=function(u){return arguments.length?(r=+u,i):r},i}(this.width/2,this.height/2)).force("radius",function kc(t){var n,e,r,i=1,u=1;function c(){for(var m,U,O,R,rt,J,j,M=n.length,W=0;W<u;++W)for(U=di(n,Ec,_c).visitAfter(p),m=0;m<M;++m)j=(J=e[(O=n[m]).index])*J,R=O.x+O.vx,rt=O.y+O.vy,U.visit(nt);function nt(at,X,ht,xt,kt){var _t=at.data,Ot=at.r,Ct=J+Ot;if(!_t)return X>R+Ct||xt<R-Ct||ht>rt+Ct||kt<rt-Ct;if(_t.index>O.index){var wt=R-_t.x-_t.vx,Rt=rt-_t.y-_t.vy,It=wt*wt+Rt*Rt;It<Ct*Ct&&(0===wt&&(It+=(wt=Re(r))*wt),0===Rt&&(It+=(Rt=Re(r))*Rt),It=(Ct-(It=Math.sqrt(It)))/It*i,O.vx+=(wt*=It)*(Ct=(Ot*=Ot)/(j+Ot)),O.vy+=(Rt*=It)*Ct,_t.vx-=wt*(Ct=1-Ct),_t.vy-=Rt*Ct)}}}function p(m){if(m.data)return m.r=e[m.data.index];for(var M=m.r=0;M<4;++M)m[M]&&m[M].r>m.r&&(m.r=m[M].r)}function w(){if(n){var m,U,M=n.length;for(e=new Array(M),m=0;m<M;++m)e[(U=n[m]).index]=+t(U,m,n)}}return"function"!=typeof t&&(t=Ke(null==t?1:+t)),c.initialize=function(m,M){n=m,r=M,w()},c.iterations=function(m){return arguments.length?(u=+m,c):u},c.strength=function(m){return arguments.length?(i=+m,c):i},c.radius=function(m){return arguments.length?(t="function"==typeof m?m:Ke(+m),w(),c):t},c}(e=>e.score+20)).force("cluster",this.cluster(this.nodes)).on("tick",()=>{this.link.attr("d",e=>`\n            M${e.source.x},${e.source.y}\n            A${this.options.edgeRadius},${this.options.edgeRadius} 0 0,1 ${e.target.x},${e.target.y}\n          `),this.node.attr("transform",e=>`translate(${e.x}, ${e.y})`),(0,Uh.g)(1e4)}),setTimeout(()=>{this.simulation.stop()},1e4)}createSvg(){const e=this;this.svg=Qo("svg").attr("viewBox",[0,0,this.width,this.height]).style("font","12px sans-serif"),this.g=this.svg.append("g"),this.options.zoom&&this.svg.call(function Oh(){var M,U,O,t=zh,n=Gh,e=Th,r=Ih,i=Lh,u=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],p=250,w=Nh,m=rr("start","zoom","end"),R=500,J=0,j=10;function W(H){H.property("__zoom",ts).on("wheel.zoom",_t,{passive:!1}).on("mousedown.zoom",Ot).on("dblclick.zoom",Ct).filter(i).on("touchstart.zoom",wt).on("touchmove.zoom",Rt).on("touchend.zoom touchcancel.zoom",It).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function nt(H,At){return(At=Math.max(u[0],Math.min(u[1],At)))===H.k?H:new Te(At,H.x,H.y)}function at(H,At,st){var vt=At[0]-st[0]*H.k,Dt=At[1]-st[1]*H.k;return vt===H.x&&Dt===H.y?H:new Te(H.k,vt,Dt)}function X(H){return[(+H[0][0]+ +H[1][0])/2,(+H[0][1]+ +H[1][1])/2]}function ht(H,At,st,vt){H.on("start.zoom",function(){xt(this,arguments).event(vt).start()}).on("interrupt.zoom end.zoom",function(){xt(this,arguments).event(vt).end()}).tween("zoom",function(){var Dt=this,Et=arguments,Nt=xt(Dt,Et).event(vt),Tt=n.apply(Dt,Et),Ut=null==st?X(Tt):"function"==typeof st?st.apply(Dt,Et):st,me=Math.max(Tt[1][0]-Tt[0][0],Tt[1][1]-Tt[0][1]),qt=Dt.__zoom,fe="function"==typeof At?At.apply(Dt,Et):At,ve=w(qt.invert(Ut).concat(me/qt.k),fe.invert(Ut).concat(me/fe.k));return function(Vt){if(1===Vt)Vt=fe;else{var ge=ve(Vt),kn=me/ge[2];Vt=new Te(kn,Ut[0]-ge[0]*kn,Ut[1]-ge[1]*kn)}Nt.zoom(null,Vt)}})}function xt(H,At,st){return!st&&H.__zooming||new kt(H,At)}function kt(H,At){this.that=H,this.args=At,this.active=0,this.sourceEvent=null,this.extent=n.apply(H,At),this.taps=0}function _t(H,...At){if(t.apply(this,arguments)){var st=xt(this,At).event(H),vt=this.__zoom,Dt=Math.max(u[0],Math.min(u[1],vt.k*Math.pow(2,r.apply(this,arguments)))),Et=Le(H);if(st.wheel)(st.mouse[0][0]!==Et[0]||st.mouse[0][1]!==Et[1])&&(st.mouse[1]=vt.invert(st.mouse[0]=Et)),clearTimeout(st.wheel);else{if(vt.k===Dt)return;st.mouse=[Et,vt.invert(Et)],fr(this),st.start()}Bn(H),st.wheel=setTimeout(Nt,150),st.zoom("mouse",e(at(nt(vt,Dt),st.mouse[0],st.mouse[1]),st.extent,c))}function Nt(){st.wheel=null,st.end()}}function Ot(H,...At){if(!O&&t.apply(this,arguments)){var st=H.currentTarget,vt=xt(this,At,!0).event(H),Dt=oe(H.view).on("mousemove.zoom",Ut,!0).on("mouseup.zoom",me,!0),Et=Le(H,st),Nt=H.clientX,Tt=H.clientY;Eo(H.view),_i(H),vt.mouse=[Et,this.__zoom.invert(Et)],fr(this),vt.start()}function Ut(qt){if(Bn(qt),!vt.moved){var fe=qt.clientX-Nt,ve=qt.clientY-Tt;vt.moved=fe*fe+ve*ve>J}vt.event(qt).zoom("mouse",e(at(vt.that.__zoom,vt.mouse[0]=Le(qt,st),vt.mouse[1]),vt.extent,c))}function me(qt){Dt.on("mousemove.zoom mouseup.zoom",null),_o(qt.view,vt.moved),Bn(qt),vt.event(qt).end()}}function Ct(H,...At){if(t.apply(this,arguments)){var st=this.__zoom,vt=Le(H.changedTouches?H.changedTouches[0]:H,this),Dt=st.invert(vt),Nt=e(at(nt(st,st.k*(H.shiftKey?.5:2)),vt,Dt),n.apply(this,At),c);Bn(H),p>0?oe(this).transition().duration(p).call(ht,Nt,vt,H):oe(this).call(W.transform,Nt,vt,H)}}function wt(H,...At){if(t.apply(this,arguments)){var Et,Nt,Tt,Ut,st=H.touches,vt=st.length,Dt=xt(this,At,H.changedTouches.length===vt).event(H);for(_i(H),Nt=0;Nt<vt;++Nt)Ut=[Ut=Le(Tt=st[Nt],this),this.__zoom.invert(Ut),Tt.identifier],Dt.touch0?!Dt.touch1&&Dt.touch0[2]!==Ut[2]&&(Dt.touch1=Ut,Dt.taps=0):(Dt.touch0=Ut,Et=!0,Dt.taps=1+!!M);M&&(M=clearTimeout(M)),Et&&(Dt.taps<2&&(U=Ut[0],M=setTimeout(function(){M=null},R)),fr(this),Dt.start())}}function Rt(H,...At){if(this.__zooming){var Et,Nt,Tt,Ut,st=xt(this,At).event(H),vt=H.changedTouches,Dt=vt.length;for(Bn(H),Et=0;Et<Dt;++Et)Tt=Le(Nt=vt[Et],this),st.touch0&&st.touch0[2]===Nt.identifier?st.touch0[0]=Tt:st.touch1&&st.touch1[2]===Nt.identifier&&(st.touch1[0]=Tt);if(Nt=st.that.__zoom,st.touch1){var me=st.touch0[0],qt=st.touch0[1],fe=st.touch1[0],ve=st.touch1[1],Vt=(Vt=fe[0]-me[0])*Vt+(Vt=fe[1]-me[1])*Vt,ge=(ge=ve[0]-qt[0])*ge+(ge=ve[1]-qt[1])*ge;Nt=nt(Nt,Math.sqrt(Vt/ge)),Tt=[(me[0]+fe[0])/2,(me[1]+fe[1])/2],Ut=[(qt[0]+ve[0])/2,(qt[1]+ve[1])/2]}else{if(!st.touch0)return;Tt=st.touch0[0],Ut=st.touch0[1]}st.zoom("touch",e(at(Nt,Tt,Ut),st.extent,c))}}function It(H,...At){if(this.__zooming){var Et,Nt,st=xt(this,At).event(H),vt=H.changedTouches,Dt=vt.length;for(_i(H),O&&clearTimeout(O),O=setTimeout(function(){O=null},R),Et=0;Et<Dt;++Et)Nt=vt[Et],st.touch0&&st.touch0[2]===Nt.identifier?delete st.touch0:st.touch1&&st.touch1[2]===Nt.identifier&&delete st.touch1;if(st.touch1&&!st.touch0&&(st.touch0=st.touch1,delete st.touch1),st.touch0)st.touch0[1]=this.__zoom.invert(st.touch0[0]);else if(st.end(),2===st.taps&&(Nt=Le(Nt,this),Math.hypot(U[0]-Nt[0],U[1]-Nt[1])<j)){var Tt=oe(this).on("dblclick.zoom");Tt&&Tt.apply(this,arguments)}}}return W.transform=function(H,At,st,vt){var Dt=H.selection?H.selection():H;Dt.property("__zoom",ts),H!==Dt?ht(H,At,st,vt):Dt.interrupt().each(function(){xt(this,arguments).event(vt).start().zoom(null,"function"==typeof At?At.apply(this,arguments):At).end()})},W.scaleBy=function(H,At,st,vt){W.scaleTo(H,function(){return this.__zoom.k*("function"==typeof At?At.apply(this,arguments):At)},st,vt)},W.scaleTo=function(H,At,st,vt){W.transform(H,function(){var Dt=n.apply(this,arguments),Et=this.__zoom,Nt=null==st?X(Dt):"function"==typeof st?st.apply(this,arguments):st,Tt=Et.invert(Nt),Ut="function"==typeof At?At.apply(this,arguments):At;return e(at(nt(Et,Ut),Nt,Tt),Dt,c)},st,vt)},W.translateBy=function(H,At,st,vt){W.transform(H,function(){return e(this.__zoom.translate("function"==typeof At?At.apply(this,arguments):At,"function"==typeof st?st.apply(this,arguments):st),n.apply(this,arguments),c)},null,vt)},W.translateTo=function(H,At,st,vt,Dt){W.transform(H,function(){var Et=n.apply(this,arguments),Nt=this.__zoom,Tt=null==vt?X(Et):"function"==typeof vt?vt.apply(this,arguments):vt;return e(Ei.translate(Tt[0],Tt[1]).scale(Nt.k).translate("function"==typeof At?-At.apply(this,arguments):-At,"function"==typeof st?-st.apply(this,arguments):-st),Et,c)},vt,Dt)},kt.prototype={event:function(H){return H&&(this.sourceEvent=H),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(H,At){return this.mouse&&"mouse"!==H&&(this.mouse[1]=At.invert(this.mouse[0])),this.touch0&&"touch"!==H&&(this.touch0[1]=At.invert(this.touch0[0])),this.touch1&&"touch"!==H&&(this.touch1[1]=At.invert(this.touch1[0])),this.that.__zoom=At,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(H){var At=oe(this.that).datum();m.call(H,this.that,new Mh(H,{sourceEvent:this.sourceEvent,target:W,type:H,transform:this.that.__zoom,dispatch:m}),At)}},W.wheelDelta=function(H){return arguments.length?(r="function"==typeof H?H:Gr(+H),W):r},W.filter=function(H){return arguments.length?(t="function"==typeof H?H:Gr(!!H),W):t},W.touchable=function(H){return arguments.length?(i="function"==typeof H?H:Gr(!!H),W):i},W.extent=function(H){return arguments.length?(n="function"==typeof H?H:Gr([[+H[0][0],+H[0][1]],[+H[1][0],+H[1][1]]]),W):n},W.scaleExtent=function(H){return arguments.length?(u[0]=+H[0],u[1]=+H[1],W):[u[0],u[1]]},W.translateExtent=function(H){return arguments.length?(c[0][0]=+H[0][0],c[1][0]=+H[1][0],c[0][1]=+H[0][1],c[1][1]=+H[1][1],W):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},W.constrain=function(H){return arguments.length?(e=H,W):e},W.duration=function(H){return arguments.length?(p=+H,W):p},W.interpolate=function(H){return arguments.length?(w=H,W):w},W.on=function(){var H=m.on.apply(m,arguments);return H===m?W:H},W.clickDistance=function(H){return arguments.length?(J=(H=+H)*H,W):Math.sqrt(J)},W.tapDistance=function(H){return arguments.length?(j=+H,W):j},W}().extent([[0,0],[this.width,this.height]]).on("zoom",function r({transform:i}){e.g.attr("transform",i)})),this.element.append(this.svg.node()),this.svg.attr("width",this.width).attr("height",this.height),this.svg.append("defs").selectAll("marker").data(this.groups).join("marker").attr("id",i=>`arrow-${i}`).attr("viewBox","0 -5 10 10").attr("refX",15).attr("refY",-.5).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("fill",this.color).attr("d","M0,-5L10,0L0,5")}createLink(){this.link=this.g.append("g").attr("fill","none").attr("stroke-width",1.5).selectAll("path").data(this.characterLinks).join("path").attr("stroke",e=>this.color(e.group))}createNode(){this.node=this.g.append("g").attr("fill","currentColor").attr("stroke-linecap","round").attr("stroke-linejoin","round").selectAll("g").data(this.nodes).join("g"),this.node.append("circle").attr("stroke","black").attr("stroke-width",1).attr("r",e=>e.score).style("fill",e=>this.color(e.group)),this.node.append("text").text(e=>""!==e.label?e.label:e.id).style("font-size","1rem").style("color","white").style("text-anchor","middle").style("dominant-baseline","central")}getId(e){return e.id}drag(e){return function oc(){var p,w,m,M,t=ec,n=nc,e=rc,r=ic,i={},u=rr("start","drag","end"),c=0,U=0;function O(X){X.on("mousedown.drag",R).filter(r).on("touchstart.drag",j).on("touchmove.drag",W,tc).on("touchend.drag touchcancel.drag",nt).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function R(X,ht){if(!M&&t.call(this,X,ht)){var xt=at(this,n.call(this,X,ht),X,ht,"mouse");!xt||(oe(X.view).on("mousemove.drag",rt,Rn).on("mouseup.drag",J,Rn),Eo(X.view),fi(X),m=!1,p=X.clientX,w=X.clientY,xt("start",X))}}function rt(X){if(bn(X),!m){var ht=X.clientX-p,xt=X.clientY-w;m=ht*ht+xt*xt>U}i.mouse("drag",X)}function J(X){oe(X.view).on("mousemove.drag mouseup.drag",null),_o(X.view,m),bn(X),i.mouse("end",X)}function j(X,ht){if(t.call(this,X,ht)){var Ot,Ct,xt=X.changedTouches,kt=n.call(this,X,ht),_t=xt.length;for(Ot=0;Ot<_t;++Ot)(Ct=at(this,kt,X,ht,xt[Ot].identifier,xt[Ot]))&&(fi(X),Ct("start",X,xt[Ot]))}}function W(X){var kt,_t,ht=X.changedTouches,xt=ht.length;for(kt=0;kt<xt;++kt)(_t=i[ht[kt].identifier])&&(bn(X),_t("drag",X,ht[kt]))}function nt(X){var kt,_t,ht=X.changedTouches,xt=ht.length;for(M&&clearTimeout(M),M=setTimeout(function(){M=null},500),kt=0;kt<xt;++kt)(_t=i[ht[kt].identifier])&&(fi(X),_t("end",X,ht[kt]))}function at(X,ht,xt,kt,_t,Ot){var Rt,It,H,Ct=u.copy(),wt=Le(Ot||xt,ht);if(null!=(H=e.call(X,new li("beforestart",{sourceEvent:xt,target:O,identifier:_t,active:c,x:wt[0],y:wt[1],dx:0,dy:0,dispatch:Ct}),kt)))return Rt=H.x-wt[0]||0,It=H.y-wt[1]||0,function At(st,vt,Dt){var Nt,Et=wt;switch(st){case"start":i[_t]=At,Nt=c++;break;case"end":delete i[_t],--c;case"drag":wt=Le(Dt||vt,ht),Nt=c}Ct.call(st,X,new li(st,{sourceEvent:vt,subject:H,target:O,identifier:_t,active:Nt,x:wt[0]+Rt,y:wt[1]+It,dx:wt[0]-Et[0],dy:wt[1]-Et[1],dispatch:Ct}),kt)}}return O.filter=function(X){return arguments.length?(t="function"==typeof X?X:Ar(!!X),O):t},O.container=function(X){return arguments.length?(n="function"==typeof X?X:Ar(X),O):n},O.subject=function(X){return arguments.length?(e="function"==typeof X?X:Ar(X),O):e},O.touchable=function(X){return arguments.length?(r="function"==typeof X?X:Ar(!!X),O):r},O.on=function(){var X=u.on.apply(u,arguments);return X===u?O:X},O.clickDistance=function(X){return arguments.length?(U=(X=+X)*X,O):Math.sqrt(U)},O}().on("start",function r(c,p){c.active||e.alphaTarget(.3).restart(),p.fx=p.x,p.fy=p.y}).on("drag",function i(c,p){p.fx=c.x,p.fy=c.y}).on("end",function u(c,p){c.active||e.alphaTarget(0),p.fx=null,p.fy=null})}cluster(e){return function i(u){for(const c of e){const p=e.filter(M=>M.group===c.group),w=p.reduce((M,U)=>M+U.x,0)/p.length,m=p.reduce((M,U)=>M+U.y,0)/p.length;c.vx+=(w-c.x)*u*.2,c.vy+=(m-c.y)*u*.2}}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["d3-network"]],inputs:{nodes:"nodes",links:"links",options:"options",width:"width",height:"height"},features:[s.qOj,s.TTD],decls:1,vars:1,consts:[[1,"flex","flex-1",3,"id"]],template:function(e,r){1&e&&s._UZ(0,"div",0),2&e&&s.MGl("id","",r.id,"-network")},encapsulation:2}),t})();var ki=N(7423),Ci=N(2108);const Ph=function(){return["/wiki/network"]},Rh=function(){return["/wiki/analysis"]},jh=[{path:"",component:(()=>{class t extends _{constructor(e,r,i){super(),this.characterApi=e,this.relationshipApi=r,this.authApi=i,this.nodes=[],this.edges=[],this.characters=[],this.relationships=[],this.networkOptions={zoom:!1}}ngOnInit(){var e=this;this.subscribe(this.characterApi.cosmereCharacters(),r=>this.onCharactersChanges(r)),this.subscribe(this.relationshipApi.relationshipsByBook("mistborn1"),r=>this.onRelationshipsChanges(r)),(0,x.defer)((0,$.Z)(function*(){yield e.characterApi.fetchAllCosmereCharacter(),yield e.relationshipApi.fetchAllCosmereRelationship()}))}generateNetworkParameters(){this.edges=d(this.relationships);const e=new B.UndirectedGraph;v(this.relationships).forEach(u=>e.addNode(u)),this.relationships.forEach(u=>e.addEdge(u.characterId1,u.characterId2));const i=P()(e);this.nodes=g(this.characters,this.relationships).filter(u=>this.edges.map(c=>c.source).includes(u.id)||this.edges.map(c=>c.target).includes(u.id)),this.nodes=this.nodes.map(u=>Object.assign(Object.assign({},u),{group:i[u.id]}))}onCharactersChanges(e){this.characters=e,this.generateNetworkParameters()}onRelationshipsChanges(e){this.relationships=e,this.generateNetworkParameters()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Mt),s.Y36(Ht),s.Y36(jt.z))},t.\u0275cmp=s.Xpm({type:t,selectors:[["home"]],features:[s.qOj],decls:26,vars:26,consts:[[1,"inset-0","flex","flex-col","min-w-0","w-full","overflow-x-hidden"],[1,"flex","flex-col","mx-100","text-center","p-6","gap-5"],[1,"font-black","mt-3","text-7xl","text-center","mb-7"],[3,"nodes","links","height","options"],[1,"flex","flex-col"],[1,"font-bold","mt-3","text-2xl","text-center","mb-3"],["mat-button","",1,"bg-primary","text-lg",3,"routerLink"],[1,"font-bold","mt-3","text-2xl","text-center","mb-7"]],template:function(e,r){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s._uU(3),s.ALo(4,"trans"),s.qZA(),s._UZ(5,"d3-network",3),s.TgZ(6,"div",4),s.TgZ(7,"div",5),s._uU(8),s.ALo(9,"trans"),s.qZA(),s.TgZ(10,"div"),s.TgZ(11,"button",6),s._uU(12),s.ALo(13,"trans"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(14,"div",4),s.TgZ(15,"div",5),s._uU(16),s.ALo(17,"trans"),s.qZA(),s.TgZ(18,"div"),s.TgZ(19,"button",6),s._uU(20),s.ALo(21,"trans"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(22,"div",4),s.TgZ(23,"div",7),s._uU(24),s.ALo(25,"trans"),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(3),s.hij(" ",s.lcZ(4,12,"home.title")," "),s.xp6(2),s.Q6J("nodes",r.nodes)("links",r.edges)("height",600)("options",r.networkOptions),s.xp6(3),s.hij(" ",s.lcZ(9,14,"home.network.1")," "),s.xp6(3),s.Q6J("routerLink",s.DdM(24,Ph)),s.xp6(1),s.hij(" ",s.lcZ(13,16,"home.connections")," "),s.xp6(4),s.hij(" ",s.lcZ(17,18,"home.analysis.1")," "),s.xp6(3),s.Q6J("routerLink",s.DdM(25,Rh)),s.xp6(1),s.hij(" ",s.lcZ(21,20,"home.analysis")," "),s.xp6(4),s.hij(" ",s.lcZ(25,22,"home.me.1")," "))},directives:[es,ki.lW,F.rH],pipes:[Ci.u],encapsulation:2}),t})()}];var Wh=N(5245),Ir=N(7791),Si=N(6767),Lr=N(393);let Ni=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[]]}),t})(),Bh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[F.Bz.forChild(jh),ki.ot,Wh.Ps,Ir.m,Si.d,Lr.ZD,Lr.Cl,Ni]]}),t})();const ns=()=>({id:(0,I.V)(),books:[]}),rs=()=>({configuration:ns()});let Zh=(()=>{class t extends q.m1{constructor(){super(rs()),this.configuration$=this.select(e=>e.configuration)}saveConfiguration(e){(0,x.isEqual)(this.get().configuration,e)||this.patchState(r=>({configuration:e}))}syncState(){return this.get()}syncConfiguration(){return this.get().configuration}reset(){this.patchState(rs())}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Mi=(()=>{class t{constructor(e){this.store=e}syncConfiguration(){return this.store.syncState().configuration}configuration(){return this.store.configuration$}saveConfiguration(e){this.store.saveConfiguration(e)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Zh))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const is=function Fh(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)};var Qe=N(3075);let os=(()=>{class t{constructor(e){this.formBuilder=e}build(e,r=[],i=[]){const u={};return Object.keys(e).forEach(c=>{const p=e[c],w=this.getValidator(c,r);if(u[c]=[p,w],i.includes(c)&&(0,x.isArray)(p)){const m=[];p.forEach(M=>{m.push(is(M)?this.build(M,r):M)}),u[c]=this.formBuilder.array(m)}if(!i.includes(c)&&!(0,x.isArray)(p)&&is(p)){const m=this.extractSubValidator(c,r);u[c]=this.build(p,m)}}),this.formBuilder.group(u)}extractSubValidator(e,r){return r.filter(i=>i.key.startsWith(e)).map(i=>({key:i.key.replace(e+".",""),validators:i.validators}))}getValidator(e,r){const i=r.find(u=>u.key===e);return i?i.validators:[]}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Qe.qu))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Yh=(()=>{class t extends q.m1{constructor(){super({books:[]}),this.books$=this.select(e=>e.books)}saveAllBooks(e){(0,x.isEqual)(this.get().books,e)||this.patchState(r=>({books:ot(r.books,e)}))}syncState(){return this.get()}syncBook(e){return Q(e,this.get().books)}reset(){this.patchState({books:[]})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),as=(()=>{class t{constructor(e,r){this.api=e,this.store=r}fetchAllBooks(){var e=this;return(0,$.Z)(function*(){const r=yield e.api.get("books");e.store.saveAllBooks(r)})()}syncAllBooks(){return this.store.syncState().books}allBooks(){return this.store.books$}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(tt),s.LFG(Yh))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var us=N(678),_n=N(9808),cs=N(9895),Di=N(7322),hs=N(4107),$h=N(508);function Xh(t,n){if(1&t&&(s.TgZ(0,"mat-option",12),s._uU(1),s.ALo(2,"uppercase"),s.ALo(3,"trans"),s.qZA()),2&t){const e=n.$implicit;s.Q6J("value",e.id),s.xp6(1),s.hij(" ",s.lcZ(2,2,s.lcZ(3,4,e.title))," ")}}function Vh(t,n){if(1&t&&(s.TgZ(0,"div",5),s.TgZ(1,"app-card",6),s.TgZ(2,"form",7),s.TgZ(3,"mat-form-field",8),s.TgZ(4,"mat-label",9),s._uU(5),s.ALo(6,"titlecase"),s.ALo(7,"trans"),s.qZA(),s.TgZ(8,"mat-select",10),s.ALo(9,"trans"),s.YNc(10,Xh,4,6,"mat-option",11),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t){const e=s.oxw();s.xp6(2),s.Q6J("formGroup",e.configurationForm),s.xp6(3),s.Oqu(s.lcZ(6,4,s.lcZ(7,6,"books"))),s.xp6(3),s.s9C("placeholder",s.lcZ(9,8,"all.books")),s.xp6(2),s.Q6J("ngForOf",e.data.books)}}let fs=(()=>{class t extends Ft.H{constructor(e,r,i){super(),this.configurationApi=e,this.formBuilder=r,this.bookApi=i,this.configurationChanges=new s.vpe,this.showCard=!1,this.data={books:[]}}ngOnInit(){var e=this;this.subscribe(this.bookApi.allBooks(),r=>this.data.books=r),this.subscribe(this.configurationApi.configuration(),r=>this.setConfiguration(r)),(0,x.defer)((0,$.Z)(function*(){yield e.bookApi.fetchAllBooks()})),this.buildForm()}buildForm(){this.configurationForm=this.formBuilder.build(this.configuration),this.configurationForm.get("books").valueChanges.subscribe(e=>{this.configuration.books=e,this.saveConfiguration()})}toggle(){this.showCard=!this.showCard}setConfiguration(e){this.configuration=Object.assign({},e),this.configurationForm&&this.configurationForm.patchValue(e)}saveConfiguration(){this.configurationApi.saveConfiguration(this.configuration)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Mi),s.Y36(os),s.Y36(as))},t.\u0275cmp=s.Xpm({type:t,selectors:[["configuration"]],outputs:{configurationChanges:"configurationChanges"},features:[s.qOj],decls:5,vars:1,consts:[[1,"absolute","top-0","right-0","z-50"],[1,"flex","flex-col","items-end","pr-6"],["mat-icon-button","",3,"click"],["icon","settings"],["class","z-50",4,"ngIf"],[1,"z-50"],[1,"flex","flex-col","h-full","p-6","gap-5","w-100"],[1,"w-full",3,"formGroup"],["floatLabel","always",1,"w-full"],[1,"text-white"],["multiple","","formControlName","books",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,r){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"button",2),s.NdJ("click",function(){return r.toggle()}),s._UZ(3,"app-icon",3),s.qZA(),s.YNc(4,Vh,11,10,"div",4),s.qZA(),s.qZA()),2&e&&(s.xp6(4),s.Q6J("ngIf",r.showCard))},directives:[ki.lW,us.o,_n.O5,cs.A,Qe._Y,Qe.JL,Qe.sg,Di.KE,Di.hX,hs.gD,Qe.JJ,Qe.u,_n.sg,$h.ey],pipes:[_n.rS,Ci.u,_n.gd],encapsulation:2,changeDetection:0}),t})();var Hh=N(340);let Kh=(()=>{class t extends q.m1{constructor(){super({planets:[]}),this.planets$=this.select(e=>e.planets)}saveAllPlanets(e){(0,x.isEqual)(this.get().planets,e)||this.patchState(r=>({planets:ot(r.planets,e)}))}syncState(){return this.get()}syncPlanet(e){return Q(e,this.get().planets)}reset(){this.patchState({planets:[]})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),qh=(()=>{class t{constructor(e,r){this.api=e,this.store=r}fetchAllPlanets(){var e=this;return(0,$.Z)(function*(){const r=yield e.api.get("planets");e.store.saveAllPlanets(r)})()}syncAllPlanets(){return this.store.syncState().planets}allPlanets(){return this.store.planets$}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(tt),s.LFG(Kh))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Qh=N(335);let Jh=(()=>{class t extends Ft.H{constructor(e,r,i,u,c,p,w){super(),this.characterApi=e,this.relationshipApi=r,this.formBuilder=i,this.bookApi=u,this.planetApi=c,this.modal=p,this.configurationApi=w,this.nodes=[],this.edges=[],this.characters=[],this.relationships=[]}ngOnInit(){var e=this;return(0,$.Z)(function*(){e.subscribe(e.characterApi.cosmereCharacters(),r=>{e.onCharactersChanges(r)}),e.subscribe(e.relationshipApi.cosmereRelationships(),r=>{e.onRelationshipsChanges(r)}),e.subscribe(e.configurationApi.configuration(),r=>e.onConfigurationChanges(r)),(0,x.defer)((0,$.Z)(function*(){yield e.characterApi.fetchAllCosmereCharacter(),yield e.relationshipApi.fetchAllCosmereRelationship()}))})()}regenerateNetworkParameters(){this.edges=d(this.filterRelationships(this.relationships));const e=new B.UndirectedGraph;v(this.relationships).forEach(u=>e.addNode(u)),this.filterRelationships(this.relationships).forEach(u=>{e.hasEdge(u.characterId1,u.characterId2)||e.addEdge(u.characterId1,u.characterId2)});const i=P()(e,{rng:Hh("1231312"),resolution:2});this.nodes=g(this.filterCharacters(this.characters),this.filterRelationships(this.relationships)).filter(u=>this.edges.map(c=>c.source).includes(u.id)||this.edges.map(c=>c.target).includes(u.id)),this.nodes=this.nodes.map(u=>Object.assign(Object.assign({},u),{group:i[u.id]})),this.edges=this.edges.map(u=>{const c=this.nodes.find(m=>m.id===u.target),p=this.nodes.find(m=>m.id===u.source);if(void 0===c||void 0===p)return u;const w=c.score>p.score?i[c.id]:i[p.id];return Object.assign(Object.assign({},u),{group:w})})}filterCharacters(e){return e}filterRelationships(e){if(!this.configuration)return e;let r=e;return this.configuration.books.length>0&&(r=r.filter(i=>this.configuration.books.includes(i.bookId))),r}onCharactersChanges(e){this.characters=e,this.regenerateNetworkParameters()}onRelationshipsChanges(e){this.relationships=e,this.regenerateNetworkParameters()}onConfigurationChanges(e){this.configuration=e,this.regenerateNetworkParameters()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Mt),s.Y36(Ht),s.Y36(os),s.Y36(as),s.Y36(qh),s.Y36(Qh.u),s.Y36(Mi))},t.\u0275cmp=s.Xpm({type:t,selectors:[["characters-relationships-graph"]],features:[s.qOj],decls:2,vars:2,consts:[[1,"relative","w-full","h-full","justify-center"],[3,"nodes","links"]],template:function(e,r){1&e&&(s.TgZ(0,"div",0),s._UZ(1,"d3-network",1),s.qZA()),2&e&&(s.xp6(1),s.Q6J("nodes",r.nodes)("links",r.edges))},directives:[es],encapsulation:2}),t})();const tf=[{path:"",component:(()=>{class t extends _{constructor(){super()}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["network"]],features:[s.qOj],decls:4,vars:0,consts:[[1,"inset-0","flex","flex-col","min-w-0","w-full","overflow-hidden"],[1,"flex","flex-row","h-full","grow","justify-center"],[1,"w-full"]],template:function(e,r){1&e&&(s.TgZ(0,"div",0),s._UZ(1,"configuration"),s.TgZ(2,"div",1),s._UZ(3,"characters-relationships-graph",2),s.qZA(),s.qZA())},directives:[fs,Jh],encapsulation:2}),t})()}];let ef=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[]]}),t})(),nf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Di.lN,hs.LD,_n.ez,Si.d,Qe.UX,Ir.m,ef,Ni]]}),t})(),rf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[F.Bz.forChild(tf),nf,Lr.ZD,Ir.m]]}),t})();var of=N(5547),sf=N(3378),af=N.n(sf),uf=N(5894),cf=N.n(uf),hf=N(1063),ff=N.n(hf);const Zn=t=>(t=>t.map(([n,e])=>({label:n,value:e})))(S().map((t=>(0,x.fromPairs)((0,x.sortBy)((0,x.toPairs)(t),1).reverse()))(t),(n,e)=>[e,n])),zi=t=>{const n=Math.min(...t.map(r=>r.value)),e=Math.max(...t.map(r=>r.value));return t.map(r=>Object.assign(Object.assign({},r),{value:(r.value-n)/(e-n)}))};var df=N(5408),pf=N(5149),gf=N(9637);let wf=(()=>{class t extends Ft.H{constructor(){super(),this.config={colors:{highlight:"#b11adc",highlightLight:"#d975f6",text:"#777",xAxis:"#eee",yAxis:"#999"},height:500,width:640,margin:{top:30,left:150,right:5,bottom:0},gap:.4,xFormat:"",animationDuration:300,ticksInterval:10,type:En,titleColor:"white",title:""},this.id=(0,I.V)()}ngOnChanges(e){this.create()}ngAfterViewInit(){this.create()}create(){!this.data||0===this.data.length||(this.data=this.data.splice(0,10),this.element=document.getElementById(this.id+"-vertical-bar-chart"),this.initValues(),this.initScales(),this.createSvg())}initValues(){this.X=this.data.map(e=>e.value),this.Y=this.data.map(e=>e.label)}initScales(){const e=[this.config.margin.left,this.config.width-this.config.margin.right],r=[this.config.margin.top,this.config.height-this.config.margin.bottom];this.xDomain=[0,Qt(this.X)],this.yDomain=new Tr(this.Y),this.xScale=this.config.type(this.xDomain,e),this.yScale=jn(this.yDomain,r).padding(this.config.gap),this.xAxis=function an(t){return sn(1,t)}(this.xScale).ticks(this.config.width/80,this.config.xFormat),this.yAxis=De(this.yScale).tickSizeOuter(0)}createSvg(){const e=ke(this.X.length).filter(i=>this.yDomain.has(this.Y[i]));oe(this.element).select("svg").remove(),this.svg=this.svg=oe(this.element).append("svg").attr("width",this.config.width).attr("height",this.config.height).attr("viewBox",[0,0,this.config.width,this.config.height]).attr("style","max-width: 100%; height: auto; height: intrinsic;"),this.svg.append("g").attr("transform",`translate(0,${this.config.margin.top})`).call(this.xAxis).call(i=>i.select(".domain").remove()).call(i=>i.selectAll(".tick line").clone().attr("y2",this.config.height-this.config.margin.top-this.config.margin.bottom).attr("stroke-opacity",.1)).call(i=>i.append("text").attr("x",this.config.width-this.config.margin.right).attr("y",-22).attr("fill","none").attr("text-anchor","end"));const r=this.svg.append("g").selectAll("rect").data(e).join("rect").attr("x",this.xScale(0)).attr("y",i=>this.yScale(this.Y[i])).attr("width",0).attr("height",this.yScale.bandwidth());this.svg.append("g").attr("fill",this.config.titleColor).attr("text-anchor","end").attr("font-family","sans-serif").attr("font-size",10).selectAll("text").data(e).join("text").attr("x",i=>this.xScale(this.X[i])).attr("y",i=>this.yScale(this.Y[i])+this.yScale.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(this.config.title).call(i=>i.filter(u=>this.xScale(this.X[u])-this.xScale(0)<20).attr("dx",4).attr("fill",this.config.titleAltColor).attr("text-anchor","start")),this.svg.append("g").attr("transform",`translate(${this.config.margin.left},0)`).call(this.yAxis),r.transition().style("fill",(i,u)=>this.getBarColor(u)).duration(this.config.animationDuration).delay((i,u)=>u*this.config.animationDuration/3).attr("height",this.yScale.bandwidth()).attr("width",(i,u)=>this.xScale(this.X[u])-this.config.margin.left)}getBarColor(e,r=0){return`rgb(${(210+r).toString()}, ${(10+20*e+r).toString()}, ${(220-20*e+r).toString()})`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["vertical-bar-chart"]],inputs:{data:"data",config:"config"},features:[s.qOj,s.TTD],decls:1,vars:1,consts:[[1,"flex","flex-1",3,"id"]],template:function(e,r){1&e&&s._UZ(0,"div",0),2&e&&s.MGl("id","",r.id,"-vertical-bar-chart")},encapsulation:2}),t})();const bf=({color:t,title:n,tickSize:e=6,width:r=36+e,height:i=320,marginTop:u=20,marginRight:c=10+e,marginBottom:p=20,marginLeft:w=5,ticks:m=i/64,tickFormat:M,tickValues:U}={})=>{const O=Qo("svg").attr("width",r).attr("height",i).attr("viewBox",[0,0,r,i]).style("overflow","visible").style("display","block");let rt,R=J=>J.selectAll(".tick line").attr("x1",w-r+c);if(t.interpolate){const J=Math.min(t.domain().length,t.range().length);rt=t.copy().rangeRound(Uo(An(i-p,u),J)),O.append("image").attr("x",w).attr("y",u).attr("width",r-w-c).attr("height",i-u-p).attr("preserveAspectRatio","none").attr("xlink:href",ds(t.copy().domain(Uo(An(0,1),J))).toDataURL())}else if(t.interpolator){if(rt=Object.assign(t.copy().interpolator(yi(i-p,u)),{range:()=>[i-p,u]}),O.append("image").attr("x",w).attr("y",u).attr("width",r-w-c).attr("height",i-u-p).attr("preserveAspectRatio","none").attr("xlink:href",ds(t.interpolator()).toDataURL()),!rt.ticks){if(void 0===U){const J=Math.round(m+1);U=ke(J).map(j=>function Ne(t,n,e){if(t=Float64Array.from(function*Kt(t,n){if(void 0===n)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let e=-1;for(let r of t)null!=(r=n(r,++e,t))&&(r=+r)>=r&&(yield r)}}(t,e)),(r=t.length)&&!isNaN(n=+n)){if(n<=0||r<2)return Wt(t);if(n>=1)return Qt(t);var r,i=(r-1)*n,u=Math.floor(i),c=Qt(ye(t,u).subarray(0,u+1));return c+(Wt(t.subarray(u+1))-c)*(i-u)}}(t.domain(),j/(J-1)))}"function"!=typeof M&&(M=Cr(void 0===M?",f":M))}}else if(t.invertExtent){const J=t.thresholds?t.thresholds():t.quantiles?t.quantiles():t.domain(),j=void 0===M?W=>W:"string"==typeof M?Cr(M):M;rt=En().domain([-1,t.range().length-1]).rangeRound([i-p,u]),O.append("g").selectAll("rect").data(t.range()).join("rect").attr("y",(W,nt)=>rt(nt)).attr("x",w).attr("height",(W,nt)=>rt(nt-1)-rt(nt)).attr("width",r-c-w).attr("fill",W=>W),U=ke(J.length),M=W=>j(J[W],W)}else rt=jn().domain(t.domain()).rangeRound([i-p,u]),O.append("g").selectAll("rect").data(t.domain()).join("rect").attr("y",rt).attr("x",w).attr("height",Math.max(0,rt.bandwidth()-1)).attr("width",r-w-c).attr("fill",t),R=()=>{};return O.append("g").attr("transform",`translate(${r-c},0)`).call(function Fe(t){return sn(2,t)}(rt).ticks(m,"string"==typeof M?M:void 0).tickFormat("function"==typeof M?M:void 0).tickSize(e).tickValues(U)).call(R).call(J=>J.select(".domain").remove()).call(J=>J.append("text").attr("x",w-r+c).attr("y",0).attr("fill","currentColor").attr("text-anchor","start").attr("font-weight","bold").attr("class","title").text(n)),O.node()};function ds(t,n=256){const e=document.createElement("canvas");e.width=1,e.height=n;const r=e.getContext("2d");for(let i=0;i<n;++i)r.fillStyle=t(i/(n-1)),r.fillRect(0,n-i,1,1);return e}let xf=(()=>{class t extends Ft.H{constructor(){super(),this.xLabel="",this.yLabel="",this.config={height:500,width:500,margin:{top:20,left:40,right:50,bottom:30},inset:{top:6,right:6,bottom:6,left:6},dot:{radius:20,strokeWidth:0,strokeColor:"white"},domain:{x:[.3,1],y:[.3,1]},padding:10,animationDuration:300,ticksInterval:10,color:_h},this.id=(0,I.V)()}ngOnChanges(e){this.create()}ngAfterViewInit(){this.create()}create(){!this.data||0===this.data.length||(this.element=document.getElementById(this.id+"-chart-3d"),this.initValues(),this.createColorBar(),this.initScales(),this.createAxis(),this.createSvg())}createColorBar(){const e=bf({color:Fo([0,1],this.color),title:"Degree"});this.legendElement=document.getElementById(this.id+"-legend-bar"),this.legendElement&&(oe(this.legendElement).select("svg").remove(),this.legendElement.append(e))}initValues(){this.color=this.config.color,this.X=this.data.map(e=>e.x),this.Y=this.data.map(e=>e.y),this.Z=this.data.map(e=>e.z),this.labels=this.data.map(e=>e.label)}initScales(){const r=[this.config.height-this.config.margin.bottom-this.config.inset.bottom,this.config.margin.top+this.config.inset.top];this.xScale=En(this.config.domain.x,[this.config.margin.left+this.config.inset.left,this.config.width-this.config.margin.right-this.config.inset.right]),this.yScale=En(this.config.domain.y,r)}createAxis(){this.xAxis=un(this.xScale).ticks(this.config.width/80),this.yAxis=De(this.yScale).ticks(this.config.height/50)}createSvg(){oe(this.element).select("svg").remove(),this.svg=oe(this.element).append("svg").attr("width",this.config.width).attr("height",this.config.height).attr("viewBox",[0,0,this.config.width,this.config.height]).attr("style","max-width: 100%; this.options.height: auto; height: intrinsic;"),this.svg.append("g").attr("transform",`translate(0,${this.config.height-this.config.margin.bottom})`).call(this.xAxis).call(i=>i.select(".domain").remove()).call(i=>i.selectAll(".tick line").clone().attr("y2",this.config.margin.top+this.config.margin.bottom-this.config.height).attr("stroke-opacity",.1)).call(i=>i.append("text").attr("x",this.config.width).attr("y",this.config.margin.bottom-4).attr("fill","currentColor").attr("text-anchor","end").text(this.xLabel)),this.svg.append("g").attr("transform",`translate(${this.config.margin.left},0)`).call(this.yAxis).call(i=>i.select(".domain").remove()).call(i=>i.selectAll(".tick line").clone().attr("x2",this.config.width-this.config.margin.left-this.config.margin.right).attr("stroke-opacity",.1)).call(i=>i.append("text").attr("x",-this.config.margin.left).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text(this.yLabel));const r=ke(this.X.length).filter(i=>!isNaN(this.X[i])&&!isNaN(this.Y[i]));this.svg.append("g").attr("stroke",this.config.dot.strokeColor).attr("stroke-width",this.config.dot.strokeWidth).selectAll("circle").data(r).join("circle").attr("cx",i=>this.xScale(this.X[i])).attr("cy",i=>this.yScale(this.Y[i])).attr("fill",i=>this.color(this.Z[i])).attr("r",this.config.dot.radius).attr("opacity",.5),this.svg.append("g").attr("font-family","sans-serif").attr("font-size",15).attr("stroke-linejoin","round").attr("stroke-linecap","round").selectAll("text").data(r).join("text").attr("x",i=>this.xScale(this.X[i])).attr("y",i=>this.yScale(this.Y[i])).text(i=>this.labels[i]).style("fill","white").style("text-anchor","middle").style("dominant-baseline","central")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["chart-3d"]],inputs:{data:"data",xLabel:"xLabel",yLabel:"yLabel",config:"config"},features:[s.qOj,s.TTD],decls:3,vars:2,consts:[[1,"flex","flex-row"],[3,"id"],[1,"flex","flex-1","items-end","pb-10",3,"id"]],template:function(e,r){1&e&&(s.TgZ(0,"div",0),s._UZ(1,"div",1),s._UZ(2,"div",2),s.qZA()),2&e&&(s.xp6(1),s.MGl("id","",r.id,"-chart-3d"),s.xp6(1),s.MGl("id","",r.id,"-legend-bar"))},encapsulation:2}),t})(),Af=(()=>{class t extends Ft.H{constructor(){super(),this.options={colors:{highlight:"#b11adc",highlightLight:"#d975f6",text:"#777",xAxis:"#eee",yAxis:"#999"},height:200,width:600,margin:{top:10,left:70,right:10,bottom:20},animationDuration:300,ticksInterval:10},this.id=(0,I.V)()}ngOnChanges(e){this.create()}ngAfterViewInit(){this.create()}create(){!this.data||0===this.data.length||(this.data=this.data.splice(0,10),this.element=document.getElementById(this.id+"-barchart"),this.initValues(),this.initScales(),this.initChart(),this.createAxis(),this.createBars())}initChart(){oe(this.element).select("svg").remove(),this.svg=oe(this.element).append("svg").attr("viewBox",`0 0 ${this.options.width} ${this.options.height+100}`)}initValues(){const e=Number(Wt(this.data.map(i=>i.value))),r=Number(Qt(this.data.map(i=>i.value)));this.minValue=e<0?e-this.options.ticksInterval:0,this.maxValue=r}initScales(){this.yScale=En().domain([this.minValue,this.maxValue]).range([this.options.height-this.options.margin.bottom,this.options.margin.top]),this.xScale=jn().domain(ke(this.data.length)).range([this.options.margin.left+this.options.margin.right,this.options.width-this.options.margin.right]).paddingInner(this.calculatePadding(this.data.length))}getBarMaxWidth(){const e=window.innerWidth;return e<=768?e<=480?10:15:20}getBarColor(e,r=0){return`rgb(${(210+r).toString()}, ${(10+20*e+r).toString()}, ${(220-20*e+r).toString()})`}createBars(){this.svg.selectAll(".bar").data(this.data).enter().append("rect").classed("bar",!0).style("fill","transparent").style("display",r=>"number"==typeof r.value?"initial":"none").attr("x",(r,i)=>this.xScale(i)).attr("y",this.yScale(0)).attr("width",this.xScale.bandwidth()).attr("height",0).transition().style("fill",(r,i)=>this.getBarColor(i)).duration(this.options.animationDuration).delay((r,i)=>i*this.options.animationDuration/3).attr("x",(r,i)=>this.xScale(i)).attr("y",(r,i)=>this.yScale(r.value<0?0:r.value)).attr("width",this.xScale.bandwidth()).attr("height",(r,i)=>r.value<0?this.yScale(r.value)-this.yScale(0):this.yScale(0)-this.yScale(r.value))}createAxis(){const e=un(this.xScale).tickSize(-this.options.width).tickFormat((i,u)=>this.data[u].label.toUpperCase()),r=De(this.yScale).tickSize(-this.options.width).tickFormat(i=>`${i}`).ticks(this.options.ticksInterval);this.svg.append("g").attr("class","axis x-axis").attr("transform",`translate(0, ${this.options.height-15})`).call(e).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end"),this.svg.append("g").attr("class","axis y-axis").attr("transform",`translate(${+this.options.margin.left}, 0)`).call(r),this.svg.selectAll(".axis .domain").remove(),this.svg.selectAll(".axis .tick text").style("fill",this.options.colors.text),this.svg.selectAll(".y-axis .tick line").style("stroke",this.options.colors.yAxis),this.svg.selectAll(".x-axis .tick line").style("stroke",this.options.colors.xAxis)}calculatePadding(e){return 1-e*this.getBarMaxWidth()/this.options.width}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["bar-chart"]],inputs:{data:"data",options:"options"},features:[s.qOj,s.TTD],decls:1,vars:1,consts:[[1,"flex","flex-1",3,"id"]],template:function(e,r){1&e&&s._UZ(0,"div",0),2&e&&s.MGl("id","",r.id,"-barchart")},encapsulation:2}),t})();const Ef=[{path:"",component:(()=>{class t extends _{constructor(e,r,i){super(),this.relationshipApi=e,this.characterApi=r,this.configurationApi=i,this.pagerankEigenvectorAndDegreeCentrality=[],this.configuration=ns()}ngOnInit(){var e=this;return(0,$.Z)(function*(){e.subscribe(e.relationshipApi.cosmereRelationships(),r=>e.onRelationshipsChanges(r)),e.subscribe(e.characterApi.cosmereCharacters(),r=>e.onCharactersChanges(r)),e.subscribe(e.configurationApi.configuration(),r=>e.onConfigurationChanges(r)),yield e.relationshipApi.fetchAllCosmereRelationship(),yield e.characterApi.fetchAllCosmereCharacter()})()}analyseNetwork(e){var r=this;return(0,$.Z)(function*(){const i=(0,pf.dQ)(e),u=i.nodes(),c=(0,of.pagerank)(i,{getEdgeWeight:void 0,maxIterations:300});r.pagerankCosmere=Zn(c);const p=ff()(i);r.betweennessCosmere=Zn(p);const w=af()(i);r.closenessCosmere=Zn(w),r.closenessCosmere=(0,x.reject)(r.closenessCosmere,R=>1===R.value);const m=cf()(i,{maxIterations:200});r.eigenvectorCosmere=Zn(m);const M=(0,df.degreeCentrality)(i);r.degreeCentralityCosmere=Zn(M),r.pageRankNormalized=zi(r.pagerankCosmere);const U=zi(r.eigenvectorCosmere),O=zi(r.degreeCentralityCosmere);r.pagerankEigenvectorAndDegreeCentrality=u.map(R=>({label:R,x:r.pageRankNormalized.find(rt=>rt.label===R).value,y:U.find(rt=>rt.label===R).value,z:O.find(rt=>rt.label===R).value})).filter(R=>R.x>.3&&R.y>.3),console.log("calculateClusteringCoefficient",(t=>{let n=0;return t.forEachNode(e=>{n+=((t,n)=>{const e=t.neighbors(n),r=e.length;if(r<2)return 0;let i=0;for(let u=0;u<r;u++){const c=e[u];for(let p=u+1;p<r;p++)t.hasEdge(c,e[p])&&i++}return 2*i/(r*(r-1))})(t,e)}),n/t.order})(i)),console.log("calculateEccentricityCoefficient",(t=>{let n=0;return t.forEachNode(e=>{n+=(0,gf.eccentricity)(t,e)}),n/t.order})(i))})()}onRelationshipsChanges(e){var r=this;return(0,$.Z)(function*(){r.relationships=e,yield r.analyseNetwork(r.graph())})()}onCharactersChanges(e){var r=this;return(0,$.Z)(function*(){r.characters=e,yield r.analyseNetwork(r.graph())})()}onConfigurationChanges(e){var r=this;return(0,$.Z)(function*(){r.configuration=e,yield r.analyseNetwork(r.graph())})()}filterRelationships(e){if(!this.configuration)return e;let r=e;return this.configuration.books.length>0&&(r=r.filter(i=>this.configuration.books.includes(i.bookId))),r}graph(){const e=this.filterRelationships(this.relationships),r=new B.UndirectedGraph;return v(e).forEach(u=>r.addNode(this.getCharacterName(u))),e.forEach(u=>{r.hasEdge(this.getCharacterName(u.characterId1),this.getCharacterName(u.characterId2))||r.addEdge(this.getCharacterName(u.characterId1),this.getCharacterName(u.characterId2))}),r}getCharacterName(e){if(0===this.characters.length)return e;const r=Q(e,this.characters);return r&&r.name&&""!==r.name?r.name:e}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Ht),s.Y36(Mt),s.Y36(Mi))},t.\u0275cmp=s.Xpm({type:t,selectors:[["network"]],features:[s.qOj],decls:49,vars:22,consts:[[1,"inset-0","flex","flex-col","min-w-0","w-full","h-screen"],[1,"mr-6"],[1,"flex","flex-col","p-10"],[1,"flex","flex-row","mt-5","gap-5"],[1,"flex","flex-col","p-10","basis-1/2"],[1,"flex","flex-row","text-xl","mb-5","justify-between"],["href","https://en.wikipedia.org/wiki/PageRank","target","_blank"],["icon","info",3,"tooltip"],[1,"w-full",3,"data"],[1,"flex","flex-col","p-6","basis-1/2"],[1,"text-xl","mb-5"],["href","https://networkofthrones.wordpress.com/fractal-protagonists/#:~:text=Recently%2C%20writer%20Mike%20Carey%20used,scale%20you%20consider%20the%20storyline.","target","_blank"],[1,"flex","flex-auto","w-full",3,"data","xLabel","yLabel"],[1,"flex","flex-auto","grow","p-6"],[1,"flex","flex-col","grow"],["href","https://en.wikipedia.org/wiki/Eigenvalues_and_eigenvectors","target","_blank"],["href","https://en.wikipedia.org/wiki/Betweenness_centrality","target","_blank"],["href","https://en.wikipedia.org/wiki/Closeness","target","_blank"]],template:function(e,r){1&e&&(s.TgZ(0,"div",0),s._UZ(1,"configuration",1),s.TgZ(2,"div",2),s.TgZ(3,"div",3),s.TgZ(4,"app-card",4),s.TgZ(5,"div",5),s.TgZ(6,"a",6),s.TgZ(7,"span"),s._uU(8,"PageRank"),s.qZA(),s.qZA(),s._UZ(9,"app-icon",7),s.ALo(10,"trans"),s.qZA(),s._UZ(11,"vertical-bar-chart",8),s.qZA(),s.TgZ(12,"app-card",9),s._UZ(13,"div",10),s.TgZ(14,"div",5),s.TgZ(15,"a",11),s.TgZ(16,"span"),s._uU(17,"Fractal protagonism"),s.qZA(),s.qZA(),s._UZ(18,"app-icon",7),s.ALo(19,"trans"),s.qZA(),s._UZ(20,"chart-3d",12),s.qZA(),s.qZA(),s.TgZ(21,"div",3),s.TgZ(22,"app-card",13),s.TgZ(23,"div",14),s.TgZ(24,"div",5),s.TgZ(25,"a",15),s.TgZ(26,"span"),s._uU(27,"Eigenvector"),s.qZA(),s.qZA(),s._UZ(28,"app-icon",7),s.ALo(29,"trans"),s.qZA(),s._UZ(30,"bar-chart",8),s.qZA(),s.qZA(),s.TgZ(31,"app-card",13),s.TgZ(32,"div",14),s.TgZ(33,"div",5),s.TgZ(34,"a",16),s.TgZ(35,"span"),s._uU(36,"Betweenness"),s.qZA(),s.qZA(),s._UZ(37,"app-icon",7),s.ALo(38,"trans"),s.qZA(),s._UZ(39,"bar-chart",8),s.qZA(),s.qZA(),s.TgZ(40,"app-card",13),s.TgZ(41,"div",14),s.TgZ(42,"div",5),s.TgZ(43,"a",17),s.TgZ(44,"span"),s._uU(45,"Closeness"),s.qZA(),s.qZA(),s._UZ(46,"app-icon",7),s.ALo(47,"trans"),s.qZA(),s._UZ(48,"bar-chart",8),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(9),s.Q6J("tooltip",s.lcZ(10,12,"info.pagerank")),s.xp6(2),s.Q6J("data",r.pageRankNormalized),s.xp6(7),s.Q6J("tooltip",s.lcZ(19,14,"info.fractal_protagonism")),s.xp6(2),s.Q6J("data",r.pagerankEigenvectorAndDegreeCentrality)("xLabel","pagerank")("yLabel","eigenvector"),s.xp6(8),s.Q6J("tooltip",s.lcZ(29,16,"info.eigenvector")),s.xp6(2),s.Q6J("data",r.eigenvectorCosmere),s.xp6(7),s.Q6J("tooltip",s.lcZ(38,18,"info.betweenness")),s.xp6(2),s.Q6J("data",r.betweennessCosmere),s.xp6(7),s.Q6J("tooltip",s.lcZ(47,20,"info.closeness")),s.xp6(2),s.Q6J("data",r.closenessCosmere))},directives:[fs,cs.A,us.o,wf,xf,Af],pipes:[Ci.u],encapsulation:2}),t})()}];let _f=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[F.Bz.forChild(Ef),Lr.ZD,Ni,_n.ez,Ir.m,Si.d]]}),t})();const kf=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",loadChildren:()=>Bh},{path:"network",loadChildren:()=>rf},{path:"analysis",loadChildren:()=>_f}];let Cf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[F.Bz.forChild(kf)]]}),t})()},3333:lt=>{lt.exports=function(N,F){var $=F.length;if(0!==$){var I=N.length;N.length+=$;for(var s=0;s<$;s++)N[I+s]=F[s]}}},7749:(lt,et,N)=>{var F=N(8487),$=N(6714),I=N(5568),s=N(8090),_=N(5766),E=N(8859).createRandomIndex,C=N(6956),g=C.UndirectedLouvainIndex,d=C.DirectedLouvainIndex,v={nodeCommunityAttribute:"community",getEdgeWeight:"weight",fastLocalMoves:!0,randomWalk:!0,resolution:1,rng:Math.random};function A(D,L,G){var k=D.get(L);void 0===k&&(k=0),D.set(L,k+=G)}function S(D,L,G,k,V){return Math.abs(k-V)<1e-10?D!==L&&G>D:k>V}function B(D,L,G){var q,Q,pt,gt,St,zt,Mt,Lt,Yt,Bt,Ht,jt,Ft,Wt,ft,bt,ae,Kt,k=new g(L,{getEdgeWeight:G.getEdgeWeight,keepDendrogram:D,resolution:G.resolution}),V=E(G.rng),K=!0,tt=!0,ot=new s(Float64Array,k.C),Jt=0,ye=0,ee=[];for(G.fastLocalMoves&&(pt=new _(k.C));K;){if(jt=k.C,K=!1,tt=!0,G.fastLocalMoves){for(Kt=0,Lt=G.randomWalk?V(jt):0,Yt=0;Yt<jt;Yt++,Lt++)pt.enqueue(Bt=Lt%jt);for(;0!==pt.size;){for(Bt=pt.dequeue(),ye++,Ft=0,ot.clear(),q=k.belongings[Bt],gt=k.starts[Bt],St=k.starts[Bt+1];gt<St;gt++)Ft+=zt=k.weights[gt],A(ot,Q=k.belongings[Ht=k.neighborhood[gt]],zt);for(ft=k.fastDeltaWithOwnCommunity(Bt,Ft,ot.get(q)||0,q),Wt=q,Mt=0;Mt<ot.size;Mt++)(Q=ot.dense[Mt])!==q&&(Jt++,S(Wt,q,Q,bt=k.fastDelta(Bt,Ft,ot.vals[Mt],Q),ft)&&(ft=bt,Wt=Q));if(ft<0){if((Wt=k.isolate(Bt,Ft))===q)continue}else{if(Wt===q)continue;k.move(Bt,Ft,Wt)}for(K=!0,Kt++,gt=k.starts[Bt],St=k.starts[Bt+1];gt<St;gt++)(Q=k.belongings[Ht=k.neighborhood[gt]])!==Wt&&pt.enqueue(Ht)}ee.push(Kt)}else for(ee.push(ae=[]);tt;){for(tt=!1,Kt=0,Lt=G.randomWalk?V(jt):0,Yt=0;Yt<jt;Yt++,Lt++){for(Bt=Lt%jt,ye++,Ft=0,ot.clear(),q=k.belongings[Bt],gt=k.starts[Bt],St=k.starts[Bt+1];gt<St;gt++)Ft+=zt=k.weights[gt],A(ot,Q=k.belongings[Ht=k.neighborhood[gt]],zt);for(ft=k.fastDeltaWithOwnCommunity(Bt,Ft,ot.get(q)||0,q),Wt=q,Mt=0;Mt<ot.size;Mt++)(Q=ot.dense[Mt])!==q&&(Jt++,S(Wt,q,Q,bt=k.fastDelta(Bt,Ft,ot.vals[Mt],Q),ft)&&(ft=bt,Wt=Q));if(ft<0){if((Wt=k.isolate(Bt,Ft))===q)continue}else{if(Wt===q)continue;k.move(Bt,Ft,Wt)}tt=!0,Kt++}ae.push(Kt),K=tt||K}K&&k.zoomOut()}return{index:k,deltaComputations:Jt,nodesVisited:ye,moves:ee}}function T(D,L,G){var q,Q,pt,gt,St,zt,Lt,Yt,Bt,Ht,jt,Ft,Qt,Wt,ft,bt,Jt,ee,tn,Me,k=new d(L,{getEdgeWeight:G.getEdgeWeight,keepDendrogram:D,resolution:G.resolution}),V=E(G.rng),K=!0,tt=!0,ot=new s(Float64Array,k.C),ae=0,Kt=0,Ne=[];for(G.fastLocalMoves&&(pt=new _(k.C));K;){if(Qt=k.C,K=!1,tt=!0,G.fastLocalMoves){for(Me=0,Bt=G.randomWalk?V(Qt):0,Ht=0;Ht<Qt;Ht++,Bt++)pt.enqueue(jt=Bt%Qt);for(;0!==pt.size;){for(jt=pt.dequeue(),Kt++,Wt=0,ft=0,ot.clear(),q=k.belongings[jt],gt=k.starts[jt],St=k.starts[jt+1],zt=k.offsets[jt];gt<St;gt++)Lt=k.weights[gt],gt<zt?ft+=Lt:Wt+=Lt,A(ot,Q=k.belongings[Ft=k.neighborhood[gt]],Lt);for(Jt=k.deltaWithOwnCommunity(jt,Wt,ft,ot.get(q)||0,q),bt=q,Yt=0;Yt<ot.size;Yt++)(Q=ot.dense[Yt])!==q&&(ae++,S(bt,q,Q,ee=k.delta(jt,Wt,ft,ot.vals[Yt],Q),Jt)&&(Jt=ee,bt=Q));if(Jt<0){if((bt=k.isolate(jt,Wt,ft))===q)continue}else{if(bt===q)continue;k.move(jt,Wt,ft,bt)}for(K=!0,Me++,gt=k.starts[jt],St=k.starts[jt+1];gt<St;gt++)(Q=k.belongings[Ft=k.neighborhood[gt]])!==bt&&pt.enqueue(Ft)}Ne.push(Me)}else for(Ne.push(tn=[]);tt;){for(tt=!1,Me=0,Bt=G.randomWalk?V(Qt):0,Ht=0;Ht<Qt;Ht++,Bt++){for(jt=Bt%Qt,Kt++,Wt=0,ft=0,ot.clear(),q=k.belongings[jt],gt=k.starts[jt],St=k.starts[jt+1],zt=k.offsets[jt];gt<St;gt++)Lt=k.weights[gt],gt<zt?ft+=Lt:Wt+=Lt,A(ot,Q=k.belongings[Ft=k.neighborhood[gt]],Lt);for(Jt=k.deltaWithOwnCommunity(jt,Wt,ft,ot.get(q)||0,q),bt=q,Yt=0;Yt<ot.size;Yt++)(Q=ot.dense[Yt])!==q&&(ae++,S(bt,q,Q,ee=k.delta(jt,Wt,ft,ot.vals[Yt],Q),Jt)&&(Jt=ee,bt=Q));if(Jt<0){if((bt=k.isolate(jt,Wt,ft))===q)continue}else{if(bt===q)continue;k.move(jt,Wt,ft,bt)}tt=!0,Me++}tn.push(Me),K=tt||K}K&&k.zoomOut()}return{index:k,deltaComputations:ae,nodesVisited:Kt,moves:Ne}}function P(D,L,G,k){if(!$(G))throw new Error("graphology-communities-louvain: the given graph is not a valid graphology instance.");var V=I(G);if("mixed"===V)throw new Error("graphology-communities-louvain: cannot run the algorithm on a true mixed graph.");k=F(k,v);var K=0;if(0===G.size){if(D)return void G.forEachNode(function(gt){G.setNodeAttribute(gt,k.nodeCommunityAttribute,K++)});var tt={};return G.forEachNode(function(gt){tt[gt]=K++}),L?{communities:tt,count:G.order,deltaComputations:0,dendrogram:null,level:0,modularity:NaN,moves:null,nodesVisited:0,resolution:k.resolution}:tt}var Q=("undirected"===V?B:T)(L,G,k),ot=Q.index;if(!L)return D?void ot.assign(k.nodeCommunityAttribute):ot.collect();var pt={count:ot.C,deltaComputations:Q.deltaComputations,dendrogram:ot.dendrogram,level:ot.level,modularity:ot.modularity(),moves:Q.moves,nodesVisited:Q.nodesVisited,resolution:k.resolution};return D?(ot.assign(k.nodeCommunityAttribute),pt):(pt.communities=ot.collect(),pt)}var Z=P.bind(null,!1,!1);Z.assign=P.bind(null,!0,!1),Z.detailed=P.bind(null,!1,!0),Z.defaults=v,lt.exports=Z},5149:(lt,et,N)=>{var $=N(6714),I=N(6262).B,s=N(778).De,_=N(3882);et.dQ=function x(T){var P=function A(T){if(!$(T))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(!T.order)return[];var L,P=new _(T),Z=P.push.bind(P),D=[];return P.forEachNodeYetUnseen(function(G){L=[],P.push(G);for(var k;0!==P.size;)k=P.pop(),L.push(k),T.forEachNeighbor(k,Z);return L.length>D.length&&(D=L),D.length>P.countUnseenNodes()}),D}(T),Z=T.nullCopy();return P.forEach(function(D){I(Z,D,T.getNodeAttributes(D))}),T.forEachEdge(function(D,L,G,k,V,K,tt){Z.hasNode(G)&&s(Z,tt,D,G,k,L)}),Z}},3882:lt=>{function et(N){this.graph=N,this.stack=new Array(N.order),this.seen=new Set,this.size=0}et.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order},et.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size},et.prototype.forEachNodeYetUnseen=function(N){var F=this.seen,$=this.graph;$.someNode(function(I,s){return F.size===$.order||!F.has(I)&&!!N(I,s)})},et.prototype.has=function(N){return this.seen.has(N)},et.prototype.push=function(N){var F=this.seen.size;return this.seen.add(N),F!==this.seen.size&&(this.stack[this.size++]=N,!0)},et.prototype.pushWith=function(N,F){var $=this.seen.size;return this.seen.add(N),$!==this.seen.size&&(this.stack[this.size++]=F,!0)},et.prototype.pop=function(){if(0!==this.size)return this.stack[--this.size]},lt.exports=et},6956:(lt,et,N)=>{var F=N(6116),$=N(8487),I=N(2954).Q6,s=Symbol.for("nodejs.util.inspect.custom"),_={getEdgeWeight:"weight",keepDendrogram:!1,resolution:1};function E(g,d){var v=(d=$(d,_)).resolution,A=I(d.getEdgeWeight).fromEntry,x=2*(g.size-g.selfLoopCount),S=F.getPointerArray(x),B=F.getPointerArray(g.order+1),T=d.getEdgeWeight?Float64Array:F.getPointerArray(2*g.size);this.C=g.order,this.M=0,this.E=x,this.U=0,this.resolution=v,this.level=0,this.graph=g,this.nodes=new Array(g.order),this.keepDendrogram=d.keepDendrogram,this.neighborhood=new B(x),this.weights=new T(x),this.loops=new T(g.order),this.starts=new S(g.order+1),this.belongings=new B(g.order),this.dendrogram=[],this.mapping=null,this.counts=new B(g.order),this.unused=new B(g.order),this.totalWeights=new T(g.order);var Z,P={},D=0,L=0,G=this;g.forEachNode(function(k){G.nodes[D]=k,P[k]=D,L+=g.undirectedDegreeWithoutSelfLoops(k),G.starts[D]=L,G.belongings[D]=D,G.counts[D]=1,D++}),g.forEachEdge(function(k,V,K,tt,q,Q,ot){if(Z=A(k,V,K,tt,q,Q,ot),K=P[K],tt=P[tt],G.M+=Z,K===tt)G.totalWeights[K]+=2*Z,G.loops[K]=2*Z;else{G.totalWeights[K]+=Z,G.totalWeights[tt]+=Z;var pt=--G.starts[K],gt=--G.starts[tt];G.neighborhood[pt]=tt,G.neighborhood[gt]=K,G.weights[pt]=Z,G.weights[gt]=Z}}),this.starts[D]=this.E,this.keepDendrogram?this.dendrogram.push(this.belongings.slice()):this.mapping=this.belongings.slice()}function C(g,d){var v=(d=$(d,_)).resolution,A=I(d.getEdgeWeight).fromEntry,x=2*(g.size-g.selfLoopCount),S=F.getPointerArray(x),B=F.getPointerArray(g.order+1),T=d.getEdgeWeight?Float64Array:F.getPointerArray(2*g.size);this.C=g.order,this.M=0,this.E=x,this.U=0,this.resolution=v,this.level=0,this.graph=g,this.nodes=new Array(g.order),this.keepDendrogram=d.keepDendrogram,this.neighborhood=new B(x),this.weights=new T(x),this.loops=new T(g.order),this.starts=new S(g.order+1),this.offsets=new S(g.order),this.belongings=new B(g.order),this.dendrogram=[],this.counts=new B(g.order),this.unused=new B(g.order),this.totalInWeights=new T(g.order),this.totalOutWeights=new T(g.order);var Z,P={},D=0,L=0,G=this;g.forEachNode(function(k){G.nodes[D]=k,P[k]=D,L+=g.outDegreeWithoutSelfLoops(k),G.starts[D]=L,L+=g.inDegreeWithoutSelfLoops(k),G.offsets[D]=L,G.belongings[D]=D,G.counts[D]=1,D++}),g.forEachEdge(function(k,V,K,tt,q,Q,ot){if(Z=A(k,V,K,tt,q,Q,ot),K=P[K],tt=P[tt],G.M+=Z,K===tt)G.loops[K]+=Z,G.totalInWeights[K]+=Z,G.totalOutWeights[K]+=Z;else{G.totalOutWeights[K]+=Z,G.totalInWeights[tt]+=Z;var pt=--G.starts[K],gt=--G.offsets[tt];G.neighborhood[pt]=tt,G.neighborhood[gt]=K,G.weights[pt]=Z,G.weights[gt]=Z}}),this.starts[D]=this.E,this.keepDendrogram?this.dendrogram.push(this.belongings.slice()):this.mapping=this.belongings.slice()}E.prototype.isolate=function(g,d){var v=this.belongings[g];if(1===this.counts[v])return v;var A=this.unused[--this.U],x=this.loops[g];return this.totalWeights[v]-=d+x,this.totalWeights[A]+=d+x,this.belongings[g]=A,this.counts[v]--,this.counts[A]++,A},E.prototype.move=function(g,d,v){var A=this.belongings[g],x=this.loops[g];this.totalWeights[A]-=d+x,this.totalWeights[v]+=d+x,this.belongings[g]=v;var S=1==this.counts[A]--;this.counts[v]++,S&&(this.unused[this.U++]=A)},E.prototype.computeNodeDegree=function(g){var d,v,x=0;for(d=this.starts[g],v=this.starts[g+1];d<v;d++)x+=this.weights[d];return x},E.prototype.expensiveIsolate=function(g){var d=this.computeNodeDegree(g);return this.isolate(g,d)},E.prototype.expensiveMove=function(g,d){var v=this.computeNodeDegree(g);this.move(g,v,d)},E.prototype.zoomOut=function(){var S,B,T,P,Z,D,L,G,k,V,K,g=new Array(this.C-this.U),d={},v=this.nodes.length,A=0,x=0;for(S=0,T=this.C;S<T;S++)(D=this.belongings[S])in d||(d[D]=A,g[A]={adj:{},totalWeights:this.totalWeights[D],internalWeights:0},A++),this.belongings[S]=d[D];if(this.keepDendrogram){for(V=this.dendrogram[this.level],K=new(F.getPointerArray(A))(v),S=0;S<v;S++)K[S]=this.belongings[V[S]];this.dendrogram.push(K)}else for(S=0;S<v;S++)this.mapping[S]=this.belongings[this.mapping[S]];for(S=0,T=this.C;S<T;S++)for(k=(G=g[D=this.belongings[S]]).adj,G.internalWeights+=this.loops[S],B=this.starts[S],P=this.starts[S+1];B<P;B++)D!==(L=this.belongings[Z=this.neighborhood[B]])?(L in k||(k[L]=0),k[L]+=this.weights[B]):G.internalWeights+=this.weights[B];for(this.C=A,Z=0,D=0;D<A;D++)for(L in k=(G=g[D]).adj,this.totalWeights[D=+D]=G.totalWeights,this.loops[D]=G.internalWeights,this.counts[D]=1,this.starts[D]=Z,this.belongings[D]=D,k)this.neighborhood[Z]=+L,this.weights[Z]=k[L],x++,Z++;return this.starts[A]=x,this.E=x,this.U=0,this.level++,d},E.prototype.modularity=function(){var g,v,A,x,S=0,B=2*this.M,T=new Float64Array(this.C);for(v=0;v<this.C;v++)for(T[g=this.belongings[v]]+=this.loops[v],A=this.starts[v],x=this.starts[v+1];A<x;A++)g===this.belongings[this.neighborhood[A]]&&(T[g]+=this.weights[A]);for(v=0;v<this.C;v++)S+=T[v]/B-Math.pow(this.totalWeights[v]/B,2)*this.resolution;return S},E.prototype.delta=function(g,d,v,A){var x=this.M;return v/x-this.totalWeights[A]*(d+=this.loops[g])*this.resolution/(2*x*x)},E.prototype.deltaWithOwnCommunity=function(g,d,v,A){var x=this.M;return v/x-(this.totalWeights[A]-(d+=this.loops[g]))*d*this.resolution/(2*x*x)},E.prototype.fastDelta=function(g,d,v,A){return v-(d+=this.loops[g])*this.totalWeights[A]*this.resolution/(2*this.M)},E.prototype.fastDeltaWithOwnCommunity=function(g,d,v,A){return v-(d+=this.loops[g])*(this.totalWeights[A]-d)*this.resolution/(2*this.M)},E.prototype.bounds=function(g){return[this.starts[g],this.starts[g+1]]},E.prototype.project=function(){var g=this,d={};return g.nodes.slice(0,this.C).forEach(function(v,A){d[v]=Array.from(g.neighborhood.slice(g.starts[A],g.starts[A+1])).map(function(x){return g.nodes[x]})}),d},E.prototype.collect=function(g){arguments.length<1&&(g=this.level);var A,x,d={},v=this.keepDendrogram?this.dendrogram[g]:this.mapping;for(A=0,x=v.length;A<x;A++)d[this.nodes[A]]=v[A];return d},E.prototype.assign=function(g,d){arguments.length<2&&(d=this.level);var A,x,v=this.keepDendrogram?this.dendrogram[d]:this.mapping;for(A=0,x=v.length;A<x;A++)this.graph.setNodeAttribute(this.nodes[A],g,v[A])},E.prototype[s]=function(){var g={};Object.defineProperty(g,"constructor",{value:E,enumerable:!1}),g.C=this.C,g.M=this.M,g.E=this.E,g.U=this.U,g.resolution=this.resolution,g.level=this.level,g.nodes=this.nodes,g.starts=this.starts.slice(0,g.C+1);var A=this;return["neighborhood","weights"].forEach(function(x){g[x]=A[x].slice(0,g.E)}),["counts","loops","belongings","totalWeights"].forEach(function(x){g[x]=A[x].slice(0,g.C)}),g.unused=this.unused.slice(0,this.U),this.keepDendrogram?g.dendrogram=this.dendrogram:g.mapping=this.mapping,g},C.prototype.bounds=E.prototype.bounds,C.prototype.inBounds=function(g){return[this.offsets[g],this.starts[g+1]]},C.prototype.outBounds=function(g){return[this.starts[g],this.offsets[g]]},C.prototype.project=E.prototype.project,C.prototype.projectIn=function(){var g=this,d={};return g.nodes.slice(0,this.C).forEach(function(v,A){d[v]=Array.from(g.neighborhood.slice(g.offsets[A],g.starts[A+1])).map(function(x){return g.nodes[x]})}),d},C.prototype.projectOut=function(){var g=this,d={};return g.nodes.slice(0,this.C).forEach(function(v,A){d[v]=Array.from(g.neighborhood.slice(g.starts[A],g.offsets[A])).map(function(x){return g.nodes[x]})}),d},C.prototype.isolate=function(g,d,v){var A=this.belongings[g];if(1===this.counts[A])return A;var x=this.unused[--this.U],S=this.loops[g];return this.totalInWeights[A]-=d+S,this.totalInWeights[x]+=d+S,this.totalOutWeights[A]-=v+S,this.totalOutWeights[x]+=v+S,this.belongings[g]=x,this.counts[A]--,this.counts[x]++,x},C.prototype.move=function(g,d,v,A){var x=this.belongings[g],S=this.loops[g];this.totalInWeights[x]-=d+S,this.totalInWeights[A]+=d+S,this.totalOutWeights[x]-=v+S,this.totalOutWeights[A]+=v+S,this.belongings[g]=A;var B=1==this.counts[x]--;this.counts[A]++,B&&(this.unused[this.U++]=x)},C.prototype.computeNodeInDegree=function(g){var d,v,x=0;for(d=this.offsets[g],v=this.starts[g+1];d<v;d++)x+=this.weights[d];return x},C.prototype.computeNodeOutDegree=function(g){var d,v,x=0;for(d=this.starts[g],v=this.offsets[g];d<v;d++)x+=this.weights[d];return x},C.prototype.expensiveMove=function(g,d){var v=this.computeNodeInDegree(g),A=this.computeNodeOutDegree(g);this.move(g,v,A,d)},C.prototype.zoomOut=function(){var S,B,T,P,Z,D,L,G,k,V,K,tt,q,Q,ot,g=new Array(this.C-this.U),d={},v=this.nodes.length,A=0,x=0;for(S=0,T=this.C;S<T;S++)(D=this.belongings[S])in d||(d[D]=A,g[A]={inAdj:{},outAdj:{},totalInWeights:this.totalInWeights[D],totalOutWeights:this.totalOutWeights[D],internalWeights:0},A++),this.belongings[S]=d[D];if(this.keepDendrogram){for(Q=this.dendrogram[this.level],ot=new(F.getPointerArray(A))(v),S=0;S<v;S++)ot[S]=this.belongings[Q[S]];this.dendrogram.push(ot)}else for(S=0;S<v;S++)this.mapping[S]=this.belongings[this.mapping[S]];for(S=0,T=this.C;S<T;S++)for(k=this.offsets[S],tt=(G=g[D=this.belongings[S]]).inAdj,q=G.outAdj,G.internalWeights+=this.loops[S],B=this.starts[S],P=this.starts[S+1];B<P;B++)K=(V=B<k)?q:tt,D!==(L=this.belongings[Z=this.neighborhood[B]])?(L in K||(K[L]=0),K[L]+=this.weights[B]):V&&(G.internalWeights+=this.weights[B]);for(this.C=A,Z=0,D=0;D<A;D++){for(L in tt=(G=g[D]).inAdj,q=G.outAdj,this.totalInWeights[D=+D]=G.totalInWeights,this.totalOutWeights[D]=G.totalOutWeights,this.loops[D]=G.internalWeights,this.counts[D]=1,this.starts[D]=Z,this.belongings[D]=D,q)this.neighborhood[Z]=+L,this.weights[Z]=q[L],x++,Z++;for(L in this.offsets[D]=Z,tt)this.neighborhood[Z]=+L,this.weights[Z]=tt[L],x++,Z++}return this.starts[A]=x,this.E=x,this.U=0,this.level++,d},C.prototype.modularity=function(){var g,v,A,x,S=0,B=this.M,T=new Float64Array(this.C);for(v=0;v<this.C;v++)for(T[g=this.belongings[v]]+=this.loops[v],A=this.starts[v],x=this.offsets[v];A<x;A++)g===this.belongings[this.neighborhood[A]]&&(T[g]+=this.weights[A]);for(v=0;v<this.C;v++)S+=T[v]/B-this.totalInWeights[v]*this.totalOutWeights[v]/Math.pow(B,2)*this.resolution;return S},C.prototype.delta=function(g,d,v,A,x){var S=this.M,P=this.loops[g];return A/S-((v+=P)*this.totalInWeights[x]+(d+=P)*this.totalOutWeights[x])*this.resolution/(S*S)},C.prototype.deltaWithOwnCommunity=function(g,d,v,A,x){var S=this.M,P=this.loops[g];return A/S-((v+=P)*(this.totalInWeights[x]-(d+=P))+d*(this.totalOutWeights[x]-v))*this.resolution/(S*S)},C.prototype.collect=E.prototype.collect,C.prototype.assign=E.prototype.assign,C.prototype[s]=function(){var g={};Object.defineProperty(g,"constructor",{value:C,enumerable:!1}),g.C=this.C,g.M=this.M,g.E=this.E,g.U=this.U,g.resolution=this.resolution,g.level=this.level,g.nodes=this.nodes,g.starts=this.starts.slice(0,g.C+1);var A=this;return["neighborhood","weights"].forEach(function(x){g[x]=A[x].slice(0,g.E)}),["counts","offsets","loops","belongings","totalInWeights","totalOutWeights"].forEach(function(x){g[x]=A[x].slice(0,g.C)}),g.unused=this.unused.slice(0,this.U),this.keepDendrogram?g.dendrogram=this.dendrogram:g.mapping=this.mapping,g},et.UndirectedLouvainIndex=E,et.DirectedLouvainIndex=C},6078:(lt,et,N)=>{var F=N(6116),$=N(2954).Q6;function I(E,C){return"outbound"===E||"inbound"===E?C.directedSize+2*C.undirectedSize:"in"===E||"out"===E||"directed"===E?C.directedSize:2*C.undirectedSize}function s(E,C){var g=E[(C=C||"outbound")+"Neighbors"].bind(E),d=I(C,E),v=F.getPointerArray(d),A=F.getPointerArray(E.order);this.graph=E,this.neighborhood=new A(d),this.starts=new v(E.order+1),this.nodes=E.nodes();var S,B,T,P,D,x={},L=0;for(S=0,B=E.order;S<B;S++)x[this.nodes[S]]=S;for(S=0,B=E.order;S<B;S++)for(D=g(this.nodes[S]),this.starts[S]=L,T=0,P=D.length;T<P;T++)this.neighborhood[L++]=x[D[T]];this.starts[S]=d}function _(E,C,g){var d=E[(g=g||"outbound")+"Edges"].bind(E),v=I(g,E),A=F.getPointerArray(v),x=F.getPointerArray(E.order),S=$(C).fromMinimalEntry;this.graph=E,this.neighborhood=new x(v),this.weights=new Float64Array(v),this.outDegrees=new Float64Array(E.order),this.starts=new A(E.order+1),this.nodes=E.nodes();var T,P,Z,D,L,G,k,V,K,B={},tt=0;for(T=0,P=E.order;T<P;T++)B[this.nodes[T]]=T;for(T=0,P=E.order;T<P;T++)for(k=d(L=this.nodes[T]),this.starts[T]=tt,Z=0,D=k.length;Z<D;Z++)G=E.opposite(L,V=k[Z]),K=S(V,E.getEdgeAttributes(V)),this.neighborhood[tt]=B[G],this.weights[tt++]=K,this.outDegrees[T]+=K;this.starts[T]=v}s.prototype.bounds=function(E){return[this.starts[E],this.starts[E+1]]},s.prototype.project=function(){var E=this,C={};return E.nodes.forEach(function(g,d){C[g]=Array.from(E.neighborhood.slice(E.starts[d],E.starts[d+1])).map(function(v){return E.nodes[v]})}),C},s.prototype.collect=function(E){var C,g,d={};for(C=0,g=E.length;C<g;C++)d[this.nodes[C]]=E[C];return d},s.prototype.assign=function(E,C){var g=0;this.graph.updateEachNodeAttributes(function(d,v){return v[E]=C[g++],v},{attributes:[E]})},et.NeighborhoodIndex=s,_.prototype.bounds=s.prototype.bounds,_.prototype.project=s.prototype.project,_.prototype.collect=s.prototype.collect,_.prototype.assign=s.prototype.assign,et.WeightedNeighborhoodIndex=_},1063:(lt,et,N)=>{var F=N(6714),$=N(3933),I=N(8487),s=$.createUnweightedIndexedBrandes,_=$.createDijkstraIndexedBrandes,E={nodeCentralityAttribute:"betweennessCentrality",getEdgeWeight:"weight",normalized:!0};function C(d,v,A){if(!F(v))throw new Error("graphology-centrality/beetweenness-centrality: the given graph is not a valid graphology instance.");var P,Z,D,L,G,k,V,K,tt,q,x=(A=I(A,E)).nodeCentralityAttribute,S=A.normalized,B=A.getEdgeWeight?_(v,A.getEdgeWeight):s(v),T=v.order,Q=new Float64Array(T),ot=new Float64Array(T);for(k=0;k<T;k++){for(D=(P=B(k))[1],L=P[2],V=(Z=P[0]).size;V--;)Q[Z.items[Z.size-V]]=0;for(;0!==Z.size;){for(G=(1+Q[q=Z.pop()])/L[q],V=0,K=D[q].length;V<K;V++)Q[tt=D[q][V]]+=L[tt]*G;q!==k&&(ot[q]+=Q[q])}}var pt;if(null!==(pt=S?T<=2?null:1/((T-1)*(T-2)):"undirected"===v.type?.5:null))for(k=0;k<T;k++)ot[k]*=pt;return d?B.index.assign(x,ot):B.index.collect(ot)}var g=C.bind(null,!1);g.assign=C.bind(null,!0),lt.exports=g},3378:(lt,et,N)=>{var F=N(6714),$=N(8487),I=N(8740),s=N(4268),_=N(6078).NeighborhoodIndex,E={nodeCentralityAttribute:"closenessCentrality",wassermanFaust:!1};function C(v){this.index=new _(v,"inbound"),this.queue=new I(Array,v.order),this.seen=new s(v.order)}function g(v,A,x){if(!F(A))throw new Error("graphology-metrics/centrality/closeness: the given graph is not a valid graphology instance.");var P,Z,D,L,G,S=(x=$(x,E)).wassermanFaust,B=new C(A),T=A.order,k=new Float64Array(T);for(P=0;P<T;P++)D=(Z=B.fromNode(P))[0],G=0,(L=Z[1])>0&&T>1&&(G=D/L,S&&(G*=D/(T-1))),k[P]=G;return v?B.index.assign(x.nodeCentralityAttribute,k):B.index.collect(k)}C.prototype.fromNode=function(v){var A=this.index,x=this.queue,S=this.seen;S.clear(),x.clear(),S.add(v),x.push([v,0]);for(var B,T,P,Z,D,L,G=0,k=0;0!==x.size;)for(0!==(P=(B=x.shift())[1])&&(G+=P,k+=1),D=A.starts[(T=B[0])+1],Z=A.starts[T];Z<D;Z++)!S.has(L=A.neighborhood[Z])&&(S.add(L),x.push([L,P+1]));return[k,G]};var d=g.bind(null,!1);d.assign=g.bind(null,!0),lt.exports=d},5408:(lt,et,N)=>{var F=N(6714);function $(E,C,g,d){var v=C+"Centrality";if(!F(g))throw new Error("graphology-centrality/"+v+": the given graph is not a valid graphology instance.");if("degree"!==C&&"undirected"===g.type)throw new Error("graphology-centrality/"+v+": cannot compute "+C+" centrality on an undirected graph.");var A=(d=d||{}).nodeCentralityAttribute||v,x=g.order-1,S=g[C].bind(g);if(!E){var B={};return g.forEachNode(function(T){B[T]=S(T)/x}),B}g.updateEachNodeAttributes(function(T,P){return P[A]=S(T)/x,P},{attributes:[A]})}var I=$.bind(null,!1,"degree"),s=$.bind(null,!1,"inDegree"),_=$.bind(null,!1,"outDegree");I.assign=$.bind(null,!0,"degree"),s.assign=$.bind(null,!0,"inDegree"),_.assign=$.bind(null,!0,"outDegree"),et.degreeCentrality=I,et.inDegreeCentrality=s,et.outDegreeCentrality=_},5894:(lt,et,N)=>{var F=N(6714),$=N(8487),I=N(6078).WeightedNeighborhoodIndex,s={nodeCentralityAttribute:"eigenvectorCentrality",getEdgeWeight:"weight",maxIterations:100,tolerance:1e-6};function _(g){for(var d=0,v=0,A=0,x=g.length;A<x;A++){var S=Math.abs(g[A]);S>d&&(v*=d/S*(d/S),d=S),v+=0===S&&0===d?0:S/d*(S/d)}return d===1/0?1:d*Math.sqrt(v)}function E(g,d,v){if(!F(d))throw new Error("graphology-metrics/centrality/eigenvector: the given graph is not a valid graphology instance.");var T,P,Z,A=(v=$(v,s)).maxIterations,x=v.tolerance,S=d.order,B=new I(d,v.getEdgeWeight),L=new Float64Array(d.order);for(T=0;T<S;T++)L[T]=1/S;for(var K,tt,G=0,k=0,q=!1;G<A;){for(K=L,L=new Float64Array(K),T=0;T<S;T++)for(Z=B.starts[T+1],P=B.starts[T];P<Z;P++)L[B.neighborhood[P]]+=K[T]*B.weights[P];for(tt=_(L),T=0;T<S;T++)L[T]/=tt;for(k=0,T=0;T<S;T++)k+=Math.abs(L[T]-K[T]);if(k<S*x){q=!0;break}G++}if(!q)throw Error("graphology-metrics/centrality/eigenvector: failed to converge.");if(!g)return B.collect(L);B.assign(v.nodeCentralityAttribute,L)}var C=E.bind(null,!1);C.assign=E.bind(null,!0),lt.exports=C},9850:(lt,et,N)=>{var F=N(8487),$=N(6714),I=N(2954).Q6,s={nodeAuthorityAttribute:"authority",nodeHubAttribute:"hub",getEdgeWeight:"weight",maxIterations:100,normalize:!0,tolerance:1e-8};function _(d,v){var x,S,A=Object.create(null);for(x=0,S=d.length;x<S;x++)A[d[x]]=v;return A}function E(d){var v=0;for(var A in d)v+=d[A];return v}function C(d,v,A){if(!$(v))throw new Error("graphology-hits: the given graph is not a valid graphology instance.");if(v.multi)throw new Error("graphology-hits: the HITS algorithm does not work with MultiGraphs.");A=F(A,s);var T,L,G,k,V,K,tt,q,Q,ot,pt,gt,St,zt,x=I(A.getEdgeWeight).fromEntry,S=v.order,B=v.nodes(),P=_(B,1/S),Z={},D=!1;for(v.forEachEdge(function(Mt,Lt,Yt,Bt,Ht,jt,Ft){Z[Mt]=x(Mt,Lt,Yt,Bt,Ht,jt,Ft)}),tt=0;tt<A.maxIterations;tt++){for(L=P,P=_(B,0),G=_(B,0),Q=0,q=0,gt=0;gt<S;gt++)for(St=0,zt=(T=v.outboundEdges(k=B[gt])).length;St<zt;St++)V=v.opposite(k,K=T[St]),G[V]+=L[k]*Z[K],G[V]>q&&(q=G[V]);for(gt=0;gt<S;gt++)for(St=0,zt=(T=v.outboundEdges(k=B[gt])).length;St<zt;St++)V=v.opposite(k,K=T[St]),P[k]+=G[V]*Z[K],P[V]>Q&&(Q=P[V]);for(k in pt=1/Q,P)P[k]*=pt;for(k in pt=1/q,G)G[k]*=pt;for(k in ot=0,P)ot+=Math.abs(P[k]-L[k]);if(ot<A.tolerance){D=!0;break}}if(!D)throw Error("graphology-metrics/centrality/hits: failed to converge.");if(A.normalize){for(k in pt=1/E(G),G)G[k]*=pt;for(k in pt=1/E(P),P)P[k]*=pt}if(!d)return{hubs:P,authorities:G};v.updateEachNodeAttributes(function(Mt,Lt){return Lt[A.nodeAuthorityAttribute]=G[Mt],Lt[A.nodeHubAttribute]=P[Mt],Lt},{attributes:[A.nodeAuthorityAttribute,A.nodeHubAttribute]})}var g=C.bind(null,!1);g.assign=C.bind(null,!0),lt.exports=g},5547:(lt,et,N)=>{N(5408);N(1063),N(3378),N(5894),N(9850),et.pagerank=N(593)},593:(lt,et,N)=>{var F=N(6714),$=N(8487),I=N(6078).WeightedNeighborhoodIndex,s={nodePagerankAttribute:"pagerank",getEdgeWeight:"weight",alpha:.85,maxIterations:100,tolerance:1e-6};function _(C,g,d){if(!F(g))throw new Error("graphology-metrics/centrality/pagerank: the given graph is not a valid graphology instance.");var Z,D,L,G,v=(d=$(d,s)).alpha,A=d.maxIterations,x=d.tolerance,S=d.nodePagerankAttribute,B=g.order,T=1/B,P=new I(g,d.getEdgeWeight),k=new Float64Array(g.order),V=new Float64Array(P.weights.length),K=[];for(Z=0;Z<B;Z++)for(k[Z]=T,L=P.starts[Z+1],0===(G=P.outDegrees[Z])&&K.push(Z),D=P.starts[Z];D<L;D++)V[D]=P.weights[D]/G;for(var Q,pt,tt=0,q=0,gt=!1;tt<A;){for(pt=k,k=new Float64Array(g.order),Q=0,Z=0,L=K.length;Z<L;Z++)Q+=pt[K[Z]];for(Q*=v,Z=0;Z<B;Z++){for(L=P.starts[Z+1],D=P.starts[Z];D<L;D++)k[P.neighborhood[D]]+=v*pt[Z]*V[D];k[Z]+=Q*T+(1-v)*T}for(q=0,Z=0;Z<B;Z++)q+=Math.abs(k[Z]-pt[Z]);if(q<B*x){gt=!0;break}tt++}if(!gt)throw Error("graphology-metrics/centrality/pagerank: failed to converge.");if(!C)return P.collect(k);P.assign(S,k)}var E=_.bind(null,!1);E.assign=_.bind(null,!0),lt.exports=E},3956:(lt,et,N)=>{var F=N(6714),$=N(4651).jZ;lt.exports=function(s,_){if(!F(s))throw new Error("graphology-metrics/eccentricity: given graph is not a valid graphology instance.");if(0===s.size)return 1/0;var g,d,E=-1/0,C=$(s,_),v=0;for(g in C)(d=C[g])>E&&(E=d),v++;return v<s.order?1/0:E}},9637:(lt,et,N)=>{N(677);et.eccentricity=N(3956)},677:(lt,et,N)=>{var F=N(6714);function I(s,_,E,C,g){if(!F(E))throw new Error("graphology-metrics/"+s+": the given graph is not a valid graphology instance.");g=g||"weight";var d=0;return E[_](C,function(v,A,x,S,B,T,P){var Z="function"==typeof g?g(v,A,x,S,B,T,P):A[g];("number"!=typeof Z||isNaN(Z))&&(Z=1),d+=Z}),d}et.weightedDegree=I.bind(null,"weightedDegree","forEachEdge"),et.weightedInDegree=I.bind(null,"weightedInDegree","forEachInEdge"),et.weightedOutDegree=I.bind(null,"weightedOutDegree","forEachOutEdge"),et.weightedInboundDegree=I.bind(null,"weightedInboundDegree","forEachInboundEdge"),et.weightedOutboundDegree=I.bind(null,"weightedOutboundDegree","forEachOutboundEdge"),et.weightedUndirectedDegree=I.bind(null,"weightedUndirectedDegree","forEachUndirectedEdge"),et.weightedDirectedDegree=I.bind(null,"weightedDirectedDegree","forEachDirectedEdge")},3933:(lt,et,N)=>{var F=N(8740),$=N(7451),I=N(4547),s=N(6116),_=N(6078),E=_.NeighborhoodIndex,C=_.WeightedNeighborhoodIndex;function g(d,v){return d[0]>v[0]?1:d[0]<v[0]?-1:d[1]>v[1]?1:d[1]<v[1]?-1:d[2]>v[2]?1:d[2]<v[2]?-1:d[3]>v[3]?1:d[3]<v[3]?-1:0}et.createUnweightedIndexedBrandes=function(v){var A=new E(v),x=A.neighborhood,S=A.starts,B=v.order,T=new $(s.getPointerArray(B),B),P=new Uint32Array(B),Z=new Array(B),D=new Int32Array(B),L=new F(Uint32Array,B),G=function(k){var V,K,q,Q,ot,pt;for(ot=0;ot<B;ot++)Z[ot]=[],P[ot]=0,D[ot]=-1;for(P[k]=1,D[k]=0,L.push(k);0!==L.size;)for(ot=L.shift(),T.push(ot),V=D[ot],K=P[ot],q=S[ot+1],Q=S[ot];Q<q;Q++)-1===D[pt=x[Q]]&&(L.push(pt),D[pt]=V+1),D[pt]===V+1&&(P[pt]+=K,Z[pt].push(ot));return[T,Z,P]};return G.index=A,G},et.createDijkstraIndexedBrandes=function(v,A){var x=new C(v,A||"weight"),S=x.neighborhood,B=x.weights,T=x.starts,P=v.order,Z=new $(s.getPointerArray(P),P),D=new Uint32Array(P),L=new Array(P),G=new Float64Array(P),k=new Float64Array(P),V=new I(g),K=function(tt){var Q,ot,pt,gt,St,zt,Mt,Lt,Yt=0;for(Mt=0;Mt<P;Mt++)L[Mt]=[],D[Mt]=0,G[Mt]=-1,k[Mt]=-1;for(D[tt]=1,k[tt]=0,V.push([0,Yt++,tt,tt]);0!==V.size;)if(pt=(ot=V.pop())[0],gt=ot[2],-1===G[Mt=ot[3]])for(Z.push(Mt),G[Mt]=pt,D[Mt]+=D[gt],Q=T[Mt+1],zt=T[Mt];zt<Q;zt++)St=pt+B[zt],-1===G[Lt=S[zt]]&&(-1===k[Lt]||St<k[Lt])?(k[Lt]=St,V.push([St,Yt++,Mt,Lt]),D[Lt]=0,L[Lt]=[Mt]):St===k[Lt]&&(D[Lt]+=D[Mt],L[Lt].push(Mt));return[Z,L,D]};return K.index=x,K}},4651:(lt,et,N)=>{var $=N(6714),s=(N(7621),N(3333));function C(A,x,S){if(!$(x))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!x.hasNode(S))throw new Error('graphology-shortest-path: the "'+S+'" source node does not exist in the given graph.');S=""+S;var B=new Set,T={},P=0;T[S]=0;for(var D,L,G,Z=[S];0!==Z.length;){var k=[];for(D=0,L=Z.length;D<L;D++)!B.has(G=Z[D])&&(B.add(G),s(k,x[A](G)),T[G]=P);P++,Z=k}return T}var g=C.bind(null,"outboundNeighbors");C.bind(null,"neighbors");et.jZ=g},778:(lt,et)=>{et.De=function($,I,s,_,E,C){return C=Object.assign({},C),I?null==s?$.addUndirectedEdge(_,E,C):$.addUndirectedEdgeWithKey(s,_,E,C):null==s?$.addDirectedEdge(_,E,C):$.addDirectedEdgeWithKey(s,_,E,C)}},6262:(lt,et)=>{et.B=function(N,F,$){return $=Object.assign({},$),N.addNode(F,$)}},8487:lt=>{function et(F){return!F||"object"!=typeof F||"function"==typeof F||Array.isArray(F)||F instanceof Set||F instanceof Map||F instanceof RegExp||F instanceof Date}lt.exports=function N(F,$){F=F||{};var I={};for(var s in $){var _=F[s],E=$[s];I[s]=et(E)?void 0===_?E:_:N(_,E)}return I}},2954:(lt,et)=>{function F(s){return"number"!=typeof s||isNaN(s)?1:s}et.Q6=function(s){return function I(s,_){var E={},C=function(v){return void 0===v?_:v};"function"==typeof _&&(C=_);var g=function(v){return C(v[s])},d=function(){return C(void 0)};return"string"==typeof s?(E.fromAttributes=g,E.fromGraph=function(v,A){return g(v.getEdgeAttributes(A))},E.fromEntry=function(v,A){return g(A)},E.fromPartialEntry=E.fromEntry,E.fromMinimalEntry=E.fromEntry):"function"==typeof s?(E.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},E.fromGraph=function(v,A){var x=v.extremities(A);return C(s(A,v.getEdgeAttributes(A),x[0],x[1],v.getNodeAttributes(x[0]),v.getNodeAttributes(x[1]),v.isUndirected(A)))},E.fromEntry=function(v,A,x,S,B,T,P){return C(s(v,A,x,S,B,T,P))},E.fromPartialEntry=function(v,A,x,S){return C(s(v,A,x,S))},E.fromMinimalEntry=function(v,A){return C(s(v,A))}):(E.fromAttributes=d,E.fromGraph=d,E.fromEntry=d,E.fromMinimalEntry=d),E}(s,F)}},5568:(lt,et,N)=>{var F=N(6714);lt.exports=function(I){if(!F(I))throw new Error("graphology-utils/infer-type: expecting a valid graphology instance.");var s=I.type;return"mixed"!==s?s:0===I.directedSize&&0===I.undirectedSize||I.directedSize>0&&I.undirectedSize>0?"mixed":I.directedSize>0?"directed":"undirected"}},6714:lt=>{lt.exports=function(N){return null!==N&&"object"==typeof N&&"function"==typeof N.addUndirectedEdgeWithKey&&"function"==typeof N.dropNode&&"boolean"==typeof N.multi}},5595:function(lt){lt.exports=function(){"use strict";function et(h){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(h)}function N(h,y){h.prototype=Object.create(y.prototype),h.prototype.constructor=h,$(h,y)}function F(h){return(F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(y){return y.__proto__||Object.getPrototypeOf(y)})(h)}function $(h,y){return($=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,o){return f.__proto__=o,f})(h,y)}function I(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(h){return!1}}function s(h,y,f){return(s=I()?Reflect.construct.bind():function(o,a,l){var b=[null];b.push.apply(b,a);var z=new(Function.bind.apply(o,b));return l&&$(z,l.prototype),z}).apply(null,arguments)}function _(h){var y="function"==typeof Map?new Map:void 0;return _=function(f){if(null===f||-1===Function.toString.call(f).indexOf("[native code]"))return f;if("function"!=typeof f)throw new TypeError("Super expression must either be null or a function");if(void 0!==y){if(y.has(f))return y.get(f);y.set(f,a)}function a(){return s(f,arguments,F(this).constructor)}return a.prototype=Object.create(f.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),$(a,f)},_(h)}function E(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}var C=function(){for(var h=arguments[0],y=1,f=arguments.length;y<f;y++)if(arguments[y])for(var o in arguments[y])h[o]=arguments[y][o];return h};function g(h,y,f,o){var a=h._nodes.get(y),l=null;return a?l="mixed"===o?a.out&&a.out[f]||a.undirected&&a.undirected[f]:"directed"===o?a.out&&a.out[f]:a.undirected&&a.undirected[f]:l}function d(h){return"object"===et(h)&&null!==h&&h.constructor===Object}function v(h){var y;for(y in h)return!1;return!0}function A(h,y,f){Object.defineProperty(h,y,{enumerable:!1,configurable:!1,writable:!0,value:f})}function x(h,y,f){var o={enumerable:!0,configurable:!0};"function"==typeof f?o.get=f:(o.value=f,o.writable=!1),Object.defineProperty(h,y,o)}function S(h){return!(!d(h)||h.attributes&&!Array.isArray(h.attributes))}"function"==typeof Object.assign&&(C=Object.assign);var B,T={exports:{}},P="object"==typeof Reflect?Reflect:null,Z=P&&"function"==typeof P.apply?P.apply:function(h,y,f){return Function.prototype.apply.call(h,y,f)};B=P&&"function"==typeof P.ownKeys?P.ownKeys:Object.getOwnPropertySymbols?function(h){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h))}:function(h){return Object.getOwnPropertyNames(h)};var D=Number.isNaN||function(h){return h!=h};function L(){L.init.call(this)}T.exports=L,T.exports.once=function(h,y){return new Promise(function(f,o){function a(b){h.removeListener(y,l),o(b)}function l(){"function"==typeof h.removeListener&&h.removeListener("error",a),f([].slice.call(arguments))}var b;gt(h,y,l,{once:!0}),"error"!==y&&("function"==typeof(b=h).on&&gt(b,"error",a,{once:!0}))})},L.EventEmitter=L,L.prototype._events=void 0,L.prototype._eventsCount=0,L.prototype._maxListeners=void 0;var G=10;function k(h){if("function"!=typeof h)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof h)}function V(h){return void 0===h._maxListeners?L.defaultMaxListeners:h._maxListeners}function K(h,y,f,o){var a,l,b;if(k(f),void 0===(l=h._events)?(l=h._events=Object.create(null),h._eventsCount=0):(void 0!==l.newListener&&(h.emit("newListener",y,f.listener?f.listener:f),l=h._events),b=l[y]),void 0===b)b=l[y]=f,++h._eventsCount;else if("function"==typeof b?b=l[y]=o?[f,b]:[b,f]:o?b.unshift(f):b.push(f),(a=V(h))>0&&b.length>a&&!b.warned){b.warned=!0;var Y=new Error("Possible EventEmitter memory leak detected. "+b.length+" "+String(y)+" listeners added. Use emitter.setMaxListeners() to increase limit");Y.name="MaxListenersExceededWarning",Y.emitter=h,Y.type=y,Y.count=b.length,console&&console.warn&&console.warn(Y)}return h}function tt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function q(h,y,f){var o={fired:!1,wrapFn:void 0,target:h,type:y,listener:f},a=tt.bind(o);return a.listener=f,o.wrapFn=a,a}function Q(h,y,f){var o=h._events;if(void 0===o)return[];var a=o[y];return void 0===a?[]:"function"==typeof a?f?[a.listener||a]:[a]:f?function(l){for(var b=new Array(l.length),z=0;z<b.length;++z)b[z]=l[z].listener||l[z];return b}(a):pt(a,a.length)}function ot(h){var y=this._events;if(void 0!==y){var f=y[h];if("function"==typeof f)return 1;if(void 0!==f)return f.length}return 0}function pt(h,y){for(var f=new Array(y),o=0;o<y;++o)f[o]=h[o];return f}function gt(h,y,f,o){if("function"==typeof h.on)o.once?h.once(y,f):h.on(y,f);else{if("function"!=typeof h.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof h);h.addEventListener(y,function a(l){o.once&&h.removeEventListener(y,a),f(l)})}}function St(h){if("function"!=typeof h)throw new Error("obliterator/iterator: expecting a function!");this.next=h}Object.defineProperty(L,"defaultMaxListeners",{enumerable:!0,get:function(){return G},set:function(h){if("number"!=typeof h||h<0||D(h))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+h+".");G=h}}),L.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},L.prototype.setMaxListeners=function(h){if("number"!=typeof h||h<0||D(h))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+h+".");return this._maxListeners=h,this},L.prototype.getMaxListeners=function(){return V(this)},L.prototype.emit=function(h){for(var y=[],f=1;f<arguments.length;f++)y.push(arguments[f]);var o="error"===h,a=this._events;if(void 0!==a)o=o&&void 0===a.error;else if(!o)return!1;if(o){var l;if(y.length>0&&(l=y[0]),l instanceof Error)throw l;var b=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw b.context=l,b}var z=a[h];if(void 0===z)return!1;if("function"==typeof z)Z(z,this,y);else{var Y=z.length,ct=pt(z,Y);for(f=0;f<Y;++f)Z(ct[f],this,y)}return!0},L.prototype.on=L.prototype.addListener=function(h,y){return K(this,h,y,!1)},L.prototype.prependListener=function(h,y){return K(this,h,y,!0)},L.prototype.once=function(h,y){return k(y),this.on(h,q(this,h,y)),this},L.prototype.prependOnceListener=function(h,y){return k(y),this.prependListener(h,q(this,h,y)),this},L.prototype.off=L.prototype.removeListener=function(h,y){var f,o,a,l,b;if(k(y),void 0===(o=this._events))return this;if(void 0===(f=o[h]))return this;if(f===y||f.listener===y)0==--this._eventsCount?this._events=Object.create(null):(delete o[h],o.removeListener&&this.emit("removeListener",h,f.listener||y));else if("function"!=typeof f){for(a=-1,l=f.length-1;l>=0;l--)if(f[l]===y||f[l].listener===y){b=f[l].listener,a=l;break}if(a<0)return this;0===a?f.shift():function(z,Y){for(;Y+1<z.length;Y++)z[Y]=z[Y+1];z.pop()}(f,a),1===f.length&&(o[h]=f[0]),void 0!==o.removeListener&&this.emit("removeListener",h,b||y)}return this},L.prototype.removeAllListeners=function(h){var y,f,o;if(void 0===(f=this._events))return this;if(void 0===f.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==f[h]&&(0==--this._eventsCount?this._events=Object.create(null):delete f[h]),this;if(0===arguments.length){var a,l=Object.keys(f);for(o=0;o<l.length;++o)"removeListener"!==(a=l[o])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(y=f[h]))this.removeListener(h,y);else if(void 0!==y)for(o=y.length-1;o>=0;o--)this.removeListener(h,y[o]);return this},L.prototype.listeners=function(h){return Q(this,h,!0)},L.prototype.rawListeners=function(h){return Q(this,h,!1)},L.listenerCount=function(h,y){return"function"==typeof h.listenerCount?h.listenerCount(y):ot.call(h,y)},L.prototype.listenerCount=ot,L.prototype.eventNames=function(){return this._eventsCount>0?B(this._events):[]},"undefined"!=typeof Symbol&&(St.prototype[Symbol.iterator]=function(){return this}),St.of=function(){var h=arguments,y=h.length,f=0;return new St(function(){return f>=y?{done:!0}:{done:!1,value:h[f++]}})},St.empty=function(){return new St(function(){return{done:!0}})},St.fromSequence=function(h){var y=0,f=h.length;return new St(function(){return y>=f?{done:!0}:{done:!1,value:h[y++]}})},St.is=function(h){return h instanceof St||"object"==typeof h&&null!==h&&"function"==typeof h.next};var zt=St,Mt={};Mt.ARRAY_BUFFER_SUPPORT="undefined"!=typeof ArrayBuffer,Mt.SYMBOL_SUPPORT="undefined"!=typeof Symbol;var Lt=zt,Bt=Mt.ARRAY_BUFFER_SUPPORT,Ht=Mt.SYMBOL_SUPPORT,jt=function(h){var f,y="string"==typeof(f=h)||Array.isArray(f)||Bt&&ArrayBuffer.isView(f)?Lt.fromSequence(f):"object"!=typeof f||null===f?null:Ht&&"function"==typeof f[Symbol.iterator]?f[Symbol.iterator]():"function"==typeof f.next?f:null;if(!y)throw new Error("obliterator: target is not iterable nor a valid iterator.");return y},Ft=jt,Qt=function(h,y){for(var f,o=arguments.length>1?y:1/0,a=o!==1/0?new Array(o):[],l=0,b=Ft(h);;){if(l===o)return a;if((f=b.next()).done)return l!==y&&(a.length=l),a;a[l++]=f.value}},Wt=function(h){function y(f){var o;return(o=h.call(this)||this).name="GraphError",o.message=f,o}return N(y,h),y}(_(Error)),ft=function(h){function y(f){var o;return(o=h.call(this,f)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(E(o),y.prototype.constructor),o}return N(y,h),y}(Wt),dt=function(h){function y(f){var o;return(o=h.call(this,f)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(E(o),y.prototype.constructor),o}return N(y,h),y}(Wt),bt=function(h){function y(f){var o;return(o=h.call(this,f)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(E(o),y.prototype.constructor),o}return N(y,h),y}(Wt);function Jt(h,y){this.key=h,this.attributes=y,this.clear()}function ye(h,y){this.key=h,this.attributes=y,this.clear()}function ee(h,y){this.key=h,this.attributes=y,this.clear()}function ae(h,y,f,o,a){this.key=y,this.attributes=a,this.undirected=h,this.source=f,this.target=o}function Kt(h,y,f,o,a,l,b){var z,Y,ct,ut;if(o=""+o,0===f){if(!(z=h._nodes.get(o)))throw new dt("Graph.".concat(y,': could not find the "').concat(o,'" node in the graph.'));ct=a,ut=l}else if(3===f){if(!(Y=h._edges.get(a=""+a)))throw new dt("Graph.".concat(y,': could not find the "').concat(a,'" edge in the graph.'));var it=Y.source.key,yt=Y.target.key;if(o===it)z=Y.target;else{if(o!==yt)throw new dt("Graph.".concat(y,': the "').concat(o,'" node is not attached to the "').concat(a,'" edge (').concat(it,", ").concat(yt,")."));z=Y.source}ct=l,ut=b}else{if(!(Y=h._edges.get(o)))throw new dt("Graph.".concat(y,': could not find the "').concat(o,'" edge in the graph.'));z=1===f?Y.source:Y.target,ct=a,ut=l}return[z,ct,ut]}Jt.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}},ye.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}},ee.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}},ae.prototype.attach=function(){var h="out",y="in";this.undirected&&(h=y="undirected");var f=this.source.key,o=this.target.key;this.source[h][o]=this,this.undirected&&f===o||(this.target[y][f]=this)},ae.prototype.attachMulti=function(){var h="out",y="in",f=this.source.key,o=this.target.key;this.undirected&&(h=y="undirected");var a=this.source[h],l=a[o];if(void 0===l)return a[o]=this,void(this.undirected&&f===o||(this.target[y][f]=this));l.previous=this,this.next=l,a[o]=this,this.target[y][f]=this},ae.prototype.detach=function(){var h=this.source.key,f="out",o="in";this.undirected&&(f=o="undirected"),delete this.source[f][this.target.key],delete this.target[o][h]},ae.prototype.detachMulti=function(){var h=this.source.key,y=this.target.key,f="out",o="in";this.undirected&&(f=o="undirected"),void 0===this.previous?void 0===this.next?(delete this.source[f][y],delete this.target[o][h]):(this.next.previous=void 0,this.source[f][y]=this.next,this.target[o][h]=this.next):(this.previous.next=this.next,void 0!==this.next&&(this.next.previous=this.previous))};var Ne=[{name:function(h){return"get".concat(h,"Attribute")},attacher:function(h,y,f){h.prototype[y]=function(o,a,l){var b=Kt(this,y,f,o,a,l);return b[0].attributes[b[1]]}}},{name:function(h){return"get".concat(h,"Attributes")},attacher:function(h,y,f){h.prototype[y]=function(o,a){return Kt(this,y,f,o,a)[0].attributes}}},{name:function(h){return"has".concat(h,"Attribute")},attacher:function(h,y,f){h.prototype[y]=function(o,a,l){var b=Kt(this,y,f,o,a,l);return b[0].attributes.hasOwnProperty(b[1])}}},{name:function(h){return"set".concat(h,"Attribute")},attacher:function(h,y,f){h.prototype[y]=function(o,a,l,b){var z=Kt(this,y,f,o,a,l,b),Y=z[0],ct=z[1];return Y.attributes[ct]=z[2],this.emit("nodeAttributesUpdated",{key:Y.key,type:"set",attributes:Y.attributes,name:ct}),this}}},{name:function(h){return"update".concat(h,"Attribute")},attacher:function(h,y,f){h.prototype[y]=function(o,a,l,b){var z=Kt(this,y,f,o,a,l,b),Y=z[0],ct=z[1],ut=z[2];if("function"!=typeof ut)throw new ft("Graph.".concat(y,": updater should be a function."));var it=Y.attributes,yt=ut(it[ct]);return it[ct]=yt,this.emit("nodeAttributesUpdated",{key:Y.key,type:"set",attributes:Y.attributes,name:ct}),this}}},{name:function(h){return"remove".concat(h,"Attribute")},attacher:function(h,y,f){h.prototype[y]=function(o,a,l){var b=Kt(this,y,f,o,a,l),z=b[0],Y=b[1];return delete z.attributes[Y],this.emit("nodeAttributesUpdated",{key:z.key,type:"remove",attributes:z.attributes,name:Y}),this}}},{name:function(h){return"replace".concat(h,"Attributes")},attacher:function(h,y,f){h.prototype[y]=function(o,a,l){var b=Kt(this,y,f,o,a,l),z=b[0],Y=b[1];if(!d(Y))throw new ft("Graph.".concat(y,": provided attributes are not a plain object."));return z.attributes=Y,this.emit("nodeAttributesUpdated",{key:z.key,type:"replace",attributes:z.attributes}),this}}},{name:function(h){return"merge".concat(h,"Attributes")},attacher:function(h,y,f){h.prototype[y]=function(o,a,l){var b=Kt(this,y,f,o,a,l),z=b[0],Y=b[1];if(!d(Y))throw new ft("Graph.".concat(y,": provided attributes are not a plain object."));return C(z.attributes,Y),this.emit("nodeAttributesUpdated",{key:z.key,type:"merge",attributes:z.attributes,data:Y}),this}}},{name:function(h){return"update".concat(h,"Attributes")},attacher:function(h,y,f){h.prototype[y]=function(o,a,l){var b=Kt(this,y,f,o,a,l),z=b[0],Y=b[1];if("function"!=typeof Y)throw new ft("Graph.".concat(y,": provided updater is not a function."));return z.attributes=Y(z.attributes),this.emit("nodeAttributesUpdated",{key:z.key,type:"update",attributes:z.attributes}),this}}}],tn=[{name:function(h){return"get".concat(h,"Attribute")},attacher:function(h,y,f){h.prototype[y]=function(o,a){var l;if("mixed"!==this.type&&"mixed"!==f&&f!==this.type)throw new bt("Graph.".concat(y,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new bt("Graph.".concat(y,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var b=""+o,z=""+a;if(a=arguments[2],!(l=g(this,b,z,f)))throw new dt("Graph.".concat(y,': could not find an edge for the given path ("').concat(b,'" - "').concat(z,'").'))}else{if("mixed"!==f)throw new bt("Graph.".concat(y,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(l=this._edges.get(o=""+o)))throw new dt("Graph.".concat(y,': could not find the "').concat(o,'" edge in the graph.'))}return l.attributes[a]}}},{name:function(h){return"get".concat(h,"Attributes")},attacher:function(h,y,f){h.prototype[y]=function(o){var a;if("mixed"!==this.type&&"mixed"!==f&&f!==this.type)throw new bt("Graph.".concat(y,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new bt("Graph.".concat(y,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var l=""+o,b=""+arguments[1];if(!(a=g(this,l,b,f)))throw new dt("Graph.".concat(y,': could not find an edge for the given path ("').concat(l,'" - "').concat(b,'").'))}else{if("mixed"!==f)throw new bt("Graph.".concat(y,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(a=this._edges.get(o=""+o)))throw new dt("Graph.".concat(y,': could not find the "').concat(o,'" edge in the graph.'))}return a.attributes}}},{name:function(h){return"has".concat(h,"Attribute")},attacher:function(h,y,f){h.prototype[y]=function(o,a){var l;if("mixed"!==this.type&&"mixed"!==f&&f!==this.type)throw new bt("Graph.".concat(y,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new bt("Graph.".concat(y,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var b=""+o,z=""+a;if(a=arguments[2],!(l=g(this,b,z,f)))throw new dt("Graph.".concat(y,': could not find an edge for the given path ("').concat(b,'" - "').concat(z,'").'))}else{if("mixed"!==f)throw new bt("Graph.".concat(y,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(l=this._edges.get(o=""+o)))throw new dt("Graph.".concat(y,': could not find the "').concat(o,'" edge in the graph.'))}return l.attributes.hasOwnProperty(a)}}},{name:function(h){return"set".concat(h,"Attribute")},attacher:function(h,y,f){h.prototype[y]=function(o,a,l){var b;if("mixed"!==this.type&&"mixed"!==f&&f!==this.type)throw new bt("Graph.".concat(y,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new bt("Graph.".concat(y,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var z=""+o,Y=""+a;if(a=arguments[2],l=arguments[3],!(b=g(this,z,Y,f)))throw new dt("Graph.".concat(y,': could not find an edge for the given path ("').concat(z,'" - "').concat(Y,'").'))}else{if("mixed"!==f)throw new bt("Graph.".concat(y,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(b=this._edges.get(o=""+o)))throw new dt("Graph.".concat(y,': could not find the "').concat(o,'" edge in the graph.'))}return b.attributes[a]=l,this.emit("edgeAttributesUpdated",{key:b.key,type:"set",attributes:b.attributes,name:a}),this}}},{name:function(h){return"update".concat(h,"Attribute")},attacher:function(h,y,f){h.prototype[y]=function(o,a,l){var b;if("mixed"!==this.type&&"mixed"!==f&&f!==this.type)throw new bt("Graph.".concat(y,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new bt("Graph.".concat(y,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var z=""+o,Y=""+a;if(a=arguments[2],l=arguments[3],!(b=g(this,z,Y,f)))throw new dt("Graph.".concat(y,': could not find an edge for the given path ("').concat(z,'" - "').concat(Y,'").'))}else{if("mixed"!==f)throw new bt("Graph.".concat(y,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(b=this._edges.get(o=""+o)))throw new dt("Graph.".concat(y,': could not find the "').concat(o,'" edge in the graph.'))}if("function"!=typeof l)throw new ft("Graph.".concat(y,": updater should be a function."));return b.attributes[a]=l(b.attributes[a]),this.emit("edgeAttributesUpdated",{key:b.key,type:"set",attributes:b.attributes,name:a}),this}}},{name:function(h){return"remove".concat(h,"Attribute")},attacher:function(h,y,f){h.prototype[y]=function(o,a){var l;if("mixed"!==this.type&&"mixed"!==f&&f!==this.type)throw new bt("Graph.".concat(y,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new bt("Graph.".concat(y,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var b=""+o,z=""+a;if(a=arguments[2],!(l=g(this,b,z,f)))throw new dt("Graph.".concat(y,': could not find an edge for the given path ("').concat(b,'" - "').concat(z,'").'))}else{if("mixed"!==f)throw new bt("Graph.".concat(y,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(l=this._edges.get(o=""+o)))throw new dt("Graph.".concat(y,': could not find the "').concat(o,'" edge in the graph.'))}return delete l.attributes[a],this.emit("edgeAttributesUpdated",{key:l.key,type:"remove",attributes:l.attributes,name:a}),this}}},{name:function(h){return"replace".concat(h,"Attributes")},attacher:function(h,y,f){h.prototype[y]=function(o,a){var l;if("mixed"!==this.type&&"mixed"!==f&&f!==this.type)throw new bt("Graph.".concat(y,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new bt("Graph.".concat(y,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var b=""+o,z=""+a;if(a=arguments[2],!(l=g(this,b,z,f)))throw new dt("Graph.".concat(y,': could not find an edge for the given path ("').concat(b,'" - "').concat(z,'").'))}else{if("mixed"!==f)throw new bt("Graph.".concat(y,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(l=this._edges.get(o=""+o)))throw new dt("Graph.".concat(y,': could not find the "').concat(o,'" edge in the graph.'))}if(!d(a))throw new ft("Graph.".concat(y,": provided attributes are not a plain object."));return l.attributes=a,this.emit("edgeAttributesUpdated",{key:l.key,type:"replace",attributes:l.attributes}),this}}},{name:function(h){return"merge".concat(h,"Attributes")},attacher:function(h,y,f){h.prototype[y]=function(o,a){var l;if("mixed"!==this.type&&"mixed"!==f&&f!==this.type)throw new bt("Graph.".concat(y,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new bt("Graph.".concat(y,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var b=""+o,z=""+a;if(a=arguments[2],!(l=g(this,b,z,f)))throw new dt("Graph.".concat(y,': could not find an edge for the given path ("').concat(b,'" - "').concat(z,'").'))}else{if("mixed"!==f)throw new bt("Graph.".concat(y,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(l=this._edges.get(o=""+o)))throw new dt("Graph.".concat(y,': could not find the "').concat(o,'" edge in the graph.'))}if(!d(a))throw new ft("Graph.".concat(y,": provided attributes are not a plain object."));return C(l.attributes,a),this.emit("edgeAttributesUpdated",{key:l.key,type:"merge",attributes:l.attributes,data:a}),this}}},{name:function(h){return"update".concat(h,"Attributes")},attacher:function(h,y,f){h.prototype[y]=function(o,a){var l;if("mixed"!==this.type&&"mixed"!==f&&f!==this.type)throw new bt("Graph.".concat(y,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new bt("Graph.".concat(y,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var b=""+o,z=""+a;if(a=arguments[2],!(l=g(this,b,z,f)))throw new dt("Graph.".concat(y,': could not find an edge for the given path ("').concat(b,'" - "').concat(z,'").'))}else{if("mixed"!==f)throw new bt("Graph.".concat(y,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(l=this._edges.get(o=""+o)))throw new dt("Graph.".concat(y,': could not find the "').concat(o,'" edge in the graph.'))}if("function"!=typeof a)throw new ft("Graph.".concat(y,": provided updater is not a function."));return l.attributes=a(l.attributes),this.emit("edgeAttributesUpdated",{key:l.key,type:"update",attributes:l.attributes}),this}}}],Me=zt,ke=jt,xe=function(){var h=arguments,y=null,f=-1;return new Me(function(){for(var o=null;;){if(null===y){if(++f>=h.length)return{done:!0};y=ke(h[f])}if(!0!==(o=y.next()).done)break;y=null}return o})},Tr=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Cn(h,y,f,o){var a=!1;for(var l in y)if(l!==o){var b=y[l];if(a=f(b.key,b.attributes,b.source.key,b.target.key,b.source.attributes,b.target.attributes,b.undirected),h&&a)return b.key}}function $n(h,y,f,o){var a,l,b,z=!1;for(var Y in y)if(Y!==o){a=y[Y];do{if(z=f(a.key,a.attributes,(l=a.source).key,(b=a.target).key,l.attributes,b.attributes,a.undirected),h&&z)return a.key;a=a.next}while(void 0!==a)}}function en(h,y){var f,o=Object.keys(h),a=o.length,l=0;return new zt(function(){do{if(f)f=f.next;else{if(l>=a)return{done:!0};var b=o[l++];if(b===y){f=void 0;continue}f=h[b]}}while(!f);return{done:!1,value:{edge:f.key,attributes:f.attributes,source:f.source.key,target:f.target.key,sourceAttributes:f.source.attributes,targetAttributes:f.target.attributes,undirected:f.undirected}}})}function Xn(h,y,f,o){var a=y[f];if(a){var l=a.source,b=a.target;return o(a.key,a.attributes,l.key,b.key,l.attributes,b.attributes,a.undirected)&&h?a.key:void 0}}function Or(h,y,f,o){var a=y[f];if(a){var l=!1;do{if(l=o(a.key,a.attributes,a.source.key,a.target.key,a.source.attributes,a.target.attributes,a.undirected),h&&l)return a.key;a=a.next}while(void 0!==a)}}function Oe(h,y){var f=h[y];return void 0!==f.next?new zt(function(){if(!f)return{done:!0};var o={edge:f.key,attributes:f.attributes,source:f.source.key,target:f.target.key,sourceAttributes:f.source.attributes,targetAttributes:f.target.attributes,undirected:f.undirected};return f=f.next,{done:!1,value:o}}):zt.of({edge:f.key,attributes:f.attributes,source:f.source.key,target:f.target.key,sourceAttributes:f.source.attributes,targetAttributes:f.target.attributes,undirected:f.undirected})}function nn(h,y){if(0===h.size)return[];if("mixed"===y||y===h.type)return"function"==typeof Array.from?Array.from(h._edges.keys()):Qt(h._edges.keys(),h._edges.size);for(var f,o,l=new Array("undirected"===y?h.undirectedSize:h.directedSize),b="undirected"===y,z=h._edges.values(),Y=0;!0!==(f=z.next()).done;)(o=f.value).undirected===b&&(l[Y++]=o.key);return l}function rn(h,y,f,o){if(0!==y.size)for(var a,l,b="mixed"!==f&&f!==y.type,z="undirected"===f,Y=!1,ct=y._edges.values();!0!==(a=ct.next()).done;)if(l=a.value,!b||l.undirected===z){var it=l.key,mt=l.source,Gt=l.target;if(Y=o(it,l.attributes,mt.key,Gt.key,mt.attributes,Gt.attributes,l.undirected),h&&Y)return it}}function Ze(h,y){if(0===h.size)return zt.empty();var f="mixed"!==y&&y!==h.type,o="undirected"===y,a=h._edges.values();return new zt(function(){for(var l,b;;){if((l=a.next()).done)return l;if(b=l.value,!f||b.undirected===o)break}return{value:{edge:b.key,attributes:b.attributes,source:b.source.key,target:b.target.key,sourceAttributes:b.source.attributes,targetAttributes:b.target.attributes,undirected:b.undirected},done:!1}})}function on(h,y,f,o,a,l){var b,z=y?$n:Cn;if("undirected"!==f&&("out"!==o&&(b=z(h,a.in,l),h&&b)||"in"!==o&&(b=z(h,a.out,l,o?void 0:a.key),h&&b))||"directed"!==f&&(b=z(h,a.undirected,l),h&&b))return b}function Ur(h,y,f,o){var a=[];return on(!1,h,y,f,o,function(l){a.push(l)}),a}function Pr(h,y,f){var o=zt.empty();return"undirected"!==h&&("out"!==y&&void 0!==f.in&&(o=xe(o,en(f.in))),"in"!==y&&void 0!==f.out&&(o=xe(o,en(f.out,y?void 0:f.key)))),"directed"!==h&&void 0!==f.undirected&&(o=xe(o,en(f.undirected))),o}function Sn(h,y,f,o,a,l,b){var z,Y=f?Or:Xn;if("undirected"!==y&&(void 0!==a.in&&"out"!==o&&(z=Y(h,a.in,l,b),h&&z)||void 0!==a.out&&"in"!==o&&(o||a.key!==l)&&(z=Y(h,a.out,l,b),h&&z))||"directed"!==y&&void 0!==a.undirected&&(z=Y(h,a.undirected,l,b),h&&z))return z}function Rr(h,y,f,o,a){var l=[];return Sn(!1,h,y,f,o,a,function(b){l.push(b)}),l}function jr(h,y,f,o){var a=zt.empty();return"undirected"!==h&&(void 0!==f.in&&"out"!==y&&o in f.in&&(a=xe(a,Oe(f.in,o))),void 0!==f.out&&"in"!==y&&o in f.out&&(y||f.key!==o)&&(a=xe(a,Oe(f.out,o)))),"directed"!==h&&void 0!==f.undirected&&o in f.undirected&&(a=xe(a,Oe(f.undirected,o))),a}var sn=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function an(){this.A=null,this.B=null}function Fe(h,y,f,o,a){for(var l in o){var b=o[l],z=b.source,ct=z===f?b.target:z;if(!y||!y.has(ct.key)){var ut=a(ct.key,ct.attributes);if(h&&ut)return ct.key}}}function un(h,y,f,o,a){if("mixed"!==y){if("undirected"===y)return Fe(h,null,o,o.undirected,a);if("string"==typeof f)return Fe(h,null,o,o[f],a)}var l,b=new an;if("undirected"!==y){if("out"!==f){if(l=Fe(h,null,o,o.in,a),h&&l)return l;b.wrap(o.in)}if("in"!==f){if(l=Fe(h,b,o,o.out,a),h&&l)return l;b.wrap(o.out)}}if("directed"!==y&&(l=Fe(h,b,o,o.undirected,a),h&&l))return l}function De(h,y,f){var o=Object.keys(f),a=o.length,l=0;return new zt(function(){var b=null;do{if(l>=a)return h&&h.wrap(f),{done:!0};var z=f[o[l++]],Y=z.source;b=Y===y?z.target:Y,h&&h.has(b.key)&&(b=null)}while(null===b);return{done:!1,value:{neighbor:b.key,attributes:b.attributes}}})}function cn(h,y,f,o,a){for(var l,b,z,Y,ct,ut,it,yt=o._nodes.values(),mt=o.type;!0!==(l=yt.next()).done;){var Gt=!1;if(b=l.value,"undirected"!==mt)for(z in Y=b.out){ct=Y[z];do{if(Gt=!0,it=a(b.key,(ut=ct.target).key,b.attributes,ut.attributes,ct.key,ct.attributes,ct.undirected),h&&it)return ct;ct=ct.next}while(ct)}if("directed"!==mt)for(z in Y=b.undirected)if(!(y&&b.key>z)){ct=Y[z];do{if((ut=ct.target).key!==z&&(ut=ct.source),Gt=!0,it=a(b.key,ut.key,b.attributes,ut.attributes,ct.key,ct.attributes,ct.undirected),h&&it)return ct;ct=ct.next}while(ct)}if(f&&!Gt&&(it=a(b.key,null,b.attributes,null,null,null,null),h&&it))return null}}function Br(h){if(!d(h))throw new ft('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in h))throw new ft("Graph.import: serialized node is missing its key.");if("attributes"in h&&(!d(h.attributes)||null===h.attributes))throw new ft("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Zr(h){if(!d(h))throw new ft('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in h))throw new ft("Graph.import: serialized edge is missing its source.");if(!("target"in h))throw new ft("Graph.import: serialized edge is missing its target.");if("attributes"in h&&(!d(h.attributes)||null===h.attributes))throw new ft("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in h&&"boolean"!=typeof h.undirected)throw new ft("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}an.prototype.wrap=function(h){null===this.A?this.A=h:null===this.B&&(this.B=h)},an.prototype.has=function(h){return null!==this.A&&h in this.A||null!==this.B&&h in this.B};var Mn,Fr=(Mn=255&Math.floor(256*Math.random()),function(){return Mn++}),Yr=new Set(["directed","undirected","mixed"]),Dn=new Set(["domain","_events","_eventsCount","_maxListeners"]),Vn={allowSelfLoops:!0,multi:!1,type:"mixed"};function Hn(h,y,f){var o=new h.NodeDataClass(y,f);return h._nodes.set(y,o),h.emit("nodeAdded",{key:y,attributes:f}),o}function Kn(h,y,f,o,a,l,b,z){if(!o&&"undirected"===h.type)throw new bt("Graph.".concat(y,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(o&&"directed"===h.type)throw new bt("Graph.".concat(y,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(z&&!d(z))throw new ft("Graph.".concat(y,': invalid attributes. Expecting an object but got "').concat(z,'"'));if(l=""+l,b=""+b,z=z||{},!h.allowSelfLoops&&l===b)throw new bt("Graph.".concat(y,': source & target are the same ("').concat(l,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var Y=h._nodes.get(l),ct=h._nodes.get(b);if(!Y)throw new dt("Graph.".concat(y,': source node "').concat(l,'" not found.'));if(!ct)throw new dt("Graph.".concat(y,': target node "').concat(b,'" not found.'));var ut={key:null,undirected:o,source:l,target:b,attributes:z};if(f)a=h._edgeKeyGenerator();else if(h._edges.has(a=""+a))throw new bt("Graph.".concat(y,': the "').concat(a,'" edge already exists in the graph.'));if(!h.multi&&(o?void 0!==Y.undirected[b]:void 0!==Y.out[b]))throw new bt("Graph.".concat(y,': an edge linking "').concat(l,'" to "').concat(b,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var it=new ae(o,a,Y,ct,z);h._edges.set(a,it);var yt=l===b;return o?(Y.undirectedDegree++,ct.undirectedDegree++,yt&&(Y.undirectedLoops++,h._undirectedSelfLoopCount++)):(Y.outDegree++,ct.inDegree++,yt&&(Y.directedLoops++,h._directedSelfLoopCount++)),h.multi?it.attachMulti():it.attach(),o?h._undirectedSize++:h._directedSize++,ut.key=a,h.emit("edgeAdded",ut),a}function $r(h,y,f,o,a,l,b,z,Y){if(!o&&"undirected"===h.type)throw new bt("Graph.".concat(y,": you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead."));if(o&&"directed"===h.type)throw new bt("Graph.".concat(y,": you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead."));if(z)if(Y){if("function"!=typeof z)throw new ft("Graph.".concat(y,': invalid updater function. Expecting a function but got "').concat(z,'"'))}else if(!d(z))throw new ft("Graph.".concat(y,': invalid attributes. Expecting an object but got "').concat(z,'"'));var ct;if(l=""+l,b=""+b,Y&&(ct=z,z=void 0),!h.allowSelfLoops&&l===b)throw new bt("Graph.".concat(y,': source & target are the same ("').concat(l,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var ut,it,yt=h._nodes.get(l),mt=h._nodes.get(b);if(!f&&(ut=h._edges.get(a))){if(!(ut.source.key===l&&ut.target.key===b||o&&ut.source.key===b&&ut.target.key===l))throw new bt("Graph.".concat(y,': inconsistency detected when attempting to merge the "').concat(a,'" edge with "').concat(l,'" source & "').concat(b,'" target vs. ("').concat(ut.source.key,'", "').concat(ut.target.key,'").'));it=ut}if(it||h.multi||!yt||(it=o?yt.undirected[b]:yt.out[b]),it){var Gt=[it.key,!1,!1,!1];return(Y?ct:z)?(Y?(it.attributes=ct(it.attributes),h.emit("edgeAttributesUpdated",{type:"replace",key:it.key,attributes:it.attributes})):(C(it.attributes,z),h.emit("edgeAttributesUpdated",{type:"merge",key:it.key,attributes:it.attributes,data:z})),Gt):Gt}z=z||{},Y&&ct&&(z=ct(z));var Xt={key:null,undirected:o,source:l,target:b,attributes:z};if(f)a=h._edgeKeyGenerator();else if(h._edges.has(a=""+a))throw new bt("Graph.".concat(y,': the "').concat(a,'" edge already exists in the graph.'));var ne=!1,te=!1;yt||(yt=Hn(h,l,{}),ne=!0,l===b&&(mt=yt,te=!0)),mt||(mt=Hn(h,b,{}),te=!0),ut=new ae(o,a,yt,mt,z),h._edges.set(a,ut);var se=l===b;return o?(yt.undirectedDegree++,mt.undirectedDegree++,se&&(yt.undirectedLoops++,h._undirectedSelfLoopCount++)):(yt.outDegree++,mt.inDegree++,se&&(yt.directedLoops++,h._directedSelfLoopCount++)),h.multi?ut.attachMulti():ut.attach(),o?h._undirectedSize++:h._directedSize++,Xt.key=a,h.emit("edgeAdded",Xt),[a,!0,ne,te]}function Ue(h,y){h._edges.delete(y.key);var f=y.source,o=y.target,a=y.attributes,l=y.undirected,b=f===o;l?(f.undirectedDegree--,o.undirectedDegree--,b&&(f.undirectedLoops--,h._undirectedSelfLoopCount--)):(f.outDegree--,o.inDegree--,b&&(f.directedLoops--,h._directedSelfLoopCount--)),h.multi?y.detachMulti():y.detach(),l?h._undirectedSize--:h._directedSize--,h.emit("edgeDropped",{key:y.key,attributes:a,source:f.key,target:o.key,undirected:l})}var h,$t=function(h){function y(o){var a;if(a=h.call(this)||this,"boolean"!=typeof(o=C({},Vn,o)).multi)throw new ft("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(o.multi,'".'));if(!Yr.has(o.type))throw new ft('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(o.type,'".'));if("boolean"!=typeof o.allowSelfLoops)throw new ft("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(o.allowSelfLoops,'".'));var l="mixed"===o.type?Jt:"directed"===o.type?ye:ee;A(E(a),"NodeDataClass",l);var b="geid_"+Fr()+"_",z=0;return A(E(a),"_attributes",{}),A(E(a),"_nodes",new Map),A(E(a),"_edges",new Map),A(E(a),"_directedSize",0),A(E(a),"_undirectedSize",0),A(E(a),"_directedSelfLoopCount",0),A(E(a),"_undirectedSelfLoopCount",0),A(E(a),"_edgeKeyGenerator",function(){var Y;do{Y=b+z++}while(a._edges.has(Y));return Y}),A(E(a),"_options",o),Dn.forEach(function(Y){return A(E(a),Y,a[Y])}),x(E(a),"order",function(){return a._nodes.size}),x(E(a),"size",function(){return a._edges.size}),x(E(a),"directedSize",function(){return a._directedSize}),x(E(a),"undirectedSize",function(){return a._undirectedSize}),x(E(a),"selfLoopCount",function(){return a._directedSelfLoopCount+a._undirectedSelfLoopCount}),x(E(a),"directedSelfLoopCount",function(){return a._directedSelfLoopCount}),x(E(a),"undirectedSelfLoopCount",function(){return a._undirectedSelfLoopCount}),x(E(a),"multi",a._options.multi),x(E(a),"type",a._options.type),x(E(a),"allowSelfLoops",a._options.allowSelfLoops),x(E(a),"implementation",function(){return"graphology"}),a}N(y,h);var f=y.prototype;return f._resetInstanceCounters=function(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0},f.hasNode=function(o){return this._nodes.has(""+o)},f.hasDirectedEdge=function(o,a){if("undirected"===this.type)return!1;if(1===arguments.length){var b=this._edges.get(""+o);return!!b&&!b.undirected}if(2===arguments.length){a=""+a;var z=this._nodes.get(o=""+o);return!!z&&z.out.hasOwnProperty(a)}throw new ft("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},f.hasUndirectedEdge=function(o,a){if("directed"===this.type)return!1;if(1===arguments.length){var b=this._edges.get(""+o);return!!b&&b.undirected}if(2===arguments.length){a=""+a;var z=this._nodes.get(o=""+o);return!!z&&z.undirected.hasOwnProperty(a)}throw new ft("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},f.hasEdge=function(o,a){if(1===arguments.length)return this._edges.has(""+o);if(2===arguments.length){a=""+a;var b=this._nodes.get(o=""+o);return!!b&&(void 0!==b.out&&b.out.hasOwnProperty(a)||void 0!==b.undirected&&b.undirected.hasOwnProperty(a))}throw new ft("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},f.directedEdge=function(o,a){if("undirected"!==this.type){if(o=""+o,a=""+a,this.multi)throw new bt("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var l=this._nodes.get(o);if(!l)throw new dt('Graph.directedEdge: could not find the "'.concat(o,'" source node in the graph.'));if(!this._nodes.has(a))throw new dt('Graph.directedEdge: could not find the "'.concat(a,'" target node in the graph.'));var b=l.out&&l.out[a]||void 0;return b?b.key:void 0}},f.undirectedEdge=function(o,a){if("directed"!==this.type){if(o=""+o,a=""+a,this.multi)throw new bt("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var l=this._nodes.get(o);if(!l)throw new dt('Graph.undirectedEdge: could not find the "'.concat(o,'" source node in the graph.'));if(!this._nodes.has(a))throw new dt('Graph.undirectedEdge: could not find the "'.concat(a,'" target node in the graph.'));var b=l.undirected&&l.undirected[a]||void 0;return b?b.key:void 0}},f.edge=function(o,a){if(this.multi)throw new bt("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");a=""+a;var l=this._nodes.get(o=""+o);if(!l)throw new dt('Graph.edge: could not find the "'.concat(o,'" source node in the graph.'));if(!this._nodes.has(a))throw new dt('Graph.edge: could not find the "'.concat(a,'" target node in the graph.'));var b=l.out&&l.out[a]||l.undirected&&l.undirected[a]||void 0;if(b)return b.key},f.areDirectedNeighbors=function(o,a){a=""+a;var l=this._nodes.get(o=""+o);if(!l)throw new dt('Graph.areDirectedNeighbors: could not find the "'.concat(o,'" node in the graph.'));return"undirected"!==this.type&&(a in l.in||a in l.out)},f.areOutNeighbors=function(o,a){a=""+a;var l=this._nodes.get(o=""+o);if(!l)throw new dt('Graph.areOutNeighbors: could not find the "'.concat(o,'" node in the graph.'));return"undirected"!==this.type&&a in l.out},f.areInNeighbors=function(o,a){a=""+a;var l=this._nodes.get(o=""+o);if(!l)throw new dt('Graph.areInNeighbors: could not find the "'.concat(o,'" node in the graph.'));return"undirected"!==this.type&&a in l.in},f.areUndirectedNeighbors=function(o,a){a=""+a;var l=this._nodes.get(o=""+o);if(!l)throw new dt('Graph.areUndirectedNeighbors: could not find the "'.concat(o,'" node in the graph.'));return"directed"!==this.type&&a in l.undirected},f.areNeighbors=function(o,a){a=""+a;var l=this._nodes.get(o=""+o);if(!l)throw new dt('Graph.areNeighbors: could not find the "'.concat(o,'" node in the graph.'));return"undirected"!==this.type&&(a in l.in||a in l.out)||"directed"!==this.type&&a in l.undirected},f.areInboundNeighbors=function(o,a){a=""+a;var l=this._nodes.get(o=""+o);if(!l)throw new dt('Graph.areInboundNeighbors: could not find the "'.concat(o,'" node in the graph.'));return"undirected"!==this.type&&a in l.in||"directed"!==this.type&&a in l.undirected},f.areOutboundNeighbors=function(o,a){a=""+a;var l=this._nodes.get(o=""+o);if(!l)throw new dt('Graph.areOutboundNeighbors: could not find the "'.concat(o,'" node in the graph.'));return"undirected"!==this.type&&a in l.out||"directed"!==this.type&&a in l.undirected},f.inDegree=function(o){var a=this._nodes.get(o=""+o);if(!a)throw new dt('Graph.inDegree: could not find the "'.concat(o,'" node in the graph.'));return"undirected"===this.type?0:a.inDegree},f.outDegree=function(o){var a=this._nodes.get(o=""+o);if(!a)throw new dt('Graph.outDegree: could not find the "'.concat(o,'" node in the graph.'));return"undirected"===this.type?0:a.outDegree},f.directedDegree=function(o){var a=this._nodes.get(o=""+o);if(!a)throw new dt('Graph.directedDegree: could not find the "'.concat(o,'" node in the graph.'));return"undirected"===this.type?0:a.inDegree+a.outDegree},f.undirectedDegree=function(o){var a=this._nodes.get(o=""+o);if(!a)throw new dt('Graph.undirectedDegree: could not find the "'.concat(o,'" node in the graph.'));return"directed"===this.type?0:a.undirectedDegree},f.inboundDegree=function(o){var a=this._nodes.get(o=""+o);if(!a)throw new dt('Graph.inboundDegree: could not find the "'.concat(o,'" node in the graph.'));var l=0;return"directed"!==this.type&&(l+=a.undirectedDegree),"undirected"!==this.type&&(l+=a.inDegree),l},f.outboundDegree=function(o){var a=this._nodes.get(o=""+o);if(!a)throw new dt('Graph.outboundDegree: could not find the "'.concat(o,'" node in the graph.'));var l=0;return"directed"!==this.type&&(l+=a.undirectedDegree),"undirected"!==this.type&&(l+=a.outDegree),l},f.degree=function(o){var a=this._nodes.get(o=""+o);if(!a)throw new dt('Graph.degree: could not find the "'.concat(o,'" node in the graph.'));var l=0;return"directed"!==this.type&&(l+=a.undirectedDegree),"undirected"!==this.type&&(l+=a.inDegree+a.outDegree),l},f.inDegreeWithoutSelfLoops=function(o){var a=this._nodes.get(o=""+o);if(!a)throw new dt('Graph.inDegreeWithoutSelfLoops: could not find the "'.concat(o,'" node in the graph.'));return"undirected"===this.type?0:a.inDegree-a.directedLoops},f.outDegreeWithoutSelfLoops=function(o){var a=this._nodes.get(o=""+o);if(!a)throw new dt('Graph.outDegreeWithoutSelfLoops: could not find the "'.concat(o,'" node in the graph.'));return"undirected"===this.type?0:a.outDegree-a.directedLoops},f.directedDegreeWithoutSelfLoops=function(o){var a=this._nodes.get(o=""+o);if(!a)throw new dt('Graph.directedDegreeWithoutSelfLoops: could not find the "'.concat(o,'" node in the graph.'));return"undirected"===this.type?0:a.inDegree+a.outDegree-2*a.directedLoops},f.undirectedDegreeWithoutSelfLoops=function(o){var a=this._nodes.get(o=""+o);if(!a)throw new dt('Graph.undirectedDegreeWithoutSelfLoops: could not find the "'.concat(o,'" node in the graph.'));return"directed"===this.type?0:a.undirectedDegree-2*a.undirectedLoops},f.inboundDegreeWithoutSelfLoops=function(o){var a=this._nodes.get(o=""+o);if(!a)throw new dt('Graph.inboundDegreeWithoutSelfLoops: could not find the "'.concat(o,'" node in the graph.'));var l=0,b=0;return"directed"!==this.type&&(l+=a.undirectedDegree,b+=2*a.undirectedLoops),"undirected"!==this.type&&(l+=a.inDegree,b+=a.directedLoops),l-b},f.outboundDegreeWithoutSelfLoops=function(o){var a=this._nodes.get(o=""+o);if(!a)throw new dt('Graph.outboundDegreeWithoutSelfLoops: could not find the "'.concat(o,'" node in the graph.'));var l=0,b=0;return"directed"!==this.type&&(l+=a.undirectedDegree,b+=2*a.undirectedLoops),"undirected"!==this.type&&(l+=a.outDegree,b+=a.directedLoops),l-b},f.degreeWithoutSelfLoops=function(o){var a=this._nodes.get(o=""+o);if(!a)throw new dt('Graph.degreeWithoutSelfLoops: could not find the "'.concat(o,'" node in the graph.'));var l=0,b=0;return"directed"!==this.type&&(l+=a.undirectedDegree,b+=2*a.undirectedLoops),"undirected"!==this.type&&(l+=a.inDegree+a.outDegree,b+=2*a.directedLoops),l-b},f.source=function(o){var a=this._edges.get(o=""+o);if(!a)throw new dt('Graph.source: could not find the "'.concat(o,'" edge in the graph.'));return a.source.key},f.target=function(o){var a=this._edges.get(o=""+o);if(!a)throw new dt('Graph.target: could not find the "'.concat(o,'" edge in the graph.'));return a.target.key},f.extremities=function(o){var a=this._edges.get(o=""+o);if(!a)throw new dt('Graph.extremities: could not find the "'.concat(o,'" edge in the graph.'));return[a.source.key,a.target.key]},f.opposite=function(o,a){o=""+o;var l=this._edges.get(a=""+a);if(!l)throw new dt('Graph.opposite: could not find the "'.concat(a,'" edge in the graph.'));var b=l.source.key,z=l.target.key;if(o===b)return z;if(o===z)return b;throw new dt('Graph.opposite: the "'.concat(o,'" node is not attached to the "').concat(a,'" edge (').concat(b,", ").concat(z,")."))},f.hasExtremity=function(o,a){a=""+a;var l=this._edges.get(o=""+o);if(!l)throw new dt('Graph.hasExtremity: could not find the "'.concat(o,'" edge in the graph.'));return l.source.key===a||l.target.key===a},f.isUndirected=function(o){var a=this._edges.get(o=""+o);if(!a)throw new dt('Graph.isUndirected: could not find the "'.concat(o,'" edge in the graph.'));return a.undirected},f.isDirected=function(o){var a=this._edges.get(o=""+o);if(!a)throw new dt('Graph.isDirected: could not find the "'.concat(o,'" edge in the graph.'));return!a.undirected},f.isSelfLoop=function(o){var a=this._edges.get(o=""+o);if(!a)throw new dt('Graph.isSelfLoop: could not find the "'.concat(o,'" edge in the graph.'));return a.source===a.target},f.addNode=function(o,a){return function(b,z,Y){if(Y&&!d(Y))throw new ft('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(Y,'"'));if(Y=Y||{},b._nodes.has(z=""+z))throw new bt('Graph.addNode: the "'.concat(z,'" node already exist in the graph.'));var ct=new b.NodeDataClass(z,Y);return b._nodes.set(z,ct),b.emit("nodeAdded",{key:z,attributes:Y}),ct}(this,o,a).key},f.mergeNode=function(o,a){if(a&&!d(a))throw new ft('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(a,'"'));a=a||{};var l=this._nodes.get(o=""+o);return l?(a&&(C(l.attributes,a),this.emit("nodeAttributesUpdated",{type:"merge",key:o,attributes:l.attributes,data:a})),[o,!1]):(l=new this.NodeDataClass(o,a),this._nodes.set(o,l),this.emit("nodeAdded",{key:o,attributes:a}),[o,!0])},f.updateNode=function(o,a){if(a&&"function"!=typeof a)throw new ft('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(a,'"'));var l=this._nodes.get(o=""+o);if(l)return a&&(l.attributes=a(l.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:o,attributes:l.attributes})),[o,!1];var z=a?a({}):{};return l=new this.NodeDataClass(o,z),this._nodes.set(o,l),this.emit("nodeAdded",{key:o,attributes:z}),[o,!0]},f.dropNode=function(o){var a,l=this._nodes.get(o=""+o);if(!l)throw new dt('Graph.dropNode: could not find the "'.concat(o,'" node in the graph.'));if("undirected"!==this.type){for(var b in l.out){a=l.out[b];do{Ue(this,a),a=a.next}while(a)}for(var z in l.in){a=l.in[z];do{Ue(this,a),a=a.next}while(a)}}if("directed"!==this.type)for(var Y in l.undirected){a=l.undirected[Y];do{Ue(this,a),a=a.next}while(a)}this._nodes.delete(o),this.emit("nodeDropped",{key:o,attributes:l.attributes})},f.dropEdge=function(o){var a;if(arguments.length>1){var l=""+arguments[0],b=""+arguments[1];if(!(a=g(this,l,b,this.type)))throw new dt('Graph.dropEdge: could not find the "'.concat(l,'" -> "').concat(b,'" edge in the graph.'))}else if(!(a=this._edges.get(o=""+o)))throw new dt('Graph.dropEdge: could not find the "'.concat(o,'" edge in the graph.'));return Ue(this,a),this},f.dropDirectedEdge=function(o,a){if(arguments.length<2)throw new bt("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new bt("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var l=g(this,o=""+o,a=""+a,"directed");if(!l)throw new dt('Graph.dropDirectedEdge: could not find a "'.concat(o,'" -> "').concat(a,'" edge in the graph.'));return Ue(this,l),this},f.dropUndirectedEdge=function(o,a){if(arguments.length<2)throw new bt("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new bt("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var l=g(this,o,a,"undirected");if(!l)throw new dt('Graph.dropUndirectedEdge: could not find a "'.concat(o,'" -> "').concat(a,'" edge in the graph.'));return Ue(this,l),this},f.clear=function(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")},f.clearEdges=function(){for(var o,a=this._nodes.values();!0!==(o=a.next()).done;)o.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")},f.getAttribute=function(o){return this._attributes[o]},f.getAttributes=function(){return this._attributes},f.hasAttribute=function(o){return this._attributes.hasOwnProperty(o)},f.setAttribute=function(o,a){return this._attributes[o]=a,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:o}),this},f.updateAttribute=function(o,a){if("function"!=typeof a)throw new ft("Graph.updateAttribute: updater should be a function.");return this._attributes[o]=a(this._attributes[o]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:o}),this},f.removeAttribute=function(o){return delete this._attributes[o],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:o}),this},f.replaceAttributes=function(o){if(!d(o))throw new ft("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=o,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},f.mergeAttributes=function(o){if(!d(o))throw new ft("Graph.mergeAttributes: provided attributes are not a plain object.");return C(this._attributes,o),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:o}),this},f.updateAttributes=function(o){if("function"!=typeof o)throw new ft("Graph.updateAttributes: provided updater is not a function.");return this._attributes=o(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this},f.updateEachNodeAttributes=function(o,a){if("function"!=typeof o)throw new ft("Graph.updateEachNodeAttributes: expecting an updater function.");if(a&&!S(a))throw new ft("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var l,b,z=this._nodes.values();!0!==(l=z.next()).done;)(b=l.value).attributes=o(b.key,b.attributes);this.emit("eachNodeAttributesUpdated",{hints:a||null})},f.updateEachEdgeAttributes=function(o,a){if("function"!=typeof o)throw new ft("Graph.updateEachEdgeAttributes: expecting an updater function.");if(a&&!S(a))throw new ft("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var l,b,z,Y,ct=this._edges.values();!0!==(l=ct.next()).done;)z=(b=l.value).source,b.attributes=o(b.key,b.attributes,z.key,(Y=b.target).key,z.attributes,Y.attributes,b.undirected);this.emit("eachEdgeAttributesUpdated",{hints:a||null})},f.forEachAdjacencyEntry=function(o){if("function"!=typeof o)throw new ft("Graph.forEachAdjacencyEntry: expecting a callback.");cn(!1,!1,!1,this,o)},f.forEachAdjacencyEntryWithOrphans=function(o){if("function"!=typeof o)throw new ft("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");cn(!1,!1,!0,this,o)},f.forEachAssymetricAdjacencyEntry=function(o){if("function"!=typeof o)throw new ft("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");cn(!1,!0,!1,this,o)},f.forEachAssymetricAdjacencyEntryWithOrphans=function(o){if("function"!=typeof o)throw new ft("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");cn(!1,!0,!0,this,o)},f.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):Qt(this._nodes.keys(),this._nodes.size)},f.forEachNode=function(o){if("function"!=typeof o)throw new ft("Graph.forEachNode: expecting a callback.");for(var a,l,b=this._nodes.values();!0!==(a=b.next()).done;)o((l=a.value).key,l.attributes)},f.findNode=function(o){if("function"!=typeof o)throw new ft("Graph.findNode: expecting a callback.");for(var a,l,b=this._nodes.values();!0!==(a=b.next()).done;)if(o((l=a.value).key,l.attributes))return l.key},f.mapNodes=function(o){if("function"!=typeof o)throw new ft("Graph.mapNode: expecting a callback.");for(var a,l,b=this._nodes.values(),z=new Array(this.order),Y=0;!0!==(a=b.next()).done;)z[Y++]=o((l=a.value).key,l.attributes);return z},f.someNode=function(o){if("function"!=typeof o)throw new ft("Graph.someNode: expecting a callback.");for(var a,l,b=this._nodes.values();!0!==(a=b.next()).done;)if(o((l=a.value).key,l.attributes))return!0;return!1},f.everyNode=function(o){if("function"!=typeof o)throw new ft("Graph.everyNode: expecting a callback.");for(var a,l,b=this._nodes.values();!0!==(a=b.next()).done;)if(!o((l=a.value).key,l.attributes))return!1;return!0},f.filterNodes=function(o){if("function"!=typeof o)throw new ft("Graph.filterNodes: expecting a callback.");for(var a,l,b=this._nodes.values(),z=[];!0!==(a=b.next()).done;)o((l=a.value).key,l.attributes)&&z.push(l.key);return z},f.reduceNodes=function(o,a){if("function"!=typeof o)throw new ft("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new ft("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");for(var l,b,z=a,Y=this._nodes.values();!0!==(l=Y.next()).done;)z=o(z,(b=l.value).key,b.attributes);return z},f.nodeEntries=function(){var o=this._nodes.values();return new zt(function(){var a=o.next();if(a.done)return a;var l=a.value;return{value:{node:l.key,attributes:l.attributes},done:!1}})},f.export=function(){var o=this,a=new Array(this._nodes.size),l=0;this._nodes.forEach(function(z,Y){var ut,it;a[l++]=(it={key:Y},v((ut=z).attributes)||(it.attributes=C({},ut.attributes)),it)});var b=new Array(this._edges.size);return l=0,this._edges.forEach(function(z,Y){var ct,it,yt;b[l++]=(ct=o.type,yt={key:Y,source:(it=z).source.key,target:it.target.key},v(it.attributes)||(yt.attributes=C({},it.attributes)),"mixed"===ct&&it.undirected&&(yt.undirected=!0),yt)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:a,edges:b}},f.import=function(o){var a,l,b,z,Y,ct=this,ut=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(o instanceof y)return o.forEachNode(function(ie,we){ut?ct.mergeNode(ie,we):ct.addNode(ie,we)}),o.forEachEdge(function(ie,we,hn,fn,Gi,Ii,er){ut?er?ct.mergeUndirectedEdgeWithKey(ie,hn,fn,we):ct.mergeDirectedEdgeWithKey(ie,hn,fn,we):er?ct.addUndirectedEdgeWithKey(ie,hn,fn,we):ct.addDirectedEdgeWithKey(ie,hn,fn,we)}),this;if(!d(o))throw new ft("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(o.attributes){if(!d(o.attributes))throw new ft("Graph.import: invalid attributes. Expecting a plain object.");ut?this.mergeAttributes(o.attributes):this.replaceAttributes(o.attributes)}if(o.nodes){if(b=o.nodes,!Array.isArray(b))throw new ft("Graph.import: invalid nodes. Expecting an array.");for(a=0,l=b.length;a<l;a++){Br(z=b[a]);var yt=z.key,mt=z.attributes;ut?this.mergeNode(yt,mt):this.addNode(yt,mt)}}if(o.edges){var Gt=!1;if("undirected"===this.type&&(Gt=!0),b=o.edges,!Array.isArray(b))throw new ft("Graph.import: invalid edges. Expecting an array.");for(a=0,l=b.length;a<l;a++){Zr(Y=b[a]);var Xt=Y.source,ne=Y.target,te=Y.attributes,se=Y.undirected,le=void 0===se?Gt:se;"key"in Y?(ut?le?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:le?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,Y.key,Xt,ne,te):(ut?le?this.mergeUndirectedEdge:this.mergeDirectedEdge:le?this.addUndirectedEdge:this.addDirectedEdge).call(this,Xt,ne,te)}}return this},f.nullCopy=function(o){var a=new y(C({},this._options,o));return a.replaceAttributes(C({},this.getAttributes())),a},f.emptyCopy=function(o){var a=this.nullCopy(o);return this._nodes.forEach(function(l,b){var z=C({},l.attributes);l=new a.NodeDataClass(b,z),a._nodes.set(b,l)}),a},f.copy=function(o){if("string"==typeof(o=o||{}).type&&o.type!==this.type&&"mixed"!==o.type)throw new bt('Graph.copy: cannot create an incompatible copy from "'.concat(this.type,'" type to "').concat(o.type,'" because this would mean losing information about the current graph.'));if("boolean"==typeof o.multi&&o.multi!==this.multi&&!0!==o.multi)throw new bt("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if("boolean"==typeof o.allowSelfLoops&&o.allowSelfLoops!==this.allowSelfLoops&&!0!==o.allowSelfLoops)throw new bt("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");for(var a,l,b=this.emptyCopy(o),z=this._edges.values();!0!==(a=z.next()).done;)Kn(b,"copy",!1,(l=a.value).undirected,l.key,l.source.key,l.target.key,C({},l.attributes));return b},f.toJSON=function(){return this.export()},f.toString=function(){return"[object Graph]"},f.inspect=function(){var o=this,a={};this._nodes.forEach(function(ct,ut){a[ut]=ct.attributes});var l={},b={};this._edges.forEach(function(ct,ut){var it,yt=ct.undirected?"--":"->",mt="",Gt=ct.source.key,Zt=ct.target.key;ct.undirected&&Gt>Zt&&(it=Gt,Gt=Zt,Zt=it);var Xt="(".concat(Gt,")").concat(yt,"(").concat(Zt,")");ut.startsWith("geid_")?o.multi&&(void 0===b[Xt]?b[Xt]=0:b[Xt]++,mt+="".concat(b[Xt],". ")):mt+="[".concat(ut,"]: "),l[mt+=Xt]=ct.attributes});var z={};for(var Y in this)this.hasOwnProperty(Y)&&!Dn.has(Y)&&"function"!=typeof this[Y]&&"symbol"!==et(Y)&&(z[Y]=this[Y]);return z.attributes=this._attributes,z.nodes=a,z.edges=l,A(z,"constructor",this.constructor),z},y}(T.exports.EventEmitter);"undefined"!=typeof Symbol&&($t.prototype[Symbol.for("nodejs.util.inspect.custom")]=$t.prototype.inspect),[{name:function(h){return"".concat(h,"Edge")},generateKey:!0},{name:function(h){return"".concat(h,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(h){return"".concat(h,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(h){return"".concat(h,"EdgeWithKey")}},{name:function(h){return"".concat(h,"DirectedEdgeWithKey")},type:"directed"},{name:function(h){return"".concat(h,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(h){["add","merge","update"].forEach(function(y){var f=h.name(y),o="add"===y?Kn:$r;$t.prototype[f]=h.generateKey?function(a,l,b){return o(this,f,!0,"undirected"===(h.type||this.type),null,a,l,b,"update"===y)}:function(a,l,b,z){return o(this,f,!1,"undirected"===(h.type||this.type),a,l,b,z,"update"===y)}})}),h=$t,Ne.forEach(function(y){var f=y.name,o=y.attacher;o(h,f("Node"),0),o(h,f("Source"),1),o(h,f("Target"),2),o(h,f("Opposite"),3)}),function(h){tn.forEach(function(y){var f=y.name,o=y.attacher;o(h,f("Edge"),"mixed"),o(h,f("DirectedEdge"),"directed"),o(h,f("UndirectedEdge"),"undirected")})}($t),function(h){Tr.forEach(function(y){var o,a,l,b;l=(o=y).type,b=o.direction,h.prototype[a=o.name]=function(z,Y){if("mixed"!==l&&"mixed"!==this.type&&l!==this.type)return[];if(!arguments.length)return nn(this,l);if(1===arguments.length){var ct=this._nodes.get(z=""+z);if(void 0===ct)throw new dt("Graph.".concat(a,': could not find the "').concat(z,'" node in the graph.'));return Ur(this.multi,"mixed"===l?this.type:l,b,ct)}if(2===arguments.length){Y=""+Y;var ut=this._nodes.get(z=""+z);if(!ut)throw new dt("Graph.".concat(a,':  could not find the "').concat(z,'" source node in the graph.'));if(!this._nodes.has(Y))throw new dt("Graph.".concat(a,':  could not find the "').concat(Y,'" target node in the graph.'));return Rr(l,this.multi,b,ut,Y)}throw new ft("Graph.".concat(a,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(f,o){var a=o.name,l=o.type,b=o.direction,z="forEach"+a[0].toUpperCase()+a.slice(1,-1);f.prototype[z]=function(it,yt,mt){if("mixed"===l||"mixed"===this.type||l===this.type){if(1===arguments.length)return rn(!1,this,l,mt=it);if(2===arguments.length){mt=yt;var Gt=this._nodes.get(it=""+it);if(void 0===Gt)throw new dt("Graph.".concat(z,': could not find the "').concat(it,'" node in the graph.'));return on(!1,this.multi,"mixed"===l?this.type:l,b,Gt,mt)}if(3===arguments.length){yt=""+yt;var Zt=this._nodes.get(it=""+it);if(!Zt)throw new dt("Graph.".concat(z,':  could not find the "').concat(it,'" source node in the graph.'));if(!this._nodes.has(yt))throw new dt("Graph.".concat(z,':  could not find the "').concat(yt,'" target node in the graph.'));return Sn(!1,l,this.multi,b,Zt,yt,mt)}throw new ft("Graph.".concat(z,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}};var Y="map"+a[0].toUpperCase()+a.slice(1);f.prototype[Y]=function(){var it,yt=Array.prototype.slice.call(arguments),mt=yt.pop();if(0===yt.length){var Gt=0;"directed"!==l&&(Gt+=this.undirectedSize),"undirected"!==l&&(Gt+=this.directedSize),it=new Array(Gt);var Zt=0;yt.push(function(Xt,ne,te,se,le,ie,we){it[Zt++]=mt(Xt,ne,te,se,le,ie,we)})}else it=[],yt.push(function(Xt,ne,te,se,le,ie,we){it.push(mt(Xt,ne,te,se,le,ie,we))});return this[z].apply(this,yt),it};var ct="filter"+a[0].toUpperCase()+a.slice(1);f.prototype[ct]=function(){var it=Array.prototype.slice.call(arguments),yt=it.pop(),mt=[];return it.push(function(Gt,Zt,Xt,ne,te,se,le){yt(Gt,Zt,Xt,ne,te,se,le)&&mt.push(Gt)}),this[z].apply(this,it),mt};var ut="reduce"+a[0].toUpperCase()+a.slice(1);f.prototype[ut]=function(){var it,yt,mt=Array.prototype.slice.call(arguments);if(mt.length<2||mt.length>4)throw new ft("Graph.".concat(ut,": invalid number of arguments (expecting 2, 3 or 4 and got ").concat(mt.length,")."));if("function"==typeof mt[mt.length-1]&&"function"!=typeof mt[mt.length-2])throw new ft("Graph.".concat(ut,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));2===mt.length?(it=mt[0],yt=mt[1],mt=[]):3===mt.length?(it=mt[1],yt=mt[2],mt=[mt[0]]):4===mt.length&&(it=mt[2],yt=mt[3],mt=[mt[0],mt[1]]);var Gt=yt;return mt.push(function(Zt,Xt,ne,te,se,le,ie){Gt=it(Gt,Zt,Xt,ne,te,se,le,ie)}),this[z].apply(this,mt),Gt}}(h,y),function(f,o){var a=o.name,l=o.type,b=o.direction,z="find"+a[0].toUpperCase()+a.slice(1,-1);f.prototype[z]=function(ut,it,yt){if("mixed"!==l&&"mixed"!==this.type&&l!==this.type)return!1;if(1===arguments.length)return rn(!0,this,l,yt=ut);if(2===arguments.length){yt=it;var mt=this._nodes.get(ut=""+ut);if(void 0===mt)throw new dt("Graph.".concat(z,': could not find the "').concat(ut,'" node in the graph.'));return on(!0,this.multi,"mixed"===l?this.type:l,b,mt,yt)}if(3===arguments.length){it=""+it;var Gt=this._nodes.get(ut=""+ut);if(!Gt)throw new dt("Graph.".concat(z,':  could not find the "').concat(ut,'" source node in the graph.'));if(!this._nodes.has(it))throw new dt("Graph.".concat(z,':  could not find the "').concat(it,'" target node in the graph.'));return Sn(!0,l,this.multi,b,Gt,it,yt)}throw new ft("Graph.".concat(z,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))};var Y="some"+a[0].toUpperCase()+a.slice(1,-1);f.prototype[Y]=function(){var ut=Array.prototype.slice.call(arguments),it=ut.pop();return ut.push(function(yt,mt,Gt,Zt,Xt,ne,te){return it(yt,mt,Gt,Zt,Xt,ne,te)}),!!this[z].apply(this,ut)};var ct="every"+a[0].toUpperCase()+a.slice(1,-1);f.prototype[ct]=function(){var ut=Array.prototype.slice.call(arguments),it=ut.pop();return ut.push(function(yt,mt,Gt,Zt,Xt,ne,te){return!it(yt,mt,Gt,Zt,Xt,ne,te)}),!this[z].apply(this,ut)}}(h,y),function(f,o){var l=o.type,b=o.direction,z=o.name.slice(0,-1)+"Entries";f.prototype[z]=function(Y,ct){if("mixed"!==l&&"mixed"!==this.type&&l!==this.type)return zt.empty();if(!arguments.length)return Ze(this,l);if(1===arguments.length){var ut=this._nodes.get(Y=""+Y);if(!ut)throw new dt("Graph.".concat(z,': could not find the "').concat(Y,'" node in the graph.'));return Pr(l,b,ut)}if(2===arguments.length){ct=""+ct;var it=this._nodes.get(Y=""+Y);if(!it)throw new dt("Graph.".concat(z,':  could not find the "').concat(Y,'" source node in the graph.'));if(!this._nodes.has(ct))throw new dt("Graph.".concat(z,':  could not find the "').concat(ct,'" target node in the graph.'));return jr(l,b,it,ct)}throw new ft("Graph.".concat(z,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(h,y)})}($t),function(h){sn.forEach(function(y){var f,o,a,l,b,z,Y;(function Wr(h,y){var f=y.name,o=y.type,a=y.direction;h.prototype[f]=function(l){if("mixed"!==o&&"mixed"!==this.type&&o!==this.type)return[];var b=this._nodes.get(l=""+l);if(void 0===b)throw new dt("Graph.".concat(f,': could not find the "').concat(l,'" node in the graph.'));return function(z,Y,ct){if("mixed"!==z){if("undirected"===z)return Object.keys(ct.undirected);if("string"==typeof Y)return Object.keys(ct[Y])}var ut=[];return un(!1,z,Y,ct,function(it){ut.push(it)}),ut}("mixed"===o?this.type:o,a,b)}})(h,y),function(f,o){var a=o.name,l=o.type,b=o.direction,z="forEach"+a[0].toUpperCase()+a.slice(1,-1);f.prototype[z]=function(it,yt){if("mixed"===l||"mixed"===this.type||l===this.type){var mt=this._nodes.get(it=""+it);if(void 0===mt)throw new dt("Graph.".concat(z,': could not find the "').concat(it,'" node in the graph.'));un(!1,"mixed"===l?this.type:l,b,mt,yt)}};var Y="map"+a[0].toUpperCase()+a.slice(1);f.prototype[Y]=function(it,yt){var mt=[];return this[z](it,function(Gt,Zt){mt.push(yt(Gt,Zt))}),mt};var ct="filter"+a[0].toUpperCase()+a.slice(1);f.prototype[ct]=function(it,yt){var mt=[];return this[z](it,function(Gt,Zt){yt(Gt,Zt)&&mt.push(Gt)}),mt};var ut="reduce"+a[0].toUpperCase()+a.slice(1);f.prototype[ut]=function(it,yt,mt){if(arguments.length<3)throw new ft("Graph.".concat(ut,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));var Gt=mt;return this[z](it,function(Zt,Xt){Gt=yt(Gt,Zt,Xt)}),Gt}}(h,y),f=h,l=(o=y).type,b=o.direction,z=(a=o.name)[0].toUpperCase()+a.slice(1,-1),f.prototype[Y="find"+z]=function(it,yt){if("mixed"===l||"mixed"===this.type||l===this.type){var mt=this._nodes.get(it=""+it);if(void 0===mt)throw new dt("Graph.".concat(Y,': could not find the "').concat(it,'" node in the graph.'));return un(!0,"mixed"===l?this.type:l,b,mt,yt)}},f.prototype["some"+z]=function(it,yt){return!!this[Y](it,yt)},f.prototype["every"+z]=function(it,yt){return!this[Y](it,function(mt,Gt){return!yt(mt,Gt)})},function Nn(h,y){var o=y.type,a=y.direction,l=y.name.slice(0,-1)+"Entries";h.prototype[l]=function(b){if("mixed"!==o&&"mixed"!==this.type&&o!==this.type)return zt.empty();var z=this._nodes.get(b=""+b);if(void 0===z)throw new dt("Graph.".concat(l,': could not find the "').concat(b,'" node in the graph.'));return function(Y,ct,ut){if("mixed"!==Y){if("undirected"===Y)return De(null,ut,ut.undirected);if("string"==typeof ct)return De(null,ut,ut[ct])}var it=zt.empty(),yt=new an;return"undirected"!==Y&&("out"!==ct&&(it=xe(it,De(yt,ut,ut.in))),"in"!==ct&&(it=xe(it,De(yt,ut,ut.out)))),"directed"!==Y&&(it=xe(it,De(yt,ut,ut.undirected))),it}("mixed"===o?this.type:o,a,z)}}(h,y)})}($t);var qn=function(h){function y(f){var o=C({type:"directed"},f);if("multi"in o&&!1!==o.multi)throw new ft("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==o.type)throw new ft('DirectedGraph.from: inconsistent "'+o.type+'" type in given options!');return h.call(this,o)||this}return N(y,h),y}($t),Qn=function(h){function y(f){var o=C({type:"undirected"},f);if("multi"in o&&!1!==o.multi)throw new ft("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==o.type)throw new ft('UndirectedGraph.from: inconsistent "'+o.type+'" type in given options!');return h.call(this,o)||this}return N(y,h),y}($t),Jn=function(h){function y(f){var o=C({multi:!0},f);if("multi"in o&&!0!==o.multi)throw new ft("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return h.call(this,o)||this}return N(y,h),y}($t),tr=function(h){function y(f){var o=C({type:"directed",multi:!0},f);if("multi"in o&&!0!==o.multi)throw new ft("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==o.type)throw new ft('MultiDirectedGraph.from: inconsistent "'+o.type+'" type in given options!');return h.call(this,o)||this}return N(y,h),y}($t),zn=function(h){function y(f){var o=C({type:"undirected",multi:!0},f);if("multi"in o&&!0!==o.multi)throw new ft("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==o.type)throw new ft('MultiUndirectedGraph.from: inconsistent "'+o.type+'" type in given options!');return h.call(this,o)||this}return N(y,h),y}($t);function Pe(h){h.from=function(y,f){var o=C({},y.options,f),a=new h(o);return a.import(y),a}}return Pe($t),Pe(qn),Pe(Qn),Pe(Jn),Pe(tr),Pe(zn),$t.Graph=$t,$t.DirectedGraph=qn,$t.UndirectedGraph=Qn,$t.MultiGraph=Jn,$t.MultiDirectedGraph=tr,$t.MultiUndirectedGraph=zn,$t.InvalidArgumentsGraphError=ft,$t.NotFoundGraphError=dt,$t.UsageGraphError=bt,$t}()},8740:(lt,et,N)=>{var F=N(6009),$=N(5701);function I(s,_){if(arguments.length<2)throw new Error("mnemonist/fixed-deque: expecting an Array class and a capacity.");if("number"!=typeof _||_<=0)throw new Error("mnemonist/fixed-deque: `capacity` should be a positive number.");this.ArrayClass=s,this.capacity=_,this.items=new s(this.capacity),this.clear()}I.prototype.clear=function(){this.start=0,this.size=0},I.prototype.push=function(s){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.push: deque capacity ("+this.capacity+") exceeded!");return this.items[(this.start+this.size)%this.capacity]=s,++this.size},I.prototype.unshift=function(s){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.unshift: deque capacity ("+this.capacity+") exceeded!");var _=this.start-1;return 0===this.start&&(_=this.capacity-1),this.items[_]=s,this.start=_,++this.size},I.prototype.pop=function(){if(0===this.size)return;const s=(this.start+this.size-1)%this.capacity;return this.size--,this.items[s]},I.prototype.shift=function(){if(0!==this.size){var s=this.start;return this.size--,this.start++,this.start===this.capacity&&(this.start=0),this.items[s]}},I.prototype.peekFirst=function(){if(0!==this.size)return this.items[this.start]},I.prototype.peekLast=function(){if(0!==this.size){var s=this.start+this.size-1;return s>this.capacity&&(s-=this.capacity),this.items[s]}},I.prototype.get=function(s){if(0!==this.size)return(s=this.start+s)>this.capacity&&(s-=this.capacity),this.items[s]},I.prototype.forEach=function(s,_){_=arguments.length>1?_:this;for(var E=this.capacity,C=this.size,g=this.start,d=0;d<C;)s.call(_,this.items[g],d,this),d++,++g===E&&(g=0)},I.prototype.toArray=function(){var s=this.start+this.size;if(s<this.capacity)return this.items.slice(this.start,s);for(var _=new this.ArrayClass(this.size),E=this.capacity,C=this.size,g=this.start,d=0;d<C;)_[d]=this.items[g],d++,++g===E&&(g=0);return _},I.prototype.values=function(){var s=this.items,_=this.capacity,E=this.size,C=this.start,g=0;return new $(function(){if(g>=E)return{done:!0};var d=s[C];return C++,g++,C===_&&(C=0),{value:d,done:!1}})},I.prototype.entries=function(){var s=this.items,_=this.capacity,E=this.size,C=this.start,g=0;return new $(function(){if(g>=E)return{done:!0};var d=s[C];return++C===_&&(C=0),{value:[g++,d],done:!1}})},"undefined"!=typeof Symbol&&(I.prototype[Symbol.iterator]=I.prototype.values),I.prototype.inspect=function(){var s=this.toArray();return s.type=this.ArrayClass.name,s.capacity=this.capacity,Object.defineProperty(s,"constructor",{value:I,enumerable:!1}),s},"undefined"!=typeof Symbol&&(I.prototype[Symbol.for("nodejs.util.inspect.custom")]=I.prototype.inspect),I.from=function(s,_,E){if(arguments.length<3&&"number"!=typeof(E=F.guessLength(s)))throw new Error("mnemonist/fixed-deque.from: could not guess iterable length. Please provide desired capacity as last argument.");var C=new I(_,E);if(F.isArrayLike(s)){var g,d;for(g=0,d=s.length;g<d;g++)C.items[g]=s[g];return C.size=d,C}return F.forEach(s,function(v){C.push(v)}),C},lt.exports=I},7451:(lt,et,N)=>{var F=N(5701),$=N(6009);function I(s,_){if(arguments.length<2)throw new Error("mnemonist/fixed-stack: expecting an Array class and a capacity.");if("number"!=typeof _||_<=0)throw new Error("mnemonist/fixed-stack: `capacity` should be a positive number.");this.capacity=_,this.ArrayClass=s,this.items=new this.ArrayClass(this.capacity),this.clear()}I.prototype.clear=function(){this.size=0},I.prototype.push=function(s){if(this.size===this.capacity)throw new Error("mnemonist/fixed-stack.push: stack capacity ("+this.capacity+") exceeded!");return this.items[this.size++]=s,this.size},I.prototype.pop=function(){if(0!==this.size)return this.items[--this.size]},I.prototype.peek=function(){return this.items[this.size-1]},I.prototype.forEach=function(s,_){_=arguments.length>1?_:this;for(var E=0,C=this.items.length;E<C;E++)s.call(_,this.items[C-E-1],E,this)},I.prototype.toArray=function(){for(var s=new this.ArrayClass(this.size),_=this.size-1,E=this.size;E--;)s[E]=this.items[_-E];return s},I.prototype.values=function(){var s=this.items,_=this.size,E=0;return new F(function(){if(E>=_)return{done:!0};var C=s[_-E-1];return E++,{value:C,done:!1}})},I.prototype.entries=function(){var s=this.items,_=this.size,E=0;return new F(function(){if(E>=_)return{done:!0};var C=s[_-E-1];return{value:[E++,C],done:!1}})},"undefined"!=typeof Symbol&&(I.prototype[Symbol.iterator]=I.prototype.values),I.prototype.toString=function(){return this.toArray().join(",")},I.prototype.toJSON=function(){return this.toArray()},I.prototype.inspect=function(){var s=this.toArray();return s.type=this.ArrayClass.name,s.capacity=this.capacity,Object.defineProperty(s,"constructor",{value:I,enumerable:!1}),s},"undefined"!=typeof Symbol&&(I.prototype[Symbol.for("nodejs.util.inspect.custom")]=I.prototype.inspect),I.from=function(s,_,E){if(arguments.length<3&&"number"!=typeof(E=$.guessLength(s)))throw new Error("mnemonist/fixed-stack.from: could not guess iterable length. Please provide desired capacity as last argument.");var C=new I(_,E);if($.isArrayLike(s)){var g,d;for(g=0,d=s.length;g<d;g++)C.items[g]=s[g];return C.size=d,C}return $.forEach(s,function(v){C.push(v)}),C},lt.exports=I},4547:(lt,et,N)=>{var F=N(4467),$=N(2062),I=N(6009),s=$.DEFAULT_COMPARATOR,_=$.reverseComparator;function E(D,L,G,k){for(var K,tt,V=L[k];k>G&&D(V,tt=L[K=k-1>>1])<0;)L[k]=tt,k=K;L[k]=V}function C(D,L,G){for(var q,k=L.length,V=G,K=L[G],tt=2*G+1;tt<k;)(q=tt+1)<k&&D(L[tt],L[q])>=0&&(tt=q),L[G]=L[tt],tt=2*(G=tt)+1;L[G]=K,E(D,L,V,G)}function g(D,L,G){L.push(G),E(D,L,0,L.length-1)}function d(D,L){var G=L.pop();if(0!==L.length){var k=L[0];return L[0]=G,C(D,L,0),k}return G}function v(D,L,G){if(0===L.length)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var k=L[0];return L[0]=G,C(D,L,0),k}function A(D,L,G){var k;return 0!==L.length&&D(L[0],G)<0&&(k=L[0],L[0]=G,G=k,C(D,L,0)),G}function x(D,L){for(var V=L.length>>1;--V>=0;)C(D,L,V)}function S(D,L){for(var G=L.length,k=0,V=new Array(G);k<G;)V[k++]=d(D,L);return V}function P(D){if(this.clear(),this.comparator=D||s,"function"!=typeof this.comparator)throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}function Z(D){if(this.clear(),this.comparator=D||s,"function"!=typeof this.comparator)throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=_(this.comparator)}P.prototype.clear=function(){this.items=[],this.size=0},P.prototype.push=function(D){return g(this.comparator,this.items,D),++this.size},P.prototype.peek=function(){return this.items[0]},P.prototype.pop=function(){return 0!==this.size&&this.size--,d(this.comparator,this.items)},P.prototype.replace=function(D){return v(this.comparator,this.items,D)},P.prototype.pushpop=function(D){return A(this.comparator,this.items,D)},P.prototype.consume=function(){return this.size=0,S(this.comparator,this.items)},P.prototype.toArray=function(){return S(this.comparator,this.items.slice())},P.prototype.inspect=function(){var D=this.toArray();return Object.defineProperty(D,"constructor",{value:P,enumerable:!1}),D},"undefined"!=typeof Symbol&&(P.prototype[Symbol.for("nodejs.util.inspect.custom")]=P.prototype.inspect),Z.prototype=P.prototype,P.from=function(D,L){var k,G=new P(L);return k=I.isArrayLike(D)?D.slice():I.toArray(D),x(G.comparator,k),G.items=k,G.size=k.length,G},Z.from=function(D,L){var k,G=new Z(L);return k=I.isArrayLike(D)?D.slice():I.toArray(D),x(G.comparator,k),G.items=k,G.size=k.length,G},P.siftUp=C,P.siftDown=E,P.push=g,P.pop=d,P.replace=v,P.pushpop=A,P.heapify=x,P.consume=S,P.nsmallest=function B(D,L,G){2===arguments.length&&(G=L,L=D,D=s);var V,K,tt,Q,k=_(D),q=1/0;if(1===L){if(I.isArrayLike(G)){for(V=0,K=G.length;V<K;V++)tt=G[V],(q===1/0||D(tt,q)<0)&&(q=tt);return(Q=new G.constructor(1))[0]=q,Q}return F(G,function(pt){(q===1/0||D(pt,q)<0)&&(q=pt)}),[q]}if(I.isArrayLike(G)){if(L>=G.length)return G.slice().sort(D);for(Q=G.slice(0,L),x(k,Q),V=L,K=G.length;V<K;V++)k(G[V],Q[0])>0&&v(k,Q,G[V]);return Q.sort(D)}var ot=I.guessLength(G);return null!==ot&&ot<L&&(L=ot),Q=new Array(L),V=0,F(G,function(pt){V<L?Q[V]=pt:(V===L&&x(k,Q),k(pt,Q[0])>0&&v(k,Q,pt)),V++}),Q.length>V&&(Q.length=V),Q.sort(D)},P.nlargest=function T(D,L,G){2===arguments.length&&(G=L,L=D,D=s);var V,K,tt,Q,k=_(D),q=-1/0;if(1===L){if(I.isArrayLike(G)){for(V=0,K=G.length;V<K;V++)tt=G[V],(q===-1/0||D(tt,q)>0)&&(q=tt);return(Q=new G.constructor(1))[0]=q,Q}return F(G,function(pt){(q===-1/0||D(pt,q)>0)&&(q=pt)}),[q]}if(I.isArrayLike(G)){if(L>=G.length)return G.slice().sort(k);for(Q=G.slice(0,L),x(D,Q),V=L,K=G.length;V<K;V++)D(G[V],Q[0])>0&&v(D,Q,G[V]);return Q.sort(k)}var ot=I.guessLength(G);return null!==ot&&ot<L&&(L=ot),Q=new Array(L),V=0,F(G,function(pt){V<L?Q[V]=pt:(V===L&&x(D,Q),D(pt,Q[0])>0&&v(D,Q,pt)),V++}),Q.length>V&&(Q.length=V),Q.sort(k)},P.MinHeap=P,P.MaxHeap=Z,lt.exports=P},7621:(lt,et,N)=>{var F=N(5701),$=N(4467);function I(){this.clear()}I.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},I.prototype.enqueue=function(s){return this.items.push(s),++this.size},I.prototype.dequeue=function(){if(this.size){var s=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,s}},I.prototype.peek=function(){if(this.size)return this.items[this.offset]},I.prototype.forEach=function(s,_){_=arguments.length>1?_:this;for(var E=this.offset,C=0,g=this.items.length;E<g;E++,C++)s.call(_,this.items[E],C,this)},I.prototype.toArray=function(){return this.items.slice(this.offset)},I.prototype.values=function(){var s=this.items,_=this.offset;return new F(function(){if(_>=s.length)return{done:!0};var E=s[_];return _++,{value:E,done:!1}})},I.prototype.entries=function(){var s=this.items,_=this.offset,E=0;return new F(function(){if(_>=s.length)return{done:!0};var C=s[_];return _++,{value:[E++,C],done:!1}})},"undefined"!=typeof Symbol&&(I.prototype[Symbol.iterator]=I.prototype.values),I.prototype.toString=function(){return this.toArray().join(",")},I.prototype.toJSON=function(){return this.toArray()},I.prototype.inspect=function(){var s=this.toArray();return Object.defineProperty(s,"constructor",{value:I,enumerable:!1}),s},"undefined"!=typeof Symbol&&(I.prototype[Symbol.for("nodejs.util.inspect.custom")]=I.prototype.inspect),I.from=function(s){var _=new I;return $(s,function(E){_.enqueue(E)}),_},I.of=function(){return I.from(arguments)},lt.exports=I},8090:(lt,et,N)=>{var F=N(5701),$=N(6116).getPointerArray;function I(s,_){arguments.length<2&&(_=s,s=Array);var E=$(_);this.size=0,this.length=_,this.dense=new E(_),this.sparse=new E(_),this.vals=new s(_)}I.prototype.clear=function(){this.size=0},I.prototype.has=function(s){var _=this.sparse[s];return _<this.size&&this.dense[_]===s},I.prototype.get=function(s){var _=this.sparse[s];if(_<this.size&&this.dense[_]===s)return this.vals[_]},I.prototype.set=function(s,_){var E=this.sparse[s];return E<this.size&&this.dense[E]===s?(this.vals[E]=_,this):(this.dense[this.size]=s,this.sparse[s]=this.size,this.vals[this.size]=_,this.size++,this)},I.prototype.delete=function(s){var _=this.sparse[s];return!(_>=this.size||this.dense[_]!==s||(this.dense[this.sparse[s]]=_=this.dense[this.size-1],this.sparse[_]=this.sparse[s],this.size--,0))},I.prototype.forEach=function(s,_){_=arguments.length>1?_:this;for(var E=0;E<this.size;E++)s.call(_,this.vals[E],this.dense[E])},I.prototype.keys=function(){var s=this.size,_=this.dense,E=0;return new F(function(){if(E<s){var C=_[E];return E++,{value:C}}return{done:!0}})},I.prototype.values=function(){var s=this.size,_=this.vals,E=0;return new F(function(){if(E<s){var C=_[E];return E++,{value:C}}return{done:!0}})},I.prototype.entries=function(){var s=this.size,_=this.dense,E=this.vals,C=0;return new F(function(){if(C<s){var g=[_[C],E[C]];return C++,{value:g}}return{done:!0}})},"undefined"!=typeof Symbol&&(I.prototype[Symbol.iterator]=I.prototype.entries),I.prototype.inspect=function(){for(var s=new Map,_=0;_<this.size;_++)s.set(this.dense[_],this.vals[_]);return Object.defineProperty(s,"constructor",{value:I,enumerable:!1}),s.length=this.length,this.vals.constructor!==Array&&(s.type=this.vals.constructor.name),s},"undefined"!=typeof Symbol&&(I.prototype[Symbol.for("nodejs.util.inspect.custom")]=I.prototype.inspect),lt.exports=I},5766:(lt,et,N)=>{var F=N(5701),$=N(6116).getPointerArray;function I(s){var _=$(s);this.start=0,this.size=0,this.capacity=s,this.dense=new _(s),this.sparse=new _(s)}I.prototype.clear=function(){this.start=0,this.size=0},I.prototype.has=function(s){if(0===this.size)return!1;var _=this.sparse[s];return(_<this.capacity&&_>=this.start&&_<this.start+this.size||_<(this.start+this.size)%this.capacity)&&this.dense[_]===s},I.prototype.enqueue=function(s){var _=this.sparse[s];return 0!==this.size&&(_<this.capacity&&_>=this.start&&_<this.start+this.size||_<(this.start+this.size)%this.capacity)&&this.dense[_]===s||(this.dense[_=(this.start+this.size)%this.capacity]=s,this.sparse[s]=_,this.size++),this},I.prototype.dequeue=function(){if(0!==this.size){var s=this.start;this.size--,this.start++,this.start===this.capacity&&(this.start=0);var _=this.dense[s];return this.sparse[_]=this.capacity,_}},I.prototype.forEach=function(s,_){_=arguments.length>1?_:this;for(var E=this.capacity,C=this.size,g=this.start,d=0;d<C;)s.call(_,this.dense[g],d,this),d++,++g===E&&(g=0)},I.prototype.values=function(){var s=this.dense,_=this.capacity,E=this.size,C=this.start,g=0;return new F(function(){if(g>=E)return{done:!0};var d=s[C];return C++,g++,C===_&&(C=0),{value:d,done:!1}})},"undefined"!=typeof Symbol&&(I.prototype[Symbol.iterator]=I.prototype.values),I.prototype.inspect=function(){var s=[];return this.forEach(function(_){s.push(_)}),Object.defineProperty(s,"constructor",{value:I,enumerable:!1}),s.capacity=this.capacity,s},"undefined"!=typeof Symbol&&(I.prototype[Symbol.for("nodejs.util.inspect.custom")]=I.prototype.inspect),lt.exports=I},4268:(lt,et,N)=>{var F=N(5701),$=N(6116).getPointerArray;function I(s){var _=$(s);this.size=0,this.length=s,this.dense=new _(s),this.sparse=new _(s)}I.prototype.clear=function(){this.size=0},I.prototype.has=function(s){var _=this.sparse[s];return _<this.size&&this.dense[_]===s},I.prototype.add=function(s){var _=this.sparse[s];return _<this.size&&this.dense[_]===s||(this.dense[this.size]=s,this.sparse[s]=this.size,this.size++),this},I.prototype.delete=function(s){var _=this.sparse[s];return!(_>=this.size||this.dense[_]!==s||(this.dense[this.sparse[s]]=_=this.dense[this.size-1],this.sparse[_]=this.sparse[s],this.size--,0))},I.prototype.forEach=function(s,_){_=arguments.length>1?_:this;for(var E,C=0;C<this.size;C++)s.call(_,E=this.dense[C],E)},I.prototype.values=function(){var s=this.size,_=this.dense,E=0;return new F(function(){if(E<s){var C=_[E];return E++,{value:C}}return{done:!0}})},"undefined"!=typeof Symbol&&(I.prototype[Symbol.iterator]=I.prototype.values),I.prototype.inspect=function(){for(var s=new Set,_=0;_<this.size;_++)s.add(this.dense[_]);return Object.defineProperty(s,"constructor",{value:I,enumerable:!1}),s.length=this.length,s},"undefined"!=typeof Symbol&&(I.prototype[Symbol.for("nodejs.util.inspect.custom")]=I.prototype.inspect),lt.exports=I},2062:(lt,et)=>{et.DEFAULT_COMPARATOR=function(s,_){return s<_?-1:s>_?1:0},et.DEFAULT_REVERSE_COMPARATOR=function(s,_){return s<_?1:s>_?-1:0},et.reverseComparator=function $(s){return function(_,E){return s(E,_)}},et.createTupleComparator=function I(s){return 2===s?function(_,E){return _[0]<E[0]?-1:_[0]>E[0]?1:_[1]<E[1]?-1:_[1]>E[1]?1:0}:function(_,E){for(var C=0;C<s;){if(_[C]<E[C])return-1;if(_[C]>E[C])return 1;C++}return 0}}},6009:(lt,et,N)=>{var F=N(4467),$=N(6116);function s(C){return"number"==typeof C.length?C.length:"number"==typeof C.size?C.size:void 0}et.isArrayLike=function I(C){return Array.isArray(C)||$.isTypedArray(C)},et.guessLength=s,et.toArray=function _(C){var g=s(C),d="number"==typeof g?new Array(g):[],v=0;return F(C,function(A){d[v++]=A}),d},et.toArrayWithIndices=function E(C){var g=s(C),d="number"==typeof g?$.getPointerArray(g):Array,v="number"==typeof g?new Array(g):[],A="number"==typeof g?new d(g):[],x=0;return F(C,function(S){v[x]=S,A[x]=x++}),[v,A]}},6116:(lt,et)=>{var N=Math.pow(2,8)-1,F=Math.pow(2,16)-1,$=Math.pow(2,32)-1,I=Math.pow(2,7)-1,s=Math.pow(2,15)-1,_=Math.pow(2,31)-1;et.getPointerArray=function(C){var g=C-1;if(g<=N)return Uint8Array;if(g<=F)return Uint16Array;if(g<=$)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},et.getSignedPointerArray=function(C){var g=C-1;return g<=I?Int8Array:g<=s?Int16Array:g<=_?Int32Array:Float64Array},et.getNumberType=function(C){return C===(0|C)?-1===Math.sign(C)?C<=127&&C>=-128?Int8Array:C<=32767&&C>=-32768?Int16Array:Int32Array:C<=255?Uint8Array:C<=65535?Uint16Array:Uint32Array:Float64Array};var E={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};et.getMinimalRepresentation=function(C,g){var A,x,S,B,T,d=null,v=0;for(B=0,T=C.length;B<T;B++)S=g?g(C[B]):C[B],x=et.getNumberType(S),(A=E[x.name])>v&&(v=A,d=x);return d},et.isTypedArray=function(C){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView(C)},et.concat=function(){var g,d,v,C=0;for(g=0,v=arguments.length;g<v;g++)C+=arguments[g].length;var A=new arguments[0].constructor(C);for(g=0,d=0;g<v;g++)A.set(arguments[g],d),d+=arguments[g].length;return A},et.indices=function(C){for(var d=new(et.getPointerArray(C))(C),v=0;v<C;v++)d[v]=v;return d}},4467:(lt,et,N)=>{var F=N(8123),$=F.ARRAY_BUFFER_SUPPORT,I=F.SYMBOL_SUPPORT;lt.exports=function(_,E){var C,g,d,v,A;if(!_)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof E)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(_)||$&&ArrayBuffer.isView(_)||"string"==typeof _||"[object Arguments]"===_.toString())for(d=0,v=_.length;d<v;d++)E(_[d],d);else if("function"!=typeof _.forEach)if(I&&Symbol.iterator in _&&"function"!=typeof _.next&&(_=_[Symbol.iterator]()),"function"!=typeof _.next)for(g in _)_.hasOwnProperty(g)&&E(_[g],g);else for(C=_,d=0;!0!==(A=C.next()).done;)E(A.value,d),d++;else _.forEach(E)}},5701:lt=>{function et(N){if("function"!=typeof N)throw new Error("obliterator/iterator: expecting a function!");this.next=N}"undefined"!=typeof Symbol&&(et.prototype[Symbol.iterator]=function(){return this}),et.of=function(){var N=arguments,F=N.length,$=0;return new et(function(){return $>=F?{done:!0}:{done:!1,value:N[$++]}})},et.empty=function(){return new et(function(){return{done:!0}})},et.fromSequence=function(N){var F=0,$=N.length;return new et(function(){return F>=$?{done:!0}:{done:!1,value:N[F++]}})},et.is=function(N){return N instanceof et||"object"==typeof N&&null!==N&&"function"==typeof N.next},lt.exports=et},8123:(lt,et)=>{et.ARRAY_BUFFER_SUPPORT="undefined"!=typeof ArrayBuffer,et.SYMBOL_SUPPORT="undefined"!=typeof Symbol},8859:lt=>{function et(F){return function($){return"number"!=typeof $&&($=$.length),Math.floor(F()*$)}}var N=et(Math.random);N.createRandomIndex=et,lt.exports=N},340:(lt,et,N)=>{var F=N(9471),$=N(2992),I=N(7657),s=N(5583),_=N(1929),E=N(8083),C=N(3818);C.alea=F,C.xor128=$,C.xorwow=I,C.xorshift7=s,C.xor4096=_,C.tychei=E,lt.exports=C},9471:function(lt,et,N){var F;!function($,I,s){function _(d){var v=this,A=function g(){var d=4022871197;return function(A){A=String(A);for(var x=0;x<A.length;x++){var S=.02519603282416938*(d+=A.charCodeAt(x));S-=d=S>>>0,d=(S*=d)>>>0,d+=4294967296*(S-=d)}return 2.3283064365386963e-10*(d>>>0)}}();v.next=function(){var x=2091639*v.s0+2.3283064365386963e-10*v.c;return v.s0=v.s1,v.s1=v.s2,v.s2=x-(v.c=0|x)},v.c=1,v.s0=A(" "),v.s1=A(" "),v.s2=A(" "),v.s0-=A(d),v.s0<0&&(v.s0+=1),v.s1-=A(d),v.s1<0&&(v.s1+=1),v.s2-=A(d),v.s2<0&&(v.s2+=1),A=null}function E(d,v){return v.c=d.c,v.s0=d.s0,v.s1=d.s1,v.s2=d.s2,v}function C(d,v){var A=new _(d),x=v&&v.state,S=A.next;return S.int32=function(){return 4294967296*A.next()|0},S.double=function(){return S()+11102230246251565e-32*(2097152*S()|0)},S.quick=S,x&&("object"==typeof x&&E(x,A),S.state=function(){return E(A,{})}),S}I&&I.exports?I.exports=C:N.amdD&&N.amdO?void 0!==(F=function(){return C}.call(et,N,et,I))&&(I.exports=F):this.alea=C}(0,lt=N.nmd(lt))},8083:function(lt,et,N){var F;!function($,I,s){function _(g){var d=this,v="";d.next=function(){var x=d.b,S=d.c,B=d.d,T=d.a;return x=x<<25^x>>>7^S,S=S-B|0,B=B<<24^B>>>8^T,T=T-x|0,d.b=x=x<<20^x>>>12^S,d.c=S=S-B|0,d.d=B<<16^S>>>16^T,d.a=T-x|0},d.a=0,d.b=0,d.c=-1640531527,d.d=1367130551,g===Math.floor(g)?(d.a=g/4294967296|0,d.b=0|g):v+=g;for(var A=0;A<v.length+20;A++)d.b^=0|v.charCodeAt(A),d.next()}function E(g,d){return d.a=g.a,d.b=g.b,d.c=g.c,d.d=g.d,d}function C(g,d){var v=new _(g),A=d&&d.state,x=function(){return(v.next()>>>0)/4294967296};return x.double=function(){do{var T=((v.next()>>>11)+(v.next()>>>0)/4294967296)/(1<<21)}while(0===T);return T},x.int32=v.next,x.quick=x,A&&("object"==typeof A&&E(A,v),x.state=function(){return E(v,{})}),x}I&&I.exports?I.exports=C:N.amdD&&N.amdO?void 0!==(F=function(){return C}.call(et,N,et,I))&&(I.exports=F):this.tychei=C}(0,lt=N.nmd(lt))},2992:function(lt,et,N){var F;!function($,I,s){function _(g){var d=this,v="";d.x=0,d.y=0,d.z=0,d.w=0,d.next=function(){var x=d.x^d.x<<11;return d.x=d.y,d.y=d.z,d.z=d.w,d.w^=d.w>>>19^x^x>>>8},g===(0|g)?d.x=g:v+=g;for(var A=0;A<v.length+64;A++)d.x^=0|v.charCodeAt(A),d.next()}function E(g,d){return d.x=g.x,d.y=g.y,d.z=g.z,d.w=g.w,d}function C(g,d){var v=new _(g),A=d&&d.state,x=function(){return(v.next()>>>0)/4294967296};return x.double=function(){do{var T=((v.next()>>>11)+(v.next()>>>0)/4294967296)/(1<<21)}while(0===T);return T},x.int32=v.next,x.quick=x,A&&("object"==typeof A&&E(A,v),x.state=function(){return E(v,{})}),x}I&&I.exports?I.exports=C:N.amdD&&N.amdO?void 0!==(F=function(){return C}.call(et,N,et,I))&&(I.exports=F):this.xor128=C}(0,lt=N.nmd(lt))},1929:function(lt,et,N){var F;!function($,I,s){function _(g){var d=this;d.next=function(){var B,T,A=d.w,x=d.X,S=d.i;return d.w=A=A+1640531527|0,T=x[S+34&127],B=x[S=S+1&127],T^=T<<13,B^=B<<17,T=x[S]=(T^=T>>>15)^(B^=B>>>12),d.i=S,T+(A^A>>>16)|0},function v(A,x){var S,B,T,P,Z,D=[],L=128;for(x===(0|x)?(B=x,x=null):(x+="\0",B=0,L=Math.max(L,x.length)),T=0,P=-32;P<L;++P)x&&(B^=x.charCodeAt((P+32)%x.length)),0===P&&(Z=B),B^=B<<10,B^=B>>>15,B^=B<<4,B^=B>>>13,P>=0&&(T=0==(S=D[127&P]^=B+(Z=Z+1640531527|0))?T+1:0);for(T>=128&&(D[127&(x&&x.length||0)]=-1),T=127,P=512;P>0;--P)B=D[T+34&127],S=D[T=T+1&127],B^=B<<13,S^=S<<17,D[T]=(B^=B>>>15)^(S^=S>>>12);A.w=Z,A.X=D,A.i=T}(d,g)}function E(g,d){return d.i=g.i,d.w=g.w,d.X=g.X.slice(),d}function C(g,d){null==g&&(g=+new Date);var v=new _(g),A=d&&d.state,x=function(){return(v.next()>>>0)/4294967296};return x.double=function(){do{var T=((v.next()>>>11)+(v.next()>>>0)/4294967296)/(1<<21)}while(0===T);return T},x.int32=v.next,x.quick=x,A&&(A.X&&E(A,v),x.state=function(){return E(v,{})}),x}I&&I.exports?I.exports=C:N.amdD&&N.amdO?void 0!==(F=function(){return C}.call(et,N,et,I))&&(I.exports=F):this.xor4096=C}(0,lt=N.nmd(lt))},5583:function(lt,et,N){var F;!function($,I,s){function _(g){var d=this;d.next=function(){var S,B,A=d.x,x=d.i;return S=A[x],B=(S^=S>>>7)^S<<24,B^=(S=A[x+1&7])^S>>>10,B^=(S=A[x+3&7])^S>>>3,B^=(S=A[x+4&7])^S<<7,S=A[x+7&7],A[x]=B^=(S^=S<<13)^S<<9,d.i=x+1&7,B},function v(A,x){var S,T=[];if(x===(0|x))T[0]=x;else for(x=""+x,S=0;S<x.length;++S)T[7&S]=T[7&S]<<15^x.charCodeAt(S)+T[S+1&7]<<13;for(;T.length<8;)T.push(0);for(S=0;S<8&&0===T[S];++S);for(8==S&&(T[7]=-1),A.x=T,A.i=0,S=256;S>0;--S)A.next()}(d,g)}function E(g,d){return d.x=g.x.slice(),d.i=g.i,d}function C(g,d){null==g&&(g=+new Date);var v=new _(g),A=d&&d.state,x=function(){return(v.next()>>>0)/4294967296};return x.double=function(){do{var T=((v.next()>>>11)+(v.next()>>>0)/4294967296)/(1<<21)}while(0===T);return T},x.int32=v.next,x.quick=x,A&&(A.x&&E(A,v),x.state=function(){return E(v,{})}),x}I&&I.exports?I.exports=C:N.amdD&&N.amdO?void 0!==(F=function(){return C}.call(et,N,et,I))&&(I.exports=F):this.xorshift7=C}(0,lt=N.nmd(lt))},7657:function(lt,et,N){var F;!function($,I,s){function _(g){var d=this,v="";d.next=function(){var x=d.x^d.x>>>2;return d.x=d.y,d.y=d.z,d.z=d.w,d.w=d.v,(d.d=d.d+362437|0)+(d.v=d.v^d.v<<4^x^x<<1)|0},d.x=0,d.y=0,d.z=0,d.w=0,d.v=0,g===(0|g)?d.x=g:v+=g;for(var A=0;A<v.length+64;A++)d.x^=0|v.charCodeAt(A),A==v.length&&(d.d=d.x<<10^d.x>>>4),d.next()}function E(g,d){return d.x=g.x,d.y=g.y,d.z=g.z,d.w=g.w,d.v=g.v,d.d=g.d,d}function C(g,d){var v=new _(g),A=d&&d.state,x=function(){return(v.next()>>>0)/4294967296};return x.double=function(){do{var T=((v.next()>>>11)+(v.next()>>>0)/4294967296)/(1<<21)}while(0===T);return T},x.int32=v.next,x.quick=x,A&&("object"==typeof A&&E(A,v),x.state=function(){return E(v,{})}),x}I&&I.exports?I.exports=C:N.amdD&&N.amdO?void 0!==(F=function(){return C}.call(et,N,et,I))&&(I.exports=F):this.xorwow=C}(0,lt=N.nmd(lt))},3818:function(lt,et,N){var F;!function($,I,s){var S,_=256,d=s.pow(_,6),v=s.pow(2,52),A=2*v,x=255;function B(k,V,K){var tt=[],q=D(Z((V=1==V?{entropy:!0}:V||{}).entropy?[k,G(I)]:null==k?function L(){try{var k;return S&&(k=S.randomBytes)?k=k(_):(k=new Uint8Array(_),($.crypto||$.msCrypto).getRandomValues(k)),G(k)}catch(tt){var V=$.navigator,K=V&&V.plugins;return[+new Date,$,K,$.screen,G(I)]}}():k,3),tt),Q=new T(tt),ot=function(){for(var pt=Q.g(6),gt=d,St=0;pt<v;)pt=(pt+St)*_,gt*=_,St=Q.g(1);for(;pt>=A;)pt/=2,gt/=2,St>>>=1;return(pt+St)/gt};return ot.int32=function(){return 0|Q.g(4)},ot.quick=function(){return Q.g(4)/4294967296},ot.double=ot,D(G(Q.S),I),(V.pass||K||function(pt,gt,St,zt){return zt&&(zt.S&&P(zt,Q),pt.state=function(){return P(Q,{})}),St?(s.random=pt,gt):pt})(ot,q,"global"in V?V.global:this==s,V.state)}function T(k){var V,K=k.length,tt=this,q=0,Q=tt.i=tt.j=0,ot=tt.S=[];for(K||(k=[K++]);q<_;)ot[q]=q++;for(q=0;q<_;q++)ot[q]=ot[Q=x&Q+k[q%K]+(V=ot[q])],ot[Q]=V;(tt.g=function(pt){for(var gt,St=0,zt=tt.i,Mt=tt.j,Lt=tt.S;pt--;)gt=Lt[zt=x&zt+1],St=St*_+Lt[x&(Lt[zt]=Lt[Mt=x&Mt+gt])+(Lt[Mt]=gt)];return tt.i=zt,tt.j=Mt,St})(_)}function P(k,V){return V.i=k.i,V.j=k.j,V.S=k.S.slice(),V}function Z(k,V){var q,K=[],tt=typeof k;if(V&&"object"==tt)for(q in k)try{K.push(Z(k[q],V-1))}catch(Q){}return K.length?K:"string"==tt?k:k+"\0"}function D(k,V){for(var tt,K=k+"",q=0;q<K.length;)V[x&q]=x&(tt^=19*V[x&q])+K.charCodeAt(q++);return G(V)}function G(k){return String.fromCharCode.apply(0,k)}if(D(s.random(),I),lt.exports){lt.exports=B;try{S=N(5042)}catch(k){}}else void 0!==(F=function(){return B}.call(et,N,et,lt))&&(lt.exports=F)}("undefined"!=typeof self?self:this,[],Math)},5042:()=>{}}]);